import {
  require_client
} from "./chunk-MD7NFX7O.js";
import {
  _classCallCheck,
  _createClass,
  _getPrototypeOf,
  _inherits,
  _possibleConstructorReturn,
  _toArray
} from "./chunk-MF2JAE7R.js";
import {
  AiToolsOutline,
  Annotate,
  Annotation,
  ArrowBottom,
  ArrowLeftOutline,
  ArrowRight,
  ArrowRightOutline,
  ArrowTool,
  Blur,
  BorderRadiusSize,
  Brightness,
  BrushOutline,
  Circle,
  Color,
  Contrast,
  Crop,
  CropFrame,
  CropLandscape,
  Ellipse as Ellipse2,
  EraserOutline,
  FineTune,
  FlipX,
  FlipY,
  FontVariant,
  FontWeight,
  Image2 as Image22,
  ImageFilters,
  ImageOutline,
  Images,
  Loading,
  Menu,
  Minus,
  MoveDownOutline,
  MoveUpOutline,
  Plus,
  PlusOutline,
  Point,
  Polygon,
  PositionCenter,
  RemoveBrush,
  Reset,
  Resize,
  Rotate90,
  RotationLeft,
  Saturation,
  Shadows,
  Shine,
  Square,
  Temprature,
  Text,
  TextAlignCenter,
  TextAlignLeft,
  Tick,
  UploadOutline,
  Warning,
  Watermark,
  accordion_component_default,
  applyPolymorphicFunctionProp,
  arrow_left_outline_default,
  button_component_default,
  color_picker_component_default,
  color_picker_default,
  compare_default,
  copy_outline_default,
  cross_button_component_default,
  cross_outline_default,
  custom_default,
  defaultPalette,
  delete_outline_default,
  drawer_body_component_default,
  drawer_component_default,
  drawer_header_component_default,
  drawer_item_component_default,
  drawer_list_component_default,
  ellipse_default,
  font_bold_default,
  font_italic_default,
  icon_button_component_default,
  image_outline_default,
  input_component_default,
  input_group_component_default,
  label_component_default,
  landscape_default,
  line_default,
  lock_outline_default,
  menu_component_default,
  menu_item_component_default,
  menu_item_icon_component_default,
  menu_item_label_component_default,
  modal_actions_component_default,
  modal_component_default,
  modal_content_component_default,
  modal_title_component_default,
  padding_default,
  polygon_sides_default,
  popper_component_default,
  popup_component_default,
  portrait_default,
  position_default,
  radius_corner_default,
  redo_default,
  reset_default,
  rotation_left_default,
  rotation_right_default,
  rotation_slider_component_default,
  select_component_default,
  select_group_component_default,
  shadow_default,
  slider_component_default,
  spacing_default,
  stroke_default,
  text_default,
  tooltip_v2_component_default,
  transparency_default,
  undo_default,
  unlock_outline_default,
  upload_outline_default,
  useTheme
} from "./chunk-SKEL6JBY.js";
import {
  _objectWithoutProperties,
  _toConsumableArray
} from "./chunk-AHIOQCMT.js";
import {
  _defineProperty
} from "./chunk-BLJKXPBR.js";
import {
  require_object_assign
} from "./chunk-KTF6YHCA.js";
import {
  _extends,
  init_extends,
  require_react_is
} from "./chunk-EKXAHTXE.js";
import {
  _slicedToArray
} from "./chunk-2KI2CKJK.js";
import {
  _typeof
} from "./chunk-5L4FHTVX.js";
import {
  Arrow,
  Ellipse,
  Group,
  Image as Image2,
  Layer,
  Line,
  Rect,
  RegularPolygon,
  Stage,
  Transformer,
  useContextBridge,
  useStrictMode
} from "./chunk-BR3ITDXM.js";
import "./chunk-OSRLI3AK.js";
import {
  Ze,
  ct,
  it,
  ot,
  ut
} from "./chunk-2CIQZ7DM.js";
import "./chunk-HABRZSV5.js";
import "./chunk-23V4LYD5.js";
import {
  require_react_dom
} from "./chunk-7YQM2UTP.js";
import "./chunk-3UZ6WHMV.js";
import {
  __commonJS,
  __export,
  __toESM,
  init_react_shim,
  require_react
} from "./chunk-ADFYTBNM.js";

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Global.js
var require_Global = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Global.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports._registerNode = exports.Konva = exports.glob = void 0;
    var PI_OVER_180 = Math.PI / 180;
    function detectBrowser() {
      return typeof window !== "undefined" && ({}.toString.call(window) === "[object Window]" || {}.toString.call(window) === "[object global]");
    }
    exports.glob = typeof global !== "undefined" ? global : typeof window !== "undefined" ? window : typeof WorkerGlobalScope !== "undefined" ? self : {};
    exports.Konva = {
      _global: exports.glob,
      version: "9.3.18",
      isBrowser: detectBrowser(),
      isUnminified: /param/.test((function(param) {
      }).toString()),
      dblClickWindow: 400,
      getAngle(angle) {
        return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;
      },
      enableTrace: false,
      pointerEventsEnabled: true,
      autoDrawEnabled: true,
      hitOnDragEnabled: false,
      capturePointerEventsEnabled: false,
      _mouseListenClick: false,
      _touchListenClick: false,
      _pointerListenClick: false,
      _mouseInDblClickWindow: false,
      _touchInDblClickWindow: false,
      _pointerInDblClickWindow: false,
      _mouseDblClickPointerId: null,
      _touchDblClickPointerId: null,
      _pointerDblClickPointerId: null,
      _fixTextRendering: false,
      pixelRatio: typeof window !== "undefined" && window.devicePixelRatio || 1,
      dragDistance: 3,
      angleDeg: true,
      showWarnings: true,
      dragButtons: [0, 1],
      isDragging() {
        return exports.Konva["DD"].isDragging;
      },
      isTransforming() {
        var _a;
        return (_a = exports.Konva["Transformer"]) === null || _a === void 0 ? void 0 : _a.isTransforming();
      },
      isDragReady() {
        return !!exports.Konva["DD"].node;
      },
      releaseCanvasOnDestroy: true,
      document: exports.glob.document,
      _injectGlobal(Konva18) {
        exports.glob.Konva = Konva18;
      }
    };
    var _registerNode2 = (NodeClass) => {
      exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;
    };
    exports._registerNode = _registerNode2;
    exports.Konva._injectGlobal(exports.Konva);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Util.js
var require_Util = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Util.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Util = exports.Transform = void 0;
    var Global_1 = require_Global();
    var Transform = class _Transform {
      constructor(m = [1, 0, 0, 1, 0, 0]) {
        this.dirty = false;
        this.m = m && m.slice() || [1, 0, 0, 1, 0, 0];
      }
      reset() {
        this.m[0] = 1;
        this.m[1] = 0;
        this.m[2] = 0;
        this.m[3] = 1;
        this.m[4] = 0;
        this.m[5] = 0;
      }
      copy() {
        return new _Transform(this.m);
      }
      copyInto(tr) {
        tr.m[0] = this.m[0];
        tr.m[1] = this.m[1];
        tr.m[2] = this.m[2];
        tr.m[3] = this.m[3];
        tr.m[4] = this.m[4];
        tr.m[5] = this.m[5];
      }
      point(point) {
        const m = this.m;
        return {
          x: m[0] * point.x + m[2] * point.y + m[4],
          y: m[1] * point.x + m[3] * point.y + m[5]
        };
      }
      translate(x, y) {
        this.m[4] += this.m[0] * x + this.m[2] * y;
        this.m[5] += this.m[1] * x + this.m[3] * y;
        return this;
      }
      scale(sx, sy) {
        this.m[0] *= sx;
        this.m[1] *= sx;
        this.m[2] *= sy;
        this.m[3] *= sy;
        return this;
      }
      rotate(rad) {
        const c = Math.cos(rad);
        const s = Math.sin(rad);
        const m11 = this.m[0] * c + this.m[2] * s;
        const m12 = this.m[1] * c + this.m[3] * s;
        const m21 = this.m[0] * -s + this.m[2] * c;
        const m22 = this.m[1] * -s + this.m[3] * c;
        this.m[0] = m11;
        this.m[1] = m12;
        this.m[2] = m21;
        this.m[3] = m22;
        return this;
      }
      getTranslation() {
        return {
          x: this.m[4],
          y: this.m[5]
        };
      }
      skew(sx, sy) {
        const m11 = this.m[0] + this.m[2] * sy;
        const m12 = this.m[1] + this.m[3] * sy;
        const m21 = this.m[2] + this.m[0] * sx;
        const m22 = this.m[3] + this.m[1] * sx;
        this.m[0] = m11;
        this.m[1] = m12;
        this.m[2] = m21;
        this.m[3] = m22;
        return this;
      }
      multiply(matrix) {
        const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];
        const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];
        const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];
        const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];
        const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];
        const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];
        this.m[0] = m11;
        this.m[1] = m12;
        this.m[2] = m21;
        this.m[3] = m22;
        this.m[4] = dx;
        this.m[5] = dy;
        return this;
      }
      invert() {
        const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);
        const m0 = this.m[3] * d;
        const m1 = -this.m[1] * d;
        const m2 = -this.m[2] * d;
        const m3 = this.m[0] * d;
        const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);
        const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);
        this.m[0] = m0;
        this.m[1] = m1;
        this.m[2] = m2;
        this.m[3] = m3;
        this.m[4] = m4;
        this.m[5] = m5;
        return this;
      }
      getMatrix() {
        return this.m;
      }
      decompose() {
        const a = this.m[0];
        const b = this.m[1];
        const c = this.m[2];
        const d = this.m[3];
        const e = this.m[4];
        const f = this.m[5];
        const delta = a * d - b * c;
        const result = {
          x: e,
          y: f,
          rotation: 0,
          scaleX: 0,
          scaleY: 0,
          skewX: 0,
          skewY: 0
        };
        if (a != 0 || b != 0) {
          const r = Math.sqrt(a * a + b * b);
          result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);
          result.scaleX = r;
          result.scaleY = delta / r;
          result.skewX = (a * c + b * d) / delta;
          result.skewY = 0;
        } else if (c != 0 || d != 0) {
          const s = Math.sqrt(c * c + d * d);
          result.rotation = Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));
          result.scaleX = delta / s;
          result.scaleY = s;
          result.skewX = 0;
          result.skewY = (a * c + b * d) / delta;
        } else {
        }
        result.rotation = exports.Util._getRotation(result.rotation);
        return result;
      }
    };
    exports.Transform = Transform;
    var OBJECT_ARRAY = "[object Array]";
    var OBJECT_NUMBER = "[object Number]";
    var OBJECT_STRING = "[object String]";
    var OBJECT_BOOLEAN = "[object Boolean]";
    var PI_OVER_DEG180 = Math.PI / 180;
    var DEG180_OVER_PI = 180 / Math.PI;
    var HASH = "#";
    var EMPTY_STRING = "";
    var ZERO = "0";
    var KONVA_WARNING = "Konva warning: ";
    var KONVA_ERROR = "Konva error: ";
    var RGB_PAREN = "rgb(";
    var COLORS = {
      aliceblue: [240, 248, 255],
      antiquewhite: [250, 235, 215],
      aqua: [0, 255, 255],
      aquamarine: [127, 255, 212],
      azure: [240, 255, 255],
      beige: [245, 245, 220],
      bisque: [255, 228, 196],
      black: [0, 0, 0],
      blanchedalmond: [255, 235, 205],
      blue: [0, 0, 255],
      blueviolet: [138, 43, 226],
      brown: [165, 42, 42],
      burlywood: [222, 184, 135],
      cadetblue: [95, 158, 160],
      chartreuse: [127, 255, 0],
      chocolate: [210, 105, 30],
      coral: [255, 127, 80],
      cornflowerblue: [100, 149, 237],
      cornsilk: [255, 248, 220],
      crimson: [220, 20, 60],
      cyan: [0, 255, 255],
      darkblue: [0, 0, 139],
      darkcyan: [0, 139, 139],
      darkgoldenrod: [184, 132, 11],
      darkgray: [169, 169, 169],
      darkgreen: [0, 100, 0],
      darkgrey: [169, 169, 169],
      darkkhaki: [189, 183, 107],
      darkmagenta: [139, 0, 139],
      darkolivegreen: [85, 107, 47],
      darkorange: [255, 140, 0],
      darkorchid: [153, 50, 204],
      darkred: [139, 0, 0],
      darksalmon: [233, 150, 122],
      darkseagreen: [143, 188, 143],
      darkslateblue: [72, 61, 139],
      darkslategray: [47, 79, 79],
      darkslategrey: [47, 79, 79],
      darkturquoise: [0, 206, 209],
      darkviolet: [148, 0, 211],
      deeppink: [255, 20, 147],
      deepskyblue: [0, 191, 255],
      dimgray: [105, 105, 105],
      dimgrey: [105, 105, 105],
      dodgerblue: [30, 144, 255],
      firebrick: [178, 34, 34],
      floralwhite: [255, 255, 240],
      forestgreen: [34, 139, 34],
      fuchsia: [255, 0, 255],
      gainsboro: [220, 220, 220],
      ghostwhite: [248, 248, 255],
      gold: [255, 215, 0],
      goldenrod: [218, 165, 32],
      gray: [128, 128, 128],
      green: [0, 128, 0],
      greenyellow: [173, 255, 47],
      grey: [128, 128, 128],
      honeydew: [240, 255, 240],
      hotpink: [255, 105, 180],
      indianred: [205, 92, 92],
      indigo: [75, 0, 130],
      ivory: [255, 255, 240],
      khaki: [240, 230, 140],
      lavender: [230, 230, 250],
      lavenderblush: [255, 240, 245],
      lawngreen: [124, 252, 0],
      lemonchiffon: [255, 250, 205],
      lightblue: [173, 216, 230],
      lightcoral: [240, 128, 128],
      lightcyan: [224, 255, 255],
      lightgoldenrodyellow: [250, 250, 210],
      lightgray: [211, 211, 211],
      lightgreen: [144, 238, 144],
      lightgrey: [211, 211, 211],
      lightpink: [255, 182, 193],
      lightsalmon: [255, 160, 122],
      lightseagreen: [32, 178, 170],
      lightskyblue: [135, 206, 250],
      lightslategray: [119, 136, 153],
      lightslategrey: [119, 136, 153],
      lightsteelblue: [176, 196, 222],
      lightyellow: [255, 255, 224],
      lime: [0, 255, 0],
      limegreen: [50, 205, 50],
      linen: [250, 240, 230],
      magenta: [255, 0, 255],
      maroon: [128, 0, 0],
      mediumaquamarine: [102, 205, 170],
      mediumblue: [0, 0, 205],
      mediumorchid: [186, 85, 211],
      mediumpurple: [147, 112, 219],
      mediumseagreen: [60, 179, 113],
      mediumslateblue: [123, 104, 238],
      mediumspringgreen: [0, 250, 154],
      mediumturquoise: [72, 209, 204],
      mediumvioletred: [199, 21, 133],
      midnightblue: [25, 25, 112],
      mintcream: [245, 255, 250],
      mistyrose: [255, 228, 225],
      moccasin: [255, 228, 181],
      navajowhite: [255, 222, 173],
      navy: [0, 0, 128],
      oldlace: [253, 245, 230],
      olive: [128, 128, 0],
      olivedrab: [107, 142, 35],
      orange: [255, 165, 0],
      orangered: [255, 69, 0],
      orchid: [218, 112, 214],
      palegoldenrod: [238, 232, 170],
      palegreen: [152, 251, 152],
      paleturquoise: [175, 238, 238],
      palevioletred: [219, 112, 147],
      papayawhip: [255, 239, 213],
      peachpuff: [255, 218, 185],
      peru: [205, 133, 63],
      pink: [255, 192, 203],
      plum: [221, 160, 203],
      powderblue: [176, 224, 230],
      purple: [128, 0, 128],
      rebeccapurple: [102, 51, 153],
      red: [255, 0, 0],
      rosybrown: [188, 143, 143],
      royalblue: [65, 105, 225],
      saddlebrown: [139, 69, 19],
      salmon: [250, 128, 114],
      sandybrown: [244, 164, 96],
      seagreen: [46, 139, 87],
      seashell: [255, 245, 238],
      sienna: [160, 82, 45],
      silver: [192, 192, 192],
      skyblue: [135, 206, 235],
      slateblue: [106, 90, 205],
      slategray: [119, 128, 144],
      slategrey: [119, 128, 144],
      snow: [255, 255, 250],
      springgreen: [0, 255, 127],
      steelblue: [70, 130, 180],
      tan: [210, 180, 140],
      teal: [0, 128, 128],
      thistle: [216, 191, 216],
      transparent: [255, 255, 255, 0],
      tomato: [255, 99, 71],
      turquoise: [64, 224, 208],
      violet: [238, 130, 238],
      wheat: [245, 222, 179],
      white: [255, 255, 255],
      whitesmoke: [245, 245, 245],
      yellow: [255, 255, 0],
      yellowgreen: [154, 205, 5]
    };
    var RGB_REGEX = /rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;
    var animQueue = [];
    var req = typeof requestAnimationFrame !== "undefined" && requestAnimationFrame || function(f) {
      setTimeout(f, 60);
    };
    exports.Util = {
      _isElement(obj) {
        return !!(obj && obj.nodeType == 1);
      },
      _isFunction(obj) {
        return !!(obj && obj.constructor && obj.call && obj.apply);
      },
      _isPlainObject(obj) {
        return !!obj && obj.constructor === Object;
      },
      _isArray(obj) {
        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;
      },
      _isNumber(obj) {
        return Object.prototype.toString.call(obj) === OBJECT_NUMBER && !isNaN(obj) && isFinite(obj);
      },
      _isString(obj) {
        return Object.prototype.toString.call(obj) === OBJECT_STRING;
      },
      _isBoolean(obj) {
        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;
      },
      isObject(val) {
        return val instanceof Object;
      },
      isValidSelector(selector) {
        if (typeof selector !== "string") {
          return false;
        }
        const firstChar = selector[0];
        return firstChar === "#" || firstChar === "." || firstChar === firstChar.toUpperCase();
      },
      _sign(number) {
        if (number === 0) {
          return 1;
        }
        if (number > 0) {
          return 1;
        } else {
          return -1;
        }
      },
      requestAnimFrame(callback) {
        animQueue.push(callback);
        if (animQueue.length === 1) {
          req(function() {
            const queue = animQueue;
            animQueue = [];
            queue.forEach(function(cb) {
              cb();
            });
          });
        }
      },
      createCanvasElement() {
        const canvas = document.createElement("canvas");
        try {
          canvas.style = canvas.style || {};
        } catch (e) {
        }
        return canvas;
      },
      createImageElement() {
        return document.createElement("img");
      },
      _isInDocument(el) {
        while (el = el.parentNode) {
          if (el == document) {
            return true;
          }
        }
        return false;
      },
      _urlToImage(url, callback) {
        const imageObj = exports.Util.createImageElement();
        imageObj.onload = function() {
          callback(imageObj);
        };
        imageObj.src = url;
      },
      _rgbToHex(r, g, b) {
        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
      },
      _hexToRgb(hex) {
        hex = hex.replace(HASH, EMPTY_STRING);
        const bigint = parseInt(hex, 16);
        return {
          r: bigint >> 16 & 255,
          g: bigint >> 8 & 255,
          b: bigint & 255
        };
      },
      getRandomColor() {
        let randColor = (Math.random() * 16777215 << 0).toString(16);
        while (randColor.length < 6) {
          randColor = ZERO + randColor;
        }
        return HASH + randColor;
      },
      getRGB(color) {
        let rgb;
        if (color in COLORS) {
          rgb = COLORS[color];
          return {
            r: rgb[0],
            g: rgb[1],
            b: rgb[2]
          };
        } else if (color[0] === HASH) {
          return this._hexToRgb(color.substring(1));
        } else if (color.substr(0, 4) === RGB_PAREN) {
          rgb = RGB_REGEX.exec(color.replace(/ /g, ""));
          return {
            r: parseInt(rgb[1], 10),
            g: parseInt(rgb[2], 10),
            b: parseInt(rgb[3], 10)
          };
        } else {
          return {
            r: 0,
            g: 0,
            b: 0
          };
        }
      },
      colorToRGBA(str) {
        str = str || "black";
        return exports.Util._namedColorToRBA(str) || exports.Util._hex3ColorToRGBA(str) || exports.Util._hex4ColorToRGBA(str) || exports.Util._hex6ColorToRGBA(str) || exports.Util._hex8ColorToRGBA(str) || exports.Util._rgbColorToRGBA(str) || exports.Util._rgbaColorToRGBA(str) || exports.Util._hslColorToRGBA(str);
      },
      _namedColorToRBA(str) {
        const c = COLORS[str.toLowerCase()];
        if (!c) {
          return null;
        }
        return {
          r: c[0],
          g: c[1],
          b: c[2],
          a: 1
        };
      },
      _rgbColorToRGBA(str) {
        if (str.indexOf("rgb(") === 0) {
          str = str.match(/rgb\(([^)]+)\)/)[1];
          const parts = str.split(/ *, */).map(Number);
          return {
            r: parts[0],
            g: parts[1],
            b: parts[2],
            a: 1
          };
        }
      },
      _rgbaColorToRGBA(str) {
        if (str.indexOf("rgba(") === 0) {
          str = str.match(/rgba\(([^)]+)\)/)[1];
          const parts = str.split(/ *, */).map((n, index) => {
            if (n.slice(-1) === "%") {
              return index === 3 ? parseInt(n) / 100 : parseInt(n) / 100 * 255;
            }
            return Number(n);
          });
          return {
            r: parts[0],
            g: parts[1],
            b: parts[2],
            a: parts[3]
          };
        }
      },
      _hex8ColorToRGBA(str) {
        if (str[0] === "#" && str.length === 9) {
          return {
            r: parseInt(str.slice(1, 3), 16),
            g: parseInt(str.slice(3, 5), 16),
            b: parseInt(str.slice(5, 7), 16),
            a: parseInt(str.slice(7, 9), 16) / 255
          };
        }
      },
      _hex6ColorToRGBA(str) {
        if (str[0] === "#" && str.length === 7) {
          return {
            r: parseInt(str.slice(1, 3), 16),
            g: parseInt(str.slice(3, 5), 16),
            b: parseInt(str.slice(5, 7), 16),
            a: 1
          };
        }
      },
      _hex4ColorToRGBA(str) {
        if (str[0] === "#" && str.length === 5) {
          return {
            r: parseInt(str[1] + str[1], 16),
            g: parseInt(str[2] + str[2], 16),
            b: parseInt(str[3] + str[3], 16),
            a: parseInt(str[4] + str[4], 16) / 255
          };
        }
      },
      _hex3ColorToRGBA(str) {
        if (str[0] === "#" && str.length === 4) {
          return {
            r: parseInt(str[1] + str[1], 16),
            g: parseInt(str[2] + str[2], 16),
            b: parseInt(str[3] + str[3], 16),
            a: 1
          };
        }
      },
      _hslColorToRGBA(str) {
        if (/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(str)) {
          const [_, ...hsl] = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(str);
          const h = Number(hsl[0]) / 360;
          const s = Number(hsl[1]) / 100;
          const l = Number(hsl[2]) / 100;
          let t2;
          let t3;
          let val;
          if (s === 0) {
            val = l * 255;
            return {
              r: Math.round(val),
              g: Math.round(val),
              b: Math.round(val),
              a: 1
            };
          }
          if (l < 0.5) {
            t2 = l * (1 + s);
          } else {
            t2 = l + s - l * s;
          }
          const t1 = 2 * l - t2;
          const rgb = [0, 0, 0];
          for (let i = 0; i < 3; i++) {
            t3 = h + 1 / 3 * -(i - 1);
            if (t3 < 0) {
              t3++;
            }
            if (t3 > 1) {
              t3--;
            }
            if (6 * t3 < 1) {
              val = t1 + (t2 - t1) * 6 * t3;
            } else if (2 * t3 < 1) {
              val = t2;
            } else if (3 * t3 < 2) {
              val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;
            } else {
              val = t1;
            }
            rgb[i] = val * 255;
          }
          return {
            r: Math.round(rgb[0]),
            g: Math.round(rgb[1]),
            b: Math.round(rgb[2]),
            a: 1
          };
        }
      },
      haveIntersection(r1, r2) {
        return !(r2.x > r1.x + r1.width || r2.x + r2.width < r1.x || r2.y > r1.y + r1.height || r2.y + r2.height < r1.y);
      },
      cloneObject(obj) {
        const retObj = {};
        for (const key in obj) {
          if (this._isPlainObject(obj[key])) {
            retObj[key] = this.cloneObject(obj[key]);
          } else if (this._isArray(obj[key])) {
            retObj[key] = this.cloneArray(obj[key]);
          } else {
            retObj[key] = obj[key];
          }
        }
        return retObj;
      },
      cloneArray(arr) {
        return arr.slice(0);
      },
      degToRad(deg) {
        return deg * PI_OVER_DEG180;
      },
      radToDeg(rad) {
        return rad * DEG180_OVER_PI;
      },
      _degToRad(deg) {
        exports.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead.");
        return exports.Util.degToRad(deg);
      },
      _radToDeg(rad) {
        exports.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead.");
        return exports.Util.radToDeg(rad);
      },
      _getRotation(radians) {
        return Global_1.Konva.angleDeg ? exports.Util.radToDeg(radians) : radians;
      },
      _capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      },
      throw(str) {
        throw new Error(KONVA_ERROR + str);
      },
      error(str) {
        console.error(KONVA_ERROR + str);
      },
      warn(str) {
        if (!Global_1.Konva.showWarnings) {
          return;
        }
        console.warn(KONVA_WARNING + str);
      },
      each(obj, func) {
        for (const key in obj) {
          func(key, obj[key]);
        }
      },
      _inRange(val, left, right) {
        return left <= val && val < right;
      },
      _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {
        let x, y, dist;
        const pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);
        if (pd2 == 0) {
          x = x1;
          y = y1;
          dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);
        } else {
          const u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;
          if (u < 0) {
            x = x1;
            y = y1;
            dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);
          } else if (u > 1) {
            x = x2;
            y = y2;
            dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);
          } else {
            x = x1 + u * (x2 - x1);
            y = y1 + u * (y2 - y1);
            dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);
          }
        }
        return [x, y, dist];
      },
      _getProjectionToLine(pt, line, isClosed) {
        const pc = exports.Util.cloneObject(pt);
        let dist = Number.MAX_VALUE;
        line.forEach(function(p1, i) {
          if (!isClosed && i === line.length - 1) {
            return;
          }
          const p2 = line[(i + 1) % line.length];
          const proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);
          const px = proj[0], py = proj[1], pdist = proj[2];
          if (pdist < dist) {
            pc.x = px;
            pc.y = py;
            dist = pdist;
          }
        });
        return pc;
      },
      _prepareArrayForTween(startArray, endArray, isClosed) {
        const start = [], end = [];
        if (startArray.length > endArray.length) {
          const temp = endArray;
          endArray = startArray;
          startArray = temp;
        }
        for (let n = 0; n < startArray.length; n += 2) {
          start.push({
            x: startArray[n],
            y: startArray[n + 1]
          });
        }
        for (let n = 0; n < endArray.length; n += 2) {
          end.push({
            x: endArray[n],
            y: endArray[n + 1]
          });
        }
        const newStart = [];
        end.forEach(function(point) {
          const pr = exports.Util._getProjectionToLine(point, start, isClosed);
          newStart.push(pr.x);
          newStart.push(pr.y);
        });
        return newStart;
      },
      _prepareToStringify(obj) {
        let desc;
        obj.visitedByCircularReferenceRemoval = true;
        for (const key in obj) {
          if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == "object")) {
            continue;
          }
          desc = Object.getOwnPropertyDescriptor(obj, key);
          if (obj[key].visitedByCircularReferenceRemoval || exports.Util._isElement(obj[key])) {
            if (desc.configurable) {
              delete obj[key];
            } else {
              return null;
            }
          } else if (exports.Util._prepareToStringify(obj[key]) === null) {
            if (desc.configurable) {
              delete obj[key];
            } else {
              return null;
            }
          }
        }
        delete obj.visitedByCircularReferenceRemoval;
        return obj;
      },
      _assign(target, source) {
        for (const key in source) {
          target[key] = source[key];
        }
        return target;
      },
      _getFirstPointerId(evt) {
        if (!evt.touches) {
          return evt.pointerId || 999;
        } else {
          return evt.changedTouches[0].identifier;
        }
      },
      releaseCanvas(...canvases) {
        if (!Global_1.Konva.releaseCanvasOnDestroy)
          return;
        canvases.forEach((c) => {
          c.width = 0;
          c.height = 0;
        });
      },
      drawRoundedRectPath(context, width, height, cornerRadius) {
        let topLeft = 0;
        let topRight = 0;
        let bottomLeft = 0;
        let bottomRight = 0;
        if (typeof cornerRadius === "number") {
          topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);
        } else {
          topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);
          topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);
          bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);
          bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);
        }
        context.moveTo(topLeft, 0);
        context.lineTo(width - topRight, 0);
        context.arc(width - topRight, topRight, topRight, Math.PI * 3 / 2, 0, false);
        context.lineTo(width, height - bottomRight);
        context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);
        context.lineTo(bottomLeft, height);
        context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);
        context.lineTo(0, topLeft);
        context.arc(topLeft, topLeft, topLeft, Math.PI, Math.PI * 3 / 2, false);
      }
    };
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Validators.js
var require_Validators = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Validators.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.RGBComponent = RGBComponent;
    exports.alphaComponent = alphaComponent;
    exports.getNumberValidator = getNumberValidator2;
    exports.getNumberOrArrayOfNumbersValidator = getNumberOrArrayOfNumbersValidator;
    exports.getNumberOrAutoValidator = getNumberOrAutoValidator2;
    exports.getStringValidator = getStringValidator;
    exports.getStringOrGradientValidator = getStringOrGradientValidator;
    exports.getFunctionValidator = getFunctionValidator;
    exports.getNumberArrayValidator = getNumberArrayValidator;
    exports.getBooleanValidator = getBooleanValidator2;
    exports.getComponentValidator = getComponentValidator;
    var Global_1 = require_Global();
    var Util_1 = require_Util();
    function _formatValue(val) {
      if (Util_1.Util._isString(val)) {
        return '"' + val + '"';
      }
      if (Object.prototype.toString.call(val) === "[object Number]") {
        return val;
      }
      if (Util_1.Util._isBoolean(val)) {
        return val;
      }
      return Object.prototype.toString.call(val);
    }
    function RGBComponent(val) {
      if (val > 255) {
        return 255;
      } else if (val < 0) {
        return 0;
      }
      return Math.round(val);
    }
    function alphaComponent(val) {
      if (val > 1) {
        return 1;
      } else if (val < 1e-4) {
        return 1e-4;
      }
      return val;
    }
    function getNumberValidator2() {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          if (!Util_1.Util._isNumber(val)) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a number.');
          }
          return val;
        };
      }
    }
    function getNumberOrArrayOfNumbersValidator(noOfElements) {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          let isNumber2 = Util_1.Util._isNumber(val);
          let isValidArray = Util_1.Util._isArray(val) && val.length == noOfElements;
          if (!isNumber2 && !isValidArray) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a number or Array<number>(' + noOfElements + ")");
          }
          return val;
        };
      }
    }
    function getNumberOrAutoValidator2() {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          var isNumber2 = Util_1.Util._isNumber(val);
          var isAuto = val === "auto";
          if (!(isNumber2 || isAuto)) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a number or "auto".');
          }
          return val;
        };
      }
    }
    function getStringValidator() {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          if (!Util_1.Util._isString(val)) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a string.');
          }
          return val;
        };
      }
    }
    function getStringOrGradientValidator() {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          const isString = Util_1.Util._isString(val);
          const isGradient = Object.prototype.toString.call(val) === "[object CanvasGradient]" || val && val["addColorStop"];
          if (!(isString || isGradient)) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a string or a native gradient.');
          }
          return val;
        };
      }
    }
    function getFunctionValidator() {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          if (!Util_1.Util._isFunction(val)) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a function.');
          }
          return val;
        };
      }
    }
    function getNumberArrayValidator() {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          const TypedArray = Int8Array ? Object.getPrototypeOf(Int8Array) : null;
          if (TypedArray && val instanceof TypedArray) {
            return val;
          }
          if (!Util_1.Util._isArray(val)) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a array of numbers.');
          } else {
            val.forEach(function(item) {
              if (!Util_1.Util._isNumber(item)) {
                Util_1.Util.warn('"' + attr + '" attribute has non numeric element ' + item + ". Make sure that all elements are numbers.");
              }
            });
          }
          return val;
        };
      }
    }
    function getBooleanValidator2() {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          var isBool = val === true || val === false;
          if (!isBool) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be a boolean.');
          }
          return val;
        };
      }
    }
    function getComponentValidator(components) {
      if (Global_1.Konva.isUnminified) {
        return function(val, attr) {
          if (val === void 0 || val === null) {
            return val;
          }
          if (!Util_1.Util.isObject(val)) {
            Util_1.Util.warn(_formatValue(val) + ' is a not valid value for "' + attr + '" attribute. The value should be an object with properties ' + components);
          }
          return val;
        };
      }
    }
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Factory.js
var require_Factory = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Factory.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Factory = void 0;
    var Util_1 = require_Util();
    var Validators_1 = require_Validators();
    var GET = "get";
    var SET = "set";
    exports.Factory = {
      addGetterSetter(constructor, attr, def, validator, after) {
        exports.Factory.addGetter(constructor, attr, def);
        exports.Factory.addSetter(constructor, attr, validator, after);
        exports.Factory.addOverloadedGetterSetter(constructor, attr);
      },
      addGetter(constructor, attr, def) {
        var method = GET + Util_1.Util._capitalize(attr);
        constructor.prototype[method] = constructor.prototype[method] || function() {
          const val = this.attrs[attr];
          return val === void 0 ? def : val;
        };
      },
      addSetter(constructor, attr, validator, after) {
        var method = SET + Util_1.Util._capitalize(attr);
        if (!constructor.prototype[method]) {
          exports.Factory.overWriteSetter(constructor, attr, validator, after);
        }
      },
      overWriteSetter(constructor, attr, validator, after) {
        var method = SET + Util_1.Util._capitalize(attr);
        constructor.prototype[method] = function(val) {
          if (validator && val !== void 0 && val !== null) {
            val = validator.call(this, val, attr);
          }
          this._setAttr(attr, val);
          if (after) {
            after.call(this);
          }
          return this;
        };
      },
      addComponentsGetterSetter(constructor, attr, components, validator, after) {
        const len = components.length, capitalize = Util_1.Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr);
        constructor.prototype[getter] = function() {
          const ret = {};
          for (let n = 0; n < len; n++) {
            const component = components[n];
            ret[component] = this.getAttr(attr + capitalize(component));
          }
          return ret;
        };
        const basicValidator = (0, Validators_1.getComponentValidator)(components);
        constructor.prototype[setter] = function(val) {
          const oldVal = this.attrs[attr];
          if (validator) {
            val = validator.call(this, val, attr);
          }
          if (basicValidator) {
            basicValidator.call(this, val, attr);
          }
          for (const key in val) {
            if (!val.hasOwnProperty(key)) {
              continue;
            }
            this._setAttr(attr + capitalize(key), val[key]);
          }
          if (!val) {
            components.forEach((component) => {
              this._setAttr(attr + capitalize(component), void 0);
            });
          }
          this._fireChangeEvent(attr, oldVal, val);
          if (after) {
            after.call(this);
          }
          return this;
        };
        exports.Factory.addOverloadedGetterSetter(constructor, attr);
      },
      addOverloadedGetterSetter(constructor, attr) {
        var capitalizedAttr = Util_1.Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;
        constructor.prototype[attr] = function() {
          if (arguments.length) {
            this[setter](arguments[0]);
            return this;
          }
          return this[getter]();
        };
      },
      addDeprecatedGetterSetter(constructor, attr, def, validator) {
        Util_1.Util.error("Adding deprecated " + attr);
        const method = GET + Util_1.Util._capitalize(attr);
        const message = attr + " property is deprecated and will be removed soon. Look at Konva change log for more information.";
        constructor.prototype[method] = function() {
          Util_1.Util.error(message);
          const val = this.attrs[attr];
          return val === void 0 ? def : val;
        };
        exports.Factory.addSetter(constructor, attr, validator, function() {
          Util_1.Util.error(message);
        });
        exports.Factory.addOverloadedGetterSetter(constructor, attr);
      },
      backCompat(constructor, methods) {
        Util_1.Util.each(methods, function(oldMethodName, newMethodName) {
          const method = constructor.prototype[newMethodName];
          const oldGetter = GET + Util_1.Util._capitalize(oldMethodName);
          const oldSetter = SET + Util_1.Util._capitalize(oldMethodName);
          function deprecated() {
            method.apply(this, arguments);
            Util_1.Util.error('"' + oldMethodName + '" method is deprecated and will be removed soon. Use ""' + newMethodName + '" instead.');
          }
          constructor.prototype[oldMethodName] = deprecated;
          constructor.prototype[oldGetter] = deprecated;
          constructor.prototype[oldSetter] = deprecated;
        });
      },
      afterSetFilter() {
        this._filterUpToDate = false;
      }
    };
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Context.js
var require_Context = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Context.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HitContext = exports.SceneContext = exports.Context = void 0;
    var Util_1 = require_Util();
    var Global_1 = require_Global();
    function simplifyArray(arr) {
      const retArr = [], len = arr.length, util = Util_1.Util;
      for (let n = 0; n < len; n++) {
        let val = arr[n];
        if (util._isNumber(val)) {
          val = Math.round(val * 1e3) / 1e3;
        } else if (!util._isString(val)) {
          val = val + "";
        }
        retArr.push(val);
      }
      return retArr;
    }
    var COMMA = ",";
    var OPEN_PAREN = "(";
    var CLOSE_PAREN = ")";
    var OPEN_PAREN_BRACKET = "([";
    var CLOSE_BRACKET_PAREN = "])";
    var SEMICOLON = ";";
    var DOUBLE_PAREN = "()";
    var EQUALS = "=";
    var CONTEXT_METHODS = [
      "arc",
      "arcTo",
      "beginPath",
      "bezierCurveTo",
      "clearRect",
      "clip",
      "closePath",
      "createLinearGradient",
      "createPattern",
      "createRadialGradient",
      "drawImage",
      "ellipse",
      "fill",
      "fillText",
      "getImageData",
      "createImageData",
      "lineTo",
      "moveTo",
      "putImageData",
      "quadraticCurveTo",
      "rect",
      "roundRect",
      "restore",
      "rotate",
      "save",
      "scale",
      "setLineDash",
      "setTransform",
      "stroke",
      "strokeText",
      "transform",
      "translate"
    ];
    var CONTEXT_PROPERTIES = [
      "fillStyle",
      "strokeStyle",
      "shadowColor",
      "shadowBlur",
      "shadowOffsetX",
      "shadowOffsetY",
      "letterSpacing",
      "lineCap",
      "lineDashOffset",
      "lineJoin",
      "lineWidth",
      "miterLimit",
      "direction",
      "font",
      "textAlign",
      "textBaseline",
      "globalAlpha",
      "globalCompositeOperation",
      "imageSmoothingEnabled"
    ];
    var traceArrMax = 100;
    var Context = class {
      constructor(canvas) {
        this.canvas = canvas;
        if (Global_1.Konva.enableTrace) {
          this.traceArr = [];
          this._enableTrace();
        }
      }
      fillShape(shape) {
        if (shape.fillEnabled()) {
          this._fill(shape);
        }
      }
      _fill(shape) {
      }
      strokeShape(shape) {
        if (shape.hasStroke()) {
          this._stroke(shape);
        }
      }
      _stroke(shape) {
      }
      fillStrokeShape(shape) {
        if (shape.attrs.fillAfterStrokeEnabled) {
          this.strokeShape(shape);
          this.fillShape(shape);
        } else {
          this.fillShape(shape);
          this.strokeShape(shape);
        }
      }
      getTrace(relaxed, rounded) {
        let traceArr = this.traceArr, len = traceArr.length, str = "", n, trace, method, args;
        for (n = 0; n < len; n++) {
          trace = traceArr[n];
          method = trace.method;
          if (method) {
            args = trace.args;
            str += method;
            if (relaxed) {
              str += DOUBLE_PAREN;
            } else {
              if (Util_1.Util._isArray(args[0])) {
                str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;
              } else {
                if (rounded) {
                  args = args.map((a) => typeof a === "number" ? Math.floor(a) : a);
                }
                str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;
              }
            }
          } else {
            str += trace.property;
            if (!relaxed) {
              str += EQUALS + trace.val;
            }
          }
          str += SEMICOLON;
        }
        return str;
      }
      clearTrace() {
        this.traceArr = [];
      }
      _trace(str) {
        let traceArr = this.traceArr, len;
        traceArr.push(str);
        len = traceArr.length;
        if (len >= traceArrMax) {
          traceArr.shift();
        }
      }
      reset() {
        const pixelRatio = this.getCanvas().getPixelRatio();
        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);
      }
      getCanvas() {
        return this.canvas;
      }
      clear(bounds) {
        const canvas = this.getCanvas();
        if (bounds) {
          this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);
        } else {
          this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);
        }
      }
      _applyLineCap(shape) {
        const lineCap = shape.attrs.lineCap;
        if (lineCap) {
          this.setAttr("lineCap", lineCap);
        }
      }
      _applyOpacity(shape) {
        const absOpacity = shape.getAbsoluteOpacity();
        if (absOpacity !== 1) {
          this.setAttr("globalAlpha", absOpacity);
        }
      }
      _applyLineJoin(shape) {
        const lineJoin = shape.attrs.lineJoin;
        if (lineJoin) {
          this.setAttr("lineJoin", lineJoin);
        }
      }
      setAttr(attr, val) {
        this._context[attr] = val;
      }
      arc(x, y, radius, startAngle, endAngle, counterClockwise) {
        this._context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
      }
      arcTo(x1, y1, x2, y2, radius) {
        this._context.arcTo(x1, y1, x2, y2, radius);
      }
      beginPath() {
        this._context.beginPath();
      }
      bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {
        this._context.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
      }
      clearRect(x, y, width, height) {
        this._context.clearRect(x, y, width, height);
      }
      clip(...args) {
        this._context.clip.apply(this._context, args);
      }
      closePath() {
        this._context.closePath();
      }
      createImageData(width, height) {
        const a = arguments;
        if (a.length === 2) {
          return this._context.createImageData(width, height);
        } else if (a.length === 1) {
          return this._context.createImageData(width);
        }
      }
      createLinearGradient(x0, y0, x1, y1) {
        return this._context.createLinearGradient(x0, y0, x1, y1);
      }
      createPattern(image, repetition) {
        return this._context.createPattern(image, repetition);
      }
      createRadialGradient(x0, y0, r0, x1, y1, r1) {
        return this._context.createRadialGradient(x0, y0, r0, x1, y1, r1);
      }
      drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) {
        const a = arguments, _context = this._context;
        if (a.length === 3) {
          _context.drawImage(image, sx, sy);
        } else if (a.length === 5) {
          _context.drawImage(image, sx, sy, sWidth, sHeight);
        } else if (a.length === 9) {
          _context.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);
        }
      }
      ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, counterclockwise) {
        this._context.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, counterclockwise);
      }
      isPointInPath(x, y, path, fillRule) {
        if (path) {
          return this._context.isPointInPath(path, x, y, fillRule);
        }
        return this._context.isPointInPath(x, y, fillRule);
      }
      fill(...args) {
        this._context.fill.apply(this._context, args);
      }
      fillRect(x, y, width, height) {
        this._context.fillRect(x, y, width, height);
      }
      strokeRect(x, y, width, height) {
        this._context.strokeRect(x, y, width, height);
      }
      fillText(text, x, y, maxWidth) {
        if (maxWidth) {
          this._context.fillText(text, x, y, maxWidth);
        } else {
          this._context.fillText(text, x, y);
        }
      }
      measureText(text) {
        return this._context.measureText(text);
      }
      getImageData(sx, sy, sw, sh) {
        return this._context.getImageData(sx, sy, sw, sh);
      }
      lineTo(x, y) {
        this._context.lineTo(x, y);
      }
      moveTo(x, y) {
        this._context.moveTo(x, y);
      }
      rect(x, y, width, height) {
        this._context.rect(x, y, width, height);
      }
      roundRect(x, y, width, height, radii) {
        this._context.roundRect(x, y, width, height, radii);
      }
      putImageData(imageData, dx, dy) {
        this._context.putImageData(imageData, dx, dy);
      }
      quadraticCurveTo(cpx, cpy, x, y) {
        this._context.quadraticCurveTo(cpx, cpy, x, y);
      }
      restore() {
        this._context.restore();
      }
      rotate(angle) {
        this._context.rotate(angle);
      }
      save() {
        this._context.save();
      }
      scale(x, y) {
        this._context.scale(x, y);
      }
      setLineDash(segments) {
        if (this._context.setLineDash) {
          this._context.setLineDash(segments);
        } else if ("mozDash" in this._context) {
          this._context["mozDash"] = segments;
        } else if ("webkitLineDash" in this._context) {
          this._context["webkitLineDash"] = segments;
        }
      }
      getLineDash() {
        return this._context.getLineDash();
      }
      setTransform(a, b, c, d, e, f) {
        this._context.setTransform(a, b, c, d, e, f);
      }
      stroke(path2d) {
        if (path2d) {
          this._context.stroke(path2d);
        } else {
          this._context.stroke();
        }
      }
      strokeText(text, x, y, maxWidth) {
        this._context.strokeText(text, x, y, maxWidth);
      }
      transform(a, b, c, d, e, f) {
        this._context.transform(a, b, c, d, e, f);
      }
      translate(x, y) {
        this._context.translate(x, y);
      }
      _enableTrace() {
        let that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;
        const func = function(methodName) {
          let origMethod = that[methodName], ret;
          that[methodName] = function() {
            args = simplifyArray(Array.prototype.slice.call(arguments, 0));
            ret = origMethod.apply(that, arguments);
            that._trace({
              method: methodName,
              args
            });
            return ret;
          };
        };
        for (n = 0; n < len; n++) {
          func(CONTEXT_METHODS[n]);
        }
        that.setAttr = function() {
          origSetter.apply(that, arguments);
          const prop = arguments[0];
          let val = arguments[1];
          if (prop === "shadowOffsetX" || prop === "shadowOffsetY" || prop === "shadowBlur") {
            val = val / this.canvas.getPixelRatio();
          }
          that._trace({
            property: prop,
            val
          });
        };
      }
      _applyGlobalCompositeOperation(node) {
        const op = node.attrs.globalCompositeOperation;
        const def = !op || op === "source-over";
        if (!def) {
          this.setAttr("globalCompositeOperation", op);
        }
      }
    };
    exports.Context = Context;
    CONTEXT_PROPERTIES.forEach(function(prop) {
      Object.defineProperty(Context.prototype, prop, {
        get() {
          return this._context[prop];
        },
        set(val) {
          this._context[prop] = val;
        }
      });
    });
    var SceneContext = class extends Context {
      constructor(canvas, { willReadFrequently = false } = {}) {
        super(canvas);
        this._context = canvas._canvas.getContext("2d", {
          willReadFrequently
        });
      }
      _fillColor(shape) {
        const fill = shape.fill();
        this.setAttr("fillStyle", fill);
        shape._fillFunc(this);
      }
      _fillPattern(shape) {
        this.setAttr("fillStyle", shape._getFillPattern());
        shape._fillFunc(this);
      }
      _fillLinearGradient(shape) {
        const grd = shape._getLinearGradient();
        if (grd) {
          this.setAttr("fillStyle", grd);
          shape._fillFunc(this);
        }
      }
      _fillRadialGradient(shape) {
        const grd = shape._getRadialGradient();
        if (grd) {
          this.setAttr("fillStyle", grd);
          shape._fillFunc(this);
        }
      }
      _fill(shape) {
        const hasColor = shape.fill(), fillPriority = shape.getFillPriority();
        if (hasColor && fillPriority === "color") {
          this._fillColor(shape);
          return;
        }
        const hasPattern = shape.getFillPatternImage();
        if (hasPattern && fillPriority === "pattern") {
          this._fillPattern(shape);
          return;
        }
        const hasLinearGradient = shape.getFillLinearGradientColorStops();
        if (hasLinearGradient && fillPriority === "linear-gradient") {
          this._fillLinearGradient(shape);
          return;
        }
        const hasRadialGradient = shape.getFillRadialGradientColorStops();
        if (hasRadialGradient && fillPriority === "radial-gradient") {
          this._fillRadialGradient(shape);
          return;
        }
        if (hasColor) {
          this._fillColor(shape);
        } else if (hasPattern) {
          this._fillPattern(shape);
        } else if (hasLinearGradient) {
          this._fillLinearGradient(shape);
        } else if (hasRadialGradient) {
          this._fillRadialGradient(shape);
        }
      }
      _strokeLinearGradient(shape) {
        const start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);
        if (colorStops) {
          for (let n = 0; n < colorStops.length; n += 2) {
            grd.addColorStop(colorStops[n], colorStops[n + 1]);
          }
          this.setAttr("strokeStyle", grd);
        }
      }
      _stroke(shape) {
        const dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();
        if (shape.hasStroke()) {
          if (!strokeScaleEnabled) {
            this.save();
            const pixelRatio = this.getCanvas().getPixelRatio();
            this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);
          }
          this._applyLineCap(shape);
          if (dash && shape.dashEnabled()) {
            this.setLineDash(dash);
            this.setAttr("lineDashOffset", shape.dashOffset());
          }
          this.setAttr("lineWidth", shape.strokeWidth());
          if (!shape.getShadowForStrokeEnabled()) {
            this.setAttr("shadowColor", "rgba(0,0,0,0)");
          }
          const hasLinearGradient = shape.getStrokeLinearGradientColorStops();
          if (hasLinearGradient) {
            this._strokeLinearGradient(shape);
          } else {
            this.setAttr("strokeStyle", shape.stroke());
          }
          shape._strokeFunc(this);
          if (!strokeScaleEnabled) {
            this.restore();
          }
        }
      }
      _applyShadow(shape) {
        var _a, _b, _c;
        const color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : "black", blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {
          x: 0,
          y: 0
        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;
        this.setAttr("shadowColor", color);
        this.setAttr("shadowBlur", blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));
        this.setAttr("shadowOffsetX", offset.x * scaleX);
        this.setAttr("shadowOffsetY", offset.y * scaleY);
      }
    };
    exports.SceneContext = SceneContext;
    var HitContext = class extends Context {
      constructor(canvas) {
        super(canvas);
        this._context = canvas._canvas.getContext("2d", {
          willReadFrequently: true
        });
      }
      _fill(shape) {
        this.save();
        this.setAttr("fillStyle", shape.colorKey);
        shape._fillFuncHit(this);
        this.restore();
      }
      strokeShape(shape) {
        if (shape.hasHitStroke()) {
          this._stroke(shape);
        }
      }
      _stroke(shape) {
        if (shape.hasHitStroke()) {
          const strokeScaleEnabled = shape.getStrokeScaleEnabled();
          if (!strokeScaleEnabled) {
            this.save();
            const pixelRatio = this.getCanvas().getPixelRatio();
            this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);
          }
          this._applyLineCap(shape);
          const hitStrokeWidth = shape.hitStrokeWidth();
          const strokeWidth = hitStrokeWidth === "auto" ? shape.strokeWidth() : hitStrokeWidth;
          this.setAttr("lineWidth", strokeWidth);
          this.setAttr("strokeStyle", shape.colorKey);
          shape._strokeFuncHit(this);
          if (!strokeScaleEnabled) {
            this.restore();
          }
        }
      }
    };
    exports.HitContext = HitContext;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Canvas.js
var require_Canvas = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Canvas.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HitCanvas = exports.SceneCanvas = exports.Canvas = void 0;
    var Util_1 = require_Util();
    var Context_1 = require_Context();
    var Global_1 = require_Global();
    var Factory_1 = require_Factory();
    var Validators_1 = require_Validators();
    var _pixelRatio;
    function getDevicePixelRatio() {
      if (_pixelRatio) {
        return _pixelRatio;
      }
      const canvas = Util_1.Util.createCanvasElement();
      const context = canvas.getContext("2d");
      _pixelRatio = function() {
        const devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;
        return devicePixelRatio / backingStoreRatio;
      }();
      Util_1.Util.releaseCanvas(canvas);
      return _pixelRatio;
    }
    var Canvas = class {
      constructor(config) {
        this.pixelRatio = 1;
        this.width = 0;
        this.height = 0;
        this.isCache = false;
        const conf = config || {};
        const pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();
        this.pixelRatio = pixelRatio;
        this._canvas = Util_1.Util.createCanvasElement();
        this._canvas.style.padding = "0";
        this._canvas.style.margin = "0";
        this._canvas.style.border = "0";
        this._canvas.style.background = "transparent";
        this._canvas.style.position = "absolute";
        this._canvas.style.top = "0";
        this._canvas.style.left = "0";
      }
      getContext() {
        return this.context;
      }
      getPixelRatio() {
        return this.pixelRatio;
      }
      setPixelRatio(pixelRatio) {
        const previousRatio = this.pixelRatio;
        this.pixelRatio = pixelRatio;
        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);
      }
      setWidth(width) {
        this.width = this._canvas.width = width * this.pixelRatio;
        this._canvas.style.width = width + "px";
        const pixelRatio = this.pixelRatio, _context = this.getContext()._context;
        _context.scale(pixelRatio, pixelRatio);
      }
      setHeight(height) {
        this.height = this._canvas.height = height * this.pixelRatio;
        this._canvas.style.height = height + "px";
        const pixelRatio = this.pixelRatio, _context = this.getContext()._context;
        _context.scale(pixelRatio, pixelRatio);
      }
      getWidth() {
        return this.width;
      }
      getHeight() {
        return this.height;
      }
      setSize(width, height) {
        this.setWidth(width || 0);
        this.setHeight(height || 0);
      }
      toDataURL(mimeType, quality) {
        try {
          return this._canvas.toDataURL(mimeType, quality);
        } catch (e) {
          try {
            return this._canvas.toDataURL();
          } catch (err) {
            Util_1.Util.error("Unable to get data URL. " + err.message + " For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.");
            return "";
          }
        }
      }
    };
    exports.Canvas = Canvas;
    Factory_1.Factory.addGetterSetter(Canvas, "pixelRatio", void 0, (0, Validators_1.getNumberValidator)());
    var SceneCanvas = class extends Canvas {
      constructor(config = { width: 0, height: 0, willReadFrequently: false }) {
        super(config);
        this.context = new Context_1.SceneContext(this, {
          willReadFrequently: config.willReadFrequently
        });
        this.setSize(config.width, config.height);
      }
    };
    exports.SceneCanvas = SceneCanvas;
    var HitCanvas = class extends Canvas {
      constructor(config = { width: 0, height: 0 }) {
        super(config);
        this.hitCanvas = true;
        this.context = new Context_1.HitContext(this);
        this.setSize(config.width, config.height);
      }
    };
    exports.HitCanvas = HitCanvas;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/DragAndDrop.js
var require_DragAndDrop = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/DragAndDrop.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.DD = void 0;
    var Global_1 = require_Global();
    var Util_1 = require_Util();
    exports.DD = {
      get isDragging() {
        let flag = false;
        exports.DD._dragElements.forEach((elem) => {
          if (elem.dragStatus === "dragging") {
            flag = true;
          }
        });
        return flag;
      },
      justDragged: false,
      get node() {
        let node;
        exports.DD._dragElements.forEach((elem) => {
          node = elem.node;
        });
        return node;
      },
      _dragElements: /* @__PURE__ */ new Map(),
      _drag(evt) {
        const nodesToFireEvents = [];
        exports.DD._dragElements.forEach((elem, key) => {
          const { node } = elem;
          const stage = node.getStage();
          stage.setPointersPositions(evt);
          if (elem.pointerId === void 0) {
            elem.pointerId = Util_1.Util._getFirstPointerId(evt);
          }
          const pos = stage._changedPointerPositions.find((pos2) => pos2.id === elem.pointerId);
          if (!pos) {
            return;
          }
          if (elem.dragStatus !== "dragging") {
            const dragDistance = node.dragDistance();
            const distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));
            if (distance < dragDistance) {
              return;
            }
            node.startDrag({ evt });
            if (!node.isDragging()) {
              return;
            }
          }
          node._setDragPosition(evt, elem);
          nodesToFireEvents.push(node);
        });
        nodesToFireEvents.forEach((node) => {
          node.fire("dragmove", {
            type: "dragmove",
            target: node,
            evt
          }, true);
        });
      },
      _endDragBefore(evt) {
        const drawNodes = [];
        exports.DD._dragElements.forEach((elem) => {
          const { node } = elem;
          const stage = node.getStage();
          if (evt) {
            stage.setPointersPositions(evt);
          }
          const pos = stage._changedPointerPositions.find((pos2) => pos2.id === elem.pointerId);
          if (!pos) {
            return;
          }
          if (elem.dragStatus === "dragging" || elem.dragStatus === "stopped") {
            exports.DD.justDragged = true;
            Global_1.Konva._mouseListenClick = false;
            Global_1.Konva._touchListenClick = false;
            Global_1.Konva._pointerListenClick = false;
            elem.dragStatus = "stopped";
          }
          const drawNode = elem.node.getLayer() || elem.node instanceof Global_1.Konva["Stage"] && elem.node;
          if (drawNode && drawNodes.indexOf(drawNode) === -1) {
            drawNodes.push(drawNode);
          }
        });
        drawNodes.forEach((drawNode) => {
          drawNode.draw();
        });
      },
      _endDragAfter(evt) {
        exports.DD._dragElements.forEach((elem, key) => {
          if (elem.dragStatus === "stopped") {
            elem.node.fire("dragend", {
              type: "dragend",
              target: elem.node,
              evt
            }, true);
          }
          if (elem.dragStatus !== "dragging") {
            exports.DD._dragElements.delete(key);
          }
        });
      }
    };
    if (Global_1.Konva.isBrowser) {
      window.addEventListener("mouseup", exports.DD._endDragBefore, true);
      window.addEventListener("touchend", exports.DD._endDragBefore, true);
      window.addEventListener("touchcancel", exports.DD._endDragBefore, true);
      window.addEventListener("mousemove", exports.DD._drag);
      window.addEventListener("touchmove", exports.DD._drag);
      window.addEventListener("mouseup", exports.DD._endDragAfter, false);
      window.addEventListener("touchend", exports.DD._endDragAfter, false);
      window.addEventListener("touchcancel", exports.DD._endDragAfter, false);
    }
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Node.js
var require_Node = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Node.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Node = void 0;
    var Util_1 = require_Util();
    var Factory_1 = require_Factory();
    var Canvas_1 = require_Canvas();
    var Global_1 = require_Global();
    var DragAndDrop_1 = require_DragAndDrop();
    var Validators_1 = require_Validators();
    var ABSOLUTE_OPACITY = "absoluteOpacity";
    var ALL_LISTENERS = "allEventListeners";
    var ABSOLUTE_TRANSFORM = "absoluteTransform";
    var ABSOLUTE_SCALE = "absoluteScale";
    var CANVAS = "canvas";
    var CHANGE = "Change";
    var CHILDREN = "children";
    var KONVA = "konva";
    var LISTENING = "listening";
    var MOUSEENTER = "mouseenter";
    var MOUSELEAVE = "mouseleave";
    var SET = "set";
    var SHAPE = "Shape";
    var SPACE = " ";
    var STAGE = "stage";
    var TRANSFORM = "transform";
    var UPPER_STAGE = "Stage";
    var VISIBLE = "visible";
    var TRANSFORM_CHANGE_STR = [
      "xChange.konva",
      "yChange.konva",
      "scaleXChange.konva",
      "scaleYChange.konva",
      "skewXChange.konva",
      "skewYChange.konva",
      "rotationChange.konva",
      "offsetXChange.konva",
      "offsetYChange.konva",
      "transformsEnabledChange.konva"
    ].join(SPACE);
    var idCounter = 1;
    var Node = class _Node {
      constructor(config) {
        this._id = idCounter++;
        this.eventListeners = {};
        this.attrs = {};
        this.index = 0;
        this._allEventListeners = null;
        this.parent = null;
        this._cache = /* @__PURE__ */ new Map();
        this._attachedDepsListeners = /* @__PURE__ */ new Map();
        this._lastPos = null;
        this._batchingTransformChange = false;
        this._needClearTransformCache = false;
        this._filterUpToDate = false;
        this._isUnderCache = false;
        this._dragEventId = null;
        this._shouldFireChangeEvents = false;
        this.setAttrs(config);
        this._shouldFireChangeEvents = true;
      }
      hasChildren() {
        return false;
      }
      _clearCache(attr) {
        if ((attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM) && this._cache.get(attr)) {
          this._cache.get(attr).dirty = true;
        } else if (attr) {
          this._cache.delete(attr);
        } else {
          this._cache.clear();
        }
      }
      _getCache(attr, privateGetter) {
        let cache = this._cache.get(attr);
        const isTransform = attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM;
        const invalid = cache === void 0 || isTransform && cache.dirty === true;
        if (invalid) {
          cache = privateGetter.call(this);
          this._cache.set(attr, cache);
        }
        return cache;
      }
      _calculate(name, deps, getter) {
        if (!this._attachedDepsListeners.get(name)) {
          const depsString = deps.map((dep) => dep + "Change.konva").join(SPACE);
          this.on(depsString, () => {
            this._clearCache(name);
          });
          this._attachedDepsListeners.set(name, true);
        }
        return this._getCache(name, getter);
      }
      _getCanvasCache() {
        return this._cache.get(CANVAS);
      }
      _clearSelfAndDescendantCache(attr) {
        this._clearCache(attr);
        if (attr === ABSOLUTE_TRANSFORM) {
          this.fire("absoluteTransformChange");
        }
      }
      clearCache() {
        if (this._cache.has(CANVAS)) {
          const { scene, filter, hit } = this._cache.get(CANVAS);
          Util_1.Util.releaseCanvas(scene, filter, hit);
          this._cache.delete(CANVAS);
        }
        this._clearSelfAndDescendantCache();
        this._requestDraw();
        return this;
      }
      cache(config) {
        const conf = config || {};
        let rect = {};
        if (conf.x === void 0 || conf.y === void 0 || conf.width === void 0 || conf.height === void 0) {
          rect = this.getClientRect({
            skipTransform: true,
            relativeTo: this.getParent() || void 0
          });
        }
        let width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === void 0 ? Math.floor(rect.x) : conf.x, y = conf.y === void 0 ? Math.floor(rect.y) : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false, hitCanvasPixelRatio = conf.hitCanvasPixelRatio || 1;
        if (!width || !height) {
          Util_1.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");
          return;
        }
        const extraPaddingX = Math.abs(Math.round(rect.x) - x) > 0.5 ? 1 : 0;
        const extraPaddingY = Math.abs(Math.round(rect.y) - y) > 0.5 ? 1 : 0;
        width += offset * 2 + extraPaddingX;
        height += offset * 2 + extraPaddingY;
        x -= offset;
        y -= offset;
        const cachedSceneCanvas = new Canvas_1.SceneCanvas({
          pixelRatio,
          width,
          height
        }), cachedFilterCanvas = new Canvas_1.SceneCanvas({
          pixelRatio,
          width: 0,
          height: 0,
          willReadFrequently: true
        }), cachedHitCanvas = new Canvas_1.HitCanvas({
          pixelRatio: hitCanvasPixelRatio,
          width,
          height
        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();
        cachedHitCanvas.isCache = true;
        cachedSceneCanvas.isCache = true;
        this._cache.delete(CANVAS);
        this._filterUpToDate = false;
        if (conf.imageSmoothingEnabled === false) {
          cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;
          cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;
        }
        sceneContext.save();
        hitContext.save();
        sceneContext.translate(-x, -y);
        hitContext.translate(-x, -y);
        this._isUnderCache = true;
        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);
        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);
        this.drawScene(cachedSceneCanvas, this);
        this.drawHit(cachedHitCanvas, this);
        this._isUnderCache = false;
        sceneContext.restore();
        hitContext.restore();
        if (drawBorder) {
          sceneContext.save();
          sceneContext.beginPath();
          sceneContext.rect(0, 0, width, height);
          sceneContext.closePath();
          sceneContext.setAttr("strokeStyle", "red");
          sceneContext.setAttr("lineWidth", 5);
          sceneContext.stroke();
          sceneContext.restore();
        }
        this._cache.set(CANVAS, {
          scene: cachedSceneCanvas,
          filter: cachedFilterCanvas,
          hit: cachedHitCanvas,
          x,
          y
        });
        this._requestDraw();
        return this;
      }
      isCached() {
        return this._cache.has(CANVAS);
      }
      getClientRect(config) {
        throw new Error('abstract "getClientRect" method call');
      }
      _transformedRect(rect, top) {
        const points = [
          { x: rect.x, y: rect.y },
          { x: rect.x + rect.width, y: rect.y },
          { x: rect.x + rect.width, y: rect.y + rect.height },
          { x: rect.x, y: rect.y + rect.height }
        ];
        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
        const trans = this.getAbsoluteTransform(top);
        points.forEach(function(point) {
          const transformed = trans.point(point);
          if (minX === void 0) {
            minX = maxX = transformed.x;
            minY = maxY = transformed.y;
          }
          minX = Math.min(minX, transformed.x);
          minY = Math.min(minY, transformed.y);
          maxX = Math.max(maxX, transformed.x);
          maxY = Math.max(maxY, transformed.y);
        });
        return {
          x: minX,
          y: minY,
          width: maxX - minX,
          height: maxY - minY
        };
      }
      _drawCachedSceneCanvas(context) {
        context.save();
        context._applyOpacity(this);
        context._applyGlobalCompositeOperation(this);
        const canvasCache = this._getCanvasCache();
        context.translate(canvasCache.x, canvasCache.y);
        const cacheCanvas = this._getCachedSceneCanvas();
        const ratio = cacheCanvas.pixelRatio;
        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);
        context.restore();
      }
      _drawCachedHitCanvas(context) {
        const canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;
        context.save();
        context.translate(canvasCache.x, canvasCache.y);
        context.drawImage(hitCanvas._canvas, 0, 0, hitCanvas.width / hitCanvas.pixelRatio, hitCanvas.height / hitCanvas.pixelRatio);
        context.restore();
      }
      _getCachedSceneCanvas() {
        let filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;
        if (filters) {
          if (!this._filterUpToDate) {
            const ratio = sceneCanvas.pixelRatio;
            filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);
            try {
              len = filters.length;
              filterContext.clear();
              filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);
              imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());
              for (n = 0; n < len; n++) {
                filter = filters[n];
                if (typeof filter !== "function") {
                  Util_1.Util.error("Filter should be type of function, but got " + typeof filter + " instead. Please check correct filters");
                  continue;
                }
                filter.call(this, imageData);
                filterContext.putImageData(imageData, 0, 0);
              }
            } catch (e) {
              Util_1.Util.error("Unable to apply filter. " + e.message + " This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.");
            }
            this._filterUpToDate = true;
          }
          return filterCanvas;
        }
        return sceneCanvas;
      }
      on(evtStr, handler) {
        this._cache && this._cache.delete(ALL_LISTENERS);
        if (arguments.length === 3) {
          return this._delegate.apply(this, arguments);
        }
        let events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;
        for (n = 0; n < len; n++) {
          event = events[n];
          parts = event.split(".");
          baseEvent = parts[0];
          name = parts[1] || "";
          if (!this.eventListeners[baseEvent]) {
            this.eventListeners[baseEvent] = [];
          }
          this.eventListeners[baseEvent].push({
            name,
            handler
          });
        }
        return this;
      }
      off(evtStr, callback) {
        let events = (evtStr || "").split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;
        this._cache && this._cache.delete(ALL_LISTENERS);
        if (!evtStr) {
          for (t in this.eventListeners) {
            this._off(t);
          }
        }
        for (n = 0; n < len; n++) {
          event = events[n];
          parts = event.split(".");
          baseEvent = parts[0];
          name = parts[1];
          if (baseEvent) {
            if (this.eventListeners[baseEvent]) {
              this._off(baseEvent, name, callback);
            }
          } else {
            for (t in this.eventListeners) {
              this._off(t, name, callback);
            }
          }
        }
        return this;
      }
      dispatchEvent(evt) {
        const e = {
          target: this,
          type: evt.type,
          evt
        };
        this.fire(evt.type, e);
        return this;
      }
      addEventListener(type, handler) {
        this.on(type, function(evt) {
          handler.call(this, evt.evt);
        });
        return this;
      }
      removeEventListener(type) {
        this.off(type);
        return this;
      }
      _delegate(event, selector, handler) {
        const stopNode = this;
        this.on(event, function(evt) {
          const targets = evt.target.findAncestors(selector, true, stopNode);
          for (let i = 0; i < targets.length; i++) {
            evt = Util_1.Util.cloneObject(evt);
            evt.currentTarget = targets[i];
            handler.call(targets[i], evt);
          }
        });
      }
      remove() {
        if (this.isDragging()) {
          this.stopDrag();
        }
        DragAndDrop_1.DD._dragElements.delete(this._id);
        this._remove();
        return this;
      }
      _clearCaches() {
        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);
        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);
        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);
        this._clearSelfAndDescendantCache(STAGE);
        this._clearSelfAndDescendantCache(VISIBLE);
        this._clearSelfAndDescendantCache(LISTENING);
      }
      _remove() {
        this._clearCaches();
        const parent = this.getParent();
        if (parent && parent.children) {
          parent.children.splice(this.index, 1);
          parent._setChildrenIndices();
          this.parent = null;
        }
      }
      destroy() {
        this.remove();
        this.clearCache();
        return this;
      }
      getAttr(attr) {
        const method = "get" + Util_1.Util._capitalize(attr);
        if (Util_1.Util._isFunction(this[method])) {
          return this[method]();
        }
        return this.attrs[attr];
      }
      getAncestors() {
        let parent = this.getParent(), ancestors = [];
        while (parent) {
          ancestors.push(parent);
          parent = parent.getParent();
        }
        return ancestors;
      }
      getAttrs() {
        return this.attrs || {};
      }
      setAttrs(config) {
        this._batchTransformChanges(() => {
          let key, method;
          if (!config) {
            return this;
          }
          for (key in config) {
            if (key === CHILDREN) {
              continue;
            }
            method = SET + Util_1.Util._capitalize(key);
            if (Util_1.Util._isFunction(this[method])) {
              this[method](config[key]);
            } else {
              this._setAttr(key, config[key]);
            }
          }
        });
        return this;
      }
      isListening() {
        return this._getCache(LISTENING, this._isListening);
      }
      _isListening(relativeTo) {
        const listening = this.listening();
        if (!listening) {
          return false;
        }
        const parent = this.getParent();
        if (parent && parent !== relativeTo && this !== relativeTo) {
          return parent._isListening(relativeTo);
        } else {
          return true;
        }
      }
      isVisible() {
        return this._getCache(VISIBLE, this._isVisible);
      }
      _isVisible(relativeTo) {
        const visible = this.visible();
        if (!visible) {
          return false;
        }
        const parent = this.getParent();
        if (parent && parent !== relativeTo && this !== relativeTo) {
          return parent._isVisible(relativeTo);
        } else {
          return true;
        }
      }
      shouldDrawHit(top, skipDragCheck = false) {
        if (top) {
          return this._isVisible(top) && this._isListening(top);
        }
        const layer = this.getLayer();
        let layerUnderDrag = false;
        DragAndDrop_1.DD._dragElements.forEach((elem) => {
          if (elem.dragStatus !== "dragging") {
            return;
          } else if (elem.node.nodeType === "Stage") {
            layerUnderDrag = true;
          } else if (elem.node.getLayer() === layer) {
            layerUnderDrag = true;
          }
        });
        const dragSkip = !skipDragCheck && !Global_1.Konva.hitOnDragEnabled && (layerUnderDrag || Global_1.Konva.isTransforming());
        return this.isListening() && this.isVisible() && !dragSkip;
      }
      show() {
        this.visible(true);
        return this;
      }
      hide() {
        this.visible(false);
        return this;
      }
      getZIndex() {
        return this.index || 0;
      }
      getAbsoluteZIndex() {
        let depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;
        function addChildren(children) {
          nodes = [];
          len = children.length;
          for (n = 0; n < len; n++) {
            child = children[n];
            index++;
            if (child.nodeType !== SHAPE) {
              nodes = nodes.concat(child.getChildren().slice());
            }
            if (child._id === that._id) {
              n = len;
            }
          }
          if (nodes.length > 0 && nodes[0].getDepth() <= depth) {
            addChildren(nodes);
          }
        }
        const stage = this.getStage();
        if (that.nodeType !== UPPER_STAGE && stage) {
          addChildren(stage.getChildren());
        }
        return index;
      }
      getDepth() {
        let depth = 0, parent = this.parent;
        while (parent) {
          depth++;
          parent = parent.parent;
        }
        return depth;
      }
      _batchTransformChanges(func) {
        this._batchingTransformChange = true;
        func();
        this._batchingTransformChange = false;
        if (this._needClearTransformCache) {
          this._clearCache(TRANSFORM);
          this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);
        }
        this._needClearTransformCache = false;
      }
      setPosition(pos) {
        this._batchTransformChanges(() => {
          this.x(pos.x);
          this.y(pos.y);
        });
        return this;
      }
      getPosition() {
        return {
          x: this.x(),
          y: this.y()
        };
      }
      getRelativePointerPosition() {
        const stage = this.getStage();
        if (!stage) {
          return null;
        }
        const pos = stage.getPointerPosition();
        if (!pos) {
          return null;
        }
        const transform = this.getAbsoluteTransform().copy();
        transform.invert();
        return transform.point(pos);
      }
      getAbsolutePosition(top) {
        let haveCachedParent = false;
        let parent = this.parent;
        while (parent) {
          if (parent.isCached()) {
            haveCachedParent = true;
            break;
          }
          parent = parent.parent;
        }
        if (haveCachedParent && !top) {
          top = true;
        }
        const absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Util_1.Transform(), offset = this.offset();
        absoluteTransform.m = absoluteMatrix.slice();
        absoluteTransform.translate(offset.x, offset.y);
        return absoluteTransform.getTranslation();
      }
      setAbsolutePosition(pos) {
        const { x, y, ...origTrans } = this._clearTransform();
        this.attrs.x = x;
        this.attrs.y = y;
        this._clearCache(TRANSFORM);
        const it2 = this._getAbsoluteTransform().copy();
        it2.invert();
        it2.translate(pos.x, pos.y);
        pos = {
          x: this.attrs.x + it2.getTranslation().x,
          y: this.attrs.y + it2.getTranslation().y
        };
        this._setTransform(origTrans);
        this.setPosition({ x: pos.x, y: pos.y });
        this._clearCache(TRANSFORM);
        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);
        return this;
      }
      _setTransform(trans) {
        let key;
        for (key in trans) {
          this.attrs[key] = trans[key];
        }
      }
      _clearTransform() {
        const trans = {
          x: this.x(),
          y: this.y(),
          rotation: this.rotation(),
          scaleX: this.scaleX(),
          scaleY: this.scaleY(),
          offsetX: this.offsetX(),
          offsetY: this.offsetY(),
          skewX: this.skewX(),
          skewY: this.skewY()
        };
        this.attrs.x = 0;
        this.attrs.y = 0;
        this.attrs.rotation = 0;
        this.attrs.scaleX = 1;
        this.attrs.scaleY = 1;
        this.attrs.offsetX = 0;
        this.attrs.offsetY = 0;
        this.attrs.skewX = 0;
        this.attrs.skewY = 0;
        return trans;
      }
      move(change) {
        let changeX = change.x, changeY = change.y, x = this.x(), y = this.y();
        if (changeX !== void 0) {
          x += changeX;
        }
        if (changeY !== void 0) {
          y += changeY;
        }
        this.setPosition({ x, y });
        return this;
      }
      _eachAncestorReverse(func, top) {
        let family = [], parent = this.getParent(), len, n;
        if (top && top._id === this._id) {
          return;
        }
        family.unshift(this);
        while (parent && (!top || parent._id !== top._id)) {
          family.unshift(parent);
          parent = parent.parent;
        }
        len = family.length;
        for (n = 0; n < len; n++) {
          func(family[n]);
        }
      }
      rotate(theta) {
        this.rotation(this.rotation() + theta);
        return this;
      }
      moveToTop() {
        if (!this.parent) {
          Util_1.Util.warn("Node has no parent. moveToTop function is ignored.");
          return false;
        }
        const index = this.index, len = this.parent.getChildren().length;
        if (index < len - 1) {
          this.parent.children.splice(index, 1);
          this.parent.children.push(this);
          this.parent._setChildrenIndices();
          return true;
        }
        return false;
      }
      moveUp() {
        if (!this.parent) {
          Util_1.Util.warn("Node has no parent. moveUp function is ignored.");
          return false;
        }
        const index = this.index, len = this.parent.getChildren().length;
        if (index < len - 1) {
          this.parent.children.splice(index, 1);
          this.parent.children.splice(index + 1, 0, this);
          this.parent._setChildrenIndices();
          return true;
        }
        return false;
      }
      moveDown() {
        if (!this.parent) {
          Util_1.Util.warn("Node has no parent. moveDown function is ignored.");
          return false;
        }
        const index = this.index;
        if (index > 0) {
          this.parent.children.splice(index, 1);
          this.parent.children.splice(index - 1, 0, this);
          this.parent._setChildrenIndices();
          return true;
        }
        return false;
      }
      moveToBottom() {
        if (!this.parent) {
          Util_1.Util.warn("Node has no parent. moveToBottom function is ignored.");
          return false;
        }
        const index = this.index;
        if (index > 0) {
          this.parent.children.splice(index, 1);
          this.parent.children.unshift(this);
          this.parent._setChildrenIndices();
          return true;
        }
        return false;
      }
      setZIndex(zIndex) {
        if (!this.parent) {
          Util_1.Util.warn("Node has no parent. zIndex parameter is ignored.");
          return this;
        }
        if (zIndex < 0 || zIndex >= this.parent.children.length) {
          Util_1.Util.warn("Unexpected value " + zIndex + " for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to " + (this.parent.children.length - 1) + ".");
        }
        const index = this.index;
        this.parent.children.splice(index, 1);
        this.parent.children.splice(zIndex, 0, this);
        this.parent._setChildrenIndices();
        return this;
      }
      getAbsoluteOpacity() {
        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);
      }
      _getAbsoluteOpacity() {
        let absOpacity = this.opacity();
        const parent = this.getParent();
        if (parent && !parent._isUnderCache) {
          absOpacity *= parent.getAbsoluteOpacity();
        }
        return absOpacity;
      }
      moveTo(newContainer) {
        if (this.getParent() !== newContainer) {
          this._remove();
          newContainer.add(this);
        }
        return this;
      }
      toObject() {
        let attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;
        const obj = {
          attrs: {},
          className: this.getClassName()
        };
        for (key in attrs) {
          val = attrs[key];
          nonPlainObject = Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);
          if (nonPlainObject) {
            continue;
          }
          getter = typeof this[key] === "function" && this[key];
          delete attrs[key];
          defaultValue = getter ? getter.call(this) : null;
          attrs[key] = val;
          if (defaultValue !== val) {
            obj.attrs[key] = val;
          }
        }
        return Util_1.Util._prepareToStringify(obj);
      }
      toJSON() {
        return JSON.stringify(this.toObject());
      }
      getParent() {
        return this.parent;
      }
      findAncestors(selector, includeSelf, stopNode) {
        const res = [];
        if (includeSelf && this._isMatch(selector)) {
          res.push(this);
        }
        let ancestor = this.parent;
        while (ancestor) {
          if (ancestor === stopNode) {
            return res;
          }
          if (ancestor._isMatch(selector)) {
            res.push(ancestor);
          }
          ancestor = ancestor.parent;
        }
        return res;
      }
      isAncestorOf(node) {
        return false;
      }
      findAncestor(selector, includeSelf, stopNode) {
        return this.findAncestors(selector, includeSelf, stopNode)[0];
      }
      _isMatch(selector) {
        if (!selector) {
          return false;
        }
        if (typeof selector === "function") {
          return selector(this);
        }
        let selectorArr = selector.replace(/ /g, "").split(","), len = selectorArr.length, n, sel;
        for (n = 0; n < len; n++) {
          sel = selectorArr[n];
          if (!Util_1.Util.isValidSelector(sel)) {
            Util_1.Util.warn('Selector "' + sel + '" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".');
            Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".');
            Util_1.Util.warn("Konva is awesome, right?");
          }
          if (sel.charAt(0) === "#") {
            if (this.id() === sel.slice(1)) {
              return true;
            }
          } else if (sel.charAt(0) === ".") {
            if (this.hasName(sel.slice(1))) {
              return true;
            }
          } else if (this.className === sel || this.nodeType === sel) {
            return true;
          }
        }
        return false;
      }
      getLayer() {
        const parent = this.getParent();
        return parent ? parent.getLayer() : null;
      }
      getStage() {
        return this._getCache(STAGE, this._getStage);
      }
      _getStage() {
        const parent = this.getParent();
        if (parent) {
          return parent.getStage();
        } else {
          return null;
        }
      }
      fire(eventType, evt = {}, bubble) {
        evt.target = evt.target || this;
        if (bubble) {
          this._fireAndBubble(eventType, evt);
        } else {
          this._fire(eventType, evt);
        }
        return this;
      }
      getAbsoluteTransform(top) {
        if (top) {
          return this._getAbsoluteTransform(top);
        } else {
          return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);
        }
      }
      _getAbsoluteTransform(top) {
        let at;
        if (top) {
          at = new Util_1.Transform();
          this._eachAncestorReverse(function(node) {
            const transformsEnabled = node.transformsEnabled();
            if (transformsEnabled === "all") {
              at.multiply(node.getTransform());
            } else if (transformsEnabled === "position") {
              at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());
            }
          }, top);
          return at;
        } else {
          at = this._cache.get(ABSOLUTE_TRANSFORM) || new Util_1.Transform();
          if (this.parent) {
            this.parent.getAbsoluteTransform().copyInto(at);
          } else {
            at.reset();
          }
          const transformsEnabled = this.transformsEnabled();
          if (transformsEnabled === "all") {
            at.multiply(this.getTransform());
          } else if (transformsEnabled === "position") {
            const x = this.attrs.x || 0;
            const y = this.attrs.y || 0;
            const offsetX = this.attrs.offsetX || 0;
            const offsetY = this.attrs.offsetY || 0;
            at.translate(x - offsetX, y - offsetY);
          }
          at.dirty = false;
          return at;
        }
      }
      getAbsoluteScale(top) {
        let parent = this;
        while (parent) {
          if (parent._isUnderCache) {
            top = parent;
          }
          parent = parent.getParent();
        }
        const transform = this.getAbsoluteTransform(top);
        const attrs = transform.decompose();
        return {
          x: attrs.scaleX,
          y: attrs.scaleY
        };
      }
      getAbsoluteRotation() {
        return this.getAbsoluteTransform().decompose().rotation;
      }
      getTransform() {
        return this._getCache(TRANSFORM, this._getTransform);
      }
      _getTransform() {
        var _a, _b;
        const m = this._cache.get(TRANSFORM) || new Util_1.Transform();
        m.reset();
        const x = this.x(), y = this.y(), rotation = Global_1.Konva.getAngle(this.rotation()), scaleX = (_a = this.attrs.scaleX) !== null && _a !== void 0 ? _a : 1, scaleY = (_b = this.attrs.scaleY) !== null && _b !== void 0 ? _b : 1, skewX = this.attrs.skewX || 0, skewY = this.attrs.skewY || 0, offsetX = this.attrs.offsetX || 0, offsetY = this.attrs.offsetY || 0;
        if (x !== 0 || y !== 0) {
          m.translate(x, y);
        }
        if (rotation !== 0) {
          m.rotate(rotation);
        }
        if (skewX !== 0 || skewY !== 0) {
          m.skew(skewX, skewY);
        }
        if (scaleX !== 1 || scaleY !== 1) {
          m.scale(scaleX, scaleY);
        }
        if (offsetX !== 0 || offsetY !== 0) {
          m.translate(-1 * offsetX, -1 * offsetY);
        }
        m.dirty = false;
        return m;
      }
      clone(obj) {
        let attrs = Util_1.Util.cloneObject(this.attrs), key, allListeners, len, n, listener;
        for (key in obj) {
          attrs[key] = obj[key];
        }
        const node = new this.constructor(attrs);
        for (key in this.eventListeners) {
          allListeners = this.eventListeners[key];
          len = allListeners.length;
          for (n = 0; n < len; n++) {
            listener = allListeners[n];
            if (listener.name.indexOf(KONVA) < 0) {
              if (!node.eventListeners[key]) {
                node.eventListeners[key] = [];
              }
              node.eventListeners[key].push(listener);
            }
          }
        }
        return node;
      }
      _toKonvaCanvas(config) {
        config = config || {};
        const box = this.getClientRect();
        const stage = this.getStage(), x = config.x !== void 0 ? config.x : Math.floor(box.x), y = config.y !== void 0 ? config.y : Math.floor(box.y), pixelRatio = config.pixelRatio || 1, canvas = new Canvas_1.SceneCanvas({
          width: config.width || Math.ceil(box.width) || (stage ? stage.width() : 0),
          height: config.height || Math.ceil(box.height) || (stage ? stage.height() : 0),
          pixelRatio
        }), context = canvas.getContext();
        const bufferCanvas = new Canvas_1.SceneCanvas({
          width: canvas.width / canvas.pixelRatio + Math.abs(x),
          height: canvas.height / canvas.pixelRatio + Math.abs(y),
          pixelRatio: canvas.pixelRatio
        });
        if (config.imageSmoothingEnabled === false) {
          context._context.imageSmoothingEnabled = false;
        }
        context.save();
        if (x || y) {
          context.translate(-1 * x, -1 * y);
        }
        this.drawScene(canvas, void 0, bufferCanvas);
        context.restore();
        return canvas;
      }
      toCanvas(config) {
        return this._toKonvaCanvas(config)._canvas;
      }
      toDataURL(config) {
        config = config || {};
        const mimeType = config.mimeType || null, quality = config.quality || null;
        const url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);
        if (config.callback) {
          config.callback(url);
        }
        return url;
      }
      toImage(config) {
        return new Promise((resolve, reject) => {
          try {
            const callback = config === null || config === void 0 ? void 0 : config.callback;
            if (callback)
              delete config.callback;
            Util_1.Util._urlToImage(this.toDataURL(config), function(img) {
              resolve(img);
              callback === null || callback === void 0 ? void 0 : callback(img);
            });
          } catch (err) {
            reject(err);
          }
        });
      }
      toBlob(config) {
        return new Promise((resolve, reject) => {
          try {
            const callback = config === null || config === void 0 ? void 0 : config.callback;
            if (callback)
              delete config.callback;
            this.toCanvas(config).toBlob((blob) => {
              resolve(blob);
              callback === null || callback === void 0 ? void 0 : callback(blob);
            }, config === null || config === void 0 ? void 0 : config.mimeType, config === null || config === void 0 ? void 0 : config.quality);
          } catch (err) {
            reject(err);
          }
        });
      }
      setSize(size) {
        this.width(size.width);
        this.height(size.height);
        return this;
      }
      getSize() {
        return {
          width: this.width(),
          height: this.height()
        };
      }
      getClassName() {
        return this.className || this.nodeType;
      }
      getType() {
        return this.nodeType;
      }
      getDragDistance() {
        if (this.attrs.dragDistance !== void 0) {
          return this.attrs.dragDistance;
        } else if (this.parent) {
          return this.parent.getDragDistance();
        } else {
          return Global_1.Konva.dragDistance;
        }
      }
      _off(type, name, callback) {
        let evtListeners = this.eventListeners[type], i, evtName, handler;
        for (i = 0; i < evtListeners.length; i++) {
          evtName = evtListeners[i].name;
          handler = evtListeners[i].handler;
          if ((evtName !== "konva" || name === "konva") && (!name || evtName === name) && (!callback || callback === handler)) {
            evtListeners.splice(i, 1);
            if (evtListeners.length === 0) {
              delete this.eventListeners[type];
              break;
            }
            i--;
          }
        }
      }
      _fireChangeEvent(attr, oldVal, newVal) {
        this._fire(attr + CHANGE, {
          oldVal,
          newVal
        });
      }
      addName(name) {
        if (!this.hasName(name)) {
          const oldName = this.name();
          const newName = oldName ? oldName + " " + name : name;
          this.name(newName);
        }
        return this;
      }
      hasName(name) {
        if (!name) {
          return false;
        }
        const fullName = this.name();
        if (!fullName) {
          return false;
        }
        const names = (fullName || "").split(/\s/g);
        return names.indexOf(name) !== -1;
      }
      removeName(name) {
        const names = (this.name() || "").split(/\s/g);
        const index = names.indexOf(name);
        if (index !== -1) {
          names.splice(index, 1);
          this.name(names.join(" "));
        }
        return this;
      }
      setAttr(attr, val) {
        const func = this[SET + Util_1.Util._capitalize(attr)];
        if (Util_1.Util._isFunction(func)) {
          func.call(this, val);
        } else {
          this._setAttr(attr, val);
        }
        return this;
      }
      _requestDraw() {
        if (Global_1.Konva.autoDrawEnabled) {
          const drawNode = this.getLayer() || this.getStage();
          drawNode === null || drawNode === void 0 ? void 0 : drawNode.batchDraw();
        }
      }
      _setAttr(key, val) {
        const oldVal = this.attrs[key];
        if (oldVal === val && !Util_1.Util.isObject(val)) {
          return;
        }
        if (val === void 0 || val === null) {
          delete this.attrs[key];
        } else {
          this.attrs[key] = val;
        }
        if (this._shouldFireChangeEvents) {
          this._fireChangeEvent(key, oldVal, val);
        }
        this._requestDraw();
      }
      _setComponentAttr(key, component, val) {
        let oldVal;
        if (val !== void 0) {
          oldVal = this.attrs[key];
          if (!oldVal) {
            this.attrs[key] = this.getAttr(key);
          }
          this.attrs[key][component] = val;
          this._fireChangeEvent(key, oldVal, val);
        }
      }
      _fireAndBubble(eventType, evt, compareShape) {
        if (evt && this.nodeType === SHAPE) {
          evt.target = this;
        }
        const shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && (compareShape && (this === compareShape || this.isAncestorOf && this.isAncestorOf(compareShape)) || this.nodeType === "Stage" && !compareShape);
        if (!shouldStop) {
          this._fire(eventType, evt);
          const stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && compareShape && compareShape.isAncestorOf && compareShape.isAncestorOf(this) && !compareShape.isAncestorOf(this.parent);
          if ((evt && !evt.cancelBubble || !evt) && this.parent && this.parent.isListening() && !stopBubble) {
            if (compareShape && compareShape.parent) {
              this._fireAndBubble.call(this.parent, eventType, evt, compareShape);
            } else {
              this._fireAndBubble.call(this.parent, eventType, evt);
            }
          }
        }
      }
      _getProtoListeners(eventType) {
        var _a, _b, _c;
        const allListeners = (_a = this._cache.get(ALL_LISTENERS)) !== null && _a !== void 0 ? _a : {};
        let events = allListeners === null || allListeners === void 0 ? void 0 : allListeners[eventType];
        if (events === void 0) {
          events = [];
          let obj = Object.getPrototypeOf(this);
          while (obj) {
            const hierarchyEvents = (_c = (_b = obj.eventListeners) === null || _b === void 0 ? void 0 : _b[eventType]) !== null && _c !== void 0 ? _c : [];
            events.push(...hierarchyEvents);
            obj = Object.getPrototypeOf(obj);
          }
          allListeners[eventType] = events;
          this._cache.set(ALL_LISTENERS, allListeners);
        }
        return events;
      }
      _fire(eventType, evt) {
        evt = evt || {};
        evt.currentTarget = this;
        evt.type = eventType;
        const topListeners = this._getProtoListeners(eventType);
        if (topListeners) {
          for (var i = 0; i < topListeners.length; i++) {
            topListeners[i].handler.call(this, evt);
          }
        }
        const selfListeners = this.eventListeners[eventType];
        if (selfListeners) {
          for (var i = 0; i < selfListeners.length; i++) {
            selfListeners[i].handler.call(this, evt);
          }
        }
      }
      draw() {
        this.drawScene();
        this.drawHit();
        return this;
      }
      _createDragElement(evt) {
        const pointerId = evt ? evt.pointerId : void 0;
        const stage = this.getStage();
        const ap = this.getAbsolutePosition();
        if (!stage) {
          return;
        }
        const pos = stage._getPointerById(pointerId) || stage._changedPointerPositions[0] || ap;
        DragAndDrop_1.DD._dragElements.set(this._id, {
          node: this,
          startPointerPos: pos,
          offset: {
            x: pos.x - ap.x,
            y: pos.y - ap.y
          },
          dragStatus: "ready",
          pointerId
        });
      }
      startDrag(evt, bubbleEvent = true) {
        if (!DragAndDrop_1.DD._dragElements.has(this._id)) {
          this._createDragElement(evt);
        }
        const elem = DragAndDrop_1.DD._dragElements.get(this._id);
        elem.dragStatus = "dragging";
        this.fire("dragstart", {
          type: "dragstart",
          target: this,
          evt: evt && evt.evt
        }, bubbleEvent);
      }
      _setDragPosition(evt, elem) {
        const pos = this.getStage()._getPointerById(elem.pointerId);
        if (!pos) {
          return;
        }
        let newNodePos = {
          x: pos.x - elem.offset.x,
          y: pos.y - elem.offset.y
        };
        const dbf = this.dragBoundFunc();
        if (dbf !== void 0) {
          const bounded = dbf.call(this, newNodePos, evt);
          if (!bounded) {
            Util_1.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.");
          } else {
            newNodePos = bounded;
          }
        }
        if (!this._lastPos || this._lastPos.x !== newNodePos.x || this._lastPos.y !== newNodePos.y) {
          this.setAbsolutePosition(newNodePos);
          this._requestDraw();
        }
        this._lastPos = newNodePos;
      }
      stopDrag(evt) {
        const elem = DragAndDrop_1.DD._dragElements.get(this._id);
        if (elem) {
          elem.dragStatus = "stopped";
        }
        DragAndDrop_1.DD._endDragBefore(evt);
        DragAndDrop_1.DD._endDragAfter(evt);
      }
      setDraggable(draggable) {
        this._setAttr("draggable", draggable);
        this._dragChange();
      }
      isDragging() {
        const elem = DragAndDrop_1.DD._dragElements.get(this._id);
        return elem ? elem.dragStatus === "dragging" : false;
      }
      _listenDrag() {
        this._dragCleanup();
        this.on("mousedown.konva touchstart.konva", function(evt) {
          const shouldCheckButton = evt.evt["button"] !== void 0;
          const canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt["button"]) >= 0;
          if (!canDrag) {
            return;
          }
          if (this.isDragging()) {
            return;
          }
          let hasDraggingChild = false;
          DragAndDrop_1.DD._dragElements.forEach((elem) => {
            if (this.isAncestorOf(elem.node)) {
              hasDraggingChild = true;
            }
          });
          if (!hasDraggingChild) {
            this._createDragElement(evt);
          }
        });
      }
      _dragChange() {
        if (this.attrs.draggable) {
          this._listenDrag();
        } else {
          this._dragCleanup();
          const stage = this.getStage();
          if (!stage) {
            return;
          }
          const dragElement = DragAndDrop_1.DD._dragElements.get(this._id);
          const isDragging = dragElement && dragElement.dragStatus === "dragging";
          const isReady = dragElement && dragElement.dragStatus === "ready";
          if (isDragging) {
            this.stopDrag();
          } else if (isReady) {
            DragAndDrop_1.DD._dragElements.delete(this._id);
          }
        }
      }
      _dragCleanup() {
        this.off("mousedown.konva");
        this.off("touchstart.konva");
      }
      isClientRectOnScreen(margin = { x: 0, y: 0 }) {
        const stage = this.getStage();
        if (!stage) {
          return false;
        }
        const screenRect = {
          x: -margin.x,
          y: -margin.y,
          width: stage.width() + 2 * margin.x,
          height: stage.height() + 2 * margin.y
        };
        return Util_1.Util.haveIntersection(screenRect, this.getClientRect());
      }
      static create(data, container) {
        if (Util_1.Util._isString(data)) {
          data = JSON.parse(data);
        }
        return this._createNode(data, container);
      }
      static _createNode(obj, container) {
        let className = _Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;
        if (container) {
          obj.attrs.container = container;
        }
        if (!Global_1.Konva[className]) {
          Util_1.Util.warn('Can not find a node with class name "' + className + '". Fallback to "Shape".');
          className = "Shape";
        }
        const Class = Global_1.Konva[className];
        no = new Class(obj.attrs);
        if (children) {
          len = children.length;
          for (n = 0; n < len; n++) {
            no.add(_Node._createNode(children[n]));
          }
        }
        return no;
      }
    };
    exports.Node = Node;
    Node.prototype.nodeType = "Node";
    Node.prototype._attrsAffectingSize = [];
    Node.prototype.eventListeners = {};
    Node.prototype.on.call(Node.prototype, TRANSFORM_CHANGE_STR, function() {
      if (this._batchingTransformChange) {
        this._needClearTransformCache = true;
        return;
      }
      this._clearCache(TRANSFORM);
      this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);
    });
    Node.prototype.on.call(Node.prototype, "visibleChange.konva", function() {
      this._clearSelfAndDescendantCache(VISIBLE);
    });
    Node.prototype.on.call(Node.prototype, "listeningChange.konva", function() {
      this._clearSelfAndDescendantCache(LISTENING);
    });
    Node.prototype.on.call(Node.prototype, "opacityChange.konva", function() {
      this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);
    });
    var addGetterSetter = Factory_1.Factory.addGetterSetter;
    addGetterSetter(Node, "zIndex");
    addGetterSetter(Node, "absolutePosition");
    addGetterSetter(Node, "position");
    addGetterSetter(Node, "x", 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "y", 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "globalCompositeOperation", "source-over", (0, Validators_1.getStringValidator)());
    addGetterSetter(Node, "opacity", 1, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "name", "", (0, Validators_1.getStringValidator)());
    addGetterSetter(Node, "id", "", (0, Validators_1.getStringValidator)());
    addGetterSetter(Node, "rotation", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addComponentsGetterSetter(Node, "scale", ["x", "y"]);
    addGetterSetter(Node, "scaleX", 1, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "scaleY", 1, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addComponentsGetterSetter(Node, "skew", ["x", "y"]);
    addGetterSetter(Node, "skewX", 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "skewY", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addComponentsGetterSetter(Node, "offset", ["x", "y"]);
    addGetterSetter(Node, "offsetX", 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "offsetY", 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "dragDistance", void 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "width", 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "height", 0, (0, Validators_1.getNumberValidator)());
    addGetterSetter(Node, "listening", true, (0, Validators_1.getBooleanValidator)());
    addGetterSetter(Node, "preventDefault", true, (0, Validators_1.getBooleanValidator)());
    addGetterSetter(Node, "filters", void 0, function(val) {
      this._filterUpToDate = false;
      return val;
    });
    addGetterSetter(Node, "visible", true, (0, Validators_1.getBooleanValidator)());
    addGetterSetter(Node, "transformsEnabled", "all", (0, Validators_1.getStringValidator)());
    addGetterSetter(Node, "size");
    addGetterSetter(Node, "dragBoundFunc");
    addGetterSetter(Node, "draggable", false, (0, Validators_1.getBooleanValidator)());
    Factory_1.Factory.backCompat(Node, {
      rotateDeg: "rotate",
      setRotationDeg: "setRotation",
      getRotationDeg: "getRotation"
    });
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Container.js
var require_Container = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Container.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Container = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Container = class extends Node_1.Node {
      constructor() {
        super(...arguments);
        this.children = [];
      }
      getChildren(filterFunc) {
        if (!filterFunc) {
          return this.children || [];
        }
        const children = this.children || [];
        const results = [];
        children.forEach(function(child) {
          if (filterFunc(child)) {
            results.push(child);
          }
        });
        return results;
      }
      hasChildren() {
        return this.getChildren().length > 0;
      }
      removeChildren() {
        this.getChildren().forEach((child) => {
          child.parent = null;
          child.index = 0;
          child.remove();
        });
        this.children = [];
        this._requestDraw();
        return this;
      }
      destroyChildren() {
        this.getChildren().forEach((child) => {
          child.parent = null;
          child.index = 0;
          child.destroy();
        });
        this.children = [];
        this._requestDraw();
        return this;
      }
      add(...children) {
        if (children.length === 0) {
          return this;
        }
        if (children.length > 1) {
          for (let i = 0; i < children.length; i++) {
            this.add(children[i]);
          }
          return this;
        }
        const child = children[0];
        if (child.getParent()) {
          child.moveTo(this);
          return this;
        }
        this._validateAdd(child);
        child.index = this.getChildren().length;
        child.parent = this;
        child._clearCaches();
        this.getChildren().push(child);
        this._fire("add", {
          child
        });
        this._requestDraw();
        return this;
      }
      destroy() {
        if (this.hasChildren()) {
          this.destroyChildren();
        }
        super.destroy();
        return this;
      }
      find(selector) {
        return this._generalFind(selector, false);
      }
      findOne(selector) {
        const result = this._generalFind(selector, true);
        return result.length > 0 ? result[0] : void 0;
      }
      _generalFind(selector, findOne) {
        const retArr = [];
        this._descendants((node) => {
          const valid = node._isMatch(selector);
          if (valid) {
            retArr.push(node);
          }
          if (valid && findOne) {
            return true;
          }
          return false;
        });
        return retArr;
      }
      _descendants(fn) {
        let shouldStop = false;
        const children = this.getChildren();
        for (const child of children) {
          shouldStop = fn(child);
          if (shouldStop) {
            return true;
          }
          if (!child.hasChildren()) {
            continue;
          }
          shouldStop = child._descendants(fn);
          if (shouldStop) {
            return true;
          }
        }
        return false;
      }
      toObject() {
        const obj = Node_1.Node.prototype.toObject.call(this);
        obj.children = [];
        this.getChildren().forEach((child) => {
          obj.children.push(child.toObject());
        });
        return obj;
      }
      isAncestorOf(node) {
        let parent = node.getParent();
        while (parent) {
          if (parent._id === this._id) {
            return true;
          }
          parent = parent.getParent();
        }
        return false;
      }
      clone(obj) {
        const node = Node_1.Node.prototype.clone.call(this, obj);
        this.getChildren().forEach(function(no) {
          node.add(no.clone());
        });
        return node;
      }
      getAllIntersections(pos) {
        const arr = [];
        this.find("Shape").forEach((shape) => {
          if (shape.isVisible() && shape.intersects(pos)) {
            arr.push(shape);
          }
        });
        return arr;
      }
      _clearSelfAndDescendantCache(attr) {
        var _a;
        super._clearSelfAndDescendantCache(attr);
        if (this.isCached()) {
          return;
        }
        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function(node) {
          node._clearSelfAndDescendantCache(attr);
        });
      }
      _setChildrenIndices() {
        var _a;
        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function(child, n) {
          child.index = n;
        });
        this._requestDraw();
      }
      drawScene(can, top, bufferCanvas) {
        const layer = this.getLayer(), canvas = can || layer && layer.getCanvas(), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;
        const caching = canvas && canvas.isCache;
        if (!this.isVisible() && !caching) {
          return this;
        }
        if (cachedSceneCanvas) {
          context.save();
          const m = this.getAbsoluteTransform(top).getMatrix();
          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
          this._drawCachedSceneCanvas(context);
          context.restore();
        } else {
          this._drawChildren("drawScene", canvas, top, bufferCanvas);
        }
        return this;
      }
      drawHit(can, top) {
        if (!this.shouldDrawHit(top)) {
          return this;
        }
        const layer = this.getLayer(), canvas = can || layer && layer.hitCanvas, context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;
        if (cachedHitCanvas) {
          context.save();
          const m = this.getAbsoluteTransform(top).getMatrix();
          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
          this._drawCachedHitCanvas(context);
          context.restore();
        } else {
          this._drawChildren("drawHit", canvas, top);
        }
        return this;
      }
      _drawChildren(drawMethod, canvas, top, bufferCanvas) {
        var _a;
        const context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = typeof clipWidth === "number" && typeof clipHeight === "number" || clipFunc;
        const selfCache = top === this;
        if (hasClip) {
          context.save();
          const transform = this.getAbsoluteTransform(top);
          let m = transform.getMatrix();
          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
          context.beginPath();
          let clipArgs;
          if (clipFunc) {
            clipArgs = clipFunc.call(this, context, this);
          } else {
            const clipX = this.clipX();
            const clipY = this.clipY();
            context.rect(clipX || 0, clipY || 0, clipWidth, clipHeight);
          }
          context.clip.apply(context, clipArgs);
          m = transform.copy().invert().getMatrix();
          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
        }
        const hasComposition = !selfCache && this.globalCompositeOperation() !== "source-over" && drawMethod === "drawScene";
        if (hasComposition) {
          context.save();
          context._applyGlobalCompositeOperation(this);
        }
        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function(child) {
          child[drawMethod](canvas, top, bufferCanvas);
        });
        if (hasComposition) {
          context.restore();
        }
        if (hasClip) {
          context.restore();
        }
      }
      getClientRect(config = {}) {
        var _a;
        const skipTransform = config.skipTransform;
        const relativeTo = config.relativeTo;
        let minX, minY, maxX, maxY;
        let selfRect = {
          x: Infinity,
          y: Infinity,
          width: 0,
          height: 0
        };
        const that = this;
        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function(child) {
          if (!child.visible()) {
            return;
          }
          const rect = child.getClientRect({
            relativeTo: that,
            skipShadow: config.skipShadow,
            skipStroke: config.skipStroke
          });
          if (rect.width === 0 && rect.height === 0) {
            return;
          }
          if (minX === void 0) {
            minX = rect.x;
            minY = rect.y;
            maxX = rect.x + rect.width;
            maxY = rect.y + rect.height;
          } else {
            minX = Math.min(minX, rect.x);
            minY = Math.min(minY, rect.y);
            maxX = Math.max(maxX, rect.x + rect.width);
            maxY = Math.max(maxY, rect.y + rect.height);
          }
        });
        const shapes = this.find("Shape");
        let hasVisible = false;
        for (let i = 0; i < shapes.length; i++) {
          const shape = shapes[i];
          if (shape._isVisible(this)) {
            hasVisible = true;
            break;
          }
        }
        if (hasVisible && minX !== void 0) {
          selfRect = {
            x: minX,
            y: minY,
            width: maxX - minX,
            height: maxY - minY
          };
        } else {
          selfRect = {
            x: 0,
            y: 0,
            width: 0,
            height: 0
          };
        }
        if (!skipTransform) {
          return this._transformedRect(selfRect, relativeTo);
        }
        return selfRect;
      }
    };
    exports.Container = Container;
    Factory_1.Factory.addComponentsGetterSetter(Container, "clip", [
      "x",
      "y",
      "width",
      "height"
    ]);
    Factory_1.Factory.addGetterSetter(Container, "clipX", void 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Container, "clipY", void 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Container, "clipWidth", void 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Container, "clipHeight", void 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Container, "clipFunc");
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/PointerEvents.js
var require_PointerEvents = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/PointerEvents.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getCapturedShape = getCapturedShape;
    exports.createEvent = createEvent;
    exports.hasPointerCapture = hasPointerCapture;
    exports.setPointerCapture = setPointerCapture;
    exports.releaseCapture = releaseCapture;
    var Global_1 = require_Global();
    var Captures = /* @__PURE__ */ new Map();
    var SUPPORT_POINTER_EVENTS = Global_1.Konva._global["PointerEvent"] !== void 0;
    function getCapturedShape(pointerId) {
      return Captures.get(pointerId);
    }
    function createEvent(evt) {
      return {
        evt,
        pointerId: evt.pointerId
      };
    }
    function hasPointerCapture(pointerId, shape) {
      return Captures.get(pointerId) === shape;
    }
    function setPointerCapture(pointerId, shape) {
      releaseCapture(pointerId);
      const stage = shape.getStage();
      if (!stage)
        return;
      Captures.set(pointerId, shape);
      if (SUPPORT_POINTER_EVENTS) {
        shape._fire("gotpointercapture", createEvent(new PointerEvent("gotpointercapture")));
      }
    }
    function releaseCapture(pointerId, target) {
      const shape = Captures.get(pointerId);
      if (!shape)
        return;
      const stage = shape.getStage();
      if (stage && stage.content) {
      }
      Captures.delete(pointerId);
      if (SUPPORT_POINTER_EVENTS) {
        shape._fire("lostpointercapture", createEvent(new PointerEvent("lostpointercapture")));
      }
    }
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Stage.js
var require_Stage = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Stage.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Stage = exports.stages = void 0;
    var Util_1 = require_Util();
    var Factory_1 = require_Factory();
    var Container_1 = require_Container();
    var Global_1 = require_Global();
    var Canvas_1 = require_Canvas();
    var DragAndDrop_1 = require_DragAndDrop();
    var Global_2 = require_Global();
    var PointerEvents = require_PointerEvents();
    var STAGE = "Stage";
    var STRING = "string";
    var PX = "px";
    var MOUSEOUT = "mouseout";
    var MOUSELEAVE = "mouseleave";
    var MOUSEOVER = "mouseover";
    var MOUSEENTER = "mouseenter";
    var MOUSEMOVE = "mousemove";
    var MOUSEDOWN = "mousedown";
    var MOUSEUP = "mouseup";
    var POINTERMOVE = "pointermove";
    var POINTERDOWN = "pointerdown";
    var POINTERUP = "pointerup";
    var POINTERCANCEL = "pointercancel";
    var LOSTPOINTERCAPTURE = "lostpointercapture";
    var POINTEROUT = "pointerout";
    var POINTERLEAVE = "pointerleave";
    var POINTEROVER = "pointerover";
    var POINTERENTER = "pointerenter";
    var CONTEXTMENU = "contextmenu";
    var TOUCHSTART = "touchstart";
    var TOUCHEND = "touchend";
    var TOUCHMOVE = "touchmove";
    var TOUCHCANCEL = "touchcancel";
    var WHEEL = "wheel";
    var MAX_LAYERS_NUMBER = 5;
    var EVENTS2 = [
      [MOUSEENTER, "_pointerenter"],
      [MOUSEDOWN, "_pointerdown"],
      [MOUSEMOVE, "_pointermove"],
      [MOUSEUP, "_pointerup"],
      [MOUSELEAVE, "_pointerleave"],
      [TOUCHSTART, "_pointerdown"],
      [TOUCHMOVE, "_pointermove"],
      [TOUCHEND, "_pointerup"],
      [TOUCHCANCEL, "_pointercancel"],
      [MOUSEOVER, "_pointerover"],
      [WHEEL, "_wheel"],
      [CONTEXTMENU, "_contextmenu"],
      [POINTERDOWN, "_pointerdown"],
      [POINTERMOVE, "_pointermove"],
      [POINTERUP, "_pointerup"],
      [POINTERCANCEL, "_pointercancel"],
      [LOSTPOINTERCAPTURE, "_lostpointercapture"]
    ];
    var EVENTS_MAP = {
      mouse: {
        [POINTEROUT]: MOUSEOUT,
        [POINTERLEAVE]: MOUSELEAVE,
        [POINTEROVER]: MOUSEOVER,
        [POINTERENTER]: MOUSEENTER,
        [POINTERMOVE]: MOUSEMOVE,
        [POINTERDOWN]: MOUSEDOWN,
        [POINTERUP]: MOUSEUP,
        [POINTERCANCEL]: "mousecancel",
        pointerclick: "click",
        pointerdblclick: "dblclick"
      },
      touch: {
        [POINTEROUT]: "touchout",
        [POINTERLEAVE]: "touchleave",
        [POINTEROVER]: "touchover",
        [POINTERENTER]: "touchenter",
        [POINTERMOVE]: TOUCHMOVE,
        [POINTERDOWN]: TOUCHSTART,
        [POINTERUP]: TOUCHEND,
        [POINTERCANCEL]: TOUCHCANCEL,
        pointerclick: "tap",
        pointerdblclick: "dbltap"
      },
      pointer: {
        [POINTEROUT]: POINTEROUT,
        [POINTERLEAVE]: POINTERLEAVE,
        [POINTEROVER]: POINTEROVER,
        [POINTERENTER]: POINTERENTER,
        [POINTERMOVE]: POINTERMOVE,
        [POINTERDOWN]: POINTERDOWN,
        [POINTERUP]: POINTERUP,
        [POINTERCANCEL]: POINTERCANCEL,
        pointerclick: "pointerclick",
        pointerdblclick: "pointerdblclick"
      }
    };
    var getEventType = (type) => {
      if (type.indexOf("pointer") >= 0) {
        return "pointer";
      }
      if (type.indexOf("touch") >= 0) {
        return "touch";
      }
      return "mouse";
    };
    var getEventsMap = (eventType) => {
      const type = getEventType(eventType);
      if (type === "pointer") {
        return Global_1.Konva.pointerEventsEnabled && EVENTS_MAP.pointer;
      }
      if (type === "touch") {
        return EVENTS_MAP.touch;
      }
      if (type === "mouse") {
        return EVENTS_MAP.mouse;
      }
    };
    function checkNoClip(attrs = {}) {
      if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {
        Util_1.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups.");
      }
      return attrs;
    }
    var NO_POINTERS_MESSAGE = `Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);`;
    exports.stages = [];
    var Stage2 = class extends Container_1.Container {
      constructor(config) {
        super(checkNoClip(config));
        this._pointerPositions = [];
        this._changedPointerPositions = [];
        this._buildDOM();
        this._bindContentEvents();
        exports.stages.push(this);
        this.on("widthChange.konva heightChange.konva", this._resizeDOM);
        this.on("visibleChange.konva", this._checkVisibility);
        this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva", () => {
          checkNoClip(this.attrs);
        });
        this._checkVisibility();
      }
      _validateAdd(child) {
        const isLayer = child.getType() === "Layer";
        const isFastLayer = child.getType() === "FastLayer";
        const valid = isLayer || isFastLayer;
        if (!valid) {
          Util_1.Util.throw("You may only add layers to the stage.");
        }
      }
      _checkVisibility() {
        if (!this.content) {
          return;
        }
        const style3 = this.visible() ? "" : "none";
        this.content.style.display = style3;
      }
      setContainer(container) {
        if (typeof container === STRING) {
          if (container.charAt(0) === ".") {
            const className = container.slice(1);
            container = document.getElementsByClassName(className)[0];
          } else {
            var id;
            if (container.charAt(0) !== "#") {
              id = container;
            } else {
              id = container.slice(1);
            }
            container = document.getElementById(id);
          }
          if (!container) {
            throw "Can not find container in document with id " + id;
          }
        }
        this._setAttr("container", container);
        if (this.content) {
          if (this.content.parentElement) {
            this.content.parentElement.removeChild(this.content);
          }
          container.appendChild(this.content);
        }
        return this;
      }
      shouldDrawHit() {
        return true;
      }
      clear() {
        const layers = this.children, len = layers.length;
        for (let n = 0; n < len; n++) {
          layers[n].clear();
        }
        return this;
      }
      clone(obj) {
        if (!obj) {
          obj = {};
        }
        obj.container = typeof document !== "undefined" && document.createElement("div");
        return Container_1.Container.prototype.clone.call(this, obj);
      }
      destroy() {
        super.destroy();
        const content = this.content;
        if (content && Util_1.Util._isInDocument(content)) {
          this.container().removeChild(content);
        }
        const index = exports.stages.indexOf(this);
        if (index > -1) {
          exports.stages.splice(index, 1);
        }
        Util_1.Util.releaseCanvas(this.bufferCanvas._canvas, this.bufferHitCanvas._canvas);
        return this;
      }
      getPointerPosition() {
        const pos = this._pointerPositions[0] || this._changedPointerPositions[0];
        if (!pos) {
          Util_1.Util.warn(NO_POINTERS_MESSAGE);
          return null;
        }
        return {
          x: pos.x,
          y: pos.y
        };
      }
      _getPointerById(id) {
        return this._pointerPositions.find((p) => p.id === id);
      }
      getPointersPositions() {
        return this._pointerPositions;
      }
      getStage() {
        return this;
      }
      getContent() {
        return this.content;
      }
      _toKonvaCanvas(config) {
        config = config || {};
        config.x = config.x || 0;
        config.y = config.y || 0;
        config.width = config.width || this.width();
        config.height = config.height || this.height();
        const canvas = new Canvas_1.SceneCanvas({
          width: config.width,
          height: config.height,
          pixelRatio: config.pixelRatio || 1
        });
        const _context = canvas.getContext()._context;
        const layers = this.children;
        if (config.x || config.y) {
          _context.translate(-1 * config.x, -1 * config.y);
        }
        layers.forEach(function(layer) {
          if (!layer.isVisible()) {
            return;
          }
          const layerCanvas = layer._toKonvaCanvas(config);
          _context.drawImage(layerCanvas._canvas, config.x, config.y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());
        });
        return canvas;
      }
      getIntersection(pos) {
        if (!pos) {
          return null;
        }
        const layers = this.children, len = layers.length, end = len - 1;
        for (let n = end; n >= 0; n--) {
          const shape = layers[n].getIntersection(pos);
          if (shape) {
            return shape;
          }
        }
        return null;
      }
      _resizeDOM() {
        const width = this.width();
        const height = this.height();
        if (this.content) {
          this.content.style.width = width + PX;
          this.content.style.height = height + PX;
        }
        this.bufferCanvas.setSize(width, height);
        this.bufferHitCanvas.setSize(width, height);
        this.children.forEach((layer) => {
          layer.setSize({ width, height });
          layer.draw();
        });
      }
      add(layer, ...rest) {
        if (arguments.length > 1) {
          for (let i = 0; i < arguments.length; i++) {
            this.add(arguments[i]);
          }
          return this;
        }
        super.add(layer);
        const length = this.children.length;
        if (length > MAX_LAYERS_NUMBER) {
          Util_1.Util.warn("The stage has " + length + " layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.");
        }
        layer.setSize({ width: this.width(), height: this.height() });
        layer.draw();
        if (Global_1.Konva.isBrowser) {
          this.content.appendChild(layer.canvas._canvas);
        }
        return this;
      }
      getParent() {
        return null;
      }
      getLayer() {
        return null;
      }
      hasPointerCapture(pointerId) {
        return PointerEvents.hasPointerCapture(pointerId, this);
      }
      setPointerCapture(pointerId) {
        PointerEvents.setPointerCapture(pointerId, this);
      }
      releaseCapture(pointerId) {
        PointerEvents.releaseCapture(pointerId, this);
      }
      getLayers() {
        return this.children;
      }
      _bindContentEvents() {
        if (!Global_1.Konva.isBrowser) {
          return;
        }
        EVENTS2.forEach(([event, methodName]) => {
          this.content.addEventListener(event, (evt) => {
            this[methodName](evt);
          }, { passive: false });
        });
      }
      _pointerenter(evt) {
        this.setPointersPositions(evt);
        const events = getEventsMap(evt.type);
        if (events) {
          this._fire(events.pointerenter, {
            evt,
            target: this,
            currentTarget: this
          });
        }
      }
      _pointerover(evt) {
        this.setPointersPositions(evt);
        const events = getEventsMap(evt.type);
        if (events) {
          this._fire(events.pointerover, {
            evt,
            target: this,
            currentTarget: this
          });
        }
      }
      _getTargetShape(evenType) {
        let shape = this[evenType + "targetShape"];
        if (shape && !shape.getStage()) {
          shape = null;
        }
        return shape;
      }
      _pointerleave(evt) {
        const events = getEventsMap(evt.type);
        const eventType = getEventType(evt.type);
        if (!events) {
          return;
        }
        this.setPointersPositions(evt);
        const targetShape = this._getTargetShape(eventType);
        const eventsEnabled = !(Global_1.Konva.isDragging() || Global_1.Konva.isTransforming()) || Global_1.Konva.hitOnDragEnabled;
        if (targetShape && eventsEnabled) {
          targetShape._fireAndBubble(events.pointerout, { evt });
          targetShape._fireAndBubble(events.pointerleave, { evt });
          this._fire(events.pointerleave, {
            evt,
            target: this,
            currentTarget: this
          });
          this[eventType + "targetShape"] = null;
        } else if (eventsEnabled) {
          this._fire(events.pointerleave, {
            evt,
            target: this,
            currentTarget: this
          });
          this._fire(events.pointerout, {
            evt,
            target: this,
            currentTarget: this
          });
        }
        this.pointerPos = null;
        this._pointerPositions = [];
      }
      _pointerdown(evt) {
        const events = getEventsMap(evt.type);
        const eventType = getEventType(evt.type);
        if (!events) {
          return;
        }
        this.setPointersPositions(evt);
        let triggeredOnShape = false;
        this._changedPointerPositions.forEach((pos) => {
          const shape = this.getIntersection(pos);
          DragAndDrop_1.DD.justDragged = false;
          Global_1.Konva["_" + eventType + "ListenClick"] = true;
          if (!shape || !shape.isListening()) {
            this[eventType + "ClickStartShape"] = void 0;
            return;
          }
          if (Global_1.Konva.capturePointerEventsEnabled) {
            shape.setPointerCapture(pos.id);
          }
          this[eventType + "ClickStartShape"] = shape;
          shape._fireAndBubble(events.pointerdown, {
            evt,
            pointerId: pos.id
          });
          triggeredOnShape = true;
          const isTouch = evt.type.indexOf("touch") >= 0;
          if (shape.preventDefault() && evt.cancelable && isTouch) {
            evt.preventDefault();
          }
        });
        if (!triggeredOnShape) {
          this._fire(events.pointerdown, {
            evt,
            target: this,
            currentTarget: this,
            pointerId: this._pointerPositions[0].id
          });
        }
      }
      _pointermove(evt) {
        const events = getEventsMap(evt.type);
        const eventType = getEventType(evt.type);
        if (!events) {
          return;
        }
        if (Global_1.Konva.isDragging() && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {
          evt.preventDefault();
        }
        this.setPointersPositions(evt);
        const eventsEnabled = !(Global_1.Konva.isDragging() || Global_1.Konva.isTransforming()) || Global_1.Konva.hitOnDragEnabled;
        if (!eventsEnabled) {
          return;
        }
        const processedShapesIds = {};
        let triggeredOnShape = false;
        const targetShape = this._getTargetShape(eventType);
        this._changedPointerPositions.forEach((pos) => {
          const shape = PointerEvents.getCapturedShape(pos.id) || this.getIntersection(pos);
          const pointerId = pos.id;
          const event = { evt, pointerId };
          const differentTarget = targetShape !== shape;
          if (differentTarget && targetShape) {
            targetShape._fireAndBubble(events.pointerout, { ...event }, shape);
            targetShape._fireAndBubble(events.pointerleave, { ...event }, shape);
          }
          if (shape) {
            if (processedShapesIds[shape._id]) {
              return;
            }
            processedShapesIds[shape._id] = true;
          }
          if (shape && shape.isListening()) {
            triggeredOnShape = true;
            if (differentTarget) {
              shape._fireAndBubble(events.pointerover, { ...event }, targetShape);
              shape._fireAndBubble(events.pointerenter, { ...event }, targetShape);
              this[eventType + "targetShape"] = shape;
            }
            shape._fireAndBubble(events.pointermove, { ...event });
          } else {
            if (targetShape) {
              this._fire(events.pointerover, {
                evt,
                target: this,
                currentTarget: this,
                pointerId
              });
              this[eventType + "targetShape"] = null;
            }
          }
        });
        if (!triggeredOnShape) {
          this._fire(events.pointermove, {
            evt,
            target: this,
            currentTarget: this,
            pointerId: this._changedPointerPositions[0].id
          });
        }
      }
      _pointerup(evt) {
        const events = getEventsMap(evt.type);
        const eventType = getEventType(evt.type);
        if (!events) {
          return;
        }
        this.setPointersPositions(evt);
        const clickStartShape = this[eventType + "ClickStartShape"];
        const clickEndShape = this[eventType + "ClickEndShape"];
        const processedShapesIds = {};
        let triggeredOnShape = false;
        this._changedPointerPositions.forEach((pos) => {
          const shape = PointerEvents.getCapturedShape(pos.id) || this.getIntersection(pos);
          if (shape) {
            shape.releaseCapture(pos.id);
            if (processedShapesIds[shape._id]) {
              return;
            }
            processedShapesIds[shape._id] = true;
          }
          const pointerId = pos.id;
          const event = { evt, pointerId };
          let fireDblClick = false;
          if (Global_1.Konva["_" + eventType + "InDblClickWindow"]) {
            fireDblClick = true;
            clearTimeout(this[eventType + "DblTimeout"]);
          } else if (!DragAndDrop_1.DD.justDragged) {
            Global_1.Konva["_" + eventType + "InDblClickWindow"] = true;
            clearTimeout(this[eventType + "DblTimeout"]);
          }
          this[eventType + "DblTimeout"] = setTimeout(function() {
            Global_1.Konva["_" + eventType + "InDblClickWindow"] = false;
          }, Global_1.Konva.dblClickWindow);
          if (shape && shape.isListening()) {
            triggeredOnShape = true;
            this[eventType + "ClickEndShape"] = shape;
            shape._fireAndBubble(events.pointerup, { ...event });
            if (Global_1.Konva["_" + eventType + "ListenClick"] && clickStartShape && clickStartShape === shape) {
              shape._fireAndBubble(events.pointerclick, { ...event });
              if (fireDblClick && clickEndShape && clickEndShape === shape) {
                shape._fireAndBubble(events.pointerdblclick, { ...event });
              }
            }
          } else {
            this[eventType + "ClickEndShape"] = null;
            if (Global_1.Konva["_" + eventType + "ListenClick"]) {
              this._fire(events.pointerclick, {
                evt,
                target: this,
                currentTarget: this,
                pointerId
              });
            }
            if (fireDblClick) {
              this._fire(events.pointerdblclick, {
                evt,
                target: this,
                currentTarget: this,
                pointerId
              });
            }
          }
        });
        if (!triggeredOnShape) {
          this._fire(events.pointerup, {
            evt,
            target: this,
            currentTarget: this,
            pointerId: this._changedPointerPositions[0].id
          });
        }
        Global_1.Konva["_" + eventType + "ListenClick"] = false;
        if (evt.cancelable && eventType !== "touch" && eventType !== "pointer") {
          evt.preventDefault();
        }
      }
      _contextmenu(evt) {
        this.setPointersPositions(evt);
        const shape = this.getIntersection(this.getPointerPosition());
        if (shape && shape.isListening()) {
          shape._fireAndBubble(CONTEXTMENU, { evt });
        } else {
          this._fire(CONTEXTMENU, {
            evt,
            target: this,
            currentTarget: this
          });
        }
      }
      _wheel(evt) {
        this.setPointersPositions(evt);
        const shape = this.getIntersection(this.getPointerPosition());
        if (shape && shape.isListening()) {
          shape._fireAndBubble(WHEEL, { evt });
        } else {
          this._fire(WHEEL, {
            evt,
            target: this,
            currentTarget: this
          });
        }
      }
      _pointercancel(evt) {
        this.setPointersPositions(evt);
        const shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());
        if (shape) {
          shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));
        }
        PointerEvents.releaseCapture(evt.pointerId);
      }
      _lostpointercapture(evt) {
        PointerEvents.releaseCapture(evt.pointerId);
      }
      setPointersPositions(evt) {
        const contentPosition = this._getContentPosition();
        let x = null, y = null;
        evt = evt ? evt : window.event;
        if (evt.touches !== void 0) {
          this._pointerPositions = [];
          this._changedPointerPositions = [];
          Array.prototype.forEach.call(evt.touches, (touch) => {
            this._pointerPositions.push({
              id: touch.identifier,
              x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,
              y: (touch.clientY - contentPosition.top) / contentPosition.scaleY
            });
          });
          Array.prototype.forEach.call(evt.changedTouches || evt.touches, (touch) => {
            this._changedPointerPositions.push({
              id: touch.identifier,
              x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,
              y: (touch.clientY - contentPosition.top) / contentPosition.scaleY
            });
          });
        } else {
          x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;
          y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;
          this.pointerPos = {
            x,
            y
          };
          this._pointerPositions = [{ x, y, id: Util_1.Util._getFirstPointerId(evt) }];
          this._changedPointerPositions = [
            { x, y, id: Util_1.Util._getFirstPointerId(evt) }
          ];
        }
      }
      _setPointerPosition(evt) {
        Util_1.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.');
        this.setPointersPositions(evt);
      }
      _getContentPosition() {
        if (!this.content || !this.content.getBoundingClientRect) {
          return {
            top: 0,
            left: 0,
            scaleX: 1,
            scaleY: 1
          };
        }
        const rect = this.content.getBoundingClientRect();
        return {
          top: rect.top,
          left: rect.left,
          scaleX: rect.width / this.content.clientWidth || 1,
          scaleY: rect.height / this.content.clientHeight || 1
        };
      }
      _buildDOM() {
        this.bufferCanvas = new Canvas_1.SceneCanvas({
          width: this.width(),
          height: this.height()
        });
        this.bufferHitCanvas = new Canvas_1.HitCanvas({
          pixelRatio: 1,
          width: this.width(),
          height: this.height()
        });
        if (!Global_1.Konva.isBrowser) {
          return;
        }
        const container = this.container();
        if (!container) {
          throw "Stage has no container. A container is required.";
        }
        container.innerHTML = "";
        this.content = document.createElement("div");
        this.content.style.position = "relative";
        this.content.style.userSelect = "none";
        this.content.className = "konvajs-content";
        this.content.setAttribute("role", "presentation");
        container.appendChild(this.content);
        this._resizeDOM();
      }
      cache() {
        Util_1.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.");
        return this;
      }
      clearCache() {
        return this;
      }
      batchDraw() {
        this.getChildren().forEach(function(layer) {
          layer.batchDraw();
        });
        return this;
      }
    };
    exports.Stage = Stage2;
    Stage2.prototype.nodeType = STAGE;
    (0, Global_2._registerNode)(Stage2);
    Factory_1.Factory.addGetterSetter(Stage2, "container");
    if (Global_1.Konva.isBrowser) {
      document.addEventListener("visibilitychange", () => {
        exports.stages.forEach((stage) => {
          stage.batchDraw();
        });
      });
    }
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Shape.js
var require_Shape = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Shape.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Shape = exports.shapes = void 0;
    var Global_1 = require_Global();
    var Util_1 = require_Util();
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Global_2 = require_Global();
    var PointerEvents = require_PointerEvents();
    var HAS_SHADOW = "hasShadow";
    var SHADOW_RGBA = "shadowRGBA";
    var patternImage = "patternImage";
    var linearGradient = "linearGradient";
    var radialGradient = "radialGradient";
    var dummyContext2;
    function getDummyContext2() {
      if (dummyContext2) {
        return dummyContext2;
      }
      dummyContext2 = Util_1.Util.createCanvasElement().getContext("2d");
      return dummyContext2;
    }
    exports.shapes = {};
    function _fillFunc(context) {
      const fillRule = this.attrs.fillRule;
      if (fillRule) {
        context.fill(fillRule);
      } else {
        context.fill();
      }
    }
    function _strokeFunc(context) {
      context.stroke();
    }
    function _fillFuncHit(context) {
      const fillRule = this.attrs.fillRule;
      if (fillRule) {
        context.fill(fillRule);
      } else {
        context.fill();
      }
    }
    function _strokeFuncHit(context) {
      context.stroke();
    }
    function _clearHasShadowCache() {
      this._clearCache(HAS_SHADOW);
    }
    function _clearGetShadowRGBACache() {
      this._clearCache(SHADOW_RGBA);
    }
    function _clearFillPatternCache() {
      this._clearCache(patternImage);
    }
    function _clearLinearGradientCache() {
      this._clearCache(linearGradient);
    }
    function _clearRadialGradientCache() {
      this._clearCache(radialGradient);
    }
    var Shape2 = class extends Node_1.Node {
      constructor(config) {
        super(config);
        let key;
        while (true) {
          key = Util_1.Util.getRandomColor();
          if (key && !(key in exports.shapes)) {
            break;
          }
        }
        this.colorKey = key;
        exports.shapes[key] = this;
      }
      getContext() {
        Util_1.Util.warn("shape.getContext() method is deprecated. Please do not use it.");
        return this.getLayer().getContext();
      }
      getCanvas() {
        Util_1.Util.warn("shape.getCanvas() method is deprecated. Please do not use it.");
        return this.getLayer().getCanvas();
      }
      getSceneFunc() {
        return this.attrs.sceneFunc || this["_sceneFunc"];
      }
      getHitFunc() {
        return this.attrs.hitFunc || this["_hitFunc"];
      }
      hasShadow() {
        return this._getCache(HAS_SHADOW, this._hasShadow);
      }
      _hasShadow() {
        return this.shadowEnabled() && this.shadowOpacity() !== 0 && !!(this.shadowColor() || this.shadowBlur() || this.shadowOffsetX() || this.shadowOffsetY());
      }
      _getFillPattern() {
        return this._getCache(patternImage, this.__getFillPattern);
      }
      __getFillPattern() {
        if (this.fillPatternImage()) {
          const ctx = getDummyContext2();
          const pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || "repeat");
          if (pattern && pattern.setTransform) {
            const tr = new Util_1.Transform();
            tr.translate(this.fillPatternX(), this.fillPatternY());
            tr.rotate(Global_1.Konva.getAngle(this.fillPatternRotation()));
            tr.scale(this.fillPatternScaleX(), this.fillPatternScaleY());
            tr.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());
            const m = tr.getMatrix();
            const matrix = typeof DOMMatrix === "undefined" ? {
              a: m[0],
              b: m[1],
              c: m[2],
              d: m[3],
              e: m[4],
              f: m[5]
            } : new DOMMatrix(m);
            pattern.setTransform(matrix);
          }
          return pattern;
        }
      }
      _getLinearGradient() {
        return this._getCache(linearGradient, this.__getLinearGradient);
      }
      __getLinearGradient() {
        const colorStops = this.fillLinearGradientColorStops();
        if (colorStops) {
          const ctx = getDummyContext2();
          const start = this.fillLinearGradientStartPoint();
          const end = this.fillLinearGradientEndPoint();
          const grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);
          for (let n = 0; n < colorStops.length; n += 2) {
            grd.addColorStop(colorStops[n], colorStops[n + 1]);
          }
          return grd;
        }
      }
      _getRadialGradient() {
        return this._getCache(radialGradient, this.__getRadialGradient);
      }
      __getRadialGradient() {
        const colorStops = this.fillRadialGradientColorStops();
        if (colorStops) {
          const ctx = getDummyContext2();
          const start = this.fillRadialGradientStartPoint();
          const end = this.fillRadialGradientEndPoint();
          const grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());
          for (let n = 0; n < colorStops.length; n += 2) {
            grd.addColorStop(colorStops[n], colorStops[n + 1]);
          }
          return grd;
        }
      }
      getShadowRGBA() {
        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);
      }
      _getShadowRGBA() {
        if (!this.hasShadow()) {
          return;
        }
        const rgba = Util_1.Util.colorToRGBA(this.shadowColor());
        if (rgba) {
          return "rgba(" + rgba.r + "," + rgba.g + "," + rgba.b + "," + rgba.a * (this.shadowOpacity() || 1) + ")";
        }
      }
      hasFill() {
        return this._calculate("hasFill", [
          "fillEnabled",
          "fill",
          "fillPatternImage",
          "fillLinearGradientColorStops",
          "fillRadialGradientColorStops"
        ], () => {
          return this.fillEnabled() && !!(this.fill() || this.fillPatternImage() || this.fillLinearGradientColorStops() || this.fillRadialGradientColorStops());
        });
      }
      hasStroke() {
        return this._calculate("hasStroke", [
          "strokeEnabled",
          "strokeWidth",
          "stroke",
          "strokeLinearGradientColorStops"
        ], () => {
          return this.strokeEnabled() && this.strokeWidth() && !!(this.stroke() || this.strokeLinearGradientColorStops());
        });
      }
      hasHitStroke() {
        const width = this.hitStrokeWidth();
        if (width === "auto") {
          return this.hasStroke();
        }
        return this.strokeEnabled() && !!width;
      }
      intersects(point) {
        const stage = this.getStage();
        if (!stage) {
          return false;
        }
        const bufferHitCanvas = stage.bufferHitCanvas;
        bufferHitCanvas.getContext().clear();
        this.drawHit(bufferHitCanvas, void 0, true);
        const p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;
        return p[3] > 0;
      }
      destroy() {
        Node_1.Node.prototype.destroy.call(this);
        delete exports.shapes[this.colorKey];
        delete this.colorKey;
        return this;
      }
      _useBufferCanvas(forceFill) {
        var _a;
        const perfectDrawEnabled = (_a = this.attrs.perfectDrawEnabled) !== null && _a !== void 0 ? _a : true;
        if (!perfectDrawEnabled) {
          return false;
        }
        const hasFill = forceFill || this.hasFill();
        const hasStroke = this.hasStroke();
        const isTransparent = this.getAbsoluteOpacity() !== 1;
        if (hasFill && hasStroke && isTransparent) {
          return true;
        }
        const hasShadow = this.hasShadow();
        const strokeForShadow = this.shadowForStrokeEnabled();
        if (hasFill && hasStroke && hasShadow && strokeForShadow) {
          return true;
        }
        return false;
      }
      setStrokeHitEnabled(val) {
        Util_1.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.");
        if (val) {
          this.hitStrokeWidth("auto");
        } else {
          this.hitStrokeWidth(0);
        }
      }
      getStrokeHitEnabled() {
        if (this.hitStrokeWidth() === 0) {
          return false;
        } else {
          return true;
        }
      }
      getSelfRect() {
        const size = this.size();
        return {
          x: this._centroid ? -size.width / 2 : 0,
          y: this._centroid ? -size.height / 2 : 0,
          width: size.width,
          height: size.height
        };
      }
      getClientRect(config = {}) {
        let hasCachedParent = false;
        let parent = this.getParent();
        while (parent) {
          if (parent.isCached()) {
            hasCachedParent = true;
            break;
          }
          parent = parent.getParent();
        }
        const skipTransform = config.skipTransform;
        const relativeTo = config.relativeTo || hasCachedParent && this.getStage() || void 0;
        const fillRect = this.getSelfRect();
        const applyStroke = !config.skipStroke && this.hasStroke();
        const strokeWidth = applyStroke && this.strokeWidth() || 0;
        const fillAndStrokeWidth = fillRect.width + strokeWidth;
        const fillAndStrokeHeight = fillRect.height + strokeWidth;
        const applyShadow = !config.skipShadow && this.hasShadow();
        const shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;
        const shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;
        const preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);
        const preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);
        const blurRadius = applyShadow && this.shadowBlur() || 0;
        const width = preWidth + blurRadius * 2;
        const height = preHeight + blurRadius * 2;
        const rect = {
          width,
          height,
          x: -(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetX, 0) + fillRect.x,
          y: -(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetY, 0) + fillRect.y
        };
        if (!skipTransform) {
          return this._transformedRect(rect, relativeTo);
        }
        return rect;
      }
      drawScene(can, top, bufferCanvas) {
        const layer = this.getLayer();
        let canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.getSceneFunc(), hasShadow = this.hasShadow(), stage, bufferContext;
        const skipBuffer = canvas.isCache;
        const cachingSelf = top === this;
        if (!this.isVisible() && !cachingSelf) {
          return this;
        }
        if (cachedCanvas) {
          context.save();
          const m = this.getAbsoluteTransform(top).getMatrix();
          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
          this._drawCachedSceneCanvas(context);
          context.restore();
          return this;
        }
        if (!drawFunc) {
          return this;
        }
        context.save();
        if (this._useBufferCanvas() && !skipBuffer) {
          stage = this.getStage();
          const bc = bufferCanvas || stage.bufferCanvas;
          bufferContext = bc.getContext();
          bufferContext.clear();
          bufferContext.save();
          bufferContext._applyLineJoin(this);
          var o = this.getAbsoluteTransform(top).getMatrix();
          bufferContext.transform(o[0], o[1], o[2], o[3], o[4], o[5]);
          drawFunc.call(this, bufferContext, this);
          bufferContext.restore();
          const ratio = bc.pixelRatio;
          if (hasShadow) {
            context._applyShadow(this);
          }
          context._applyOpacity(this);
          context._applyGlobalCompositeOperation(this);
          context.drawImage(bc._canvas, 0, 0, bc.width / ratio, bc.height / ratio);
        } else {
          context._applyLineJoin(this);
          if (!cachingSelf) {
            var o = this.getAbsoluteTransform(top).getMatrix();
            context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);
            context._applyOpacity(this);
            context._applyGlobalCompositeOperation(this);
          }
          if (hasShadow) {
            context._applyShadow(this);
          }
          drawFunc.call(this, context, this);
        }
        context.restore();
        return this;
      }
      drawHit(can, top, skipDragCheck = false) {
        if (!this.shouldDrawHit(top, skipDragCheck)) {
          return this;
        }
        const layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;
        if (!this.colorKey) {
          Util_1.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()");
        }
        if (cachedHitCanvas) {
          context.save();
          const m = this.getAbsoluteTransform(top).getMatrix();
          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
          this._drawCachedHitCanvas(context);
          context.restore();
          return this;
        }
        if (!drawFunc) {
          return this;
        }
        context.save();
        context._applyLineJoin(this);
        const selfCache = this === top;
        if (!selfCache) {
          const o = this.getAbsoluteTransform(top).getMatrix();
          context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);
        }
        drawFunc.call(this, context, this);
        context.restore();
        return this;
      }
      drawHitFromCache(alphaThreshold = 0) {
        const cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight();
        hitContext.clear();
        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);
        try {
          const hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);
          const hitData = hitImageData.data;
          const len = hitData.length;
          const rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);
          for (let i = 0; i < len; i += 4) {
            const alpha = hitData[i + 3];
            if (alpha > alphaThreshold) {
              hitData[i] = rgbColorKey.r;
              hitData[i + 1] = rgbColorKey.g;
              hitData[i + 2] = rgbColorKey.b;
              hitData[i + 3] = 255;
            } else {
              hitData[i + 3] = 0;
            }
          }
          hitContext.putImageData(hitImageData, 0, 0);
        } catch (e) {
          Util_1.Util.error("Unable to draw hit graph from cached scene canvas. " + e.message);
        }
        return this;
      }
      hasPointerCapture(pointerId) {
        return PointerEvents.hasPointerCapture(pointerId, this);
      }
      setPointerCapture(pointerId) {
        PointerEvents.setPointerCapture(pointerId, this);
      }
      releaseCapture(pointerId) {
        PointerEvents.releaseCapture(pointerId, this);
      }
    };
    exports.Shape = Shape2;
    Shape2.prototype._fillFunc = _fillFunc;
    Shape2.prototype._strokeFunc = _strokeFunc;
    Shape2.prototype._fillFuncHit = _fillFuncHit;
    Shape2.prototype._strokeFuncHit = _strokeFuncHit;
    Shape2.prototype._centroid = false;
    Shape2.prototype.nodeType = "Shape";
    (0, Global_2._registerNode)(Shape2);
    Shape2.prototype.eventListeners = {};
    Shape2.prototype.on.call(Shape2.prototype, "shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva", _clearHasShadowCache);
    Shape2.prototype.on.call(Shape2.prototype, "shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva", _clearGetShadowRGBACache);
    Shape2.prototype.on.call(Shape2.prototype, "fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva", _clearFillPatternCache);
    Shape2.prototype.on.call(Shape2.prototype, "fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva", _clearLinearGradientCache);
    Shape2.prototype.on.call(Shape2.prototype, "fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva", _clearRadialGradientCache);
    Factory_1.Factory.addGetterSetter(Shape2, "stroke", void 0, (0, Validators_1.getStringOrGradientValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "strokeWidth", 2, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "fillAfterStrokeEnabled", false);
    Factory_1.Factory.addGetterSetter(Shape2, "hitStrokeWidth", "auto", (0, Validators_1.getNumberOrAutoValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "strokeHitEnabled", true, (0, Validators_1.getBooleanValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "perfectDrawEnabled", true, (0, Validators_1.getBooleanValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "shadowForStrokeEnabled", true, (0, Validators_1.getBooleanValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "lineJoin");
    Factory_1.Factory.addGetterSetter(Shape2, "lineCap");
    Factory_1.Factory.addGetterSetter(Shape2, "sceneFunc");
    Factory_1.Factory.addGetterSetter(Shape2, "hitFunc");
    Factory_1.Factory.addGetterSetter(Shape2, "dash");
    Factory_1.Factory.addGetterSetter(Shape2, "dashOffset", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "shadowColor", void 0, (0, Validators_1.getStringValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "shadowBlur", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "shadowOpacity", 1, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "shadowOffset", ["x", "y"]);
    Factory_1.Factory.addGetterSetter(Shape2, "shadowOffsetX", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "shadowOffsetY", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternImage");
    Factory_1.Factory.addGetterSetter(Shape2, "fill", void 0, (0, Validators_1.getStringOrGradientValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternX", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternY", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "fillLinearGradientColorStops");
    Factory_1.Factory.addGetterSetter(Shape2, "strokeLinearGradientColorStops");
    Factory_1.Factory.addGetterSetter(Shape2, "fillRadialGradientStartRadius", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillRadialGradientEndRadius", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillRadialGradientColorStops");
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternRepeat", "repeat");
    Factory_1.Factory.addGetterSetter(Shape2, "fillEnabled", true);
    Factory_1.Factory.addGetterSetter(Shape2, "strokeEnabled", true);
    Factory_1.Factory.addGetterSetter(Shape2, "shadowEnabled", true);
    Factory_1.Factory.addGetterSetter(Shape2, "dashEnabled", true);
    Factory_1.Factory.addGetterSetter(Shape2, "strokeScaleEnabled", true);
    Factory_1.Factory.addGetterSetter(Shape2, "fillPriority", "color");
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "fillPatternOffset", ["x", "y"]);
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternOffsetX", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternOffsetY", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "fillPatternScale", ["x", "y"]);
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternScaleX", 1, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternScaleY", 1, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "fillLinearGradientStartPoint", [
      "x",
      "y"
    ]);
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "strokeLinearGradientStartPoint", [
      "x",
      "y"
    ]);
    Factory_1.Factory.addGetterSetter(Shape2, "fillLinearGradientStartPointX", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "strokeLinearGradientStartPointX", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillLinearGradientStartPointY", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "strokeLinearGradientStartPointY", 0);
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "fillLinearGradientEndPoint", [
      "x",
      "y"
    ]);
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "strokeLinearGradientEndPoint", [
      "x",
      "y"
    ]);
    Factory_1.Factory.addGetterSetter(Shape2, "fillLinearGradientEndPointX", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "strokeLinearGradientEndPointX", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillLinearGradientEndPointY", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "strokeLinearGradientEndPointY", 0);
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "fillRadialGradientStartPoint", [
      "x",
      "y"
    ]);
    Factory_1.Factory.addGetterSetter(Shape2, "fillRadialGradientStartPointX", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillRadialGradientStartPointY", 0);
    Factory_1.Factory.addComponentsGetterSetter(Shape2, "fillRadialGradientEndPoint", [
      "x",
      "y"
    ]);
    Factory_1.Factory.addGetterSetter(Shape2, "fillRadialGradientEndPointX", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillRadialGradientEndPointY", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillPatternRotation", 0);
    Factory_1.Factory.addGetterSetter(Shape2, "fillRule", void 0, (0, Validators_1.getStringValidator)());
    Factory_1.Factory.backCompat(Shape2, {
      dashArray: "dash",
      getDashArray: "getDash",
      setDashArray: "getDash",
      drawFunc: "sceneFunc",
      getDrawFunc: "getSceneFunc",
      setDrawFunc: "setSceneFunc",
      drawHitFunc: "hitFunc",
      getDrawHitFunc: "getHitFunc",
      setDrawHitFunc: "setHitFunc"
    });
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Layer.js
var require_Layer = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Layer.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Layer = void 0;
    var Util_1 = require_Util();
    var Container_1 = require_Container();
    var Node_1 = require_Node();
    var Factory_1 = require_Factory();
    var Canvas_1 = require_Canvas();
    var Validators_1 = require_Validators();
    var Shape_1 = require_Shape();
    var Global_1 = require_Global();
    var HASH = "#";
    var BEFORE_DRAW = "beforeDraw";
    var DRAW = "draw";
    var INTERSECTION_OFFSETS = [
      { x: 0, y: 0 },
      { x: -1, y: -1 },
      { x: 1, y: -1 },
      { x: 1, y: 1 },
      { x: -1, y: 1 }
    ];
    var INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;
    var Layer2 = class extends Container_1.Container {
      constructor(config) {
        super(config);
        this.canvas = new Canvas_1.SceneCanvas();
        this.hitCanvas = new Canvas_1.HitCanvas({
          pixelRatio: 1
        });
        this._waitingForDraw = false;
        this.on("visibleChange.konva", this._checkVisibility);
        this._checkVisibility();
        this.on("imageSmoothingEnabledChange.konva", this._setSmoothEnabled);
        this._setSmoothEnabled();
      }
      createPNGStream() {
        const c = this.canvas._canvas;
        return c.createPNGStream();
      }
      getCanvas() {
        return this.canvas;
      }
      getNativeCanvasElement() {
        return this.canvas._canvas;
      }
      getHitCanvas() {
        return this.hitCanvas;
      }
      getContext() {
        return this.getCanvas().getContext();
      }
      clear(bounds) {
        this.getContext().clear(bounds);
        this.getHitCanvas().getContext().clear(bounds);
        return this;
      }
      setZIndex(index) {
        super.setZIndex(index);
        const stage = this.getStage();
        if (stage && stage.content) {
          stage.content.removeChild(this.getNativeCanvasElement());
          if (index < stage.children.length - 1) {
            stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);
          } else {
            stage.content.appendChild(this.getNativeCanvasElement());
          }
        }
        return this;
      }
      moveToTop() {
        Node_1.Node.prototype.moveToTop.call(this);
        const stage = this.getStage();
        if (stage && stage.content) {
          stage.content.removeChild(this.getNativeCanvasElement());
          stage.content.appendChild(this.getNativeCanvasElement());
        }
        return true;
      }
      moveUp() {
        const moved = Node_1.Node.prototype.moveUp.call(this);
        if (!moved) {
          return false;
        }
        const stage = this.getStage();
        if (!stage || !stage.content) {
          return false;
        }
        stage.content.removeChild(this.getNativeCanvasElement());
        if (this.index < stage.children.length - 1) {
          stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);
        } else {
          stage.content.appendChild(this.getNativeCanvasElement());
        }
        return true;
      }
      moveDown() {
        if (Node_1.Node.prototype.moveDown.call(this)) {
          const stage = this.getStage();
          if (stage) {
            const children = stage.children;
            if (stage.content) {
              stage.content.removeChild(this.getNativeCanvasElement());
              stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);
            }
          }
          return true;
        }
        return false;
      }
      moveToBottom() {
        if (Node_1.Node.prototype.moveToBottom.call(this)) {
          const stage = this.getStage();
          if (stage) {
            const children = stage.children;
            if (stage.content) {
              stage.content.removeChild(this.getNativeCanvasElement());
              stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);
            }
          }
          return true;
        }
        return false;
      }
      getLayer() {
        return this;
      }
      remove() {
        const _canvas = this.getNativeCanvasElement();
        Node_1.Node.prototype.remove.call(this);
        if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {
          _canvas.parentNode.removeChild(_canvas);
        }
        return this;
      }
      getStage() {
        return this.parent;
      }
      setSize({ width, height }) {
        this.canvas.setSize(width, height);
        this.hitCanvas.setSize(width, height);
        this._setSmoothEnabled();
        return this;
      }
      _validateAdd(child) {
        const type = child.getType();
        if (type !== "Group" && type !== "Shape") {
          Util_1.Util.throw("You may only add groups and shapes to a layer.");
        }
      }
      _toKonvaCanvas(config) {
        config = config || {};
        config.width = config.width || this.getWidth();
        config.height = config.height || this.getHeight();
        config.x = config.x !== void 0 ? config.x : this.x();
        config.y = config.y !== void 0 ? config.y : this.y();
        return Node_1.Node.prototype._toKonvaCanvas.call(this, config);
      }
      _checkVisibility() {
        const visible = this.visible();
        if (visible) {
          this.canvas._canvas.style.display = "block";
        } else {
          this.canvas._canvas.style.display = "none";
        }
      }
      _setSmoothEnabled() {
        this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();
      }
      getWidth() {
        if (this.parent) {
          return this.parent.width();
        }
      }
      setWidth() {
        Util_1.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.');
      }
      getHeight() {
        if (this.parent) {
          return this.parent.height();
        }
      }
      setHeight() {
        Util_1.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.');
      }
      batchDraw() {
        if (!this._waitingForDraw) {
          this._waitingForDraw = true;
          Util_1.Util.requestAnimFrame(() => {
            this.draw();
            this._waitingForDraw = false;
          });
        }
        return this;
      }
      getIntersection(pos) {
        if (!this.isListening() || !this.isVisible()) {
          return null;
        }
        let spiralSearchDistance = 1;
        let continueSearch = false;
        while (true) {
          for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {
            const intersectionOffset = INTERSECTION_OFFSETS[i];
            const obj = this._getIntersection({
              x: pos.x + intersectionOffset.x * spiralSearchDistance,
              y: pos.y + intersectionOffset.y * spiralSearchDistance
            });
            const shape = obj.shape;
            if (shape) {
              return shape;
            }
            continueSearch = !!obj.antialiased;
            if (!obj.antialiased) {
              break;
            }
          }
          if (continueSearch) {
            spiralSearchDistance += 1;
          } else {
            return null;
          }
        }
      }
      _getIntersection(pos) {
        const ratio = this.hitCanvas.pixelRatio;
        const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;
        const p3 = p[3];
        if (p3 === 255) {
          const colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);
          const shape = Shape_1.shapes[HASH + colorKey];
          if (shape) {
            return {
              shape
            };
          }
          return {
            antialiased: true
          };
        } else if (p3 > 0) {
          return {
            antialiased: true
          };
        }
        return {};
      }
      drawScene(can, top) {
        const layer = this.getLayer(), canvas = can || layer && layer.getCanvas();
        this._fire(BEFORE_DRAW, {
          node: this
        });
        if (this.clearBeforeDraw()) {
          canvas.getContext().clear();
        }
        Container_1.Container.prototype.drawScene.call(this, canvas, top);
        this._fire(DRAW, {
          node: this
        });
        return this;
      }
      drawHit(can, top) {
        const layer = this.getLayer(), canvas = can || layer && layer.hitCanvas;
        if (layer && layer.clearBeforeDraw()) {
          layer.getHitCanvas().getContext().clear();
        }
        Container_1.Container.prototype.drawHit.call(this, canvas, top);
        return this;
      }
      enableHitGraph() {
        this.hitGraphEnabled(true);
        return this;
      }
      disableHitGraph() {
        this.hitGraphEnabled(false);
        return this;
      }
      setHitGraphEnabled(val) {
        Util_1.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead.");
        this.listening(val);
      }
      getHitGraphEnabled(val) {
        Util_1.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead.");
        return this.listening();
      }
      toggleHitCanvas() {
        if (!this.parent || !this.parent["content"]) {
          return;
        }
        const parent = this.parent;
        const added = !!this.hitCanvas._canvas.parentNode;
        if (added) {
          parent.content.removeChild(this.hitCanvas._canvas);
        } else {
          parent.content.appendChild(this.hitCanvas._canvas);
        }
      }
      destroy() {
        Util_1.Util.releaseCanvas(this.getNativeCanvasElement(), this.getHitCanvas()._canvas);
        return super.destroy();
      }
    };
    exports.Layer = Layer2;
    Layer2.prototype.nodeType = "Layer";
    (0, Global_1._registerNode)(Layer2);
    Factory_1.Factory.addGetterSetter(Layer2, "imageSmoothingEnabled", true);
    Factory_1.Factory.addGetterSetter(Layer2, "clearBeforeDraw", true);
    Factory_1.Factory.addGetterSetter(Layer2, "hitGraphEnabled", true, (0, Validators_1.getBooleanValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/FastLayer.js
var require_FastLayer = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/FastLayer.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.FastLayer = void 0;
    var Util_1 = require_Util();
    var Layer_1 = require_Layer();
    var Global_1 = require_Global();
    var FastLayer = class extends Layer_1.Layer {
      constructor(attrs) {
        super(attrs);
        this.listening(false);
        Util_1.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.');
      }
    };
    exports.FastLayer = FastLayer;
    FastLayer.prototype.nodeType = "FastLayer";
    (0, Global_1._registerNode)(FastLayer);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Group.js
var require_Group = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Group.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Group = void 0;
    var Util_1 = require_Util();
    var Container_1 = require_Container();
    var Global_1 = require_Global();
    var Group2 = class extends Container_1.Container {
      _validateAdd(child) {
        const type = child.getType();
        if (type !== "Group" && type !== "Shape") {
          Util_1.Util.throw("You may only add groups and shapes to groups.");
        }
      }
    };
    exports.Group = Group2;
    Group2.prototype.nodeType = "Group";
    (0, Global_1._registerNode)(Group2);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Animation.js
var require_Animation = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Animation.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Animation = void 0;
    var Global_1 = require_Global();
    var Util_1 = require_Util();
    var now = function() {
      if (Global_1.glob.performance && Global_1.glob.performance.now) {
        return function() {
          return Global_1.glob.performance.now();
        };
      }
      return function() {
        return (/* @__PURE__ */ new Date()).getTime();
      };
    }();
    var Animation = class _Animation {
      constructor(func, layers) {
        this.id = _Animation.animIdCounter++;
        this.frame = {
          time: 0,
          timeDiff: 0,
          lastTime: now(),
          frameRate: 0
        };
        this.func = func;
        this.setLayers(layers);
      }
      setLayers(layers) {
        let lays = [];
        if (layers) {
          lays = Array.isArray(layers) ? layers : [layers];
        }
        this.layers = lays;
        return this;
      }
      getLayers() {
        return this.layers;
      }
      addLayer(layer) {
        const layers = this.layers;
        const len = layers.length;
        for (let n = 0; n < len; n++) {
          if (layers[n]._id === layer._id) {
            return false;
          }
        }
        this.layers.push(layer);
        return true;
      }
      isRunning() {
        const a = _Animation;
        const animations = a.animations;
        const len = animations.length;
        for (let n = 0; n < len; n++) {
          if (animations[n].id === this.id) {
            return true;
          }
        }
        return false;
      }
      start() {
        this.stop();
        this.frame.timeDiff = 0;
        this.frame.lastTime = now();
        _Animation._addAnimation(this);
        return this;
      }
      stop() {
        _Animation._removeAnimation(this);
        return this;
      }
      _updateFrameObject(time) {
        this.frame.timeDiff = time - this.frame.lastTime;
        this.frame.lastTime = time;
        this.frame.time += this.frame.timeDiff;
        this.frame.frameRate = 1e3 / this.frame.timeDiff;
      }
      static _addAnimation(anim) {
        this.animations.push(anim);
        this._handleAnimation();
      }
      static _removeAnimation(anim) {
        const id = anim.id;
        const animations = this.animations;
        const len = animations.length;
        for (let n = 0; n < len; n++) {
          if (animations[n].id === id) {
            this.animations.splice(n, 1);
            break;
          }
        }
      }
      static _runFrames() {
        const layerHash = {};
        const animations = this.animations;
        for (let n = 0; n < animations.length; n++) {
          const anim = animations[n];
          const layers = anim.layers;
          const func = anim.func;
          anim._updateFrameObject(now());
          const layersLen = layers.length;
          let needRedraw;
          if (func) {
            needRedraw = func.call(anim, anim.frame) !== false;
          } else {
            needRedraw = true;
          }
          if (!needRedraw) {
            continue;
          }
          for (let i = 0; i < layersLen; i++) {
            const layer = layers[i];
            if (layer._id !== void 0) {
              layerHash[layer._id] = layer;
            }
          }
        }
        for (const key in layerHash) {
          if (!layerHash.hasOwnProperty(key)) {
            continue;
          }
          layerHash[key].batchDraw();
        }
      }
      static _animationLoop() {
        const Anim = _Animation;
        if (Anim.animations.length) {
          Anim._runFrames();
          Util_1.Util.requestAnimFrame(Anim._animationLoop);
        } else {
          Anim.animRunning = false;
        }
      }
      static _handleAnimation() {
        if (!this.animRunning) {
          this.animRunning = true;
          Util_1.Util.requestAnimFrame(this._animationLoop);
        }
      }
    };
    exports.Animation = Animation;
    Animation.animations = [];
    Animation.animIdCounter = 0;
    Animation.animRunning = false;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/Tween.js
var require_Tween = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/Tween.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Easings = exports.Tween = void 0;
    var Util_1 = require_Util();
    var Animation_1 = require_Animation();
    var Node_1 = require_Node();
    var Global_1 = require_Global();
    var blacklist = {
      node: 1,
      duration: 1,
      easing: 1,
      onFinish: 1,
      yoyo: 1
    };
    var PAUSED = 1;
    var PLAYING = 2;
    var REVERSING = 3;
    var colorAttrs = ["fill", "stroke", "shadowColor"];
    var idCounter = 0;
    var TweenEngine = class {
      constructor(prop, propFunc, func, begin, finish, duration, yoyo) {
        this.prop = prop;
        this.propFunc = propFunc;
        this.begin = begin;
        this._pos = begin;
        this.duration = duration;
        this._change = 0;
        this.prevPos = 0;
        this.yoyo = yoyo;
        this._time = 0;
        this._position = 0;
        this._startTime = 0;
        this._finish = 0;
        this.func = func;
        this._change = finish - this.begin;
        this.pause();
      }
      fire(str) {
        const handler = this[str];
        if (handler) {
          handler();
        }
      }
      setTime(t) {
        if (t > this.duration) {
          if (this.yoyo) {
            this._time = this.duration;
            this.reverse();
          } else {
            this.finish();
          }
        } else if (t < 0) {
          if (this.yoyo) {
            this._time = 0;
            this.play();
          } else {
            this.reset();
          }
        } else {
          this._time = t;
          this.update();
        }
      }
      getTime() {
        return this._time;
      }
      setPosition(p) {
        this.prevPos = this._pos;
        this.propFunc(p);
        this._pos = p;
      }
      getPosition(t) {
        if (t === void 0) {
          t = this._time;
        }
        return this.func(t, this.begin, this._change, this.duration);
      }
      play() {
        this.state = PLAYING;
        this._startTime = this.getTimer() - this._time;
        this.onEnterFrame();
        this.fire("onPlay");
      }
      reverse() {
        this.state = REVERSING;
        this._time = this.duration - this._time;
        this._startTime = this.getTimer() - this._time;
        this.onEnterFrame();
        this.fire("onReverse");
      }
      seek(t) {
        this.pause();
        this._time = t;
        this.update();
        this.fire("onSeek");
      }
      reset() {
        this.pause();
        this._time = 0;
        this.update();
        this.fire("onReset");
      }
      finish() {
        this.pause();
        this._time = this.duration;
        this.update();
        this.fire("onFinish");
      }
      update() {
        this.setPosition(this.getPosition(this._time));
        this.fire("onUpdate");
      }
      onEnterFrame() {
        const t = this.getTimer() - this._startTime;
        if (this.state === PLAYING) {
          this.setTime(t);
        } else if (this.state === REVERSING) {
          this.setTime(this.duration - t);
        }
      }
      pause() {
        this.state = PAUSED;
        this.fire("onPause");
      }
      getTimer() {
        return (/* @__PURE__ */ new Date()).getTime();
      }
    };
    var Tween = class _Tween {
      constructor(config) {
        const that = this, node = config.node, nodeId = node._id, easing = config.easing || exports.Easings.Linear, yoyo = !!config.yoyo;
        let duration, key;
        if (typeof config.duration === "undefined") {
          duration = 0.3;
        } else if (config.duration === 0) {
          duration = 1e-3;
        } else {
          duration = config.duration;
        }
        this.node = node;
        this._id = idCounter++;
        const layers = node.getLayer() || (node instanceof Global_1.Konva["Stage"] ? node.getLayers() : null);
        if (!layers) {
          Util_1.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first.");
        }
        this.anim = new Animation_1.Animation(function() {
          that.tween.onEnterFrame();
        }, layers);
        this.tween = new TweenEngine(key, function(i) {
          that._tweenFunc(i);
        }, easing, 0, 1, duration * 1e3, yoyo);
        this._addListeners();
        if (!_Tween.attrs[nodeId]) {
          _Tween.attrs[nodeId] = {};
        }
        if (!_Tween.attrs[nodeId][this._id]) {
          _Tween.attrs[nodeId][this._id] = {};
        }
        if (!_Tween.tweens[nodeId]) {
          _Tween.tweens[nodeId] = {};
        }
        for (key in config) {
          if (blacklist[key] === void 0) {
            this._addAttr(key, config[key]);
          }
        }
        this.reset();
        this.onFinish = config.onFinish;
        this.onReset = config.onReset;
        this.onUpdate = config.onUpdate;
      }
      _addAttr(key, end) {
        const node = this.node, nodeId = node._id;
        let diff, len, trueEnd, trueStart, endRGBA;
        const tweenId = _Tween.tweens[nodeId][key];
        if (tweenId) {
          delete _Tween.attrs[nodeId][tweenId][key];
        }
        let start = node.getAttr(key);
        if (Util_1.Util._isArray(end)) {
          diff = [];
          len = Math.max(end.length, start.length);
          if (key === "points" && end.length !== start.length) {
            if (end.length > start.length) {
              trueStart = start;
              start = Util_1.Util._prepareArrayForTween(start, end, node.closed());
            } else {
              trueEnd = end;
              end = Util_1.Util._prepareArrayForTween(end, start, node.closed());
            }
          }
          if (key.indexOf("fill") === 0) {
            for (let n = 0; n < len; n++) {
              if (n % 2 === 0) {
                diff.push(end[n] - start[n]);
              } else {
                const startRGBA = Util_1.Util.colorToRGBA(start[n]);
                endRGBA = Util_1.Util.colorToRGBA(end[n]);
                start[n] = startRGBA;
                diff.push({
                  r: endRGBA.r - startRGBA.r,
                  g: endRGBA.g - startRGBA.g,
                  b: endRGBA.b - startRGBA.b,
                  a: endRGBA.a - startRGBA.a
                });
              }
            }
          } else {
            for (let n = 0; n < len; n++) {
              diff.push(end[n] - start[n]);
            }
          }
        } else if (colorAttrs.indexOf(key) !== -1) {
          start = Util_1.Util.colorToRGBA(start);
          endRGBA = Util_1.Util.colorToRGBA(end);
          diff = {
            r: endRGBA.r - start.r,
            g: endRGBA.g - start.g,
            b: endRGBA.b - start.b,
            a: endRGBA.a - start.a
          };
        } else {
          diff = end - start;
        }
        _Tween.attrs[nodeId][this._id][key] = {
          start,
          diff,
          end,
          trueEnd,
          trueStart
        };
        _Tween.tweens[nodeId][key] = this._id;
      }
      _tweenFunc(i) {
        const node = this.node, attrs = _Tween.attrs[node._id][this._id];
        let key, attr, start, diff, newVal, n, len, end;
        for (key in attrs) {
          attr = attrs[key];
          start = attr.start;
          diff = attr.diff;
          end = attr.end;
          if (Util_1.Util._isArray(start)) {
            newVal = [];
            len = Math.max(start.length, end.length);
            if (key.indexOf("fill") === 0) {
              for (n = 0; n < len; n++) {
                if (n % 2 === 0) {
                  newVal.push((start[n] || 0) + diff[n] * i);
                } else {
                  newVal.push("rgba(" + Math.round(start[n].r + diff[n].r * i) + "," + Math.round(start[n].g + diff[n].g * i) + "," + Math.round(start[n].b + diff[n].b * i) + "," + (start[n].a + diff[n].a * i) + ")");
                }
              }
            } else {
              for (n = 0; n < len; n++) {
                newVal.push((start[n] || 0) + diff[n] * i);
              }
            }
          } else if (colorAttrs.indexOf(key) !== -1) {
            newVal = "rgba(" + Math.round(start.r + diff.r * i) + "," + Math.round(start.g + diff.g * i) + "," + Math.round(start.b + diff.b * i) + "," + (start.a + diff.a * i) + ")";
          } else {
            newVal = start + diff * i;
          }
          node.setAttr(key, newVal);
        }
      }
      _addListeners() {
        this.tween.onPlay = () => {
          this.anim.start();
        };
        this.tween.onReverse = () => {
          this.anim.start();
        };
        this.tween.onPause = () => {
          this.anim.stop();
        };
        this.tween.onFinish = () => {
          const node = this.node;
          const attrs = _Tween.attrs[node._id][this._id];
          if (attrs.points && attrs.points.trueEnd) {
            node.setAttr("points", attrs.points.trueEnd);
          }
          if (this.onFinish) {
            this.onFinish.call(this);
          }
        };
        this.tween.onReset = () => {
          const node = this.node;
          const attrs = _Tween.attrs[node._id][this._id];
          if (attrs.points && attrs.points.trueStart) {
            node.points(attrs.points.trueStart);
          }
          if (this.onReset) {
            this.onReset();
          }
        };
        this.tween.onUpdate = () => {
          if (this.onUpdate) {
            this.onUpdate.call(this);
          }
        };
      }
      play() {
        this.tween.play();
        return this;
      }
      reverse() {
        this.tween.reverse();
        return this;
      }
      reset() {
        this.tween.reset();
        return this;
      }
      seek(t) {
        this.tween.seek(t * 1e3);
        return this;
      }
      pause() {
        this.tween.pause();
        return this;
      }
      finish() {
        this.tween.finish();
        return this;
      }
      destroy() {
        const nodeId = this.node._id, thisId = this._id, attrs = _Tween.tweens[nodeId];
        this.pause();
        for (const key in attrs) {
          delete _Tween.tweens[nodeId][key];
        }
        delete _Tween.attrs[nodeId][thisId];
      }
    };
    exports.Tween = Tween;
    Tween.attrs = {};
    Tween.tweens = {};
    Node_1.Node.prototype.to = function(params) {
      const onFinish = params.onFinish;
      params.node = this;
      params.onFinish = function() {
        this.destroy();
        if (onFinish) {
          onFinish();
        }
      };
      const tween = new Tween(params);
      tween.play();
    };
    exports.Easings = {
      BackEaseIn(t, b, c, d) {
        const s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
      },
      BackEaseOut(t, b, c, d) {
        const s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
      },
      BackEaseInOut(t, b, c, d) {
        let s = 1.70158;
        if ((t /= d / 2) < 1) {
          return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;
        }
        return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;
      },
      ElasticEaseIn(t, b, c, d, a, p) {
        let s = 0;
        if (t === 0) {
          return b;
        }
        if ((t /= d) === 1) {
          return b + c;
        }
        if (!p) {
          p = d * 0.3;
        }
        if (!a || a < Math.abs(c)) {
          a = c;
          s = p / 4;
        } else {
          s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
      },
      ElasticEaseOut(t, b, c, d, a, p) {
        let s = 0;
        if (t === 0) {
          return b;
        }
        if ((t /= d) === 1) {
          return b + c;
        }
        if (!p) {
          p = d * 0.3;
        }
        if (!a || a < Math.abs(c)) {
          a = c;
          s = p / 4;
        } else {
          s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
      },
      ElasticEaseInOut(t, b, c, d, a, p) {
        let s = 0;
        if (t === 0) {
          return b;
        }
        if ((t /= d / 2) === 2) {
          return b + c;
        }
        if (!p) {
          p = d * (0.3 * 1.5);
        }
        if (!a || a < Math.abs(c)) {
          a = c;
          s = p / 4;
        } else {
          s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        if (t < 1) {
          return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        }
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;
      },
      BounceEaseOut(t, b, c, d) {
        if ((t /= d) < 1 / 2.75) {
          return c * (7.5625 * t * t) + b;
        } else if (t < 2 / 2.75) {
          return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;
        } else if (t < 2.5 / 2.75) {
          return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;
        } else {
          return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;
        }
      },
      BounceEaseIn(t, b, c, d) {
        return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;
      },
      BounceEaseInOut(t, b, c, d) {
        if (t < d / 2) {
          return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;
        } else {
          return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;
        }
      },
      EaseIn(t, b, c, d) {
        return c * (t /= d) * t + b;
      },
      EaseOut(t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
      },
      EaseInOut(t, b, c, d) {
        if ((t /= d / 2) < 1) {
          return c / 2 * t * t + b;
        }
        return -c / 2 * (--t * (t - 2) - 1) + b;
      },
      StrongEaseIn(t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
      },
      StrongEaseOut(t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
      },
      StrongEaseInOut(t, b, c, d) {
        if ((t /= d / 2) < 1) {
          return c / 2 * t * t * t * t * t + b;
        }
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
      },
      Linear(t, b, c, d) {
        return c * t / d + b;
      }
    };
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/_CoreInternals.js
var require_CoreInternals = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/_CoreInternals.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Konva = void 0;
    var Global_1 = require_Global();
    var Util_1 = require_Util();
    var Node_1 = require_Node();
    var Container_1 = require_Container();
    var Stage_1 = require_Stage();
    var Layer_1 = require_Layer();
    var FastLayer_1 = require_FastLayer();
    var Group_1 = require_Group();
    var DragAndDrop_1 = require_DragAndDrop();
    var Shape_1 = require_Shape();
    var Animation_1 = require_Animation();
    var Tween_1 = require_Tween();
    var Context_1 = require_Context();
    var Canvas_1 = require_Canvas();
    exports.Konva = Util_1.Util._assign(Global_1.Konva, {
      Util: Util_1.Util,
      Transform: Util_1.Transform,
      Node: Node_1.Node,
      Container: Container_1.Container,
      Stage: Stage_1.Stage,
      stages: Stage_1.stages,
      Layer: Layer_1.Layer,
      FastLayer: FastLayer_1.FastLayer,
      Group: Group_1.Group,
      DD: DragAndDrop_1.DD,
      Shape: Shape_1.Shape,
      shapes: Shape_1.shapes,
      Animation: Animation_1.Animation,
      Tween: Tween_1.Tween,
      Easings: Tween_1.Easings,
      Context: Context_1.Context,
      Canvas: Canvas_1.Canvas
    });
    exports.default = exports.Konva;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Arc.js
var require_Arc = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Arc.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Arc = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Global_1 = require_Global();
    var Validators_1 = require_Validators();
    var Global_2 = require_Global();
    var Arc = class extends Shape_1.Shape {
      _sceneFunc(context) {
        const angle = Global_1.Konva.getAngle(this.angle()), clockwise = this.clockwise();
        context.beginPath();
        context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);
        context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);
        context.closePath();
        context.fillStrokeShape(this);
      }
      getWidth() {
        return this.outerRadius() * 2;
      }
      getHeight() {
        return this.outerRadius() * 2;
      }
      setWidth(width) {
        this.outerRadius(width / 2);
      }
      setHeight(height) {
        this.outerRadius(height / 2);
      }
      getSelfRect() {
        const innerRadius = this.innerRadius();
        const outerRadius = this.outerRadius();
        const clockwise = this.clockwise();
        const angle = Global_1.Konva.getAngle(clockwise ? 360 - this.angle() : this.angle());
        const boundLeftRatio = Math.cos(Math.min(angle, Math.PI));
        const boundRightRatio = 1;
        const boundTopRatio = Math.sin(Math.min(Math.max(Math.PI, angle), 3 * Math.PI / 2));
        const boundBottomRatio = Math.sin(Math.min(angle, Math.PI / 2));
        const boundLeft = boundLeftRatio * (boundLeftRatio > 0 ? innerRadius : outerRadius);
        const boundRight = boundRightRatio * (boundRightRatio > 0 ? outerRadius : innerRadius);
        const boundTop = boundTopRatio * (boundTopRatio > 0 ? innerRadius : outerRadius);
        const boundBottom = boundBottomRatio * (boundBottomRatio > 0 ? outerRadius : innerRadius);
        return {
          x: boundLeft,
          y: clockwise ? -1 * boundBottom : boundTop,
          width: boundRight - boundLeft,
          height: boundBottom - boundTop
        };
      }
    };
    exports.Arc = Arc;
    Arc.prototype._centroid = true;
    Arc.prototype.className = "Arc";
    Arc.prototype._attrsAffectingSize = ["innerRadius", "outerRadius"];
    (0, Global_2._registerNode)(Arc);
    Factory_1.Factory.addGetterSetter(Arc, "innerRadius", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Arc, "outerRadius", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Arc, "angle", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Arc, "clockwise", false, (0, Validators_1.getBooleanValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Line.js
var require_Line = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Line.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Line = void 0;
    var Factory_1 = require_Factory();
    var Global_1 = require_Global();
    var Shape_1 = require_Shape();
    var Validators_1 = require_Validators();
    function getControlPoints(x0, y0, x1, y1, x2, y2, t) {
      const d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = t * d01 / (d01 + d12), fb = t * d12 / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);
      return [p1x, p1y, p2x, p2y];
    }
    function expandPoints(p, tension) {
      const len = p.length, allPoints = [];
      for (let n = 2; n < len - 2; n += 2) {
        const cp = getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);
        if (isNaN(cp[0])) {
          continue;
        }
        allPoints.push(cp[0]);
        allPoints.push(cp[1]);
        allPoints.push(p[n]);
        allPoints.push(p[n + 1]);
        allPoints.push(cp[2]);
        allPoints.push(cp[3]);
      }
      return allPoints;
    }
    var Line2 = class extends Shape_1.Shape {
      constructor(config) {
        super(config);
        this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva", function() {
          this._clearCache("tensionPoints");
        });
      }
      _sceneFunc(context) {
        let points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier(), tp, len, n;
        if (!length) {
          return;
        }
        context.beginPath();
        context.moveTo(points[0], points[1]);
        if (tension !== 0 && length > 4) {
          tp = this.getTensionPoints();
          len = tp.length;
          n = closed ? 0 : 4;
          if (!closed) {
            context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);
          }
          while (n < len - 2) {
            context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);
          }
          if (!closed) {
            context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);
          }
        } else if (bezier) {
          n = 2;
          while (n < length) {
            context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);
          }
        } else {
          for (n = 2; n < length; n += 2) {
            context.lineTo(points[n], points[n + 1]);
          }
        }
        if (closed) {
          context.closePath();
          context.fillStrokeShape(this);
        } else {
          context.strokeShape(this);
        }
      }
      getTensionPoints() {
        return this._getCache("tensionPoints", this._getTensionPoints);
      }
      _getTensionPoints() {
        if (this.closed()) {
          return this._getTensionPointsClosed();
        } else {
          return expandPoints(this.points(), this.tension());
        }
      }
      _getTensionPointsClosed() {
        const p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]].concat(middle).concat([
          lastControlPoints[0],
          lastControlPoints[1],
          p[len - 2],
          p[len - 1],
          lastControlPoints[2],
          lastControlPoints[3],
          firstControlPoints[0],
          firstControlPoints[1],
          p[0],
          p[1]
        ]);
        return tp;
      }
      getWidth() {
        return this.getSelfRect().width;
      }
      getHeight() {
        return this.getSelfRect().height;
      }
      getSelfRect() {
        let points = this.points();
        if (points.length < 4) {
          return {
            x: points[0] || 0,
            y: points[1] || 0,
            width: 0,
            height: 0
          };
        }
        if (this.tension() !== 0) {
          points = [
            points[0],
            points[1],
            ...this._getTensionPoints(),
            points[points.length - 2],
            points[points.length - 1]
          ];
        } else {
          points = this.points();
        }
        let minX = points[0];
        let maxX = points[0];
        let minY = points[1];
        let maxY = points[1];
        let x, y;
        for (let i = 0; i < points.length / 2; i++) {
          x = points[i * 2];
          y = points[i * 2 + 1];
          minX = Math.min(minX, x);
          maxX = Math.max(maxX, x);
          minY = Math.min(minY, y);
          maxY = Math.max(maxY, y);
        }
        return {
          x: minX,
          y: minY,
          width: maxX - minX,
          height: maxY - minY
        };
      }
    };
    exports.Line = Line2;
    Line2.prototype.className = "Line";
    Line2.prototype._attrsAffectingSize = ["points", "bezier", "tension"];
    (0, Global_1._registerNode)(Line2);
    Factory_1.Factory.addGetterSetter(Line2, "closed", false);
    Factory_1.Factory.addGetterSetter(Line2, "bezier", false);
    Factory_1.Factory.addGetterSetter(Line2, "tension", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Line2, "points", [], (0, Validators_1.getNumberArrayValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/BezierFunctions.js
var require_BezierFunctions = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/BezierFunctions.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.t2length = exports.getQuadraticArcLength = exports.getCubicArcLength = exports.binomialCoefficients = exports.cValues = exports.tValues = void 0;
    exports.tValues = [
      [],
      [],
      [
        -0.5773502691896257,
        0.5773502691896257
      ],
      [
        0,
        -0.7745966692414834,
        0.7745966692414834
      ],
      [
        -0.33998104358485626,
        0.33998104358485626,
        -0.8611363115940526,
        0.8611363115940526
      ],
      [
        0,
        -0.5384693101056831,
        0.5384693101056831,
        -0.906179845938664,
        0.906179845938664
      ],
      [
        0.6612093864662645,
        -0.6612093864662645,
        -0.2386191860831969,
        0.2386191860831969,
        -0.932469514203152,
        0.932469514203152
      ],
      [
        0,
        0.4058451513773972,
        -0.4058451513773972,
        -0.7415311855993945,
        0.7415311855993945,
        -0.9491079123427585,
        0.9491079123427585
      ],
      [
        -0.1834346424956498,
        0.1834346424956498,
        -0.525532409916329,
        0.525532409916329,
        -0.7966664774136267,
        0.7966664774136267,
        -0.9602898564975363,
        0.9602898564975363
      ],
      [
        0,
        -0.8360311073266358,
        0.8360311073266358,
        -0.9681602395076261,
        0.9681602395076261,
        -0.3242534234038089,
        0.3242534234038089,
        -0.6133714327005904,
        0.6133714327005904
      ],
      [
        -0.14887433898163122,
        0.14887433898163122,
        -0.4333953941292472,
        0.4333953941292472,
        -0.6794095682990244,
        0.6794095682990244,
        -0.8650633666889845,
        0.8650633666889845,
        -0.9739065285171717,
        0.9739065285171717
      ],
      [
        0,
        -0.26954315595234496,
        0.26954315595234496,
        -0.5190961292068118,
        0.5190961292068118,
        -0.7301520055740494,
        0.7301520055740494,
        -0.8870625997680953,
        0.8870625997680953,
        -0.978228658146057,
        0.978228658146057
      ],
      [
        -0.1252334085114689,
        0.1252334085114689,
        -0.3678314989981802,
        0.3678314989981802,
        -0.5873179542866175,
        0.5873179542866175,
        -0.7699026741943047,
        0.7699026741943047,
        -0.9041172563704749,
        0.9041172563704749,
        -0.9815606342467192,
        0.9815606342467192
      ],
      [
        0,
        -0.2304583159551348,
        0.2304583159551348,
        -0.44849275103644687,
        0.44849275103644687,
        -0.6423493394403402,
        0.6423493394403402,
        -0.8015780907333099,
        0.8015780907333099,
        -0.9175983992229779,
        0.9175983992229779,
        -0.9841830547185881,
        0.9841830547185881
      ],
      [
        -0.10805494870734367,
        0.10805494870734367,
        -0.31911236892788974,
        0.31911236892788974,
        -0.5152486363581541,
        0.5152486363581541,
        -0.6872929048116855,
        0.6872929048116855,
        -0.827201315069765,
        0.827201315069765,
        -0.9284348836635735,
        0.9284348836635735,
        -0.9862838086968123,
        0.9862838086968123
      ],
      [
        0,
        -0.20119409399743451,
        0.20119409399743451,
        -0.3941513470775634,
        0.3941513470775634,
        -0.5709721726085388,
        0.5709721726085388,
        -0.7244177313601701,
        0.7244177313601701,
        -0.8482065834104272,
        0.8482065834104272,
        -0.937273392400706,
        0.937273392400706,
        -0.9879925180204854,
        0.9879925180204854
      ],
      [
        -0.09501250983763744,
        0.09501250983763744,
        -0.2816035507792589,
        0.2816035507792589,
        -0.45801677765722737,
        0.45801677765722737,
        -0.6178762444026438,
        0.6178762444026438,
        -0.755404408355003,
        0.755404408355003,
        -0.8656312023878318,
        0.8656312023878318,
        -0.9445750230732326,
        0.9445750230732326,
        -0.9894009349916499,
        0.9894009349916499
      ],
      [
        0,
        -0.17848418149584785,
        0.17848418149584785,
        -0.3512317634538763,
        0.3512317634538763,
        -0.5126905370864769,
        0.5126905370864769,
        -0.6576711592166907,
        0.6576711592166907,
        -0.7815140038968014,
        0.7815140038968014,
        -0.8802391537269859,
        0.8802391537269859,
        -0.9506755217687678,
        0.9506755217687678,
        -0.9905754753144174,
        0.9905754753144174
      ],
      [
        -0.0847750130417353,
        0.0847750130417353,
        -0.2518862256915055,
        0.2518862256915055,
        -0.41175116146284263,
        0.41175116146284263,
        -0.5597708310739475,
        0.5597708310739475,
        -0.6916870430603532,
        0.6916870430603532,
        -0.8037049589725231,
        0.8037049589725231,
        -0.8926024664975557,
        0.8926024664975557,
        -0.9558239495713977,
        0.9558239495713977,
        -0.9915651684209309,
        0.9915651684209309
      ],
      [
        0,
        -0.16035864564022537,
        0.16035864564022537,
        -0.31656409996362983,
        0.31656409996362983,
        -0.46457074137596094,
        0.46457074137596094,
        -0.600545304661681,
        0.600545304661681,
        -0.7209661773352294,
        0.7209661773352294,
        -0.8227146565371428,
        0.8227146565371428,
        -0.9031559036148179,
        0.9031559036148179,
        -0.96020815213483,
        0.96020815213483,
        -0.9924068438435844,
        0.9924068438435844
      ],
      [
        -0.07652652113349734,
        0.07652652113349734,
        -0.22778585114164507,
        0.22778585114164507,
        -0.37370608871541955,
        0.37370608871541955,
        -0.5108670019508271,
        0.5108670019508271,
        -0.636053680726515,
        0.636053680726515,
        -0.7463319064601508,
        0.7463319064601508,
        -0.8391169718222188,
        0.8391169718222188,
        -0.912234428251326,
        0.912234428251326,
        -0.9639719272779138,
        0.9639719272779138,
        -0.9931285991850949,
        0.9931285991850949
      ],
      [
        0,
        -0.1455618541608951,
        0.1455618541608951,
        -0.2880213168024011,
        0.2880213168024011,
        -0.4243421202074388,
        0.4243421202074388,
        -0.5516188358872198,
        0.5516188358872198,
        -0.6671388041974123,
        0.6671388041974123,
        -0.7684399634756779,
        0.7684399634756779,
        -0.8533633645833173,
        0.8533633645833173,
        -0.9200993341504008,
        0.9200993341504008,
        -0.9672268385663063,
        0.9672268385663063,
        -0.9937521706203895,
        0.9937521706203895
      ],
      [
        -0.06973927331972223,
        0.06973927331972223,
        -0.20786042668822127,
        0.20786042668822127,
        -0.34193582089208424,
        0.34193582089208424,
        -0.469355837986757,
        0.469355837986757,
        -0.5876404035069116,
        0.5876404035069116,
        -0.6944872631866827,
        0.6944872631866827,
        -0.7878168059792081,
        0.7878168059792081,
        -0.8658125777203002,
        0.8658125777203002,
        -0.926956772187174,
        0.926956772187174,
        -0.9700604978354287,
        0.9700604978354287,
        -0.9942945854823992,
        0.9942945854823992
      ],
      [
        0,
        -0.1332568242984661,
        0.1332568242984661,
        -0.26413568097034495,
        0.26413568097034495,
        -0.3903010380302908,
        0.3903010380302908,
        -0.5095014778460075,
        0.5095014778460075,
        -0.6196098757636461,
        0.6196098757636461,
        -0.7186613631319502,
        0.7186613631319502,
        -0.8048884016188399,
        0.8048884016188399,
        -0.8767523582704416,
        0.8767523582704416,
        -0.9329710868260161,
        0.9329710868260161,
        -0.9725424712181152,
        0.9725424712181152,
        -0.9947693349975522,
        0.9947693349975522
      ],
      [
        -0.06405689286260563,
        0.06405689286260563,
        -0.1911188674736163,
        0.1911188674736163,
        -0.3150426796961634,
        0.3150426796961634,
        -0.4337935076260451,
        0.4337935076260451,
        -0.5454214713888396,
        0.5454214713888396,
        -0.6480936519369755,
        0.6480936519369755,
        -0.7401241915785544,
        0.7401241915785544,
        -0.820001985973903,
        0.820001985973903,
        -0.8864155270044011,
        0.8864155270044011,
        -0.9382745520027328,
        0.9382745520027328,
        -0.9747285559713095,
        0.9747285559713095,
        -0.9951872199970213,
        0.9951872199970213
      ]
    ];
    exports.cValues = [
      [],
      [],
      [1, 1],
      [
        0.8888888888888888,
        0.5555555555555556,
        0.5555555555555556
      ],
      [
        0.6521451548625461,
        0.6521451548625461,
        0.34785484513745385,
        0.34785484513745385
      ],
      [
        0.5688888888888889,
        0.47862867049936647,
        0.47862867049936647,
        0.23692688505618908,
        0.23692688505618908
      ],
      [
        0.3607615730481386,
        0.3607615730481386,
        0.46791393457269104,
        0.46791393457269104,
        0.17132449237917036,
        0.17132449237917036
      ],
      [
        0.4179591836734694,
        0.3818300505051189,
        0.3818300505051189,
        0.27970539148927664,
        0.27970539148927664,
        0.1294849661688697,
        0.1294849661688697
      ],
      [
        0.362683783378362,
        0.362683783378362,
        0.31370664587788727,
        0.31370664587788727,
        0.22238103445337448,
        0.22238103445337448,
        0.10122853629037626,
        0.10122853629037626
      ],
      [
        0.3302393550012598,
        0.1806481606948574,
        0.1806481606948574,
        0.08127438836157441,
        0.08127438836157441,
        0.31234707704000286,
        0.31234707704000286,
        0.26061069640293544,
        0.26061069640293544
      ],
      [
        0.29552422471475287,
        0.29552422471475287,
        0.26926671930999635,
        0.26926671930999635,
        0.21908636251598204,
        0.21908636251598204,
        0.1494513491505806,
        0.1494513491505806,
        0.06667134430868814,
        0.06667134430868814
      ],
      [
        0.2729250867779006,
        0.26280454451024665,
        0.26280454451024665,
        0.23319376459199048,
        0.23319376459199048,
        0.18629021092773426,
        0.18629021092773426,
        0.1255803694649046,
        0.1255803694649046,
        0.05566856711617366,
        0.05566856711617366
      ],
      [
        0.24914704581340277,
        0.24914704581340277,
        0.2334925365383548,
        0.2334925365383548,
        0.20316742672306592,
        0.20316742672306592,
        0.16007832854334622,
        0.16007832854334622,
        0.10693932599531843,
        0.10693932599531843,
        0.04717533638651183,
        0.04717533638651183
      ],
      [
        0.2325515532308739,
        0.22628318026289723,
        0.22628318026289723,
        0.2078160475368885,
        0.2078160475368885,
        0.17814598076194574,
        0.17814598076194574,
        0.13887351021978725,
        0.13887351021978725,
        0.09212149983772845,
        0.09212149983772845,
        0.04048400476531588,
        0.04048400476531588
      ],
      [
        0.2152638534631578,
        0.2152638534631578,
        0.2051984637212956,
        0.2051984637212956,
        0.18553839747793782,
        0.18553839747793782,
        0.15720316715819355,
        0.15720316715819355,
        0.12151857068790319,
        0.12151857068790319,
        0.08015808715976021,
        0.08015808715976021,
        0.03511946033175186,
        0.03511946033175186
      ],
      [
        0.2025782419255613,
        0.19843148532711158,
        0.19843148532711158,
        0.1861610000155622,
        0.1861610000155622,
        0.16626920581699392,
        0.16626920581699392,
        0.13957067792615432,
        0.13957067792615432,
        0.10715922046717194,
        0.10715922046717194,
        0.07036604748810812,
        0.07036604748810812,
        0.03075324199611727,
        0.03075324199611727
      ],
      [
        0.1894506104550685,
        0.1894506104550685,
        0.18260341504492358,
        0.18260341504492358,
        0.16915651939500254,
        0.16915651939500254,
        0.14959598881657674,
        0.14959598881657674,
        0.12462897125553388,
        0.12462897125553388,
        0.09515851168249279,
        0.09515851168249279,
        0.062253523938647894,
        0.062253523938647894,
        0.027152459411754096,
        0.027152459411754096
      ],
      [
        0.17944647035620653,
        0.17656270536699264,
        0.17656270536699264,
        0.16800410215645004,
        0.16800410215645004,
        0.15404576107681028,
        0.15404576107681028,
        0.13513636846852548,
        0.13513636846852548,
        0.11188384719340397,
        0.11188384719340397,
        0.08503614831717918,
        0.08503614831717918,
        0.0554595293739872,
        0.0554595293739872,
        0.02414830286854793,
        0.02414830286854793
      ],
      [
        0.1691423829631436,
        0.1691423829631436,
        0.16427648374583273,
        0.16427648374583273,
        0.15468467512626524,
        0.15468467512626524,
        0.14064291467065065,
        0.14064291467065065,
        0.12255520671147846,
        0.12255520671147846,
        0.10094204410628717,
        0.10094204410628717,
        0.07642573025488905,
        0.07642573025488905,
        0.0497145488949698,
        0.0497145488949698,
        0.02161601352648331,
        0.02161601352648331
      ],
      [
        0.1610544498487837,
        0.15896884339395434,
        0.15896884339395434,
        0.15276604206585967,
        0.15276604206585967,
        0.1426067021736066,
        0.1426067021736066,
        0.12875396253933621,
        0.12875396253933621,
        0.11156664554733399,
        0.11156664554733399,
        0.09149002162245,
        0.09149002162245,
        0.06904454273764123,
        0.06904454273764123,
        0.0448142267656996,
        0.0448142267656996,
        0.019461788229726478,
        0.019461788229726478
      ],
      [
        0.15275338713072584,
        0.15275338713072584,
        0.14917298647260374,
        0.14917298647260374,
        0.14209610931838204,
        0.14209610931838204,
        0.13168863844917664,
        0.13168863844917664,
        0.11819453196151841,
        0.11819453196151841,
        0.10193011981724044,
        0.10193011981724044,
        0.08327674157670475,
        0.08327674157670475,
        0.06267204833410907,
        0.06267204833410907,
        0.04060142980038694,
        0.04060142980038694,
        0.017614007139152118,
        0.017614007139152118
      ],
      [
        0.14608113364969041,
        0.14452440398997005,
        0.14452440398997005,
        0.13988739479107315,
        0.13988739479107315,
        0.13226893863333747,
        0.13226893863333747,
        0.12183141605372853,
        0.12183141605372853,
        0.10879729916714838,
        0.10879729916714838,
        0.09344442345603386,
        0.09344442345603386,
        0.0761001136283793,
        0.0761001136283793,
        0.057134425426857205,
        0.057134425426857205,
        0.036953789770852494,
        0.036953789770852494,
        0.016017228257774335,
        0.016017228257774335
      ],
      [
        0.13925187285563198,
        0.13925187285563198,
        0.13654149834601517,
        0.13654149834601517,
        0.13117350478706238,
        0.13117350478706238,
        0.12325237681051242,
        0.12325237681051242,
        0.11293229608053922,
        0.11293229608053922,
        0.10041414444288096,
        0.10041414444288096,
        0.08594160621706773,
        0.08594160621706773,
        0.06979646842452049,
        0.06979646842452049,
        0.052293335152683286,
        0.052293335152683286,
        0.03377490158481415,
        0.03377490158481415,
        0.0146279952982722,
        0.0146279952982722
      ],
      [
        0.13365457218610619,
        0.1324620394046966,
        0.1324620394046966,
        0.12890572218808216,
        0.12890572218808216,
        0.12304908430672953,
        0.12304908430672953,
        0.11499664022241136,
        0.11499664022241136,
        0.10489209146454141,
        0.10489209146454141,
        0.09291576606003515,
        0.09291576606003515,
        0.07928141177671895,
        0.07928141177671895,
        0.06423242140852585,
        0.06423242140852585,
        0.04803767173108467,
        0.04803767173108467,
        0.030988005856979445,
        0.030988005856979445,
        0.013411859487141771,
        0.013411859487141771
      ],
      [
        0.12793819534675216,
        0.12793819534675216,
        0.1258374563468283,
        0.1258374563468283,
        0.12167047292780339,
        0.12167047292780339,
        0.1155056680537256,
        0.1155056680537256,
        0.10744427011596563,
        0.10744427011596563,
        0.09761865210411388,
        0.09761865210411388,
        0.08619016153195327,
        0.08619016153195327,
        0.0733464814110803,
        0.0733464814110803,
        0.05929858491543678,
        0.05929858491543678,
        0.04427743881741981,
        0.04427743881741981,
        0.028531388628933663,
        0.028531388628933663,
        0.0123412297999872,
        0.0123412297999872
      ]
    ];
    exports.binomialCoefficients = [[1], [1, 1], [1, 2, 1], [1, 3, 3, 1]];
    var getCubicArcLength = (xs, ys, t) => {
      let sum;
      let correctedT;
      const n = 20;
      const z = t / 2;
      sum = 0;
      for (let i = 0; i < n; i++) {
        correctedT = z * exports.tValues[n][i] + z;
        sum += exports.cValues[n][i] * BFunc(xs, ys, correctedT);
      }
      return z * sum;
    };
    exports.getCubicArcLength = getCubicArcLength;
    var getQuadraticArcLength = (xs, ys, t) => {
      if (t === void 0) {
        t = 1;
      }
      const ax = xs[0] - 2 * xs[1] + xs[2];
      const ay = ys[0] - 2 * ys[1] + ys[2];
      const bx = 2 * xs[1] - 2 * xs[0];
      const by = 2 * ys[1] - 2 * ys[0];
      const A = 4 * (ax * ax + ay * ay);
      const B = 4 * (ax * bx + ay * by);
      const C = bx * bx + by * by;
      if (A === 0) {
        return t * Math.sqrt(Math.pow(xs[2] - xs[0], 2) + Math.pow(ys[2] - ys[0], 2));
      }
      const b = B / (2 * A);
      const c = C / A;
      const u = t + b;
      const k = c - b * b;
      const uuk = u * u + k > 0 ? Math.sqrt(u * u + k) : 0;
      const bbk = b * b + k > 0 ? Math.sqrt(b * b + k) : 0;
      const term = b + Math.sqrt(b * b + k) !== 0 ? k * Math.log(Math.abs((u + uuk) / (b + bbk))) : 0;
      return Math.sqrt(A) / 2 * (u * uuk - b * bbk + term);
    };
    exports.getQuadraticArcLength = getQuadraticArcLength;
    function BFunc(xs, ys, t) {
      const xbase = getDerivative(1, t, xs);
      const ybase = getDerivative(1, t, ys);
      const combined = xbase * xbase + ybase * ybase;
      return Math.sqrt(combined);
    }
    var getDerivative = (derivative, t, vs) => {
      const n = vs.length - 1;
      let _vs;
      let value;
      if (n === 0) {
        return 0;
      }
      if (derivative === 0) {
        value = 0;
        for (let k = 0; k <= n; k++) {
          value += exports.binomialCoefficients[n][k] * Math.pow(1 - t, n - k) * Math.pow(t, k) * vs[k];
        }
        return value;
      } else {
        _vs = new Array(n);
        for (let k = 0; k < n; k++) {
          _vs[k] = n * (vs[k + 1] - vs[k]);
        }
        return getDerivative(derivative - 1, t, _vs);
      }
    };
    var t2length = (length, totalLength, func) => {
      let error = 1;
      let t = length / totalLength;
      let step = (length - func(t)) / totalLength;
      let numIterations = 0;
      while (error > 1e-3) {
        const increasedTLength = func(t + step);
        const increasedTError = Math.abs(length - increasedTLength) / totalLength;
        if (increasedTError < error) {
          error = increasedTError;
          t += step;
        } else {
          const decreasedTLength = func(t - step);
          const decreasedTError = Math.abs(length - decreasedTLength) / totalLength;
          if (decreasedTError < error) {
            error = decreasedTError;
            t -= step;
          } else {
            step /= 2;
          }
        }
        numIterations++;
        if (numIterations > 500) {
          break;
        }
      }
      return t;
    };
    exports.t2length = t2length;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Path.js
var require_Path = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Path.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Path = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Global_1 = require_Global();
    var BezierFunctions_1 = require_BezierFunctions();
    var Path = class _Path extends Shape_1.Shape {
      constructor(config) {
        super(config);
        this.dataArray = [];
        this.pathLength = 0;
        this._readDataAttribute();
        this.on("dataChange.konva", function() {
          this._readDataAttribute();
        });
      }
      _readDataAttribute() {
        this.dataArray = _Path.parsePathData(this.data());
        this.pathLength = _Path.getPathLength(this.dataArray);
      }
      _sceneFunc(context) {
        const ca = this.dataArray;
        context.beginPath();
        let isClosed = false;
        for (let n = 0; n < ca.length; n++) {
          const c = ca[n].command;
          const p = ca[n].points;
          switch (c) {
            case "L":
              context.lineTo(p[0], p[1]);
              break;
            case "M":
              context.moveTo(p[0], p[1]);
              break;
            case "C":
              context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);
              break;
            case "Q":
              context.quadraticCurveTo(p[0], p[1], p[2], p[3]);
              break;
            case "A":
              var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];
              var r = rx > ry ? rx : ry;
              var scaleX = rx > ry ? 1 : rx / ry;
              var scaleY = rx > ry ? ry / rx : 1;
              context.translate(cx, cy);
              context.rotate(psi);
              context.scale(scaleX, scaleY);
              context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);
              context.scale(1 / scaleX, 1 / scaleY);
              context.rotate(-psi);
              context.translate(-cx, -cy);
              break;
            case "z":
              isClosed = true;
              context.closePath();
              break;
          }
        }
        if (!isClosed && !this.hasFill()) {
          context.strokeShape(this);
        } else {
          context.fillStrokeShape(this);
        }
      }
      getSelfRect() {
        let points = [];
        this.dataArray.forEach(function(data) {
          if (data.command === "A") {
            const start = data.points[4];
            const dTheta = data.points[5];
            const end = data.points[4] + dTheta;
            let inc = Math.PI / 180;
            if (Math.abs(start - end) < inc) {
              inc = Math.abs(start - end);
            }
            if (dTheta < 0) {
              for (let t = start - inc; t > end; t -= inc) {
                const point = _Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);
                points.push(point.x, point.y);
              }
            } else {
              for (let t = start + inc; t < end; t += inc) {
                const point = _Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);
                points.push(point.x, point.y);
              }
            }
          } else if (data.command === "C") {
            for (let t = 0; t <= 1; t += 0.01) {
              const point = _Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);
              points.push(point.x, point.y);
            }
          } else {
            points = points.concat(data.points);
          }
        });
        let minX = points[0];
        let maxX = points[0];
        let minY = points[1];
        let maxY = points[1];
        let x, y;
        for (let i = 0; i < points.length / 2; i++) {
          x = points[i * 2];
          y = points[i * 2 + 1];
          if (!isNaN(x)) {
            minX = Math.min(minX, x);
            maxX = Math.max(maxX, x);
          }
          if (!isNaN(y)) {
            minY = Math.min(minY, y);
            maxY = Math.max(maxY, y);
          }
        }
        return {
          x: minX,
          y: minY,
          width: maxX - minX,
          height: maxY - minY
        };
      }
      getLength() {
        return this.pathLength;
      }
      getPointAtLength(length) {
        return _Path.getPointAtLengthOfDataArray(length, this.dataArray);
      }
      static getLineLength(x1, y1, x2, y2) {
        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
      }
      static getPathLength(dataArray) {
        let pathLength = 0;
        for (let i = 0; i < dataArray.length; ++i) {
          pathLength += dataArray[i].pathLength;
        }
        return pathLength;
      }
      static getPointAtLengthOfDataArray(length, dataArray) {
        let points, i = 0, ii = dataArray.length;
        if (!ii) {
          return null;
        }
        while (i < ii && length > dataArray[i].pathLength) {
          length -= dataArray[i].pathLength;
          ++i;
        }
        if (i === ii) {
          points = dataArray[i - 1].points.slice(-2);
          return {
            x: points[0],
            y: points[1]
          };
        }
        if (length < 0.01) {
          points = dataArray[i].points.slice(0, 2);
          return {
            x: points[0],
            y: points[1]
          };
        }
        const cp = dataArray[i];
        const p = cp.points;
        switch (cp.command) {
          case "L":
            return _Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);
          case "C":
            return _Path.getPointOnCubicBezier((0, BezierFunctions_1.t2length)(length, _Path.getPathLength(dataArray), (i2) => {
              return (0, BezierFunctions_1.getCubicArcLength)([cp.start.x, p[0], p[2], p[4]], [cp.start.y, p[1], p[3], p[5]], i2);
            }), cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);
          case "Q":
            return _Path.getPointOnQuadraticBezier((0, BezierFunctions_1.t2length)(length, _Path.getPathLength(dataArray), (i2) => {
              return (0, BezierFunctions_1.getQuadraticArcLength)([cp.start.x, p[0], p[2]], [cp.start.y, p[1], p[3]], i2);
            }), cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);
          case "A":
            var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];
            theta += dTheta * length / cp.pathLength;
            return _Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);
        }
        return null;
      }
      static getPointOnLine(dist, P1x, P1y, P2x, P2y, fromX, fromY) {
        fromX = fromX !== null && fromX !== void 0 ? fromX : P1x;
        fromY = fromY !== null && fromY !== void 0 ? fromY : P1y;
        const len = this.getLineLength(P1x, P1y, P2x, P2y);
        if (len < 1e-10) {
          return { x: P1x, y: P1y };
        }
        if (P2x === P1x) {
          return { x: fromX, y: fromY + (P2y > P1y ? dist : -dist) };
        }
        const m = (P2y - P1y) / (P2x - P1x);
        const run = Math.sqrt(dist * dist / (1 + m * m)) * (P2x < P1x ? -1 : 1);
        const rise = m * run;
        if (Math.abs(fromY - P1y - m * (fromX - P1x)) < 1e-10) {
          return { x: fromX + run, y: fromY + rise };
        }
        const u = ((fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y)) / (len * len);
        const ix = P1x + u * (P2x - P1x);
        const iy = P1y + u * (P2y - P1y);
        const pRise = this.getLineLength(fromX, fromY, ix, iy);
        const pRun = Math.sqrt(dist * dist - pRise * pRise);
        const adjustedRun = Math.sqrt(pRun * pRun / (1 + m * m)) * (P2x < P1x ? -1 : 1);
        const adjustedRise = m * adjustedRun;
        return { x: ix + adjustedRun, y: iy + adjustedRise };
      }
      static getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {
        function CB1(t) {
          return t * t * t;
        }
        function CB2(t) {
          return 3 * t * t * (1 - t);
        }
        function CB3(t) {
          return 3 * t * (1 - t) * (1 - t);
        }
        function CB4(t) {
          return (1 - t) * (1 - t) * (1 - t);
        }
        const x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);
        const y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);
        return {
          x,
          y
        };
      }
      static getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y) {
        function QB1(t) {
          return t * t;
        }
        function QB2(t) {
          return 2 * t * (1 - t);
        }
        function QB3(t) {
          return (1 - t) * (1 - t);
        }
        const x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);
        const y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);
        return {
          x,
          y
        };
      }
      static getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {
        const cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);
        const pt = {
          x: rx * Math.cos(theta),
          y: ry * Math.sin(theta)
        };
        return {
          x: cx + (pt.x * cosPsi - pt.y * sinPsi),
          y: cy + (pt.x * sinPsi + pt.y * cosPsi)
        };
      }
      static parsePathData(data) {
        if (!data) {
          return [];
        }
        let cs = data;
        const cc = [
          "m",
          "M",
          "l",
          "L",
          "v",
          "V",
          "h",
          "H",
          "z",
          "Z",
          "c",
          "C",
          "q",
          "Q",
          "t",
          "T",
          "s",
          "S",
          "a",
          "A"
        ];
        cs = cs.replace(new RegExp(" ", "g"), ",");
        for (var n = 0; n < cc.length; n++) {
          cs = cs.replace(new RegExp(cc[n], "g"), "|" + cc[n]);
        }
        const arr = cs.split("|");
        const ca = [];
        const coords = [];
        let cpx = 0;
        let cpy = 0;
        const re = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;
        let match;
        for (n = 1; n < arr.length; n++) {
          let str = arr[n];
          let c = str.charAt(0);
          str = str.slice(1);
          coords.length = 0;
          while (match = re.exec(str)) {
            coords.push(match[0]);
          }
          const p = [];
          for (let j = 0, jlen = coords.length; j < jlen; j++) {
            if (coords[j] === "00") {
              p.push(0, 0);
              continue;
            }
            const parsed = parseFloat(coords[j]);
            if (!isNaN(parsed)) {
              p.push(parsed);
            } else {
              p.push(0);
            }
          }
          while (p.length > 0) {
            if (isNaN(p[0])) {
              break;
            }
            let cmd = "";
            let points = [];
            const startX = cpx, startY = cpy;
            var prevCmd, ctlPtx, ctlPty;
            var rx, ry, psi, fa, fs, x1, y1;
            switch (c) {
              case "l":
                cpx += p.shift();
                cpy += p.shift();
                cmd = "L";
                points.push(cpx, cpy);
                break;
              case "L":
                cpx = p.shift();
                cpy = p.shift();
                points.push(cpx, cpy);
                break;
              case "m":
                var dx = p.shift();
                var dy = p.shift();
                cpx += dx;
                cpy += dy;
                cmd = "M";
                if (ca.length > 2 && ca[ca.length - 1].command === "z") {
                  for (let idx = ca.length - 2; idx >= 0; idx--) {
                    if (ca[idx].command === "M") {
                      cpx = ca[idx].points[0] + dx;
                      cpy = ca[idx].points[1] + dy;
                      break;
                    }
                  }
                }
                points.push(cpx, cpy);
                c = "l";
                break;
              case "M":
                cpx = p.shift();
                cpy = p.shift();
                cmd = "M";
                points.push(cpx, cpy);
                c = "L";
                break;
              case "h":
                cpx += p.shift();
                cmd = "L";
                points.push(cpx, cpy);
                break;
              case "H":
                cpx = p.shift();
                cmd = "L";
                points.push(cpx, cpy);
                break;
              case "v":
                cpy += p.shift();
                cmd = "L";
                points.push(cpx, cpy);
                break;
              case "V":
                cpy = p.shift();
                cmd = "L";
                points.push(cpx, cpy);
                break;
              case "C":
                points.push(p.shift(), p.shift(), p.shift(), p.shift());
                cpx = p.shift();
                cpy = p.shift();
                points.push(cpx, cpy);
                break;
              case "c":
                points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());
                cpx += p.shift();
                cpy += p.shift();
                cmd = "C";
                points.push(cpx, cpy);
                break;
              case "S":
                ctlPtx = cpx;
                ctlPty = cpy;
                prevCmd = ca[ca.length - 1];
                if (prevCmd.command === "C") {
                  ctlPtx = cpx + (cpx - prevCmd.points[2]);
                  ctlPty = cpy + (cpy - prevCmd.points[3]);
                }
                points.push(ctlPtx, ctlPty, p.shift(), p.shift());
                cpx = p.shift();
                cpy = p.shift();
                cmd = "C";
                points.push(cpx, cpy);
                break;
              case "s":
                ctlPtx = cpx;
                ctlPty = cpy;
                prevCmd = ca[ca.length - 1];
                if (prevCmd.command === "C") {
                  ctlPtx = cpx + (cpx - prevCmd.points[2]);
                  ctlPty = cpy + (cpy - prevCmd.points[3]);
                }
                points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());
                cpx += p.shift();
                cpy += p.shift();
                cmd = "C";
                points.push(cpx, cpy);
                break;
              case "Q":
                points.push(p.shift(), p.shift());
                cpx = p.shift();
                cpy = p.shift();
                points.push(cpx, cpy);
                break;
              case "q":
                points.push(cpx + p.shift(), cpy + p.shift());
                cpx += p.shift();
                cpy += p.shift();
                cmd = "Q";
                points.push(cpx, cpy);
                break;
              case "T":
                ctlPtx = cpx;
                ctlPty = cpy;
                prevCmd = ca[ca.length - 1];
                if (prevCmd.command === "Q") {
                  ctlPtx = cpx + (cpx - prevCmd.points[0]);
                  ctlPty = cpy + (cpy - prevCmd.points[1]);
                }
                cpx = p.shift();
                cpy = p.shift();
                cmd = "Q";
                points.push(ctlPtx, ctlPty, cpx, cpy);
                break;
              case "t":
                ctlPtx = cpx;
                ctlPty = cpy;
                prevCmd = ca[ca.length - 1];
                if (prevCmd.command === "Q") {
                  ctlPtx = cpx + (cpx - prevCmd.points[0]);
                  ctlPty = cpy + (cpy - prevCmd.points[1]);
                }
                cpx += p.shift();
                cpy += p.shift();
                cmd = "Q";
                points.push(ctlPtx, ctlPty, cpx, cpy);
                break;
              case "A":
                rx = p.shift();
                ry = p.shift();
                psi = p.shift();
                fa = p.shift();
                fs = p.shift();
                x1 = cpx;
                y1 = cpy;
                cpx = p.shift();
                cpy = p.shift();
                cmd = "A";
                points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);
                break;
              case "a":
                rx = p.shift();
                ry = p.shift();
                psi = p.shift();
                fa = p.shift();
                fs = p.shift();
                x1 = cpx;
                y1 = cpy;
                cpx += p.shift();
                cpy += p.shift();
                cmd = "A";
                points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);
                break;
            }
            ca.push({
              command: cmd || c,
              points,
              start: {
                x: startX,
                y: startY
              },
              pathLength: this.calcLength(startX, startY, cmd || c, points)
            });
          }
          if (c === "z" || c === "Z") {
            ca.push({
              command: "z",
              points: [],
              start: void 0,
              pathLength: 0
            });
          }
        }
        return ca;
      }
      static calcLength(x, y, cmd, points) {
        let len, p1, p2, t;
        const path = _Path;
        switch (cmd) {
          case "L":
            return path.getLineLength(x, y, points[0], points[1]);
          case "C":
            return (0, BezierFunctions_1.getCubicArcLength)([x, points[0], points[2], points[4]], [y, points[1], points[3], points[5]], 1);
          case "Q":
            return (0, BezierFunctions_1.getQuadraticArcLength)([x, points[0], points[2]], [y, points[1], points[3]], 1);
          case "A":
            len = 0;
            var start = points[4];
            var dTheta = points[5];
            var end = points[4] + dTheta;
            var inc = Math.PI / 180;
            if (Math.abs(start - end) < inc) {
              inc = Math.abs(start - end);
            }
            p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);
            if (dTheta < 0) {
              for (t = start - inc; t > end; t -= inc) {
                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);
                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);
                p1 = p2;
              }
            } else {
              for (t = start + inc; t < end; t += inc) {
                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);
                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);
                p1 = p2;
              }
            }
            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);
            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);
            return len;
        }
        return 0;
      }
      static convertEndpointToCenterParameterization(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {
        const psi = psiDeg * (Math.PI / 180);
        const xp = Math.cos(psi) * (x1 - x2) / 2 + Math.sin(psi) * (y1 - y2) / 2;
        const yp = -1 * Math.sin(psi) * (x1 - x2) / 2 + Math.cos(psi) * (y1 - y2) / 2;
        const lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);
        if (lambda > 1) {
          rx *= Math.sqrt(lambda);
          ry *= Math.sqrt(lambda);
        }
        let f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp)));
        if (fa === fs) {
          f *= -1;
        }
        if (isNaN(f)) {
          f = 0;
        }
        const cxp = f * rx * yp / ry;
        const cyp = f * -ry * xp / rx;
        const cx = (x1 + x2) / 2 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;
        const cy = (y1 + y2) / 2 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;
        const vMag = function(v2) {
          return Math.sqrt(v2[0] * v2[0] + v2[1] * v2[1]);
        };
        const vRatio = function(u2, v2) {
          return (u2[0] * v2[0] + u2[1] * v2[1]) / (vMag(u2) * vMag(v2));
        };
        const vAngle = function(u2, v2) {
          return (u2[0] * v2[1] < u2[1] * v2[0] ? -1 : 1) * Math.acos(vRatio(u2, v2));
        };
        const theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);
        const u = [(xp - cxp) / rx, (yp - cyp) / ry];
        const v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];
        let dTheta = vAngle(u, v);
        if (vRatio(u, v) <= -1) {
          dTheta = Math.PI;
        }
        if (vRatio(u, v) >= 1) {
          dTheta = 0;
        }
        if (fs === 0 && dTheta > 0) {
          dTheta = dTheta - 2 * Math.PI;
        }
        if (fs === 1 && dTheta < 0) {
          dTheta = dTheta + 2 * Math.PI;
        }
        return [cx, cy, rx, ry, theta, dTheta, psi, fs];
      }
    };
    exports.Path = Path;
    Path.prototype.className = "Path";
    Path.prototype._attrsAffectingSize = ["data"];
    (0, Global_1._registerNode)(Path);
    Factory_1.Factory.addGetterSetter(Path, "data");
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Arrow.js
var require_Arrow = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Arrow.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Arrow = void 0;
    var Factory_1 = require_Factory();
    var Line_1 = require_Line();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var Path_1 = require_Path();
    var Arrow2 = class extends Line_1.Line {
      _sceneFunc(ctx) {
        super._sceneFunc(ctx);
        const PI2 = Math.PI * 2;
        const points = this.points();
        let tp = points;
        const fromTension = this.tension() !== 0 && points.length > 4;
        if (fromTension) {
          tp = this.getTensionPoints();
        }
        const length = this.pointerLength();
        const n = points.length;
        let dx, dy;
        if (fromTension) {
          const lp = [
            tp[tp.length - 4],
            tp[tp.length - 3],
            tp[tp.length - 2],
            tp[tp.length - 1],
            points[n - 2],
            points[n - 1]
          ];
          const lastLength = Path_1.Path.calcLength(tp[tp.length - 4], tp[tp.length - 3], "C", lp);
          const previous = Path_1.Path.getPointOnQuadraticBezier(Math.min(1, 1 - length / lastLength), lp[0], lp[1], lp[2], lp[3], lp[4], lp[5]);
          dx = points[n - 2] - previous.x;
          dy = points[n - 1] - previous.y;
        } else {
          dx = points[n - 2] - points[n - 4];
          dy = points[n - 1] - points[n - 3];
        }
        const radians = (Math.atan2(dy, dx) + PI2) % PI2;
        const width = this.pointerWidth();
        if (this.pointerAtEnding()) {
          ctx.save();
          ctx.beginPath();
          ctx.translate(points[n - 2], points[n - 1]);
          ctx.rotate(radians);
          ctx.moveTo(0, 0);
          ctx.lineTo(-length, width / 2);
          ctx.lineTo(-length, -width / 2);
          ctx.closePath();
          ctx.restore();
          this.__fillStroke(ctx);
        }
        if (this.pointerAtBeginning()) {
          ctx.save();
          ctx.beginPath();
          ctx.translate(points[0], points[1]);
          if (fromTension) {
            dx = (tp[0] + tp[2]) / 2 - points[0];
            dy = (tp[1] + tp[3]) / 2 - points[1];
          } else {
            dx = points[2] - points[0];
            dy = points[3] - points[1];
          }
          ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);
          ctx.moveTo(0, 0);
          ctx.lineTo(-length, width / 2);
          ctx.lineTo(-length, -width / 2);
          ctx.closePath();
          ctx.restore();
          this.__fillStroke(ctx);
        }
      }
      __fillStroke(ctx) {
        const isDashEnabled = this.dashEnabled();
        if (isDashEnabled) {
          this.attrs.dashEnabled = false;
          ctx.setLineDash([]);
        }
        ctx.fillStrokeShape(this);
        if (isDashEnabled) {
          this.attrs.dashEnabled = true;
        }
      }
      getSelfRect() {
        const lineRect = super.getSelfRect();
        const offset = this.pointerWidth() / 2;
        return {
          x: lineRect.x,
          y: lineRect.y - offset,
          width: lineRect.width,
          height: lineRect.height + offset * 2
        };
      }
    };
    exports.Arrow = Arrow2;
    Arrow2.prototype.className = "Arrow";
    (0, Global_1._registerNode)(Arrow2);
    Factory_1.Factory.addGetterSetter(Arrow2, "pointerLength", 10, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Arrow2, "pointerWidth", 10, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Arrow2, "pointerAtBeginning", false);
    Factory_1.Factory.addGetterSetter(Arrow2, "pointerAtEnding", true);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Circle.js
var require_Circle = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Circle.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Circle = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var Circle2 = class extends Shape_1.Shape {
      _sceneFunc(context) {
        context.beginPath();
        context.arc(0, 0, this.attrs.radius || 0, 0, Math.PI * 2, false);
        context.closePath();
        context.fillStrokeShape(this);
      }
      getWidth() {
        return this.radius() * 2;
      }
      getHeight() {
        return this.radius() * 2;
      }
      setWidth(width) {
        if (this.radius() !== width / 2) {
          this.radius(width / 2);
        }
      }
      setHeight(height) {
        if (this.radius() !== height / 2) {
          this.radius(height / 2);
        }
      }
    };
    exports.Circle = Circle2;
    Circle2.prototype._centroid = true;
    Circle2.prototype.className = "Circle";
    Circle2.prototype._attrsAffectingSize = ["radius"];
    (0, Global_1._registerNode)(Circle2);
    Factory_1.Factory.addGetterSetter(Circle2, "radius", 0, (0, Validators_1.getNumberValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Ellipse.js
var require_Ellipse = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Ellipse.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Ellipse = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var Ellipse3 = class extends Shape_1.Shape {
      _sceneFunc(context) {
        const rx = this.radiusX(), ry = this.radiusY();
        context.beginPath();
        context.save();
        if (rx !== ry) {
          context.scale(1, ry / rx);
        }
        context.arc(0, 0, rx, 0, Math.PI * 2, false);
        context.restore();
        context.closePath();
        context.fillStrokeShape(this);
      }
      getWidth() {
        return this.radiusX() * 2;
      }
      getHeight() {
        return this.radiusY() * 2;
      }
      setWidth(width) {
        this.radiusX(width / 2);
      }
      setHeight(height) {
        this.radiusY(height / 2);
      }
    };
    exports.Ellipse = Ellipse3;
    Ellipse3.prototype.className = "Ellipse";
    Ellipse3.prototype._centroid = true;
    Ellipse3.prototype._attrsAffectingSize = ["radiusX", "radiusY"];
    (0, Global_1._registerNode)(Ellipse3);
    Factory_1.Factory.addComponentsGetterSetter(Ellipse3, "radius", ["x", "y"]);
    Factory_1.Factory.addGetterSetter(Ellipse3, "radiusX", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Ellipse3, "radiusY", 0, (0, Validators_1.getNumberValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Image.js
var require_Image = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Image.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Image = void 0;
    var Util_1 = require_Util();
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Global_1 = require_Global();
    var Validators_1 = require_Validators();
    var Image3 = class _Image extends Shape_1.Shape {
      constructor(attrs) {
        super(attrs);
        this.on("imageChange.konva", () => {
          this._setImageLoad();
        });
        this._setImageLoad();
      }
      _setImageLoad() {
        const image = this.image();
        if (image && image.complete) {
          return;
        }
        if (image && image.readyState === 4) {
          return;
        }
        if (image && image["addEventListener"]) {
          image["addEventListener"]("load", () => {
            this._requestDraw();
          });
        }
      }
      _useBufferCanvas() {
        const hasCornerRadius = !!this.cornerRadius();
        const hasShadow = this.hasShadow();
        if (hasCornerRadius && hasShadow) {
          return true;
        }
        return super._useBufferCanvas(true);
      }
      _sceneFunc(context) {
        const width = this.getWidth();
        const height = this.getHeight();
        const cornerRadius = this.cornerRadius();
        const image = this.attrs.image;
        let params;
        if (image) {
          const cropWidth = this.attrs.cropWidth;
          const cropHeight = this.attrs.cropHeight;
          if (cropWidth && cropHeight) {
            params = [
              image,
              this.cropX(),
              this.cropY(),
              cropWidth,
              cropHeight,
              0,
              0,
              width,
              height
            ];
          } else {
            params = [image, 0, 0, width, height];
          }
        }
        if (this.hasFill() || this.hasStroke() || cornerRadius) {
          context.beginPath();
          cornerRadius ? Util_1.Util.drawRoundedRectPath(context, width, height, cornerRadius) : context.rect(0, 0, width, height);
          context.closePath();
          context.fillStrokeShape(this);
        }
        if (image) {
          if (cornerRadius) {
            context.clip();
          }
          context.drawImage.apply(context, params);
        }
      }
      _hitFunc(context) {
        const width = this.width(), height = this.height(), cornerRadius = this.cornerRadius();
        context.beginPath();
        if (!cornerRadius) {
          context.rect(0, 0, width, height);
        } else {
          Util_1.Util.drawRoundedRectPath(context, width, height, cornerRadius);
        }
        context.closePath();
        context.fillStrokeShape(this);
      }
      getWidth() {
        var _a, _b;
        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.width;
      }
      getHeight() {
        var _a, _b;
        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.height;
      }
      static fromURL(url, callback, onError = null) {
        const img = Util_1.Util.createImageElement();
        img.onload = function() {
          const image = new _Image({
            image: img
          });
          callback(image);
        };
        img.onerror = onError;
        img.crossOrigin = "Anonymous";
        img.src = url;
      }
    };
    exports.Image = Image3;
    Image3.prototype.className = "Image";
    (0, Global_1._registerNode)(Image3);
    Factory_1.Factory.addGetterSetter(Image3, "cornerRadius", 0, (0, Validators_1.getNumberOrArrayOfNumbersValidator)(4));
    Factory_1.Factory.addGetterSetter(Image3, "image");
    Factory_1.Factory.addComponentsGetterSetter(Image3, "crop", ["x", "y", "width", "height"]);
    Factory_1.Factory.addGetterSetter(Image3, "cropX", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Image3, "cropY", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Image3, "cropWidth", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Image3, "cropHeight", 0, (0, Validators_1.getNumberValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Label.js
var require_Label = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Label.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Tag = exports.Label = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Group_1 = require_Group();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var ATTR_CHANGE_LIST = [
      "fontFamily",
      "fontSize",
      "fontStyle",
      "padding",
      "lineHeight",
      "text",
      "width",
      "height",
      "pointerDirection",
      "pointerWidth",
      "pointerHeight"
    ];
    var CHANGE_KONVA = "Change.konva";
    var NONE = "none";
    var UP = "up";
    var RIGHT = "right";
    var DOWN = "down";
    var LEFT = "left";
    var attrChangeListLen = ATTR_CHANGE_LIST.length;
    var Label = class extends Group_1.Group {
      constructor(config) {
        super(config);
        this.on("add.konva", function(evt) {
          this._addListeners(evt.child);
          this._sync();
        });
      }
      getText() {
        return this.find("Text")[0];
      }
      getTag() {
        return this.find("Tag")[0];
      }
      _addListeners(text) {
        let that = this, n;
        const func = function() {
          that._sync();
        };
        for (n = 0; n < attrChangeListLen; n++) {
          text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);
        }
      }
      getWidth() {
        return this.getText().width();
      }
      getHeight() {
        return this.getText().height();
      }
      _sync() {
        let text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y, pointerHeight;
        if (text && tag) {
          width = text.width();
          height = text.height();
          pointerDirection = tag.pointerDirection();
          pointerWidth = tag.pointerWidth();
          pointerHeight = tag.pointerHeight();
          x = 0;
          y = 0;
          switch (pointerDirection) {
            case UP:
              x = width / 2;
              y = -1 * pointerHeight;
              break;
            case RIGHT:
              x = width + pointerWidth;
              y = height / 2;
              break;
            case DOWN:
              x = width / 2;
              y = height + pointerHeight;
              break;
            case LEFT:
              x = -1 * pointerWidth;
              y = height / 2;
              break;
          }
          tag.setAttrs({
            x: -1 * x,
            y: -1 * y,
            width,
            height
          });
          text.setAttrs({
            x: -1 * x,
            y: -1 * y
          });
        }
      }
    };
    exports.Label = Label;
    Label.prototype.className = "Label";
    (0, Global_1._registerNode)(Label);
    var Tag = class extends Shape_1.Shape {
      _sceneFunc(context) {
        const width = this.width(), height = this.height(), pointerDirection = this.pointerDirection(), pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), cornerRadius = this.cornerRadius();
        let topLeft = 0;
        let topRight = 0;
        let bottomLeft = 0;
        let bottomRight = 0;
        if (typeof cornerRadius === "number") {
          topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);
        } else {
          topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);
          topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);
          bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);
          bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);
        }
        context.beginPath();
        context.moveTo(topLeft, 0);
        if (pointerDirection === UP) {
          context.lineTo((width - pointerWidth) / 2, 0);
          context.lineTo(width / 2, -1 * pointerHeight);
          context.lineTo((width + pointerWidth) / 2, 0);
        }
        context.lineTo(width - topRight, 0);
        context.arc(width - topRight, topRight, topRight, Math.PI * 3 / 2, 0, false);
        if (pointerDirection === RIGHT) {
          context.lineTo(width, (height - pointerHeight) / 2);
          context.lineTo(width + pointerWidth, height / 2);
          context.lineTo(width, (height + pointerHeight) / 2);
        }
        context.lineTo(width, height - bottomRight);
        context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);
        if (pointerDirection === DOWN) {
          context.lineTo((width + pointerWidth) / 2, height);
          context.lineTo(width / 2, height + pointerHeight);
          context.lineTo((width - pointerWidth) / 2, height);
        }
        context.lineTo(bottomLeft, height);
        context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);
        if (pointerDirection === LEFT) {
          context.lineTo(0, (height + pointerHeight) / 2);
          context.lineTo(-1 * pointerWidth, height / 2);
          context.lineTo(0, (height - pointerHeight) / 2);
        }
        context.lineTo(0, topLeft);
        context.arc(topLeft, topLeft, topLeft, Math.PI, Math.PI * 3 / 2, false);
        context.closePath();
        context.fillStrokeShape(this);
      }
      getSelfRect() {
        let x = 0, y = 0, pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), direction = this.pointerDirection(), width = this.width(), height = this.height();
        if (direction === UP) {
          y -= pointerHeight;
          height += pointerHeight;
        } else if (direction === DOWN) {
          height += pointerHeight;
        } else if (direction === LEFT) {
          x -= pointerWidth * 1.5;
          width += pointerWidth;
        } else if (direction === RIGHT) {
          width += pointerWidth * 1.5;
        }
        return {
          x,
          y,
          width,
          height
        };
      }
    };
    exports.Tag = Tag;
    Tag.prototype.className = "Tag";
    (0, Global_1._registerNode)(Tag);
    Factory_1.Factory.addGetterSetter(Tag, "pointerDirection", NONE);
    Factory_1.Factory.addGetterSetter(Tag, "pointerWidth", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Tag, "pointerHeight", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Tag, "cornerRadius", 0, (0, Validators_1.getNumberOrArrayOfNumbersValidator)(4));
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Rect.js
var require_Rect = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Rect.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Rect = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Global_1 = require_Global();
    var Util_1 = require_Util();
    var Validators_1 = require_Validators();
    var Rect2 = class extends Shape_1.Shape {
      _sceneFunc(context) {
        const cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();
        context.beginPath();
        if (!cornerRadius) {
          context.rect(0, 0, width, height);
        } else {
          Util_1.Util.drawRoundedRectPath(context, width, height, cornerRadius);
        }
        context.closePath();
        context.fillStrokeShape(this);
      }
    };
    exports.Rect = Rect2;
    Rect2.prototype.className = "Rect";
    (0, Global_1._registerNode)(Rect2);
    Factory_1.Factory.addGetterSetter(Rect2, "cornerRadius", 0, (0, Validators_1.getNumberOrArrayOfNumbersValidator)(4));
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/RegularPolygon.js
var require_RegularPolygon = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/RegularPolygon.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.RegularPolygon = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var RegularPolygon2 = class extends Shape_1.Shape {
      _sceneFunc(context) {
        const points = this._getPoints();
        context.beginPath();
        context.moveTo(points[0].x, points[0].y);
        for (let n = 1; n < points.length; n++) {
          context.lineTo(points[n].x, points[n].y);
        }
        context.closePath();
        context.fillStrokeShape(this);
      }
      _getPoints() {
        const sides = this.attrs.sides;
        const radius = this.attrs.radius || 0;
        const points = [];
        for (let n = 0; n < sides; n++) {
          points.push({
            x: radius * Math.sin(n * 2 * Math.PI / sides),
            y: -1 * radius * Math.cos(n * 2 * Math.PI / sides)
          });
        }
        return points;
      }
      getSelfRect() {
        const points = this._getPoints();
        let minX = points[0].x;
        let maxX = points[0].y;
        let minY = points[0].x;
        let maxY = points[0].y;
        points.forEach((point) => {
          minX = Math.min(minX, point.x);
          maxX = Math.max(maxX, point.x);
          minY = Math.min(minY, point.y);
          maxY = Math.max(maxY, point.y);
        });
        return {
          x: minX,
          y: minY,
          width: maxX - minX,
          height: maxY - minY
        };
      }
      getWidth() {
        return this.radius() * 2;
      }
      getHeight() {
        return this.radius() * 2;
      }
      setWidth(width) {
        this.radius(width / 2);
      }
      setHeight(height) {
        this.radius(height / 2);
      }
    };
    exports.RegularPolygon = RegularPolygon2;
    RegularPolygon2.prototype.className = "RegularPolygon";
    RegularPolygon2.prototype._centroid = true;
    RegularPolygon2.prototype._attrsAffectingSize = ["radius"];
    (0, Global_1._registerNode)(RegularPolygon2);
    Factory_1.Factory.addGetterSetter(RegularPolygon2, "radius", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(RegularPolygon2, "sides", 0, (0, Validators_1.getNumberValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Ring.js
var require_Ring = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Ring.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Ring = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var PIx2 = Math.PI * 2;
    var Ring = class extends Shape_1.Shape {
      _sceneFunc(context) {
        context.beginPath();
        context.arc(0, 0, this.innerRadius(), 0, PIx2, false);
        context.moveTo(this.outerRadius(), 0);
        context.arc(0, 0, this.outerRadius(), PIx2, 0, true);
        context.closePath();
        context.fillStrokeShape(this);
      }
      getWidth() {
        return this.outerRadius() * 2;
      }
      getHeight() {
        return this.outerRadius() * 2;
      }
      setWidth(width) {
        this.outerRadius(width / 2);
      }
      setHeight(height) {
        this.outerRadius(height / 2);
      }
    };
    exports.Ring = Ring;
    Ring.prototype.className = "Ring";
    Ring.prototype._centroid = true;
    Ring.prototype._attrsAffectingSize = ["innerRadius", "outerRadius"];
    (0, Global_1._registerNode)(Ring);
    Factory_1.Factory.addGetterSetter(Ring, "innerRadius", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Ring, "outerRadius", 0, (0, Validators_1.getNumberValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Sprite.js
var require_Sprite = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Sprite.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Sprite = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Animation_1 = require_Animation();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var Sprite = class extends Shape_1.Shape {
      constructor(config) {
        super(config);
        this._updated = true;
        this.anim = new Animation_1.Animation(() => {
          const updated = this._updated;
          this._updated = false;
          return updated;
        });
        this.on("animationChange.konva", function() {
          this.frameIndex(0);
        });
        this.on("frameIndexChange.konva", function() {
          this._updated = true;
        });
        this.on("frameRateChange.konva", function() {
          if (!this.anim.isRunning()) {
            return;
          }
          clearInterval(this.interval);
          this._setInterval();
        });
      }
      _sceneFunc(context) {
        const anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();
        if (this.hasFill() || this.hasStroke()) {
          context.beginPath();
          context.rect(0, 0, width, height);
          context.closePath();
          context.fillStrokeShape(this);
        }
        if (image) {
          if (offsets) {
            const offset = offsets[anim], ix2 = index * 2;
            context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);
          } else {
            context.drawImage(image, x, y, width, height, 0, 0, width, height);
          }
        }
      }
      _hitFunc(context) {
        const anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];
        context.beginPath();
        if (offsets) {
          const offset = offsets[anim];
          const ix2 = index * 2;
          context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);
        } else {
          context.rect(0, 0, width, height);
        }
        context.closePath();
        context.fillShape(this);
      }
      _useBufferCanvas() {
        return super._useBufferCanvas(true);
      }
      _setInterval() {
        const that = this;
        this.interval = setInterval(function() {
          that._updateIndex();
        }, 1e3 / this.frameRate());
      }
      start() {
        if (this.isRunning()) {
          return;
        }
        const layer = this.getLayer();
        this.anim.setLayers(layer);
        this._setInterval();
        this.anim.start();
      }
      stop() {
        this.anim.stop();
        clearInterval(this.interval);
      }
      isRunning() {
        return this.anim.isRunning();
      }
      _updateIndex() {
        const index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;
        if (index < len - 1) {
          this.frameIndex(index + 1);
        } else {
          this.frameIndex(0);
        }
      }
    };
    exports.Sprite = Sprite;
    Sprite.prototype.className = "Sprite";
    (0, Global_1._registerNode)(Sprite);
    Factory_1.Factory.addGetterSetter(Sprite, "animation");
    Factory_1.Factory.addGetterSetter(Sprite, "animations");
    Factory_1.Factory.addGetterSetter(Sprite, "frameOffsets");
    Factory_1.Factory.addGetterSetter(Sprite, "image");
    Factory_1.Factory.addGetterSetter(Sprite, "frameIndex", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Sprite, "frameRate", 17, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.backCompat(Sprite, {
      index: "frameIndex",
      getIndex: "getFrameIndex",
      setIndex: "setFrameIndex"
    });
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Star.js
var require_Star = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Star.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Star = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var Star = class extends Shape_1.Shape {
      _sceneFunc(context) {
        const innerRadius = this.innerRadius(), outerRadius = this.outerRadius(), numPoints = this.numPoints();
        context.beginPath();
        context.moveTo(0, 0 - outerRadius);
        for (let n = 1; n < numPoints * 2; n++) {
          const radius = n % 2 === 0 ? outerRadius : innerRadius;
          const x = radius * Math.sin(n * Math.PI / numPoints);
          const y = -1 * radius * Math.cos(n * Math.PI / numPoints);
          context.lineTo(x, y);
        }
        context.closePath();
        context.fillStrokeShape(this);
      }
      getWidth() {
        return this.outerRadius() * 2;
      }
      getHeight() {
        return this.outerRadius() * 2;
      }
      setWidth(width) {
        this.outerRadius(width / 2);
      }
      setHeight(height) {
        this.outerRadius(height / 2);
      }
    };
    exports.Star = Star;
    Star.prototype.className = "Star";
    Star.prototype._centroid = true;
    Star.prototype._attrsAffectingSize = ["innerRadius", "outerRadius"];
    (0, Global_1._registerNode)(Star);
    Factory_1.Factory.addGetterSetter(Star, "numPoints", 5, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Star, "innerRadius", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Star, "outerRadius", 0, (0, Validators_1.getNumberValidator)());
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Text.js
var require_Text = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Text.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Text = void 0;
    exports.stringToArray = stringToArray;
    var Util_1 = require_Util();
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Global_1 = require_Global();
    var Validators_1 = require_Validators();
    var Global_2 = require_Global();
    function stringToArray(string) {
      return [...string].reduce((acc, char, index, array) => {
        if (new RegExp("\\p{Emoji}", "u").test(char)) {
          const nextChar = array[index + 1];
          if (nextChar && new RegExp("\\p{Emoji_Modifier}|\\u200D", "u").test(nextChar)) {
            acc.push(char + nextChar);
            array[index + 1] = "";
          } else {
            acc.push(char);
          }
        } else if (new RegExp("\\p{Regional_Indicator}{2}", "u").test(char + (array[index + 1] || ""))) {
          acc.push(char + array[index + 1]);
        } else if (index > 0 && new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}", "u").test(char)) {
          acc[acc.length - 1] += char;
        } else if (char) {
          acc.push(char);
        }
        return acc;
      }, []);
    }
    var AUTO = "auto";
    var CENTER = "center";
    var INHERIT = "inherit";
    var JUSTIFY = "justify";
    var CHANGE_KONVA = "Change.konva";
    var CONTEXT_2D = "2d";
    var DASH = "-";
    var LEFT = "left";
    var TEXT = "text";
    var TEXT_UPPER = "Text";
    var TOP = "top";
    var BOTTOM = "bottom";
    var MIDDLE = "middle";
    var NORMAL = "normal";
    var PX_SPACE = "px ";
    var SPACE = " ";
    var RIGHT = "right";
    var RTL = "rtl";
    var WORD = "word";
    var CHAR = "char";
    var NONE = "none";
    var ELLIPSIS = "";
    var ATTR_CHANGE_LIST = [
      "direction",
      "fontFamily",
      "fontSize",
      "fontStyle",
      "fontVariant",
      "padding",
      "align",
      "verticalAlign",
      "lineHeight",
      "text",
      "width",
      "height",
      "wrap",
      "ellipsis",
      "letterSpacing"
    ];
    var attrChangeListLen = ATTR_CHANGE_LIST.length;
    function normalizeFontFamily2(fontFamily) {
      return fontFamily.split(",").map((family) => {
        family = family.trim();
        const hasSpace = family.indexOf(" ") >= 0;
        const hasQuotes = family.indexOf('"') >= 0 || family.indexOf("'") >= 0;
        if (hasSpace && !hasQuotes) {
          family = `"${family}"`;
        }
        return family;
      }).join(", ");
    }
    var dummyContext2;
    function getDummyContext2() {
      if (dummyContext2) {
        return dummyContext2;
      }
      dummyContext2 = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);
      return dummyContext2;
    }
    function _fillFunc(context) {
      context.fillText(this._partialText, this._partialTextX, this._partialTextY);
    }
    function _strokeFunc(context) {
      context.setAttr("miterLimit", 2);
      context.strokeText(this._partialText, this._partialTextX, this._partialTextY);
    }
    function checkDefaultFill(config) {
      config = config || {};
      if (!config.fillLinearGradientColorStops && !config.fillRadialGradientColorStops && !config.fillPatternImage) {
        config.fill = config.fill || "black";
      }
      return config;
    }
    var Text2 = class extends Shape_1.Shape {
      constructor(config) {
        super(checkDefaultFill(config));
        this._partialTextX = 0;
        this._partialTextY = 0;
        for (let n = 0; n < attrChangeListLen; n++) {
          this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, this._setTextData);
        }
        this._setTextData();
      }
      _sceneFunc(context) {
        const textArr = this.textArr, textArrLen = textArr.length;
        if (!this.text()) {
          return;
        }
        let padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, verticalAlign = this.verticalAlign(), direction = this.direction(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf("underline") !== -1, shouldLineThrough = textDecoration.indexOf("line-through") !== -1, n;
        direction = direction === INHERIT ? context.direction : direction;
        let translateY = lineHeightPx / 2;
        let baseline = MIDDLE;
        if (Global_1.Konva._fixTextRendering) {
          const metrics = this.measureSize("M");
          baseline = "alphabetic";
          translateY = (metrics.fontBoundingBoxAscent - metrics.fontBoundingBoxDescent) / 2 + lineHeightPx / 2;
        }
        var lineTranslateX = 0;
        var lineTranslateY = 0;
        if (direction === RTL) {
          context.setAttr("direction", direction);
        }
        context.setAttr("font", this._getContextFont());
        context.setAttr("textBaseline", baseline);
        context.setAttr("textAlign", LEFT);
        if (verticalAlign === MIDDLE) {
          alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;
        } else if (verticalAlign === BOTTOM) {
          alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;
        }
        context.translate(padding, alignY + padding);
        for (n = 0; n < textArrLen; n++) {
          var lineTranslateX = 0;
          var lineTranslateY = 0;
          var obj = textArr[n], text = obj.text, width = obj.width, lastLine = obj.lastInParagraph, spacesNumber, oneWord, lineWidth;
          context.save();
          if (align === RIGHT) {
            lineTranslateX += totalWidth - width - padding * 2;
          } else if (align === CENTER) {
            lineTranslateX += (totalWidth - width - padding * 2) / 2;
          }
          if (shouldUnderline) {
            context.save();
            context.beginPath();
            const yOffset = Global_1.Konva._fixTextRendering ? Math.round(fontSize / 4) : Math.round(fontSize / 2);
            const x = lineTranslateX;
            const y = translateY + lineTranslateY + yOffset;
            context.moveTo(x, y);
            spacesNumber = text.split(" ").length - 1;
            oneWord = spacesNumber === 0;
            lineWidth = align === JUSTIFY && !lastLine ? totalWidth - padding * 2 : width;
            context.lineTo(x + Math.round(lineWidth), y);
            context.lineWidth = fontSize / 15;
            const gradient = this._getLinearGradient();
            context.strokeStyle = gradient || fill;
            context.stroke();
            context.restore();
          }
          if (shouldLineThrough) {
            context.save();
            context.beginPath();
            const yOffset = Global_1.Konva._fixTextRendering ? -Math.round(fontSize / 4) : 0;
            context.moveTo(lineTranslateX, translateY + lineTranslateY + yOffset);
            spacesNumber = text.split(" ").length - 1;
            oneWord = spacesNumber === 0;
            lineWidth = align === JUSTIFY && !lastLine ? totalWidth - padding * 2 : width;
            context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + yOffset);
            context.lineWidth = fontSize / 15;
            const gradient = this._getLinearGradient();
            context.strokeStyle = gradient || fill;
            context.stroke();
            context.restore();
          }
          if (direction !== RTL && (letterSpacing !== 0 || align === JUSTIFY)) {
            spacesNumber = text.split(" ").length - 1;
            const array = stringToArray(text);
            for (let li = 0; li < array.length; li++) {
              const letter = array[li];
              if (letter === " " && !lastLine && align === JUSTIFY) {
                lineTranslateX += (totalWidth - padding * 2 - width) / spacesNumber;
              }
              this._partialTextX = lineTranslateX;
              this._partialTextY = translateY + lineTranslateY;
              this._partialText = letter;
              context.fillStrokeShape(this);
              lineTranslateX += this.measureSize(letter).width + letterSpacing;
            }
          } else {
            if (letterSpacing !== 0) {
              context.setAttr("letterSpacing", `${letterSpacing}px`);
            }
            this._partialTextX = lineTranslateX;
            this._partialTextY = translateY + lineTranslateY;
            this._partialText = text;
            context.fillStrokeShape(this);
          }
          context.restore();
          if (textArrLen > 1) {
            translateY += lineHeightPx;
          }
        }
      }
      _hitFunc(context) {
        const width = this.getWidth(), height = this.getHeight();
        context.beginPath();
        context.rect(0, 0, width, height);
        context.closePath();
        context.fillStrokeShape(this);
      }
      setText(text) {
        const str = Util_1.Util._isString(text) ? text : text === null || text === void 0 ? "" : text + "";
        this._setAttr(TEXT, str);
        return this;
      }
      getWidth() {
        const isAuto = this.attrs.width === AUTO || this.attrs.width === void 0;
        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;
      }
      getHeight() {
        const isAuto = this.attrs.height === AUTO || this.attrs.height === void 0;
        return isAuto ? this.fontSize() * this.textArr.length * this.lineHeight() + this.padding() * 2 : this.attrs.height;
      }
      getTextWidth() {
        return this.textWidth;
      }
      getTextHeight() {
        Util_1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.");
        return this.textHeight;
      }
      measureSize(text) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
        let _context = getDummyContext2(), fontSize = this.fontSize(), metrics;
        _context.save();
        _context.font = this._getContextFont();
        metrics = _context.measureText(text);
        _context.restore();
        const scaleFactor = fontSize / 100;
        return {
          actualBoundingBoxAscent: (_a = metrics.actualBoundingBoxAscent) !== null && _a !== void 0 ? _a : 71.58203125 * scaleFactor,
          actualBoundingBoxDescent: (_b = metrics.actualBoundingBoxDescent) !== null && _b !== void 0 ? _b : 0,
          actualBoundingBoxLeft: (_c = metrics.actualBoundingBoxLeft) !== null && _c !== void 0 ? _c : -7.421875 * scaleFactor,
          actualBoundingBoxRight: (_d = metrics.actualBoundingBoxRight) !== null && _d !== void 0 ? _d : 75.732421875 * scaleFactor,
          alphabeticBaseline: (_e = metrics.alphabeticBaseline) !== null && _e !== void 0 ? _e : 0,
          emHeightAscent: (_f = metrics.emHeightAscent) !== null && _f !== void 0 ? _f : 100 * scaleFactor,
          emHeightDescent: (_g = metrics.emHeightDescent) !== null && _g !== void 0 ? _g : -20 * scaleFactor,
          fontBoundingBoxAscent: (_h = metrics.fontBoundingBoxAscent) !== null && _h !== void 0 ? _h : 91 * scaleFactor,
          fontBoundingBoxDescent: (_j = metrics.fontBoundingBoxDescent) !== null && _j !== void 0 ? _j : 21 * scaleFactor,
          hangingBaseline: (_k = metrics.hangingBaseline) !== null && _k !== void 0 ? _k : 72.80000305175781 * scaleFactor,
          ideographicBaseline: (_l = metrics.ideographicBaseline) !== null && _l !== void 0 ? _l : -21 * scaleFactor,
          width: metrics.width,
          height: fontSize
        };
      }
      _getContextFont() {
        return this.fontStyle() + SPACE + this.fontVariant() + SPACE + (this.fontSize() + PX_SPACE) + normalizeFontFamily2(this.fontFamily());
      }
      _addTextLine(line) {
        const align = this.align();
        if (align === JUSTIFY) {
          line = line.trim();
        }
        const width = this._getTextWidth(line);
        return this.textArr.push({
          text: line,
          width,
          lastInParagraph: false
        });
      }
      _getTextWidth(text) {
        const letterSpacing = this.letterSpacing();
        const length = text.length;
        return getDummyContext2().measureText(text).width + letterSpacing * length;
      }
      _setTextData() {
        let lines = this.text().split("\n"), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== void 0, fixedHeight = height !== AUTO && height !== void 0, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis();
        this.textArr = [];
        getDummyContext2().font = this._getContextFont();
        const additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;
        for (let i = 0, max = lines.length; i < max; ++i) {
          let line = lines[i];
          let lineWidth = this._getTextWidth(line);
          if (fixedWidth && lineWidth > maxWidth) {
            while (line.length > 0) {
              let low = 0, high = stringToArray(line).length, match = "", matchWidth = 0;
              while (low < high) {
                const mid = low + high >>> 1, lineArray = stringToArray(line), substr = lineArray.slice(0, mid + 1).join(""), substrWidth = this._getTextWidth(substr) + additionalWidth;
                if (substrWidth <= maxWidth) {
                  low = mid + 1;
                  match = substr;
                  matchWidth = substrWidth;
                } else {
                  high = mid;
                }
              }
              if (match) {
                if (wrapAtWord) {
                  const lineArray2 = stringToArray(line);
                  const matchArray = stringToArray(match);
                  const nextChar = lineArray2[matchArray.length];
                  const nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;
                  let wrapIndex;
                  if (nextIsSpaceOrDash && matchWidth <= maxWidth) {
                    wrapIndex = matchArray.length;
                  } else {
                    const lastSpaceIndex = matchArray.lastIndexOf(SPACE);
                    const lastDashIndex = matchArray.lastIndexOf(DASH);
                    wrapIndex = Math.max(lastSpaceIndex, lastDashIndex) + 1;
                  }
                  if (wrapIndex > 0) {
                    low = wrapIndex;
                    match = lineArray2.slice(0, low).join("");
                    matchWidth = this._getTextWidth(match);
                  }
                }
                match = match.trimRight();
                this._addTextLine(match);
                textWidth = Math.max(textWidth, matchWidth);
                currentHeightPx += lineHeightPx;
                const shouldHandleEllipsis = this._shouldHandleEllipsis(currentHeightPx);
                if (shouldHandleEllipsis) {
                  this._tryToAddEllipsisToLastLine();
                  break;
                }
                const lineArray = stringToArray(line);
                line = lineArray.slice(low).join("").trimLeft();
                if (line.length > 0) {
                  lineWidth = this._getTextWidth(line);
                  if (lineWidth <= maxWidth) {
                    this._addTextLine(line);
                    currentHeightPx += lineHeightPx;
                    textWidth = Math.max(textWidth, lineWidth);
                    break;
                  }
                }
              } else {
                break;
              }
            }
          } else {
            this._addTextLine(line);
            currentHeightPx += lineHeightPx;
            textWidth = Math.max(textWidth, lineWidth);
            if (this._shouldHandleEllipsis(currentHeightPx) && i < max - 1) {
              this._tryToAddEllipsisToLastLine();
            }
          }
          if (this.textArr[this.textArr.length - 1]) {
            this.textArr[this.textArr.length - 1].lastInParagraph = true;
          }
          if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {
            break;
          }
        }
        this.textHeight = fontSize;
        this.textWidth = textWidth;
      }
      _shouldHandleEllipsis(currentHeightPx) {
        const fontSize = +this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, height = this.attrs.height, fixedHeight = height !== AUTO && height !== void 0, padding = this.padding(), maxHeightPx = height - padding * 2, wrap = this.wrap(), shouldWrap = wrap !== NONE;
        return !shouldWrap || fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx;
      }
      _tryToAddEllipsisToLastLine() {
        const width = this.attrs.width, fixedWidth = width !== AUTO && width !== void 0, padding = this.padding(), maxWidth = width - padding * 2, shouldAddEllipsis = this.ellipsis();
        const lastLine = this.textArr[this.textArr.length - 1];
        if (!lastLine || !shouldAddEllipsis) {
          return;
        }
        if (fixedWidth) {
          const haveSpace = this._getTextWidth(lastLine.text + ELLIPSIS) < maxWidth;
          if (!haveSpace) {
            lastLine.text = lastLine.text.slice(0, lastLine.text.length - 3);
          }
        }
        this.textArr.splice(this.textArr.length - 1, 1);
        this._addTextLine(lastLine.text + ELLIPSIS);
      }
      getStrokeScaleEnabled() {
        return true;
      }
      _useBufferCanvas() {
        const hasLine = this.textDecoration().indexOf("underline") !== -1 || this.textDecoration().indexOf("line-through") !== -1;
        const hasShadow = this.hasShadow();
        if (hasLine && hasShadow) {
          return true;
        }
        return super._useBufferCanvas();
      }
    };
    exports.Text = Text2;
    Text2.prototype._fillFunc = _fillFunc;
    Text2.prototype._strokeFunc = _strokeFunc;
    Text2.prototype.className = TEXT_UPPER;
    Text2.prototype._attrsAffectingSize = [
      "text",
      "fontSize",
      "padding",
      "wrap",
      "lineHeight",
      "letterSpacing"
    ];
    (0, Global_2._registerNode)(Text2);
    Factory_1.Factory.overWriteSetter(Text2, "width", (0, Validators_1.getNumberOrAutoValidator)());
    Factory_1.Factory.overWriteSetter(Text2, "height", (0, Validators_1.getNumberOrAutoValidator)());
    Factory_1.Factory.addGetterSetter(Text2, "direction", INHERIT);
    Factory_1.Factory.addGetterSetter(Text2, "fontFamily", "Arial");
    Factory_1.Factory.addGetterSetter(Text2, "fontSize", 12, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Text2, "fontStyle", NORMAL);
    Factory_1.Factory.addGetterSetter(Text2, "fontVariant", NORMAL);
    Factory_1.Factory.addGetterSetter(Text2, "padding", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Text2, "align", LEFT);
    Factory_1.Factory.addGetterSetter(Text2, "verticalAlign", TOP);
    Factory_1.Factory.addGetterSetter(Text2, "lineHeight", 1, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Text2, "wrap", WORD);
    Factory_1.Factory.addGetterSetter(Text2, "ellipsis", false, (0, Validators_1.getBooleanValidator)());
    Factory_1.Factory.addGetterSetter(Text2, "letterSpacing", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Text2, "text", "", (0, Validators_1.getStringValidator)());
    Factory_1.Factory.addGetterSetter(Text2, "textDecoration", "");
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/TextPath.js
var require_TextPath = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/TextPath.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TextPath = void 0;
    var Util_1 = require_Util();
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Path_1 = require_Path();
    var Text_1 = require_Text();
    var Validators_1 = require_Validators();
    var Global_1 = require_Global();
    var EMPTY_STRING = "";
    var NORMAL = "normal";
    function _fillFunc(context) {
      context.fillText(this.partialText, 0, 0);
    }
    function _strokeFunc(context) {
      context.strokeText(this.partialText, 0, 0);
    }
    var TextPath = class extends Shape_1.Shape {
      constructor(config) {
        super(config);
        this.dummyCanvas = Util_1.Util.createCanvasElement();
        this.dataArray = [];
        this._readDataAttribute();
        this.on("dataChange.konva", function() {
          this._readDataAttribute();
          this._setTextData();
        });
        this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva", this._setTextData);
        this._setTextData();
      }
      _getTextPathLength() {
        return Path_1.Path.getPathLength(this.dataArray);
      }
      _getPointAtLength(length) {
        if (!this.attrs.data) {
          return null;
        }
        const totalLength = this.pathLength;
        if (length - 1 > totalLength) {
          return null;
        }
        return Path_1.Path.getPointAtLengthOfDataArray(length, this.dataArray);
      }
      _readDataAttribute() {
        this.dataArray = Path_1.Path.parsePathData(this.attrs.data);
        this.pathLength = this._getTextPathLength();
      }
      _sceneFunc(context) {
        context.setAttr("font", this._getContextFont());
        context.setAttr("textBaseline", this.textBaseline());
        context.setAttr("textAlign", "left");
        context.save();
        const textDecoration = this.textDecoration();
        const fill = this.fill();
        const fontSize = this.fontSize();
        const glyphInfo = this.glyphInfo;
        if (textDecoration === "underline") {
          context.beginPath();
        }
        for (let i = 0; i < glyphInfo.length; i++) {
          context.save();
          const p0 = glyphInfo[i].p0;
          context.translate(p0.x, p0.y);
          context.rotate(glyphInfo[i].rotation);
          this.partialText = glyphInfo[i].text;
          context.fillStrokeShape(this);
          if (textDecoration === "underline") {
            if (i === 0) {
              context.moveTo(0, fontSize / 2 + 1);
            }
            context.lineTo(fontSize, fontSize / 2 + 1);
          }
          context.restore();
        }
        if (textDecoration === "underline") {
          context.strokeStyle = fill;
          context.lineWidth = fontSize / 20;
          context.stroke();
        }
        context.restore();
      }
      _hitFunc(context) {
        context.beginPath();
        const glyphInfo = this.glyphInfo;
        if (glyphInfo.length >= 1) {
          const p0 = glyphInfo[0].p0;
          context.moveTo(p0.x, p0.y);
        }
        for (let i = 0; i < glyphInfo.length; i++) {
          const p1 = glyphInfo[i].p1;
          context.lineTo(p1.x, p1.y);
        }
        context.setAttr("lineWidth", this.fontSize());
        context.setAttr("strokeStyle", this.colorKey);
        context.stroke();
      }
      getTextWidth() {
        return this.textWidth;
      }
      getTextHeight() {
        Util_1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.");
        return this.textHeight;
      }
      setText(text) {
        return Text_1.Text.prototype.setText.call(this, text);
      }
      _getContextFont() {
        return Text_1.Text.prototype._getContextFont.call(this);
      }
      _getTextSize(text) {
        const dummyCanvas = this.dummyCanvas;
        const _context = dummyCanvas.getContext("2d");
        _context.save();
        _context.font = this._getContextFont();
        const metrics = _context.measureText(text);
        _context.restore();
        return {
          width: metrics.width,
          height: parseInt(`${this.fontSize()}`, 10)
        };
      }
      _setTextData() {
        const { width, height } = this._getTextSize(this.attrs.text);
        this.textWidth = width;
        this.textHeight = height;
        this.glyphInfo = [];
        if (!this.attrs.data) {
          return null;
        }
        const letterSpacing = this.letterSpacing();
        const align = this.align();
        const kerningFunc = this.kerningFunc();
        const textWidth = Math.max(this.textWidth + ((this.attrs.text || "").length - 1) * letterSpacing, 0);
        let offset = 0;
        if (align === "center") {
          offset = Math.max(0, this.pathLength / 2 - textWidth / 2);
        }
        if (align === "right") {
          offset = Math.max(0, this.pathLength - textWidth);
        }
        const charArr = (0, Text_1.stringToArray)(this.text());
        let offsetToGlyph = offset;
        for (let i = 0; i < charArr.length; i++) {
          const charStartPoint = this._getPointAtLength(offsetToGlyph);
          if (!charStartPoint)
            return;
          let glyphWidth = this._getTextSize(charArr[i]).width + letterSpacing;
          if (charArr[i] === " " && align === "justify") {
            const numberOfSpaces = this.text().split(" ").length - 1;
            glyphWidth += (this.pathLength - textWidth) / numberOfSpaces;
          }
          const charEndPoint = this._getPointAtLength(offsetToGlyph + glyphWidth);
          if (!charEndPoint)
            return;
          const width2 = Path_1.Path.getLineLength(charStartPoint.x, charStartPoint.y, charEndPoint.x, charEndPoint.y);
          let kern = 0;
          if (kerningFunc) {
            try {
              kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();
            } catch (e) {
              kern = 0;
            }
          }
          charStartPoint.x += kern;
          charEndPoint.x += kern;
          this.textWidth += kern;
          const midpoint = Path_1.Path.getPointOnLine(kern + width2 / 2, charStartPoint.x, charStartPoint.y, charEndPoint.x, charEndPoint.y);
          const rotation = Math.atan2(charEndPoint.y - charStartPoint.y, charEndPoint.x - charStartPoint.x);
          this.glyphInfo.push({
            transposeX: midpoint.x,
            transposeY: midpoint.y,
            text: charArr[i],
            rotation,
            p0: charStartPoint,
            p1: charEndPoint
          });
          offsetToGlyph += glyphWidth;
        }
      }
      getSelfRect() {
        if (!this.glyphInfo.length) {
          return {
            x: 0,
            y: 0,
            width: 0,
            height: 0
          };
        }
        const points = [];
        this.glyphInfo.forEach(function(info) {
          points.push(info.p0.x);
          points.push(info.p0.y);
          points.push(info.p1.x);
          points.push(info.p1.y);
        });
        let minX = points[0] || 0;
        let maxX = points[0] || 0;
        let minY = points[1] || 0;
        let maxY = points[1] || 0;
        let x, y;
        for (let i = 0; i < points.length / 2; i++) {
          x = points[i * 2];
          y = points[i * 2 + 1];
          minX = Math.min(minX, x);
          maxX = Math.max(maxX, x);
          minY = Math.min(minY, y);
          maxY = Math.max(maxY, y);
        }
        const fontSize = this.fontSize();
        return {
          x: minX - fontSize / 2,
          y: minY - fontSize / 2,
          width: maxX - minX + fontSize,
          height: maxY - minY + fontSize
        };
      }
      destroy() {
        Util_1.Util.releaseCanvas(this.dummyCanvas);
        return super.destroy();
      }
    };
    exports.TextPath = TextPath;
    TextPath.prototype._fillFunc = _fillFunc;
    TextPath.prototype._strokeFunc = _strokeFunc;
    TextPath.prototype._fillFuncHit = _fillFunc;
    TextPath.prototype._strokeFuncHit = _strokeFunc;
    TextPath.prototype.className = "TextPath";
    TextPath.prototype._attrsAffectingSize = ["text", "fontSize", "data"];
    (0, Global_1._registerNode)(TextPath);
    Factory_1.Factory.addGetterSetter(TextPath, "data");
    Factory_1.Factory.addGetterSetter(TextPath, "fontFamily", "Arial");
    Factory_1.Factory.addGetterSetter(TextPath, "fontSize", 12, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(TextPath, "fontStyle", NORMAL);
    Factory_1.Factory.addGetterSetter(TextPath, "align", "left");
    Factory_1.Factory.addGetterSetter(TextPath, "letterSpacing", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(TextPath, "textBaseline", "middle");
    Factory_1.Factory.addGetterSetter(TextPath, "fontVariant", NORMAL);
    Factory_1.Factory.addGetterSetter(TextPath, "text", EMPTY_STRING);
    Factory_1.Factory.addGetterSetter(TextPath, "textDecoration", "");
    Factory_1.Factory.addGetterSetter(TextPath, "kerningFunc", void 0);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Transformer.js
var require_Transformer = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Transformer.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Transformer = void 0;
    var Util_1 = require_Util();
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Shape_1 = require_Shape();
    var Rect_1 = require_Rect();
    var Group_1 = require_Group();
    var Global_1 = require_Global();
    var Validators_1 = require_Validators();
    var Global_2 = require_Global();
    var EVENTS_NAME = "tr-konva";
    var ATTR_CHANGE_LIST = [
      "resizeEnabledChange",
      "rotateAnchorOffsetChange",
      "rotateEnabledChange",
      "enabledAnchorsChange",
      "anchorSizeChange",
      "borderEnabledChange",
      "borderStrokeChange",
      "borderStrokeWidthChange",
      "borderDashChange",
      "anchorStrokeChange",
      "anchorStrokeWidthChange",
      "anchorFillChange",
      "anchorCornerRadiusChange",
      "ignoreStrokeChange",
      "anchorStyleFuncChange"
    ].map((e) => e + `.${EVENTS_NAME}`).join(" ");
    var NODES_RECT = "nodesRect";
    var TRANSFORM_CHANGE_STR = [
      "widthChange",
      "heightChange",
      "scaleXChange",
      "scaleYChange",
      "skewXChange",
      "skewYChange",
      "rotationChange",
      "offsetXChange",
      "offsetYChange",
      "transformsEnabledChange",
      "strokeWidthChange"
    ];
    var ANGLES = {
      "top-left": -45,
      "top-center": 0,
      "top-right": 45,
      "middle-right": -90,
      "middle-left": 90,
      "bottom-left": -135,
      "bottom-center": 180,
      "bottom-right": 135
    };
    var TOUCH_DEVICE = "ontouchstart" in Global_1.Konva._global;
    function getCursor(anchorName, rad, rotateCursor) {
      if (anchorName === "rotater") {
        return rotateCursor;
      }
      rad += Util_1.Util.degToRad(ANGLES[anchorName] || 0);
      const angle = (Util_1.Util.radToDeg(rad) % 360 + 360) % 360;
      if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {
        return "ns-resize";
      } else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {
        return "nesw-resize";
      } else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {
        return "ew-resize";
      } else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {
        return "nwse-resize";
      } else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {
        return "ns-resize";
      } else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {
        return "nesw-resize";
      } else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {
        return "ew-resize";
      } else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {
        return "nwse-resize";
      } else {
        Util_1.Util.error("Transformer has unknown angle for cursor detection: " + angle);
        return "pointer";
      }
    }
    var ANCHORS_NAMES = [
      "top-left",
      "top-center",
      "top-right",
      "middle-right",
      "middle-left",
      "bottom-left",
      "bottom-center",
      "bottom-right"
    ];
    var MAX_SAFE_INTEGER = 1e8;
    function getCenter2(shape) {
      return {
        x: shape.x + shape.width / 2 * Math.cos(shape.rotation) + shape.height / 2 * Math.sin(-shape.rotation),
        y: shape.y + shape.height / 2 * Math.cos(shape.rotation) + shape.width / 2 * Math.sin(shape.rotation)
      };
    }
    function rotateAroundPoint(shape, angleRad, point) {
      const x = point.x + (shape.x - point.x) * Math.cos(angleRad) - (shape.y - point.y) * Math.sin(angleRad);
      const y = point.y + (shape.x - point.x) * Math.sin(angleRad) + (shape.y - point.y) * Math.cos(angleRad);
      return {
        ...shape,
        rotation: shape.rotation + angleRad,
        x,
        y
      };
    }
    function rotateAroundCenter(shape, deltaRad) {
      const center = getCenter2(shape);
      return rotateAroundPoint(shape, deltaRad, center);
    }
    function getSnap(snaps, newRotationRad, tol) {
      let snapped = newRotationRad;
      for (let i = 0; i < snaps.length; i++) {
        const angle = Global_1.Konva.getAngle(snaps[i]);
        const absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);
        const dif = Math.min(absDiff, Math.PI * 2 - absDiff);
        if (dif < tol) {
          snapped = angle;
        }
      }
      return snapped;
    }
    var activeTransformersCount = 0;
    var Transformer2 = class extends Group_1.Group {
      constructor(config) {
        super(config);
        this._movingAnchorName = null;
        this._transforming = false;
        this._createElements();
        this._handleMouseMove = this._handleMouseMove.bind(this);
        this._handleMouseUp = this._handleMouseUp.bind(this);
        this.update = this.update.bind(this);
        this.on(ATTR_CHANGE_LIST, this.update);
        if (this.getNode()) {
          this.update();
        }
      }
      attachTo(node) {
        this.setNode(node);
        return this;
      }
      setNode(node) {
        Util_1.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.");
        return this.setNodes([node]);
      }
      getNode() {
        return this._nodes && this._nodes[0];
      }
      _getEventNamespace() {
        return EVENTS_NAME + this._id;
      }
      setNodes(nodes = []) {
        if (this._nodes && this._nodes.length) {
          this.detach();
        }
        const filteredNodes = nodes.filter((node) => {
          if (node.isAncestorOf(this)) {
            Util_1.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach");
            return false;
          }
          return true;
        });
        this._nodes = nodes = filteredNodes;
        if (nodes.length === 1 && this.useSingleNodeRotation()) {
          this.rotation(nodes[0].getAbsoluteRotation());
        } else {
          this.rotation(0);
        }
        this._nodes.forEach((node) => {
          const onChange = () => {
            if (this.nodes().length === 1 && this.useSingleNodeRotation()) {
              this.rotation(this.nodes()[0].getAbsoluteRotation());
            }
            this._resetTransformCache();
            if (!this._transforming && !this.isDragging()) {
              this.update();
            }
          };
          const additionalEvents = node._attrsAffectingSize.map((prop) => prop + "Change." + this._getEventNamespace()).join(" ");
          node.on(additionalEvents, onChange);
          node.on(TRANSFORM_CHANGE_STR.map((e) => e + `.${this._getEventNamespace()}`).join(" "), onChange);
          node.on(`absoluteTransformChange.${this._getEventNamespace()}`, onChange);
          this._proxyDrag(node);
        });
        this._resetTransformCache();
        const elementsCreated = !!this.findOne(".top-left");
        if (elementsCreated) {
          this.update();
        }
        return this;
      }
      _proxyDrag(node) {
        let lastPos;
        node.on(`dragstart.${this._getEventNamespace()}`, (e) => {
          lastPos = node.getAbsolutePosition();
          if (!this.isDragging() && node !== this.findOne(".back")) {
            this.startDrag(e, false);
          }
        });
        node.on(`dragmove.${this._getEventNamespace()}`, (e) => {
          if (!lastPos) {
            return;
          }
          const abs = node.getAbsolutePosition();
          const dx = abs.x - lastPos.x;
          const dy = abs.y - lastPos.y;
          this.nodes().forEach((otherNode) => {
            if (otherNode === node) {
              return;
            }
            if (otherNode.isDragging()) {
              return;
            }
            const otherAbs = otherNode.getAbsolutePosition();
            otherNode.setAbsolutePosition({
              x: otherAbs.x + dx,
              y: otherAbs.y + dy
            });
            otherNode.startDrag(e);
          });
          lastPos = null;
        });
      }
      getNodes() {
        return this._nodes || [];
      }
      getActiveAnchor() {
        return this._movingAnchorName;
      }
      detach() {
        if (this._nodes) {
          this._nodes.forEach((node) => {
            node.off("." + this._getEventNamespace());
          });
        }
        this._nodes = [];
        this._resetTransformCache();
      }
      _resetTransformCache() {
        this._clearCache(NODES_RECT);
        this._clearCache("transform");
        this._clearSelfAndDescendantCache("absoluteTransform");
      }
      _getNodeRect() {
        return this._getCache(NODES_RECT, this.__getNodeRect);
      }
      __getNodeShape(node, rot = this.rotation(), relative) {
        const rect = node.getClientRect({
          skipTransform: true,
          skipShadow: true,
          skipStroke: this.ignoreStroke()
        });
        const absScale = node.getAbsoluteScale(relative);
        const absPos = node.getAbsolutePosition(relative);
        const dx = rect.x * absScale.x - node.offsetX() * absScale.x;
        const dy = rect.y * absScale.y - node.offsetY() * absScale.y;
        const rotation = (Global_1.Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) % (Math.PI * 2);
        const box = {
          x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),
          y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),
          width: rect.width * absScale.x,
          height: rect.height * absScale.y,
          rotation
        };
        return rotateAroundPoint(box, -Global_1.Konva.getAngle(rot), {
          x: 0,
          y: 0
        });
      }
      __getNodeRect() {
        const node = this.getNode();
        if (!node) {
          return {
            x: -MAX_SAFE_INTEGER,
            y: -MAX_SAFE_INTEGER,
            width: 0,
            height: 0,
            rotation: 0
          };
        }
        const totalPoints = [];
        this.nodes().map((node2) => {
          const box = node2.getClientRect({
            skipTransform: true,
            skipShadow: true,
            skipStroke: this.ignoreStroke()
          });
          const points = [
            { x: box.x, y: box.y },
            { x: box.x + box.width, y: box.y },
            { x: box.x + box.width, y: box.y + box.height },
            { x: box.x, y: box.y + box.height }
          ];
          const trans = node2.getAbsoluteTransform();
          points.forEach(function(point) {
            const transformed = trans.point(point);
            totalPoints.push(transformed);
          });
        });
        const tr = new Util_1.Transform();
        tr.rotate(-Global_1.Konva.getAngle(this.rotation()));
        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
        totalPoints.forEach(function(point) {
          const transformed = tr.point(point);
          if (minX === void 0) {
            minX = maxX = transformed.x;
            minY = maxY = transformed.y;
          }
          minX = Math.min(minX, transformed.x);
          minY = Math.min(minY, transformed.y);
          maxX = Math.max(maxX, transformed.x);
          maxY = Math.max(maxY, transformed.y);
        });
        tr.invert();
        const p = tr.point({ x: minX, y: minY });
        return {
          x: p.x,
          y: p.y,
          width: maxX - minX,
          height: maxY - minY,
          rotation: Global_1.Konva.getAngle(this.rotation())
        };
      }
      getX() {
        return this._getNodeRect().x;
      }
      getY() {
        return this._getNodeRect().y;
      }
      getWidth() {
        return this._getNodeRect().width;
      }
      getHeight() {
        return this._getNodeRect().height;
      }
      _createElements() {
        this._createBack();
        ANCHORS_NAMES.forEach((name) => {
          this._createAnchor(name);
        });
        this._createAnchor("rotater");
      }
      _createAnchor(name) {
        const anchor = new Rect_1.Rect({
          stroke: "rgb(0, 161, 255)",
          fill: "white",
          strokeWidth: 1,
          name: name + " _anchor",
          dragDistance: 0,
          draggable: true,
          hitStrokeWidth: TOUCH_DEVICE ? 10 : "auto"
        });
        const self2 = this;
        anchor.on("mousedown touchstart", function(e) {
          self2._handleMouseDown(e);
        });
        anchor.on("dragstart", (e) => {
          anchor.stopDrag();
          e.cancelBubble = true;
        });
        anchor.on("dragend", (e) => {
          e.cancelBubble = true;
        });
        anchor.on("mouseenter", () => {
          const rad = Global_1.Konva.getAngle(this.rotation());
          const rotateCursor = this.rotateAnchorCursor();
          const cursor = getCursor(name, rad, rotateCursor);
          anchor.getStage().content && (anchor.getStage().content.style.cursor = cursor);
          this._cursorChange = true;
        });
        anchor.on("mouseout", () => {
          anchor.getStage().content && (anchor.getStage().content.style.cursor = "");
          this._cursorChange = false;
        });
        this.add(anchor);
      }
      _createBack() {
        const back = new Shape_1.Shape({
          name: "back",
          width: 0,
          height: 0,
          draggable: true,
          sceneFunc(ctx, shape) {
            const tr = shape.getParent();
            const padding = tr.padding();
            ctx.beginPath();
            ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);
            ctx.moveTo(shape.width() / 2, -padding);
            if (tr.rotateEnabled() && tr.rotateLineVisible()) {
              ctx.lineTo(shape.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(shape.height()) - padding);
            }
            ctx.fillStrokeShape(shape);
          },
          hitFunc: (ctx, shape) => {
            if (!this.shouldOverdrawWholeArea()) {
              return;
            }
            const padding = this.padding();
            ctx.beginPath();
            ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);
            ctx.fillStrokeShape(shape);
          }
        });
        this.add(back);
        this._proxyDrag(back);
        back.on("dragstart", (e) => {
          e.cancelBubble = true;
        });
        back.on("dragmove", (e) => {
          e.cancelBubble = true;
        });
        back.on("dragend", (e) => {
          e.cancelBubble = true;
        });
        this.on("dragmove", (e) => {
          this.update();
        });
      }
      _handleMouseDown(e) {
        if (this._transforming) {
          return;
        }
        this._movingAnchorName = e.target.name().split(" ")[0];
        const attrs = this._getNodeRect();
        const width = attrs.width;
        const height = attrs.height;
        const hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));
        this.sin = Math.abs(height / hypotenuse);
        this.cos = Math.abs(width / hypotenuse);
        if (typeof window !== "undefined") {
          window.addEventListener("mousemove", this._handleMouseMove);
          window.addEventListener("touchmove", this._handleMouseMove);
          window.addEventListener("mouseup", this._handleMouseUp, true);
          window.addEventListener("touchend", this._handleMouseUp, true);
        }
        this._transforming = true;
        const ap = e.target.getAbsolutePosition();
        const pos = e.target.getStage().getPointerPosition();
        this._anchorDragOffset = {
          x: pos.x - ap.x,
          y: pos.y - ap.y
        };
        activeTransformersCount++;
        this._fire("transformstart", { evt: e.evt, target: this.getNode() });
        this._nodes.forEach((target) => {
          target._fire("transformstart", { evt: e.evt, target });
        });
      }
      _handleMouseMove(e) {
        let x, y, newHypotenuse;
        const anchorNode = this.findOne("." + this._movingAnchorName);
        const stage = anchorNode.getStage();
        stage.setPointersPositions(e);
        const pp = stage.getPointerPosition();
        let newNodePos = {
          x: pp.x - this._anchorDragOffset.x,
          y: pp.y - this._anchorDragOffset.y
        };
        const oldAbs = anchorNode.getAbsolutePosition();
        if (this.anchorDragBoundFunc()) {
          newNodePos = this.anchorDragBoundFunc()(oldAbs, newNodePos, e);
        }
        anchorNode.setAbsolutePosition(newNodePos);
        const newAbs = anchorNode.getAbsolutePosition();
        if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {
          return;
        }
        if (this._movingAnchorName === "rotater") {
          const attrs = this._getNodeRect();
          x = anchorNode.x() - attrs.width / 2;
          y = -anchorNode.y() + attrs.height / 2;
          let delta = Math.atan2(-y, x) + Math.PI / 2;
          if (attrs.height < 0) {
            delta -= Math.PI;
          }
          const oldRotation = Global_1.Konva.getAngle(this.rotation());
          const newRotation = oldRotation + delta;
          const tol = Global_1.Konva.getAngle(this.rotationSnapTolerance());
          const snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);
          const diff = snappedRot - attrs.rotation;
          const shape = rotateAroundCenter(attrs, diff);
          this._fitNodesInto(shape, e);
          return;
        }
        const shiftBehavior = this.shiftBehavior();
        let keepProportion;
        if (shiftBehavior === "inverted") {
          keepProportion = this.keepRatio() && !e.shiftKey;
        } else if (shiftBehavior === "none") {
          keepProportion = this.keepRatio();
        } else {
          keepProportion = this.keepRatio() || e.shiftKey;
        }
        var centeredScaling = this.centeredScaling() || e.altKey;
        if (this._movingAnchorName === "top-left") {
          if (keepProportion) {
            var comparePoint = centeredScaling ? {
              x: this.width() / 2,
              y: this.height() / 2
            } : {
              x: this.findOne(".bottom-right").x(),
              y: this.findOne(".bottom-right").y()
            };
            newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) + Math.pow(comparePoint.y - anchorNode.y(), 2));
            var reverseX = this.findOne(".top-left").x() > comparePoint.x ? -1 : 1;
            var reverseY = this.findOne(".top-left").y() > comparePoint.y ? -1 : 1;
            x = newHypotenuse * this.cos * reverseX;
            y = newHypotenuse * this.sin * reverseY;
            this.findOne(".top-left").x(comparePoint.x - x);
            this.findOne(".top-left").y(comparePoint.y - y);
          }
        } else if (this._movingAnchorName === "top-center") {
          this.findOne(".top-left").y(anchorNode.y());
        } else if (this._movingAnchorName === "top-right") {
          if (keepProportion) {
            var comparePoint = centeredScaling ? {
              x: this.width() / 2,
              y: this.height() / 2
            } : {
              x: this.findOne(".bottom-left").x(),
              y: this.findOne(".bottom-left").y()
            };
            newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) + Math.pow(comparePoint.y - anchorNode.y(), 2));
            var reverseX = this.findOne(".top-right").x() < comparePoint.x ? -1 : 1;
            var reverseY = this.findOne(".top-right").y() > comparePoint.y ? -1 : 1;
            x = newHypotenuse * this.cos * reverseX;
            y = newHypotenuse * this.sin * reverseY;
            this.findOne(".top-right").x(comparePoint.x + x);
            this.findOne(".top-right").y(comparePoint.y - y);
          }
          var pos = anchorNode.position();
          this.findOne(".top-left").y(pos.y);
          this.findOne(".bottom-right").x(pos.x);
        } else if (this._movingAnchorName === "middle-left") {
          this.findOne(".top-left").x(anchorNode.x());
        } else if (this._movingAnchorName === "middle-right") {
          this.findOne(".bottom-right").x(anchorNode.x());
        } else if (this._movingAnchorName === "bottom-left") {
          if (keepProportion) {
            var comparePoint = centeredScaling ? {
              x: this.width() / 2,
              y: this.height() / 2
            } : {
              x: this.findOne(".top-right").x(),
              y: this.findOne(".top-right").y()
            };
            newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) + Math.pow(anchorNode.y() - comparePoint.y, 2));
            var reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;
            var reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;
            x = newHypotenuse * this.cos * reverseX;
            y = newHypotenuse * this.sin * reverseY;
            anchorNode.x(comparePoint.x - x);
            anchorNode.y(comparePoint.y + y);
          }
          pos = anchorNode.position();
          this.findOne(".top-left").x(pos.x);
          this.findOne(".bottom-right").y(pos.y);
        } else if (this._movingAnchorName === "bottom-center") {
          this.findOne(".bottom-right").y(anchorNode.y());
        } else if (this._movingAnchorName === "bottom-right") {
          if (keepProportion) {
            var comparePoint = centeredScaling ? {
              x: this.width() / 2,
              y: this.height() / 2
            } : {
              x: this.findOne(".top-left").x(),
              y: this.findOne(".top-left").y()
            };
            newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) + Math.pow(anchorNode.y() - comparePoint.y, 2));
            var reverseX = this.findOne(".bottom-right").x() < comparePoint.x ? -1 : 1;
            var reverseY = this.findOne(".bottom-right").y() < comparePoint.y ? -1 : 1;
            x = newHypotenuse * this.cos * reverseX;
            y = newHypotenuse * this.sin * reverseY;
            this.findOne(".bottom-right").x(comparePoint.x + x);
            this.findOne(".bottom-right").y(comparePoint.y + y);
          }
        } else {
          console.error(new Error("Wrong position argument of selection resizer: " + this._movingAnchorName));
        }
        var centeredScaling = this.centeredScaling() || e.altKey;
        if (centeredScaling) {
          const topLeft = this.findOne(".top-left");
          const bottomRight = this.findOne(".bottom-right");
          const topOffsetX = topLeft.x();
          const topOffsetY = topLeft.y();
          const bottomOffsetX = this.getWidth() - bottomRight.x();
          const bottomOffsetY = this.getHeight() - bottomRight.y();
          bottomRight.move({
            x: -topOffsetX,
            y: -topOffsetY
          });
          topLeft.move({
            x: bottomOffsetX,
            y: bottomOffsetY
          });
        }
        const absPos = this.findOne(".top-left").getAbsolutePosition();
        x = absPos.x;
        y = absPos.y;
        const width = this.findOne(".bottom-right").x() - this.findOne(".top-left").x();
        const height = this.findOne(".bottom-right").y() - this.findOne(".top-left").y();
        this._fitNodesInto({
          x,
          y,
          width,
          height,
          rotation: Global_1.Konva.getAngle(this.rotation())
        }, e);
      }
      _handleMouseUp(e) {
        this._removeEvents(e);
      }
      getAbsoluteTransform() {
        return this.getTransform();
      }
      _removeEvents(e) {
        var _a;
        if (this._transforming) {
          this._transforming = false;
          if (typeof window !== "undefined") {
            window.removeEventListener("mousemove", this._handleMouseMove);
            window.removeEventListener("touchmove", this._handleMouseMove);
            window.removeEventListener("mouseup", this._handleMouseUp, true);
            window.removeEventListener("touchend", this._handleMouseUp, true);
          }
          const node = this.getNode();
          activeTransformersCount--;
          this._fire("transformend", { evt: e, target: node });
          (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();
          if (node) {
            this._nodes.forEach((target) => {
              var _a2;
              target._fire("transformend", { evt: e, target });
              (_a2 = target.getLayer()) === null || _a2 === void 0 ? void 0 : _a2.batchDraw();
            });
          }
          this._movingAnchorName = null;
        }
      }
      _fitNodesInto(newAttrs, evt) {
        const oldAttrs = this._getNodeRect();
        const minSize = 1;
        if (Util_1.Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {
          this.update();
          return;
        }
        if (Util_1.Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {
          this.update();
          return;
        }
        const t = new Util_1.Transform();
        t.rotate(Global_1.Konva.getAngle(this.rotation()));
        if (this._movingAnchorName && newAttrs.width < 0 && this._movingAnchorName.indexOf("left") >= 0) {
          const offset = t.point({
            x: -this.padding() * 2,
            y: 0
          });
          newAttrs.x += offset.x;
          newAttrs.y += offset.y;
          newAttrs.width += this.padding() * 2;
          this._movingAnchorName = this._movingAnchorName.replace("left", "right");
          this._anchorDragOffset.x -= offset.x;
          this._anchorDragOffset.y -= offset.y;
        } else if (this._movingAnchorName && newAttrs.width < 0 && this._movingAnchorName.indexOf("right") >= 0) {
          const offset = t.point({
            x: this.padding() * 2,
            y: 0
          });
          this._movingAnchorName = this._movingAnchorName.replace("right", "left");
          this._anchorDragOffset.x -= offset.x;
          this._anchorDragOffset.y -= offset.y;
          newAttrs.width += this.padding() * 2;
        }
        if (this._movingAnchorName && newAttrs.height < 0 && this._movingAnchorName.indexOf("top") >= 0) {
          const offset = t.point({
            x: 0,
            y: -this.padding() * 2
          });
          newAttrs.x += offset.x;
          newAttrs.y += offset.y;
          this._movingAnchorName = this._movingAnchorName.replace("top", "bottom");
          this._anchorDragOffset.x -= offset.x;
          this._anchorDragOffset.y -= offset.y;
          newAttrs.height += this.padding() * 2;
        } else if (this._movingAnchorName && newAttrs.height < 0 && this._movingAnchorName.indexOf("bottom") >= 0) {
          const offset = t.point({
            x: 0,
            y: this.padding() * 2
          });
          this._movingAnchorName = this._movingAnchorName.replace("bottom", "top");
          this._anchorDragOffset.x -= offset.x;
          this._anchorDragOffset.y -= offset.y;
          newAttrs.height += this.padding() * 2;
        }
        if (this.boundBoxFunc()) {
          const bounded = this.boundBoxFunc()(oldAttrs, newAttrs);
          if (bounded) {
            newAttrs = bounded;
          } else {
            Util_1.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!");
          }
        }
        const baseSize = 1e7;
        const oldTr = new Util_1.Transform();
        oldTr.translate(oldAttrs.x, oldAttrs.y);
        oldTr.rotate(oldAttrs.rotation);
        oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);
        const newTr = new Util_1.Transform();
        const newScaleX = newAttrs.width / baseSize;
        const newScaleY = newAttrs.height / baseSize;
        if (this.flipEnabled() === false) {
          newTr.translate(newAttrs.x, newAttrs.y);
          newTr.rotate(newAttrs.rotation);
          newTr.translate(newAttrs.width < 0 ? newAttrs.width : 0, newAttrs.height < 0 ? newAttrs.height : 0);
          newTr.scale(Math.abs(newScaleX), Math.abs(newScaleY));
        } else {
          newTr.translate(newAttrs.x, newAttrs.y);
          newTr.rotate(newAttrs.rotation);
          newTr.scale(newScaleX, newScaleY);
        }
        const delta = newTr.multiply(oldTr.invert());
        this._nodes.forEach((node) => {
          var _a;
          const parentTransform = node.getParent().getAbsoluteTransform();
          const localTransform = node.getTransform().copy();
          localTransform.translate(node.offsetX(), node.offsetY());
          const newLocalTransform = new Util_1.Transform();
          newLocalTransform.multiply(parentTransform.copy().invert()).multiply(delta).multiply(parentTransform).multiply(localTransform);
          const attrs = newLocalTransform.decompose();
          node.setAttrs(attrs);
          (_a = node.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();
        });
        this.rotation(Util_1.Util._getRotation(newAttrs.rotation));
        this._nodes.forEach((node) => {
          this._fire("transform", { evt, target: node });
          node._fire("transform", { evt, target: node });
        });
        this._resetTransformCache();
        this.update();
        this.getLayer().batchDraw();
      }
      forceUpdate() {
        this._resetTransformCache();
        this.update();
      }
      _batchChangeChild(selector, attrs) {
        const anchor = this.findOne(selector);
        anchor.setAttrs(attrs);
      }
      update() {
        var _a;
        const attrs = this._getNodeRect();
        this.rotation(Util_1.Util._getRotation(attrs.rotation));
        const width = attrs.width;
        const height = attrs.height;
        const enabledAnchors = this.enabledAnchors();
        const resizeEnabled = this.resizeEnabled();
        const padding = this.padding();
        const anchorSize = this.anchorSize();
        const anchors = this.find("._anchor");
        anchors.forEach((node) => {
          node.setAttrs({
            width: anchorSize,
            height: anchorSize,
            offsetX: anchorSize / 2,
            offsetY: anchorSize / 2,
            stroke: this.anchorStroke(),
            strokeWidth: this.anchorStrokeWidth(),
            fill: this.anchorFill(),
            cornerRadius: this.anchorCornerRadius()
          });
        });
        this._batchChangeChild(".top-left", {
          x: 0,
          y: 0,
          offsetX: anchorSize / 2 + padding,
          offsetY: anchorSize / 2 + padding,
          visible: resizeEnabled && enabledAnchors.indexOf("top-left") >= 0
        });
        this._batchChangeChild(".top-center", {
          x: width / 2,
          y: 0,
          offsetY: anchorSize / 2 + padding,
          visible: resizeEnabled && enabledAnchors.indexOf("top-center") >= 0
        });
        this._batchChangeChild(".top-right", {
          x: width,
          y: 0,
          offsetX: anchorSize / 2 - padding,
          offsetY: anchorSize / 2 + padding,
          visible: resizeEnabled && enabledAnchors.indexOf("top-right") >= 0
        });
        this._batchChangeChild(".middle-left", {
          x: 0,
          y: height / 2,
          offsetX: anchorSize / 2 + padding,
          visible: resizeEnabled && enabledAnchors.indexOf("middle-left") >= 0
        });
        this._batchChangeChild(".middle-right", {
          x: width,
          y: height / 2,
          offsetX: anchorSize / 2 - padding,
          visible: resizeEnabled && enabledAnchors.indexOf("middle-right") >= 0
        });
        this._batchChangeChild(".bottom-left", {
          x: 0,
          y: height,
          offsetX: anchorSize / 2 + padding,
          offsetY: anchorSize / 2 - padding,
          visible: resizeEnabled && enabledAnchors.indexOf("bottom-left") >= 0
        });
        this._batchChangeChild(".bottom-center", {
          x: width / 2,
          y: height,
          offsetY: anchorSize / 2 - padding,
          visible: resizeEnabled && enabledAnchors.indexOf("bottom-center") >= 0
        });
        this._batchChangeChild(".bottom-right", {
          x: width,
          y: height,
          offsetX: anchorSize / 2 - padding,
          offsetY: anchorSize / 2 - padding,
          visible: resizeEnabled && enabledAnchors.indexOf("bottom-right") >= 0
        });
        this._batchChangeChild(".rotater", {
          x: width / 2,
          y: -this.rotateAnchorOffset() * Util_1.Util._sign(height) - padding,
          visible: this.rotateEnabled()
        });
        this._batchChangeChild(".back", {
          width,
          height,
          visible: this.borderEnabled(),
          stroke: this.borderStroke(),
          strokeWidth: this.borderStrokeWidth(),
          dash: this.borderDash(),
          x: 0,
          y: 0
        });
        const styleFunc = this.anchorStyleFunc();
        if (styleFunc) {
          anchors.forEach((node) => {
            styleFunc(node);
          });
        }
        (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();
      }
      isTransforming() {
        return this._transforming;
      }
      stopTransform() {
        if (this._transforming) {
          this._removeEvents();
          const anchorNode = this.findOne("." + this._movingAnchorName);
          if (anchorNode) {
            anchorNode.stopDrag();
          }
        }
      }
      destroy() {
        if (this.getStage() && this._cursorChange) {
          this.getStage().content && (this.getStage().content.style.cursor = "");
        }
        Group_1.Group.prototype.destroy.call(this);
        this.detach();
        this._removeEvents();
        return this;
      }
      toObject() {
        return Node_1.Node.prototype.toObject.call(this);
      }
      clone(obj) {
        const node = Node_1.Node.prototype.clone.call(this, obj);
        return node;
      }
      getClientRect() {
        if (this.nodes().length > 0) {
          return super.getClientRect();
        } else {
          return { x: 0, y: 0, width: 0, height: 0 };
        }
      }
    };
    exports.Transformer = Transformer2;
    Transformer2.isTransforming = () => {
      return activeTransformersCount > 0;
    };
    function validateAnchors(val) {
      if (!(val instanceof Array)) {
        Util_1.Util.warn("enabledAnchors value should be an array");
      }
      if (val instanceof Array) {
        val.forEach(function(name) {
          if (ANCHORS_NAMES.indexOf(name) === -1) {
            Util_1.Util.warn("Unknown anchor name: " + name + ". Available names are: " + ANCHORS_NAMES.join(", "));
          }
        });
      }
      return val || [];
    }
    Transformer2.prototype.className = "Transformer";
    (0, Global_2._registerNode)(Transformer2);
    Factory_1.Factory.addGetterSetter(Transformer2, "enabledAnchors", ANCHORS_NAMES, validateAnchors);
    Factory_1.Factory.addGetterSetter(Transformer2, "flipEnabled", true, (0, Validators_1.getBooleanValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "resizeEnabled", true);
    Factory_1.Factory.addGetterSetter(Transformer2, "anchorSize", 10, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "rotateEnabled", true);
    Factory_1.Factory.addGetterSetter(Transformer2, "rotateLineVisible", true);
    Factory_1.Factory.addGetterSetter(Transformer2, "rotationSnaps", []);
    Factory_1.Factory.addGetterSetter(Transformer2, "rotateAnchorOffset", 50, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "rotateAnchorCursor", "crosshair");
    Factory_1.Factory.addGetterSetter(Transformer2, "rotationSnapTolerance", 5, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "borderEnabled", true);
    Factory_1.Factory.addGetterSetter(Transformer2, "anchorStroke", "rgb(0, 161, 255)");
    Factory_1.Factory.addGetterSetter(Transformer2, "anchorStrokeWidth", 1, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "anchorFill", "white");
    Factory_1.Factory.addGetterSetter(Transformer2, "anchorCornerRadius", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "borderStroke", "rgb(0, 161, 255)");
    Factory_1.Factory.addGetterSetter(Transformer2, "borderStrokeWidth", 1, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "borderDash");
    Factory_1.Factory.addGetterSetter(Transformer2, "keepRatio", true);
    Factory_1.Factory.addGetterSetter(Transformer2, "shiftBehavior", "default");
    Factory_1.Factory.addGetterSetter(Transformer2, "centeredScaling", false);
    Factory_1.Factory.addGetterSetter(Transformer2, "ignoreStroke", false);
    Factory_1.Factory.addGetterSetter(Transformer2, "padding", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Transformer2, "nodes");
    Factory_1.Factory.addGetterSetter(Transformer2, "node");
    Factory_1.Factory.addGetterSetter(Transformer2, "boundBoxFunc");
    Factory_1.Factory.addGetterSetter(Transformer2, "anchorDragBoundFunc");
    Factory_1.Factory.addGetterSetter(Transformer2, "anchorStyleFunc");
    Factory_1.Factory.addGetterSetter(Transformer2, "shouldOverdrawWholeArea", false);
    Factory_1.Factory.addGetterSetter(Transformer2, "useSingleNodeRotation", true);
    Factory_1.Factory.backCompat(Transformer2, {
      lineEnabled: "borderEnabled",
      rotateHandlerOffset: "rotateAnchorOffset",
      enabledHandlers: "enabledAnchors"
    });
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Wedge.js
var require_Wedge = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/shapes/Wedge.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Wedge = void 0;
    var Factory_1 = require_Factory();
    var Shape_1 = require_Shape();
    var Global_1 = require_Global();
    var Validators_1 = require_Validators();
    var Global_2 = require_Global();
    var Wedge = class extends Shape_1.Shape {
      _sceneFunc(context) {
        context.beginPath();
        context.arc(0, 0, this.radius(), 0, Global_1.Konva.getAngle(this.angle()), this.clockwise());
        context.lineTo(0, 0);
        context.closePath();
        context.fillStrokeShape(this);
      }
      getWidth() {
        return this.radius() * 2;
      }
      getHeight() {
        return this.radius() * 2;
      }
      setWidth(width) {
        this.radius(width / 2);
      }
      setHeight(height) {
        this.radius(height / 2);
      }
    };
    exports.Wedge = Wedge;
    Wedge.prototype.className = "Wedge";
    Wedge.prototype._centroid = true;
    Wedge.prototype._attrsAffectingSize = ["radius"];
    (0, Global_2._registerNode)(Wedge);
    Factory_1.Factory.addGetterSetter(Wedge, "radius", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Wedge, "angle", 0, (0, Validators_1.getNumberValidator)());
    Factory_1.Factory.addGetterSetter(Wedge, "clockwise", false);
    Factory_1.Factory.backCompat(Wedge, {
      angleDeg: "angle",
      getAngleDeg: "getAngle",
      setAngleDeg: "setAngle"
    });
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Blur.js
var require_Blur = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Blur.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Blur = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    function BlurStack() {
      this.r = 0;
      this.g = 0;
      this.b = 0;
      this.a = 0;
      this.next = null;
    }
    var mul_table = [
      512,
      512,
      456,
      512,
      328,
      456,
      335,
      512,
      405,
      328,
      271,
      456,
      388,
      335,
      292,
      512,
      454,
      405,
      364,
      328,
      298,
      271,
      496,
      456,
      420,
      388,
      360,
      335,
      312,
      292,
      273,
      512,
      482,
      454,
      428,
      405,
      383,
      364,
      345,
      328,
      312,
      298,
      284,
      271,
      259,
      496,
      475,
      456,
      437,
      420,
      404,
      388,
      374,
      360,
      347,
      335,
      323,
      312,
      302,
      292,
      282,
      273,
      265,
      512,
      497,
      482,
      468,
      454,
      441,
      428,
      417,
      405,
      394,
      383,
      373,
      364,
      354,
      345,
      337,
      328,
      320,
      312,
      305,
      298,
      291,
      284,
      278,
      271,
      265,
      259,
      507,
      496,
      485,
      475,
      465,
      456,
      446,
      437,
      428,
      420,
      412,
      404,
      396,
      388,
      381,
      374,
      367,
      360,
      354,
      347,
      341,
      335,
      329,
      323,
      318,
      312,
      307,
      302,
      297,
      292,
      287,
      282,
      278,
      273,
      269,
      265,
      261,
      512,
      505,
      497,
      489,
      482,
      475,
      468,
      461,
      454,
      447,
      441,
      435,
      428,
      422,
      417,
      411,
      405,
      399,
      394,
      389,
      383,
      378,
      373,
      368,
      364,
      359,
      354,
      350,
      345,
      341,
      337,
      332,
      328,
      324,
      320,
      316,
      312,
      309,
      305,
      301,
      298,
      294,
      291,
      287,
      284,
      281,
      278,
      274,
      271,
      268,
      265,
      262,
      259,
      257,
      507,
      501,
      496,
      491,
      485,
      480,
      475,
      470,
      465,
      460,
      456,
      451,
      446,
      442,
      437,
      433,
      428,
      424,
      420,
      416,
      412,
      408,
      404,
      400,
      396,
      392,
      388,
      385,
      381,
      377,
      374,
      370,
      367,
      363,
      360,
      357,
      354,
      350,
      347,
      344,
      341,
      338,
      335,
      332,
      329,
      326,
      323,
      320,
      318,
      315,
      312,
      310,
      307,
      304,
      302,
      299,
      297,
      294,
      292,
      289,
      287,
      285,
      282,
      280,
      278,
      275,
      273,
      271,
      269,
      267,
      265,
      263,
      261,
      259
    ];
    var shg_table = [
      9,
      11,
      12,
      13,
      13,
      14,
      14,
      15,
      15,
      15,
      15,
      16,
      16,
      16,
      16,
      17,
      17,
      17,
      17,
      17,
      17,
      17,
      18,
      18,
      18,
      18,
      18,
      18,
      18,
      18,
      18,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      19,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      20,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      21,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      22,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      23,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24,
      24
    ];
    function filterGaussBlurRGBA(imageData, radius) {
      const pixels = imageData.data, width = imageData.width, height = imageData.height;
      let x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;
      const div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2, stackStart = new BlurStack(), mul_sum = mul_table[radius], shg_sum = shg_table[radius];
      let stackEnd = null, stack = stackStart, stackIn = null, stackOut = null;
      for (i = 1; i < div; i++) {
        stack = stack.next = new BlurStack();
        if (i === radiusPlus1) {
          stackEnd = stack;
        }
      }
      stack.next = stackStart;
      yw = yi = 0;
      for (y = 0; y < height; y++) {
        r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;
        r_out_sum = radiusPlus1 * (pr = pixels[yi]);
        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);
        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);
        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);
        r_sum += sumFactor * pr;
        g_sum += sumFactor * pg;
        b_sum += sumFactor * pb;
        a_sum += sumFactor * pa;
        stack = stackStart;
        for (i = 0; i < radiusPlus1; i++) {
          stack.r = pr;
          stack.g = pg;
          stack.b = pb;
          stack.a = pa;
          stack = stack.next;
        }
        for (i = 1; i < radiusPlus1; i++) {
          p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);
          r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);
          g_sum += (stack.g = pg = pixels[p + 1]) * rbs;
          b_sum += (stack.b = pb = pixels[p + 2]) * rbs;
          a_sum += (stack.a = pa = pixels[p + 3]) * rbs;
          r_in_sum += pr;
          g_in_sum += pg;
          b_in_sum += pb;
          a_in_sum += pa;
          stack = stack.next;
        }
        stackIn = stackStart;
        stackOut = stackEnd;
        for (x = 0; x < width; x++) {
          pixels[yi + 3] = pa = a_sum * mul_sum >> shg_sum;
          if (pa !== 0) {
            pa = 255 / pa;
            pixels[yi] = (r_sum * mul_sum >> shg_sum) * pa;
            pixels[yi + 1] = (g_sum * mul_sum >> shg_sum) * pa;
            pixels[yi + 2] = (b_sum * mul_sum >> shg_sum) * pa;
          } else {
            pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;
          }
          r_sum -= r_out_sum;
          g_sum -= g_out_sum;
          b_sum -= b_out_sum;
          a_sum -= a_out_sum;
          r_out_sum -= stackIn.r;
          g_out_sum -= stackIn.g;
          b_out_sum -= stackIn.b;
          a_out_sum -= stackIn.a;
          p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;
          r_in_sum += stackIn.r = pixels[p];
          g_in_sum += stackIn.g = pixels[p + 1];
          b_in_sum += stackIn.b = pixels[p + 2];
          a_in_sum += stackIn.a = pixels[p + 3];
          r_sum += r_in_sum;
          g_sum += g_in_sum;
          b_sum += b_in_sum;
          a_sum += a_in_sum;
          stackIn = stackIn.next;
          r_out_sum += pr = stackOut.r;
          g_out_sum += pg = stackOut.g;
          b_out_sum += pb = stackOut.b;
          a_out_sum += pa = stackOut.a;
          r_in_sum -= pr;
          g_in_sum -= pg;
          b_in_sum -= pb;
          a_in_sum -= pa;
          stackOut = stackOut.next;
          yi += 4;
        }
        yw += width;
      }
      for (x = 0; x < width; x++) {
        g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;
        yi = x << 2;
        r_out_sum = radiusPlus1 * (pr = pixels[yi]);
        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);
        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);
        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);
        r_sum += sumFactor * pr;
        g_sum += sumFactor * pg;
        b_sum += sumFactor * pb;
        a_sum += sumFactor * pa;
        stack = stackStart;
        for (i = 0; i < radiusPlus1; i++) {
          stack.r = pr;
          stack.g = pg;
          stack.b = pb;
          stack.a = pa;
          stack = stack.next;
        }
        yp = width;
        for (i = 1; i <= radius; i++) {
          yi = yp + x << 2;
          r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);
          g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;
          b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;
          a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;
          r_in_sum += pr;
          g_in_sum += pg;
          b_in_sum += pb;
          a_in_sum += pa;
          stack = stack.next;
          if (i < heightMinus1) {
            yp += width;
          }
        }
        yi = x;
        stackIn = stackStart;
        stackOut = stackEnd;
        for (y = 0; y < height; y++) {
          p = yi << 2;
          pixels[p + 3] = pa = a_sum * mul_sum >> shg_sum;
          if (pa > 0) {
            pa = 255 / pa;
            pixels[p] = (r_sum * mul_sum >> shg_sum) * pa;
            pixels[p + 1] = (g_sum * mul_sum >> shg_sum) * pa;
            pixels[p + 2] = (b_sum * mul_sum >> shg_sum) * pa;
          } else {
            pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;
          }
          r_sum -= r_out_sum;
          g_sum -= g_out_sum;
          b_sum -= b_out_sum;
          a_sum -= a_out_sum;
          r_out_sum -= stackIn.r;
          g_out_sum -= stackIn.g;
          b_out_sum -= stackIn.b;
          a_out_sum -= stackIn.a;
          p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;
          r_sum += r_in_sum += stackIn.r = pixels[p];
          g_sum += g_in_sum += stackIn.g = pixels[p + 1];
          b_sum += b_in_sum += stackIn.b = pixels[p + 2];
          a_sum += a_in_sum += stackIn.a = pixels[p + 3];
          stackIn = stackIn.next;
          r_out_sum += pr = stackOut.r;
          g_out_sum += pg = stackOut.g;
          b_out_sum += pb = stackOut.b;
          a_out_sum += pa = stackOut.a;
          r_in_sum -= pr;
          g_in_sum -= pg;
          b_in_sum -= pb;
          a_in_sum -= pa;
          stackOut = stackOut.next;
          yi += width;
        }
      }
    }
    var Blur3 = function Blur4(imageData) {
      const radius = Math.round(this.blurRadius());
      if (radius > 0) {
        filterGaussBlurRGBA(imageData, radius);
      }
    };
    exports.Blur = Blur3;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "blurRadius", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Brighten.js
var require_Brighten = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Brighten.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Brighten = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Brighten = function(imageData) {
      const brightness = this.brightness() * 255, data = imageData.data, len = data.length;
      for (let i = 0; i < len; i += 4) {
        data[i] += brightness;
        data[i + 1] += brightness;
        data[i + 2] += brightness;
      }
    };
    exports.Brighten = Brighten;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "brightness", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Contrast.js
var require_Contrast = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Contrast.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Contrast = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Contrast3 = function(imageData) {
      const adjust = Math.pow((this.contrast() + 100) / 100, 2);
      const data = imageData.data, nPixels = data.length;
      let red = 150, green = 150, blue = 150;
      for (let i = 0; i < nPixels; i += 4) {
        red = data[i];
        green = data[i + 1];
        blue = data[i + 2];
        red /= 255;
        red -= 0.5;
        red *= adjust;
        red += 0.5;
        red *= 255;
        green /= 255;
        green -= 0.5;
        green *= adjust;
        green += 0.5;
        green *= 255;
        blue /= 255;
        blue -= 0.5;
        blue *= adjust;
        blue += 0.5;
        blue *= 255;
        red = red < 0 ? 0 : red > 255 ? 255 : red;
        green = green < 0 ? 0 : green > 255 ? 255 : green;
        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;
        data[i] = red;
        data[i + 1] = green;
        data[i + 2] = blue;
      }
    };
    exports.Contrast = Contrast3;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "contrast", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Emboss.js
var require_Emboss = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Emboss.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Emboss = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Util_1 = require_Util();
    var Validators_1 = require_Validators();
    var Emboss = function(imageData) {
      const strength = this.embossStrength() * 10, greyLevel = this.embossWhiteLevel() * 255, direction = this.embossDirection(), blend = this.embossBlend(), data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4;
      let dirY = 0, dirX = 0, y = h;
      switch (direction) {
        case "top-left":
          dirY = -1;
          dirX = -1;
          break;
        case "top":
          dirY = -1;
          dirX = 0;
          break;
        case "top-right":
          dirY = -1;
          dirX = 1;
          break;
        case "right":
          dirY = 0;
          dirX = 1;
          break;
        case "bottom-right":
          dirY = 1;
          dirX = 1;
          break;
        case "bottom":
          dirY = 1;
          dirX = 0;
          break;
        case "bottom-left":
          dirY = 1;
          dirX = -1;
          break;
        case "left":
          dirY = 0;
          dirX = -1;
          break;
        default:
          Util_1.Util.error("Unknown emboss direction: " + direction);
      }
      do {
        const offsetY = (y - 1) * w4;
        let otherY = dirY;
        if (y + otherY < 1) {
          otherY = 0;
        }
        if (y + otherY > h) {
          otherY = 0;
        }
        const offsetYOther = (y - 1 + otherY) * w * 4;
        let x = w;
        do {
          const offset = offsetY + (x - 1) * 4;
          let otherX = dirX;
          if (x + otherX < 1) {
            otherX = 0;
          }
          if (x + otherX > w) {
            otherX = 0;
          }
          const offsetOther = offsetYOther + (x - 1 + otherX) * 4;
          const dR = data[offset] - data[offsetOther];
          const dG = data[offset + 1] - data[offsetOther + 1];
          const dB = data[offset + 2] - data[offsetOther + 2];
          let dif = dR;
          const absDif = dif > 0 ? dif : -dif;
          const absG = dG > 0 ? dG : -dG;
          const absB = dB > 0 ? dB : -dB;
          if (absG > absDif) {
            dif = dG;
          }
          if (absB > absDif) {
            dif = dB;
          }
          dif *= strength;
          if (blend) {
            const r = data[offset] + dif;
            const g = data[offset + 1] + dif;
            const b = data[offset + 2] + dif;
            data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;
            data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;
            data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;
          } else {
            let grey = greyLevel - dif;
            if (grey < 0) {
              grey = 0;
            } else if (grey > 255) {
              grey = 255;
            }
            data[offset] = data[offset + 1] = data[offset + 2] = grey;
          }
        } while (--x);
      } while (--y);
    };
    exports.Emboss = Emboss;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "embossStrength", 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "embossWhiteLevel", 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "embossDirection", "top-left", void 0, Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "embossBlend", false, void 0, Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Enhance.js
var require_Enhance = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Enhance.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Enhance = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    function remap(fromValue, fromMin, fromMax, toMin, toMax) {
      const fromRange = fromMax - fromMin, toRange = toMax - toMin;
      if (fromRange === 0) {
        return toMin + toRange / 2;
      }
      if (toRange === 0) {
        return toMin;
      }
      let toValue = (fromValue - fromMin) / fromRange;
      toValue = toRange * toValue + toMin;
      return toValue;
    }
    var Enhance = function(imageData) {
      const data = imageData.data, nSubPixels = data.length;
      let rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b;
      const enhanceAmount = this.enhance();
      if (enhanceAmount === 0) {
        return;
      }
      for (let i = 0; i < nSubPixels; i += 4) {
        r = data[i + 0];
        if (r < rMin) {
          rMin = r;
        } else if (r > rMax) {
          rMax = r;
        }
        g = data[i + 1];
        if (g < gMin) {
          gMin = g;
        } else if (g > gMax) {
          gMax = g;
        }
        b = data[i + 2];
        if (b < bMin) {
          bMin = b;
        } else if (b > bMax) {
          bMax = b;
        }
      }
      if (rMax === rMin) {
        rMax = 255;
        rMin = 0;
      }
      if (gMax === gMin) {
        gMax = 255;
        gMin = 0;
      }
      if (bMax === bMin) {
        bMax = 255;
        bMin = 0;
      }
      let rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;
      if (enhanceAmount > 0) {
        rGoalMax = rMax + enhanceAmount * (255 - rMax);
        rGoalMin = rMin - enhanceAmount * (rMin - 0);
        gGoalMax = gMax + enhanceAmount * (255 - gMax);
        gGoalMin = gMin - enhanceAmount * (gMin - 0);
        bGoalMax = bMax + enhanceAmount * (255 - bMax);
        bGoalMin = bMin - enhanceAmount * (bMin - 0);
      } else {
        rMid = (rMax + rMin) * 0.5;
        rGoalMax = rMax + enhanceAmount * (rMax - rMid);
        rGoalMin = rMin + enhanceAmount * (rMin - rMid);
        gMid = (gMax + gMin) * 0.5;
        gGoalMax = gMax + enhanceAmount * (gMax - gMid);
        gGoalMin = gMin + enhanceAmount * (gMin - gMid);
        bMid = (bMax + bMin) * 0.5;
        bGoalMax = bMax + enhanceAmount * (bMax - bMid);
        bGoalMin = bMin + enhanceAmount * (bMin - bMid);
      }
      for (let i = 0; i < nSubPixels; i += 4) {
        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);
        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);
        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);
      }
    };
    exports.Enhance = Enhance;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "enhance", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Grayscale.js
var require_Grayscale = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Grayscale.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Grayscale = void 0;
    var Grayscale = function(imageData) {
      const data = imageData.data, len = data.length;
      for (let i = 0; i < len; i += 4) {
        const brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];
        data[i] = brightness;
        data[i + 1] = brightness;
        data[i + 2] = brightness;
      }
    };
    exports.Grayscale = Grayscale;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/HSL.js
var require_HSL = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/HSL.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HSL = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    Factory_1.Factory.addGetterSetter(Node_1.Node, "hue", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "saturation", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "luminance", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    var HSL = function(imageData) {
      const data = imageData.data, nPixels = data.length, v = 1, s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, l = this.luminance() * 127;
      const vsu = v * s * Math.cos(h * Math.PI / 180), vsw = v * s * Math.sin(h * Math.PI / 180);
      const rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;
      const gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;
      const br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;
      let r, g, b, a;
      for (let i = 0; i < nPixels; i += 4) {
        r = data[i + 0];
        g = data[i + 1];
        b = data[i + 2];
        a = data[i + 3];
        data[i + 0] = rr * r + rg * g + rb * b + l;
        data[i + 1] = gr * r + gg * g + gb * b + l;
        data[i + 2] = br * r + bg * g + bb * b + l;
        data[i + 3] = a;
      }
    };
    exports.HSL = HSL;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/HSV.js
var require_HSV = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/HSV.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HSV = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var HSV2 = function(imageData) {
      const data = imageData.data, nPixels = data.length, v = Math.pow(2, this.value()), s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360;
      const vsu = v * s * Math.cos(h * Math.PI / 180), vsw = v * s * Math.sin(h * Math.PI / 180);
      const rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;
      const gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;
      const br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;
      let r, g, b, a;
      for (let i = 0; i < nPixels; i += 4) {
        r = data[i + 0];
        g = data[i + 1];
        b = data[i + 2];
        a = data[i + 3];
        data[i + 0] = rr * r + rg * g + rb * b;
        data[i + 1] = gr * r + gg * g + gb * b;
        data[i + 2] = br * r + bg * g + bb * b;
        data[i + 3] = a;
      }
    };
    exports.HSV = HSV2;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "hue", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "saturation", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "value", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Invert.js
var require_Invert = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Invert.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Invert = void 0;
    var Invert = function(imageData) {
      const data = imageData.data, len = data.length;
      for (let i = 0; i < len; i += 4) {
        data[i] = 255 - data[i];
        data[i + 1] = 255 - data[i + 1];
        data[i + 2] = 255 - data[i + 2];
      }
    };
    exports.Invert = Invert;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Kaleidoscope.js
var require_Kaleidoscope = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Kaleidoscope.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Kaleidoscope = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Util_1 = require_Util();
    var Validators_1 = require_Validators();
    var ToPolar = function(src, dst, opt) {
      const srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2;
      let rMax = Math.sqrt(xMid * xMid + yMid * yMid);
      let x = xSize - xMid;
      let y = ySize - yMid;
      const rad = Math.sqrt(x * x + y * y);
      rMax = rad > rMax ? rad : rMax;
      const rSize = ySize, tSize = xSize;
      const conversion = 360 / tSize * Math.PI / 180;
      for (let theta = 0; theta < tSize; theta += 1) {
        const sin = Math.sin(theta * conversion);
        const cos = Math.cos(theta * conversion);
        for (let radius = 0; radius < rSize; radius += 1) {
          x = Math.floor(xMid + rMax * radius / rSize * cos);
          y = Math.floor(yMid + rMax * radius / rSize * sin);
          let i = (y * xSize + x) * 4;
          const r = srcPixels[i + 0];
          const g = srcPixels[i + 1];
          const b = srcPixels[i + 2];
          const a = srcPixels[i + 3];
          i = (theta + radius * xSize) * 4;
          dstPixels[i + 0] = r;
          dstPixels[i + 1] = g;
          dstPixels[i + 2] = b;
          dstPixels[i + 3] = a;
        }
      }
    };
    var FromPolar = function(src, dst, opt) {
      const srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2;
      let rMax = Math.sqrt(xMid * xMid + yMid * yMid);
      let x = xSize - xMid;
      let y = ySize - yMid;
      const rad = Math.sqrt(x * x + y * y);
      rMax = rad > rMax ? rad : rMax;
      const rSize = ySize, tSize = xSize, phaseShift = opt.polarRotation || 0;
      let x1, y1;
      for (x = 0; x < xSize; x += 1) {
        for (y = 0; y < ySize; y += 1) {
          const dx = x - xMid;
          const dy = y - yMid;
          const radius = Math.sqrt(dx * dx + dy * dy) * rSize / rMax;
          let theta = (Math.atan2(dy, dx) * 180 / Math.PI + 360 + phaseShift) % 360;
          theta = theta * tSize / 360;
          x1 = Math.floor(theta);
          y1 = Math.floor(radius);
          let i = (y1 * xSize + x1) * 4;
          const r = srcPixels[i + 0];
          const g = srcPixels[i + 1];
          const b = srcPixels[i + 2];
          const a = srcPixels[i + 3];
          i = (y * xSize + x) * 4;
          dstPixels[i + 0] = r;
          dstPixels[i + 1] = g;
          dstPixels[i + 2] = b;
          dstPixels[i + 3] = a;
        }
      }
    };
    var Kaleidoscope = function(imageData) {
      const xSize = imageData.width, ySize = imageData.height;
      let x, y, xoff, i, r, g, b, a, srcPos, dstPos;
      let power = Math.round(this.kaleidoscopePower());
      const angle = Math.round(this.kaleidoscopeAngle());
      const offset = Math.floor(xSize * (angle % 360) / 360);
      if (power < 1) {
        return;
      }
      const tempCanvas = Util_1.Util.createCanvasElement();
      tempCanvas.width = xSize;
      tempCanvas.height = ySize;
      const scratchData = tempCanvas.getContext("2d").getImageData(0, 0, xSize, ySize);
      Util_1.Util.releaseCanvas(tempCanvas);
      ToPolar(imageData, scratchData, {
        polarCenterX: xSize / 2,
        polarCenterY: ySize / 2
      });
      let minSectionSize = xSize / Math.pow(2, power);
      while (minSectionSize <= 8) {
        minSectionSize = minSectionSize * 2;
        power -= 1;
      }
      minSectionSize = Math.ceil(minSectionSize);
      let sectionSize = minSectionSize;
      let xStart = 0, xEnd = sectionSize, xDelta = 1;
      if (offset + minSectionSize > xSize) {
        xStart = sectionSize;
        xEnd = 0;
        xDelta = -1;
      }
      for (y = 0; y < ySize; y += 1) {
        for (x = xStart; x !== xEnd; x += xDelta) {
          xoff = Math.round(x + offset) % xSize;
          srcPos = (xSize * y + xoff) * 4;
          r = scratchData.data[srcPos + 0];
          g = scratchData.data[srcPos + 1];
          b = scratchData.data[srcPos + 2];
          a = scratchData.data[srcPos + 3];
          dstPos = (xSize * y + x) * 4;
          scratchData.data[dstPos + 0] = r;
          scratchData.data[dstPos + 1] = g;
          scratchData.data[dstPos + 2] = b;
          scratchData.data[dstPos + 3] = a;
        }
      }
      for (y = 0; y < ySize; y += 1) {
        sectionSize = Math.floor(minSectionSize);
        for (i = 0; i < power; i += 1) {
          for (x = 0; x < sectionSize + 1; x += 1) {
            srcPos = (xSize * y + x) * 4;
            r = scratchData.data[srcPos + 0];
            g = scratchData.data[srcPos + 1];
            b = scratchData.data[srcPos + 2];
            a = scratchData.data[srcPos + 3];
            dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;
            scratchData.data[dstPos + 0] = r;
            scratchData.data[dstPos + 1] = g;
            scratchData.data[dstPos + 2] = b;
            scratchData.data[dstPos + 3] = a;
          }
          sectionSize *= 2;
        }
      }
      FromPolar(scratchData, imageData, { polarRotation: 0 });
    };
    exports.Kaleidoscope = Kaleidoscope;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "kaleidoscopePower", 2, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "kaleidoscopeAngle", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Mask.js
var require_Mask = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Mask.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Mask = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    function pixelAt(idata, x, y) {
      let idx = (y * idata.width + x) * 4;
      const d = [];
      d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);
      return d;
    }
    function rgbDistance(p1, p2) {
      return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2) + Math.pow(p1[2] - p2[2], 2));
    }
    function rgbMean(pTab) {
      const m = [0, 0, 0];
      for (let i = 0; i < pTab.length; i++) {
        m[0] += pTab[i][0];
        m[1] += pTab[i][1];
        m[2] += pTab[i][2];
      }
      m[0] /= pTab.length;
      m[1] /= pTab.length;
      m[2] /= pTab.length;
      return m;
    }
    function backgroundMask(idata, threshold) {
      const rgbv_no = pixelAt(idata, 0, 0);
      const rgbv_ne = pixelAt(idata, idata.width - 1, 0);
      const rgbv_so = pixelAt(idata, 0, idata.height - 1);
      const rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);
      const thres = threshold || 10;
      if (rgbDistance(rgbv_no, rgbv_ne) < thres && rgbDistance(rgbv_ne, rgbv_se) < thres && rgbDistance(rgbv_se, rgbv_so) < thres && rgbDistance(rgbv_so, rgbv_no) < thres) {
        const mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);
        const mask = [];
        for (let i = 0; i < idata.width * idata.height; i++) {
          const d = rgbDistance(mean, [
            idata.data[i * 4],
            idata.data[i * 4 + 1],
            idata.data[i * 4 + 2]
          ]);
          mask[i] = d < thres ? 0 : 255;
        }
        return mask;
      }
    }
    function applyMask(idata, mask) {
      for (let i = 0; i < idata.width * idata.height; i++) {
        idata.data[4 * i + 3] = mask[i];
      }
    }
    function erodeMask(mask, sw, sh) {
      const weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];
      const side = Math.round(Math.sqrt(weights.length));
      const halfSide = Math.floor(side / 2);
      const maskResult = [];
      for (let y = 0; y < sh; y++) {
        for (let x = 0; x < sw; x++) {
          const so = y * sw + x;
          let a = 0;
          for (let cy = 0; cy < side; cy++) {
            for (let cx = 0; cx < side; cx++) {
              const scy = y + cy - halfSide;
              const scx = x + cx - halfSide;
              if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {
                const srcOff = scy * sw + scx;
                const wt = weights[cy * side + cx];
                a += mask[srcOff] * wt;
              }
            }
          }
          maskResult[so] = a === 255 * 8 ? 255 : 0;
        }
      }
      return maskResult;
    }
    function dilateMask(mask, sw, sh) {
      const weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];
      const side = Math.round(Math.sqrt(weights.length));
      const halfSide = Math.floor(side / 2);
      const maskResult = [];
      for (let y = 0; y < sh; y++) {
        for (let x = 0; x < sw; x++) {
          const so = y * sw + x;
          let a = 0;
          for (let cy = 0; cy < side; cy++) {
            for (let cx = 0; cx < side; cx++) {
              const scy = y + cy - halfSide;
              const scx = x + cx - halfSide;
              if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {
                const srcOff = scy * sw + scx;
                const wt = weights[cy * side + cx];
                a += mask[srcOff] * wt;
              }
            }
          }
          maskResult[so] = a >= 255 * 4 ? 255 : 0;
        }
      }
      return maskResult;
    }
    function smoothEdgeMask(mask, sw, sh) {
      const weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];
      const side = Math.round(Math.sqrt(weights.length));
      const halfSide = Math.floor(side / 2);
      const maskResult = [];
      for (let y = 0; y < sh; y++) {
        for (let x = 0; x < sw; x++) {
          const so = y * sw + x;
          let a = 0;
          for (let cy = 0; cy < side; cy++) {
            for (let cx = 0; cx < side; cx++) {
              const scy = y + cy - halfSide;
              const scx = x + cx - halfSide;
              if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {
                const srcOff = scy * sw + scx;
                const wt = weights[cy * side + cx];
                a += mask[srcOff] * wt;
              }
            }
          }
          maskResult[so] = a;
        }
      }
      return maskResult;
    }
    var Mask = function(imageData) {
      const threshold = this.threshold();
      let mask = backgroundMask(imageData, threshold);
      if (mask) {
        mask = erodeMask(mask, imageData.width, imageData.height);
        mask = dilateMask(mask, imageData.width, imageData.height);
        mask = smoothEdgeMask(mask, imageData.width, imageData.height);
        applyMask(imageData, mask);
      }
      return imageData;
    };
    exports.Mask = Mask;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "threshold", 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Noise.js
var require_Noise = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Noise.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Noise = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Noise = function(imageData) {
      const amount = this.noise() * 255, data = imageData.data, nPixels = data.length, half = amount / 2;
      for (let i = 0; i < nPixels; i += 4) {
        data[i + 0] += half - 2 * half * Math.random();
        data[i + 1] += half - 2 * half * Math.random();
        data[i + 2] += half - 2 * half * Math.random();
      }
    };
    exports.Noise = Noise;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "noise", 0.2, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Pixelate.js
var require_Pixelate = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Pixelate.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Pixelate = void 0;
    var Factory_1 = require_Factory();
    var Util_1 = require_Util();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Pixelate = function(imageData) {
      let pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, x, y, i, red, green, blue, alpha, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), xBinStart, xBinEnd, yBinStart, yBinEnd, xBin, yBin, pixelsInBin, data = imageData.data;
      if (pixelSize <= 0) {
        Util_1.Util.error("pixelSize value can not be <= 0");
        return;
      }
      for (xBin = 0; xBin < nBinsX; xBin += 1) {
        for (yBin = 0; yBin < nBinsY; yBin += 1) {
          red = 0;
          green = 0;
          blue = 0;
          alpha = 0;
          xBinStart = xBin * pixelSize;
          xBinEnd = xBinStart + pixelSize;
          yBinStart = yBin * pixelSize;
          yBinEnd = yBinStart + pixelSize;
          pixelsInBin = 0;
          for (x = xBinStart; x < xBinEnd; x += 1) {
            if (x >= width) {
              continue;
            }
            for (y = yBinStart; y < yBinEnd; y += 1) {
              if (y >= height) {
                continue;
              }
              i = (width * y + x) * 4;
              red += data[i + 0];
              green += data[i + 1];
              blue += data[i + 2];
              alpha += data[i + 3];
              pixelsInBin += 1;
            }
          }
          red = red / pixelsInBin;
          green = green / pixelsInBin;
          blue = blue / pixelsInBin;
          alpha = alpha / pixelsInBin;
          for (x = xBinStart; x < xBinEnd; x += 1) {
            if (x >= width) {
              continue;
            }
            for (y = yBinStart; y < yBinEnd; y += 1) {
              if (y >= height) {
                continue;
              }
              i = (width * y + x) * 4;
              data[i + 0] = red;
              data[i + 1] = green;
              data[i + 2] = blue;
              data[i + 3] = alpha;
            }
          }
        }
      }
    };
    exports.Pixelate = Pixelate;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "pixelSize", 8, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Posterize.js
var require_Posterize = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Posterize.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Posterize = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Posterize = function(imageData) {
      const levels = Math.round(this.levels() * 254) + 1, data = imageData.data, len = data.length, scale = 255 / levels;
      for (let i = 0; i < len; i += 1) {
        data[i] = Math.floor(data[i] / scale) * scale;
      }
    };
    exports.Posterize = Posterize;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "levels", 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/RGB.js
var require_RGB = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/RGB.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.RGB = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var RGB = function(imageData) {
      const data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue();
      for (let i = 0; i < nPixels; i += 4) {
        const brightness = (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;
        data[i] = brightness * red;
        data[i + 1] = brightness * green;
        data[i + 2] = brightness * blue;
        data[i + 3] = data[i + 3];
      }
    };
    exports.RGB = RGB;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "red", 0, function(val) {
      this._filterUpToDate = false;
      if (val > 255) {
        return 255;
      } else if (val < 0) {
        return 0;
      } else {
        return Math.round(val);
      }
    });
    Factory_1.Factory.addGetterSetter(Node_1.Node, "green", 0, function(val) {
      this._filterUpToDate = false;
      if (val > 255) {
        return 255;
      } else if (val < 0) {
        return 0;
      } else {
        return Math.round(val);
      }
    });
    Factory_1.Factory.addGetterSetter(Node_1.Node, "blue", 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/RGBA.js
var require_RGBA = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/RGBA.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.RGBA = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var RGBA = function(imageData) {
      const data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha();
      for (let i = 0; i < nPixels; i += 4) {
        const ia = 1 - alpha;
        data[i] = red * alpha + data[i] * ia;
        data[i + 1] = green * alpha + data[i + 1] * ia;
        data[i + 2] = blue * alpha + data[i + 2] * ia;
      }
    };
    exports.RGBA = RGBA;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "red", 0, function(val) {
      this._filterUpToDate = false;
      if (val > 255) {
        return 255;
      } else if (val < 0) {
        return 0;
      } else {
        return Math.round(val);
      }
    });
    Factory_1.Factory.addGetterSetter(Node_1.Node, "green", 0, function(val) {
      this._filterUpToDate = false;
      if (val > 255) {
        return 255;
      } else if (val < 0) {
        return 0;
      } else {
        return Math.round(val);
      }
    });
    Factory_1.Factory.addGetterSetter(Node_1.Node, "blue", 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);
    Factory_1.Factory.addGetterSetter(Node_1.Node, "alpha", 1, function(val) {
      this._filterUpToDate = false;
      if (val > 1) {
        return 1;
      } else if (val < 0) {
        return 0;
      } else {
        return val;
      }
    });
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Sepia.js
var require_Sepia = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Sepia.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Sepia = void 0;
    var Sepia = function(imageData) {
      const data = imageData.data, nPixels = data.length;
      for (let i = 0; i < nPixels; i += 4) {
        const r = data[i + 0];
        const g = data[i + 1];
        const b = data[i + 2];
        data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);
        data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);
        data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);
      }
    };
    exports.Sepia = Sepia;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Solarize.js
var require_Solarize = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Solarize.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Solarize = void 0;
    var Solarize = function(imageData) {
      const data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4;
      let y = h;
      do {
        const offsetY = (y - 1) * w4;
        let x = w;
        do {
          const offset = offsetY + (x - 1) * 4;
          let r = data[offset];
          let g = data[offset + 1];
          let b = data[offset + 2];
          if (r > 127) {
            r = 255 - r;
          }
          if (g > 127) {
            g = 255 - g;
          }
          if (b > 127) {
            b = 255 - b;
          }
          data[offset] = r;
          data[offset + 1] = g;
          data[offset + 2] = b;
        } while (--x);
      } while (--y);
    };
    exports.Solarize = Solarize;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Threshold.js
var require_Threshold = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/filters/Threshold.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Threshold = void 0;
    var Factory_1 = require_Factory();
    var Node_1 = require_Node();
    var Validators_1 = require_Validators();
    var Threshold = function(imageData) {
      const level = this.threshold() * 255, data = imageData.data, len = data.length;
      for (let i = 0; i < len; i += 1) {
        data[i] = data[i] < level ? 0 : 255;
      }
    };
    exports.Threshold = Threshold;
    Factory_1.Factory.addGetterSetter(Node_1.Node, "threshold", 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/_FullInternals.js
var require_FullInternals = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/_FullInternals.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Konva = void 0;
    var _CoreInternals_1 = require_CoreInternals();
    var Arc_1 = require_Arc();
    var Arrow_1 = require_Arrow();
    var Circle_1 = require_Circle();
    var Ellipse_1 = require_Ellipse();
    var Image_1 = require_Image();
    var Label_1 = require_Label();
    var Line_1 = require_Line();
    var Path_1 = require_Path();
    var Rect_1 = require_Rect();
    var RegularPolygon_1 = require_RegularPolygon();
    var Ring_1 = require_Ring();
    var Sprite_1 = require_Sprite();
    var Star_1 = require_Star();
    var Text_1 = require_Text();
    var TextPath_1 = require_TextPath();
    var Transformer_1 = require_Transformer();
    var Wedge_1 = require_Wedge();
    var Blur_1 = require_Blur();
    var Brighten_1 = require_Brighten();
    var Contrast_1 = require_Contrast();
    var Emboss_1 = require_Emboss();
    var Enhance_1 = require_Enhance();
    var Grayscale_1 = require_Grayscale();
    var HSL_1 = require_HSL();
    var HSV_1 = require_HSV();
    var Invert_1 = require_Invert();
    var Kaleidoscope_1 = require_Kaleidoscope();
    var Mask_1 = require_Mask();
    var Noise_1 = require_Noise();
    var Pixelate_1 = require_Pixelate();
    var Posterize_1 = require_Posterize();
    var RGB_1 = require_RGB();
    var RGBA_1 = require_RGBA();
    var Sepia_1 = require_Sepia();
    var Solarize_1 = require_Solarize();
    var Threshold_1 = require_Threshold();
    exports.Konva = _CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva, {
      Arc: Arc_1.Arc,
      Arrow: Arrow_1.Arrow,
      Circle: Circle_1.Circle,
      Ellipse: Ellipse_1.Ellipse,
      Image: Image_1.Image,
      Label: Label_1.Label,
      Tag: Label_1.Tag,
      Line: Line_1.Line,
      Path: Path_1.Path,
      Rect: Rect_1.Rect,
      RegularPolygon: RegularPolygon_1.RegularPolygon,
      Ring: Ring_1.Ring,
      Sprite: Sprite_1.Sprite,
      Star: Star_1.Star,
      Text: Text_1.Text,
      TextPath: TextPath_1.TextPath,
      Transformer: Transformer_1.Transformer,
      Wedge: Wedge_1.Wedge,
      Filters: {
        Blur: Blur_1.Blur,
        Brighten: Brighten_1.Brighten,
        Contrast: Contrast_1.Contrast,
        Emboss: Emboss_1.Emboss,
        Enhance: Enhance_1.Enhance,
        Grayscale: Grayscale_1.Grayscale,
        HSL: HSL_1.HSL,
        HSV: HSV_1.HSV,
        Invert: Invert_1.Invert,
        Kaleidoscope: Kaleidoscope_1.Kaleidoscope,
        Mask: Mask_1.Mask,
        Noise: Noise_1.Noise,
        Pixelate: Pixelate_1.Pixelate,
        Posterize: Posterize_1.Posterize,
        RGB: RGB_1.RGB,
        RGBA: RGBA_1.RGBA,
        Sepia: Sepia_1.Sepia,
        Solarize: Solarize_1.Solarize,
        Threshold: Threshold_1.Threshold
      }
    });
  }
});

// node_modules/react-filerobot-image-editor/node_modules/konva/lib/index.js
var require_lib = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/konva/lib/index.js"(exports, module) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", { value: true });
    var _FullInternals_1 = require_FullInternals();
    module.exports = _FullInternals_1.Konva;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/prop-types/lib/ReactPropTypesSecret.js
var require_ReactPropTypesSecret = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/prop-types/lib/ReactPropTypesSecret.js"(exports, module) {
    "use strict";
    init_react_shim();
    var ReactPropTypesSecret = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
    module.exports = ReactPropTypesSecret;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/prop-types/checkPropTypes.js
var require_checkPropTypes = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/prop-types/checkPropTypes.js"(exports, module) {
    "use strict";
    init_react_shim();
    var printWarning = function() {
    };
    if (true) {
      ReactPropTypesSecret = require_ReactPropTypesSecret();
      loggedTypeFailures = {};
      has = Function.call.bind(Object.prototype.hasOwnProperty);
      printWarning = function(text) {
        var message = "Warning: " + text;
        if (typeof console !== "undefined") {
          console.error(message);
        }
        try {
          throw new Error(message);
        } catch (x) {
        }
      };
    }
    var ReactPropTypesSecret;
    var loggedTypeFailures;
    var has;
    function checkPropTypes(typeSpecs, values, location, componentName, getStack) {
      if (true) {
        for (var typeSpecName in typeSpecs) {
          if (has(typeSpecs, typeSpecName)) {
            var error;
            try {
              if (typeof typeSpecs[typeSpecName] !== "function") {
                var err = Error(
                  (componentName || "React class") + ": " + location + " type `" + typeSpecName + "` is invalid; it must be a function, usually from the `prop-types` package, but received `" + typeof typeSpecs[typeSpecName] + "`."
                );
                err.name = "Invariant Violation";
                throw err;
              }
              error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);
            } catch (ex) {
              error = ex;
            }
            if (error && !(error instanceof Error)) {
              printWarning(
                (componentName || "React class") + ": type specification of " + location + " `" + typeSpecName + "` is invalid; the type checker function must return `null` or an `Error` but returned a " + typeof error + ". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."
              );
            }
            if (error instanceof Error && !(error.message in loggedTypeFailures)) {
              loggedTypeFailures[error.message] = true;
              var stack = getStack ? getStack() : "";
              printWarning(
                "Failed " + location + " type: " + error.message + (stack != null ? stack : "")
              );
            }
          }
        }
      }
    }
    checkPropTypes.resetWarningCache = function() {
      if (true) {
        loggedTypeFailures = {};
      }
    };
    module.exports = checkPropTypes;
  }
});

// node_modules/react-filerobot-image-editor/node_modules/prop-types/factoryWithTypeCheckers.js
var require_factoryWithTypeCheckers = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/prop-types/factoryWithTypeCheckers.js"(exports, module) {
    "use strict";
    init_react_shim();
    var ReactIs = require_react_is();
    var assign = require_object_assign();
    var ReactPropTypesSecret = require_ReactPropTypesSecret();
    var checkPropTypes = require_checkPropTypes();
    var has = Function.call.bind(Object.prototype.hasOwnProperty);
    var printWarning = function() {
    };
    if (true) {
      printWarning = function(text) {
        var message = "Warning: " + text;
        if (typeof console !== "undefined") {
          console.error(message);
        }
        try {
          throw new Error(message);
        } catch (x) {
        }
      };
    }
    function emptyFunctionThatReturnsNull() {
      return null;
    }
    module.exports = function(isValidElement, throwOnDirectAccess) {
      var ITERATOR_SYMBOL = typeof Symbol === "function" && Symbol.iterator;
      var FAUX_ITERATOR_SYMBOL = "@@iterator";
      function getIteratorFn(maybeIterable) {
        var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);
        if (typeof iteratorFn === "function") {
          return iteratorFn;
        }
      }
      var ANONYMOUS = "<<anonymous>>";
      var ReactPropTypes = {
        array: createPrimitiveTypeChecker("array"),
        bool: createPrimitiveTypeChecker("boolean"),
        func: createPrimitiveTypeChecker("function"),
        number: createPrimitiveTypeChecker("number"),
        object: createPrimitiveTypeChecker("object"),
        string: createPrimitiveTypeChecker("string"),
        symbol: createPrimitiveTypeChecker("symbol"),
        any: createAnyTypeChecker(),
        arrayOf: createArrayOfTypeChecker,
        element: createElementTypeChecker(),
        elementType: createElementTypeTypeChecker(),
        instanceOf: createInstanceTypeChecker,
        node: createNodeChecker(),
        objectOf: createObjectOfTypeChecker,
        oneOf: createEnumTypeChecker,
        oneOfType: createUnionTypeChecker,
        shape: createShapeTypeChecker,
        exact: createStrictShapeTypeChecker
      };
      function is(x, y) {
        if (x === y) {
          return x !== 0 || 1 / x === 1 / y;
        } else {
          return x !== x && y !== y;
        }
      }
      function PropTypeError(message) {
        this.message = message;
        this.stack = "";
      }
      PropTypeError.prototype = Error.prototype;
      function createChainableTypeChecker(validate) {
        if (true) {
          var manualPropTypeCallCache = {};
          var manualPropTypeWarningCount = 0;
        }
        function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {
          componentName = componentName || ANONYMOUS;
          propFullName = propFullName || propName;
          if (secret !== ReactPropTypesSecret) {
            if (throwOnDirectAccess) {
              var err = new Error(
                "Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"
              );
              err.name = "Invariant Violation";
              throw err;
            } else if (typeof console !== "undefined") {
              var cacheKey = componentName + ":" + propName;
              if (!manualPropTypeCallCache[cacheKey] && // Avoid spamming the console because they are often not actionable except for lib authors
              manualPropTypeWarningCount < 3) {
                printWarning(
                  "You are manually calling a React.PropTypes validation function for the `" + propFullName + "` prop on `" + componentName + "`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."
                );
                manualPropTypeCallCache[cacheKey] = true;
                manualPropTypeWarningCount++;
              }
            }
          }
          if (props[propName] == null) {
            if (isRequired) {
              if (props[propName] === null) {
                return new PropTypeError("The " + location + " `" + propFullName + "` is marked as required " + ("in `" + componentName + "`, but its value is `null`."));
              }
              return new PropTypeError("The " + location + " `" + propFullName + "` is marked as required in " + ("`" + componentName + "`, but its value is `undefined`."));
            }
            return null;
          } else {
            return validate(props, propName, componentName, location, propFullName);
          }
        }
        var chainedCheckType = checkType.bind(null, false);
        chainedCheckType.isRequired = checkType.bind(null, true);
        return chainedCheckType;
      }
      function createPrimitiveTypeChecker(expectedType) {
        function validate(props, propName, componentName, location, propFullName, secret) {
          var propValue = props[propName];
          var propType = getPropType(propValue);
          if (propType !== expectedType) {
            var preciseType = getPreciseType(propValue);
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type " + ("`" + preciseType + "` supplied to `" + componentName + "`, expected ") + ("`" + expectedType + "`."));
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createAnyTypeChecker() {
        return createChainableTypeChecker(emptyFunctionThatReturnsNull);
      }
      function createArrayOfTypeChecker(typeChecker) {
        function validate(props, propName, componentName, location, propFullName) {
          if (typeof typeChecker !== "function") {
            return new PropTypeError("Property `" + propFullName + "` of component `" + componentName + "` has invalid PropType notation inside arrayOf.");
          }
          var propValue = props[propName];
          if (!Array.isArray(propValue)) {
            var propType = getPropType(propValue);
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type " + ("`" + propType + "` supplied to `" + componentName + "`, expected an array."));
          }
          for (var i = 0; i < propValue.length; i++) {
            var error = typeChecker(propValue, i, componentName, location, propFullName + "[" + i + "]", ReactPropTypesSecret);
            if (error instanceof Error) {
              return error;
            }
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createElementTypeChecker() {
        function validate(props, propName, componentName, location, propFullName) {
          var propValue = props[propName];
          if (!isValidElement(propValue)) {
            var propType = getPropType(propValue);
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type " + ("`" + propType + "` supplied to `" + componentName + "`, expected a single ReactElement."));
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createElementTypeTypeChecker() {
        function validate(props, propName, componentName, location, propFullName) {
          var propValue = props[propName];
          if (!ReactIs.isValidElementType(propValue)) {
            var propType = getPropType(propValue);
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type " + ("`" + propType + "` supplied to `" + componentName + "`, expected a single ReactElement type."));
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createInstanceTypeChecker(expectedClass) {
        function validate(props, propName, componentName, location, propFullName) {
          if (!(props[propName] instanceof expectedClass)) {
            var expectedClassName = expectedClass.name || ANONYMOUS;
            var actualClassName = getClassName(props[propName]);
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type " + ("`" + actualClassName + "` supplied to `" + componentName + "`, expected ") + ("instance of `" + expectedClassName + "`."));
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createEnumTypeChecker(expectedValues) {
        if (!Array.isArray(expectedValues)) {
          if (true) {
            if (arguments.length > 1) {
              printWarning(
                "Invalid arguments supplied to oneOf, expected an array, got " + arguments.length + " arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."
              );
            } else {
              printWarning("Invalid argument supplied to oneOf, expected an array.");
            }
          }
          return emptyFunctionThatReturnsNull;
        }
        function validate(props, propName, componentName, location, propFullName) {
          var propValue = props[propName];
          for (var i = 0; i < expectedValues.length; i++) {
            if (is(propValue, expectedValues[i])) {
              return null;
            }
          }
          var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {
            var type = getPreciseType(value);
            if (type === "symbol") {
              return String(value);
            }
            return value;
          });
          return new PropTypeError("Invalid " + location + " `" + propFullName + "` of value `" + String(propValue) + "` " + ("supplied to `" + componentName + "`, expected one of " + valuesString + "."));
        }
        return createChainableTypeChecker(validate);
      }
      function createObjectOfTypeChecker(typeChecker) {
        function validate(props, propName, componentName, location, propFullName) {
          if (typeof typeChecker !== "function") {
            return new PropTypeError("Property `" + propFullName + "` of component `" + componentName + "` has invalid PropType notation inside objectOf.");
          }
          var propValue = props[propName];
          var propType = getPropType(propValue);
          if (propType !== "object") {
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type " + ("`" + propType + "` supplied to `" + componentName + "`, expected an object."));
          }
          for (var key in propValue) {
            if (has(propValue, key)) {
              var error = typeChecker(propValue, key, componentName, location, propFullName + "." + key, ReactPropTypesSecret);
              if (error instanceof Error) {
                return error;
              }
            }
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createUnionTypeChecker(arrayOfTypeCheckers) {
        if (!Array.isArray(arrayOfTypeCheckers)) {
          true ? printWarning("Invalid argument supplied to oneOfType, expected an instance of array.") : void 0;
          return emptyFunctionThatReturnsNull;
        }
        for (var i = 0; i < arrayOfTypeCheckers.length; i++) {
          var checker = arrayOfTypeCheckers[i];
          if (typeof checker !== "function") {
            printWarning(
              "Invalid argument supplied to oneOfType. Expected an array of check functions, but received " + getPostfixForTypeWarning(checker) + " at index " + i + "."
            );
            return emptyFunctionThatReturnsNull;
          }
        }
        function validate(props, propName, componentName, location, propFullName) {
          for (var i2 = 0; i2 < arrayOfTypeCheckers.length; i2++) {
            var checker2 = arrayOfTypeCheckers[i2];
            if (checker2(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {
              return null;
            }
          }
          return new PropTypeError("Invalid " + location + " `" + propFullName + "` supplied to " + ("`" + componentName + "`."));
        }
        return createChainableTypeChecker(validate);
      }
      function createNodeChecker() {
        function validate(props, propName, componentName, location, propFullName) {
          if (!isNode(props[propName])) {
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` supplied to " + ("`" + componentName + "`, expected a ReactNode."));
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createShapeTypeChecker(shapeTypes) {
        function validate(props, propName, componentName, location, propFullName) {
          var propValue = props[propName];
          var propType = getPropType(propValue);
          if (propType !== "object") {
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type `" + propType + "` " + ("supplied to `" + componentName + "`, expected `object`."));
          }
          for (var key in shapeTypes) {
            var checker = shapeTypes[key];
            if (!checker) {
              continue;
            }
            var error = checker(propValue, key, componentName, location, propFullName + "." + key, ReactPropTypesSecret);
            if (error) {
              return error;
            }
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function createStrictShapeTypeChecker(shapeTypes) {
        function validate(props, propName, componentName, location, propFullName) {
          var propValue = props[propName];
          var propType = getPropType(propValue);
          if (propType !== "object") {
            return new PropTypeError("Invalid " + location + " `" + propFullName + "` of type `" + propType + "` " + ("supplied to `" + componentName + "`, expected `object`."));
          }
          var allKeys = assign({}, props[propName], shapeTypes);
          for (var key in allKeys) {
            var checker = shapeTypes[key];
            if (!checker) {
              return new PropTypeError(
                "Invalid " + location + " `" + propFullName + "` key `" + key + "` supplied to `" + componentName + "`.\nBad object: " + JSON.stringify(props[propName], null, "  ") + "\nValid keys: " + JSON.stringify(Object.keys(shapeTypes), null, "  ")
              );
            }
            var error = checker(propValue, key, componentName, location, propFullName + "." + key, ReactPropTypesSecret);
            if (error) {
              return error;
            }
          }
          return null;
        }
        return createChainableTypeChecker(validate);
      }
      function isNode(propValue) {
        switch (typeof propValue) {
          case "number":
          case "string":
          case "undefined":
            return true;
          case "boolean":
            return !propValue;
          case "object":
            if (Array.isArray(propValue)) {
              return propValue.every(isNode);
            }
            if (propValue === null || isValidElement(propValue)) {
              return true;
            }
            var iteratorFn = getIteratorFn(propValue);
            if (iteratorFn) {
              var iterator = iteratorFn.call(propValue);
              var step;
              if (iteratorFn !== propValue.entries) {
                while (!(step = iterator.next()).done) {
                  if (!isNode(step.value)) {
                    return false;
                  }
                }
              } else {
                while (!(step = iterator.next()).done) {
                  var entry = step.value;
                  if (entry) {
                    if (!isNode(entry[1])) {
                      return false;
                    }
                  }
                }
              }
            } else {
              return false;
            }
            return true;
          default:
            return false;
        }
      }
      function isSymbol(propType, propValue) {
        if (propType === "symbol") {
          return true;
        }
        if (!propValue) {
          return false;
        }
        if (propValue["@@toStringTag"] === "Symbol") {
          return true;
        }
        if (typeof Symbol === "function" && propValue instanceof Symbol) {
          return true;
        }
        return false;
      }
      function getPropType(propValue) {
        var propType = typeof propValue;
        if (Array.isArray(propValue)) {
          return "array";
        }
        if (propValue instanceof RegExp) {
          return "object";
        }
        if (isSymbol(propType, propValue)) {
          return "symbol";
        }
        return propType;
      }
      function getPreciseType(propValue) {
        if (typeof propValue === "undefined" || propValue === null) {
          return "" + propValue;
        }
        var propType = getPropType(propValue);
        if (propType === "object") {
          if (propValue instanceof Date) {
            return "date";
          } else if (propValue instanceof RegExp) {
            return "regexp";
          }
        }
        return propType;
      }
      function getPostfixForTypeWarning(value) {
        var type = getPreciseType(value);
        switch (type) {
          case "array":
          case "object":
            return "an " + type;
          case "boolean":
          case "date":
          case "regexp":
            return "a " + type;
          default:
            return type;
        }
      }
      function getClassName(propValue) {
        if (!propValue.constructor || !propValue.constructor.name) {
          return ANONYMOUS;
        }
        return propValue.constructor.name;
      }
      ReactPropTypes.checkPropTypes = checkPropTypes;
      ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;
      ReactPropTypes.PropTypes = ReactPropTypes;
      return ReactPropTypes;
    };
  }
});

// node_modules/react-filerobot-image-editor/node_modules/prop-types/index.js
var require_prop_types = __commonJS({
  "node_modules/react-filerobot-image-editor/node_modules/prop-types/index.js"(exports, module) {
    init_react_shim();
    if (true) {
      ReactIs = require_react_is();
      throwOnDirectAccess = true;
      module.exports = require_factoryWithTypeCheckers()(ReactIs.isElement, throwOnDirectAccess);
    } else {
      module.exports = null();
    }
    var ReactIs;
    var throwOnDirectAccess;
  }
});

// node_modules/use-image/index.js
var require_use_image = __commonJS({
  "node_modules/use-image/index.js"(exports, module) {
    init_react_shim();
    var React117 = require_react();
    module.exports = function useImage(url, crossOrigin, referrerpolicy) {
      const statusRef = React117.useRef("loading");
      const imageRef = React117.useRef();
      const [_, setStateToken] = React117.useState(0);
      const oldUrl = React117.useRef();
      const oldCrossOrigin = React117.useRef();
      const oldReferrerPolicy = React117.useRef();
      if (oldUrl.current !== url || oldCrossOrigin.current !== crossOrigin || oldReferrerPolicy.current !== referrerpolicy) {
        statusRef.current = "loading";
        imageRef.current = void 0;
        oldUrl.current = url;
        oldCrossOrigin.current = crossOrigin;
        oldReferrerPolicy.current = referrerpolicy;
      }
      React117.useLayoutEffect(
        function() {
          if (!url) return;
          var img = document.createElement("img");
          function onload() {
            img.decode().catch(() => {
            }).finally(() => {
              statusRef.current = "loaded";
              imageRef.current = img;
              setStateToken(Math.random());
            });
          }
          function onerror() {
            statusRef.current = "failed";
            imageRef.current = void 0;
            setStateToken(Math.random());
          }
          img.addEventListener("load", onload);
          img.addEventListener("error", onerror);
          crossOrigin && (img.crossOrigin = crossOrigin);
          referrerpolicy && (img.referrerPolicy = referrerpolicy);
          img.src = url;
          return function cleanup() {
            img.removeEventListener("load", onload);
            img.removeEventListener("error", onerror);
          };
        },
        [url, crossOrigin, referrerpolicy]
      );
      return [imageRef.current, statusRef.current];
    };
  }
});

// node_modules/lodash.merge/index.js
var require_lodash = __commonJS({
  "node_modules/lodash.merge/index.js"(exports, module) {
    init_react_shim();
    var LARGE_ARRAY_SIZE = 200;
    var HASH_UNDEFINED = "__lodash_hash_undefined__";
    var HOT_COUNT = 800;
    var HOT_SPAN = 16;
    var MAX_SAFE_INTEGER = 9007199254740991;
    var argsTag = "[object Arguments]";
    var arrayTag = "[object Array]";
    var asyncTag = "[object AsyncFunction]";
    var boolTag = "[object Boolean]";
    var dateTag = "[object Date]";
    var errorTag = "[object Error]";
    var funcTag = "[object Function]";
    var genTag = "[object GeneratorFunction]";
    var mapTag = "[object Map]";
    var numberTag = "[object Number]";
    var nullTag = "[object Null]";
    var objectTag = "[object Object]";
    var proxyTag = "[object Proxy]";
    var regexpTag = "[object RegExp]";
    var setTag = "[object Set]";
    var stringTag = "[object String]";
    var undefinedTag = "[object Undefined]";
    var weakMapTag = "[object WeakMap]";
    var arrayBufferTag = "[object ArrayBuffer]";
    var dataViewTag = "[object DataView]";
    var float32Tag = "[object Float32Array]";
    var float64Tag = "[object Float64Array]";
    var int8Tag = "[object Int8Array]";
    var int16Tag = "[object Int16Array]";
    var int32Tag = "[object Int32Array]";
    var uint8Tag = "[object Uint8Array]";
    var uint8ClampedTag = "[object Uint8ClampedArray]";
    var uint16Tag = "[object Uint16Array]";
    var uint32Tag = "[object Uint32Array]";
    var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
    var reIsHostCtor = /^\[object .+?Constructor\]$/;
    var reIsUint = /^(?:0|[1-9]\d*)$/;
    var typedArrayTags = {};
    typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
    typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
    var freeGlobal = typeof global == "object" && global && global.Object === Object && global;
    var freeSelf = typeof self == "object" && self && self.Object === Object && self;
    var root = freeGlobal || freeSelf || Function("return this")();
    var freeExports = typeof exports == "object" && exports && !exports.nodeType && exports;
    var freeModule = freeExports && typeof module == "object" && module && !module.nodeType && module;
    var moduleExports = freeModule && freeModule.exports === freeExports;
    var freeProcess = moduleExports && freeGlobal.process;
    var nodeUtil = function() {
      try {
        var types = freeModule && freeModule.require && freeModule.require("util").types;
        if (types) {
          return types;
        }
        return freeProcess && freeProcess.binding && freeProcess.binding("util");
      } catch (e) {
      }
    }();
    var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;
    function apply(func, thisArg, args) {
      switch (args.length) {
        case 0:
          return func.call(thisArg);
        case 1:
          return func.call(thisArg, args[0]);
        case 2:
          return func.call(thisArg, args[0], args[1]);
        case 3:
          return func.call(thisArg, args[0], args[1], args[2]);
      }
      return func.apply(thisArg, args);
    }
    function baseTimes(n, iteratee) {
      var index = -1, result = Array(n);
      while (++index < n) {
        result[index] = iteratee(index);
      }
      return result;
    }
    function baseUnary(func) {
      return function(value) {
        return func(value);
      };
    }
    function getValue(object, key) {
      return object == null ? void 0 : object[key];
    }
    function overArg(func, transform) {
      return function(arg) {
        return func(transform(arg));
      };
    }
    var arrayProto = Array.prototype;
    var funcProto = Function.prototype;
    var objectProto = Object.prototype;
    var coreJsData = root["__core-js_shared__"];
    var funcToString = funcProto.toString;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var maskSrcKey = function() {
      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
      return uid ? "Symbol(src)_1." + uid : "";
    }();
    var nativeObjectToString = objectProto.toString;
    var objectCtorString = funcToString.call(Object);
    var reIsNative = RegExp(
      "^" + funcToString.call(hasOwnProperty).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
    );
    var Buffer = moduleExports ? root.Buffer : void 0;
    var Symbol2 = root.Symbol;
    var Uint8Array = root.Uint8Array;
    var allocUnsafe = Buffer ? Buffer.allocUnsafe : void 0;
    var getPrototype = overArg(Object.getPrototypeOf, Object);
    var objectCreate = Object.create;
    var propertyIsEnumerable = objectProto.propertyIsEnumerable;
    var splice = arrayProto.splice;
    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    var defineProperty = function() {
      try {
        var func = getNative(Object, "defineProperty");
        func({}, "", {});
        return func;
      } catch (e) {
      }
    }();
    var nativeIsBuffer = Buffer ? Buffer.isBuffer : void 0;
    var nativeMax = Math.max;
    var nativeNow = Date.now;
    var Map2 = getNative(root, "Map");
    var nativeCreate = getNative(Object, "create");
    var baseCreate = /* @__PURE__ */ function() {
      function object() {
      }
      return function(proto) {
        if (!isObject(proto)) {
          return {};
        }
        if (objectCreate) {
          return objectCreate(proto);
        }
        object.prototype = proto;
        var result = new object();
        object.prototype = void 0;
        return result;
      };
    }();
    function Hash(entries) {
      var index = -1, length = entries == null ? 0 : entries.length;
      this.clear();
      while (++index < length) {
        var entry = entries[index];
        this.set(entry[0], entry[1]);
      }
    }
    function hashClear() {
      this.__data__ = nativeCreate ? nativeCreate(null) : {};
      this.size = 0;
    }
    function hashDelete(key) {
      var result = this.has(key) && delete this.__data__[key];
      this.size -= result ? 1 : 0;
      return result;
    }
    function hashGet(key) {
      var data = this.__data__;
      if (nativeCreate) {
        var result = data[key];
        return result === HASH_UNDEFINED ? void 0 : result;
      }
      return hasOwnProperty.call(data, key) ? data[key] : void 0;
    }
    function hashHas(key) {
      var data = this.__data__;
      return nativeCreate ? data[key] !== void 0 : hasOwnProperty.call(data, key);
    }
    function hashSet(key, value) {
      var data = this.__data__;
      this.size += this.has(key) ? 0 : 1;
      data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED : value;
      return this;
    }
    Hash.prototype.clear = hashClear;
    Hash.prototype["delete"] = hashDelete;
    Hash.prototype.get = hashGet;
    Hash.prototype.has = hashHas;
    Hash.prototype.set = hashSet;
    function ListCache(entries) {
      var index = -1, length = entries == null ? 0 : entries.length;
      this.clear();
      while (++index < length) {
        var entry = entries[index];
        this.set(entry[0], entry[1]);
      }
    }
    function listCacheClear() {
      this.__data__ = [];
      this.size = 0;
    }
    function listCacheDelete(key) {
      var data = this.__data__, index = assocIndexOf(data, key);
      if (index < 0) {
        return false;
      }
      var lastIndex = data.length - 1;
      if (index == lastIndex) {
        data.pop();
      } else {
        splice.call(data, index, 1);
      }
      --this.size;
      return true;
    }
    function listCacheGet(key) {
      var data = this.__data__, index = assocIndexOf(data, key);
      return index < 0 ? void 0 : data[index][1];
    }
    function listCacheHas(key) {
      return assocIndexOf(this.__data__, key) > -1;
    }
    function listCacheSet(key, value) {
      var data = this.__data__, index = assocIndexOf(data, key);
      if (index < 0) {
        ++this.size;
        data.push([key, value]);
      } else {
        data[index][1] = value;
      }
      return this;
    }
    ListCache.prototype.clear = listCacheClear;
    ListCache.prototype["delete"] = listCacheDelete;
    ListCache.prototype.get = listCacheGet;
    ListCache.prototype.has = listCacheHas;
    ListCache.prototype.set = listCacheSet;
    function MapCache(entries) {
      var index = -1, length = entries == null ? 0 : entries.length;
      this.clear();
      while (++index < length) {
        var entry = entries[index];
        this.set(entry[0], entry[1]);
      }
    }
    function mapCacheClear() {
      this.size = 0;
      this.__data__ = {
        "hash": new Hash(),
        "map": new (Map2 || ListCache)(),
        "string": new Hash()
      };
    }
    function mapCacheDelete(key) {
      var result = getMapData(this, key)["delete"](key);
      this.size -= result ? 1 : 0;
      return result;
    }
    function mapCacheGet(key) {
      return getMapData(this, key).get(key);
    }
    function mapCacheHas(key) {
      return getMapData(this, key).has(key);
    }
    function mapCacheSet(key, value) {
      var data = getMapData(this, key), size = data.size;
      data.set(key, value);
      this.size += data.size == size ? 0 : 1;
      return this;
    }
    MapCache.prototype.clear = mapCacheClear;
    MapCache.prototype["delete"] = mapCacheDelete;
    MapCache.prototype.get = mapCacheGet;
    MapCache.prototype.has = mapCacheHas;
    MapCache.prototype.set = mapCacheSet;
    function Stack(entries) {
      var data = this.__data__ = new ListCache(entries);
      this.size = data.size;
    }
    function stackClear() {
      this.__data__ = new ListCache();
      this.size = 0;
    }
    function stackDelete(key) {
      var data = this.__data__, result = data["delete"](key);
      this.size = data.size;
      return result;
    }
    function stackGet(key) {
      return this.__data__.get(key);
    }
    function stackHas(key) {
      return this.__data__.has(key);
    }
    function stackSet(key, value) {
      var data = this.__data__;
      if (data instanceof ListCache) {
        var pairs = data.__data__;
        if (!Map2 || pairs.length < LARGE_ARRAY_SIZE - 1) {
          pairs.push([key, value]);
          this.size = ++data.size;
          return this;
        }
        data = this.__data__ = new MapCache(pairs);
      }
      data.set(key, value);
      this.size = data.size;
      return this;
    }
    Stack.prototype.clear = stackClear;
    Stack.prototype["delete"] = stackDelete;
    Stack.prototype.get = stackGet;
    Stack.prototype.has = stackHas;
    Stack.prototype.set = stackSet;
    function arrayLikeKeys(value, inherited) {
      var isArr = isArray(value), isArg = !isArr && isArguments(value), isBuff = !isArr && !isArg && isBuffer(value), isType = !isArr && !isArg && !isBuff && isTypedArray(value), skipIndexes = isArr || isArg || isBuff || isType, result = skipIndexes ? baseTimes(value.length, String) : [], length = result.length;
      for (var key in value) {
        if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && // Safari 9 has enumerable `arguments.length` in strict mode.
        (key == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
        isBuff && (key == "offset" || key == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
        isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") || // Skip index properties.
        isIndex(key, length)))) {
          result.push(key);
        }
      }
      return result;
    }
    function assignMergeValue(object, key, value) {
      if (value !== void 0 && !eq(object[key], value) || value === void 0 && !(key in object)) {
        baseAssignValue(object, key, value);
      }
    }
    function assignValue(object, key, value) {
      var objValue = object[key];
      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) || value === void 0 && !(key in object)) {
        baseAssignValue(object, key, value);
      }
    }
    function assocIndexOf(array, key) {
      var length = array.length;
      while (length--) {
        if (eq(array[length][0], key)) {
          return length;
        }
      }
      return -1;
    }
    function baseAssignValue(object, key, value) {
      if (key == "__proto__" && defineProperty) {
        defineProperty(object, key, {
          "configurable": true,
          "enumerable": true,
          "value": value,
          "writable": true
        });
      } else {
        object[key] = value;
      }
    }
    var baseFor = createBaseFor();
    function baseGetTag(value) {
      if (value == null) {
        return value === void 0 ? undefinedTag : nullTag;
      }
      return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
    }
    function baseIsArguments(value) {
      return isObjectLike(value) && baseGetTag(value) == argsTag;
    }
    function baseIsNative(value) {
      if (!isObject(value) || isMasked(value)) {
        return false;
      }
      var pattern = isFunction2(value) ? reIsNative : reIsHostCtor;
      return pattern.test(toSource(value));
    }
    function baseIsTypedArray(value) {
      return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
    }
    function baseKeysIn(object) {
      if (!isObject(object)) {
        return nativeKeysIn(object);
      }
      var isProto = isPrototype(object), result = [];
      for (var key in object) {
        if (!(key == "constructor" && (isProto || !hasOwnProperty.call(object, key)))) {
          result.push(key);
        }
      }
      return result;
    }
    function baseMerge(object, source, srcIndex, customizer, stack) {
      if (object === source) {
        return;
      }
      baseFor(source, function(srcValue, key) {
        stack || (stack = new Stack());
        if (isObject(srcValue)) {
          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
        } else {
          var newValue = customizer ? customizer(safeGet(object, key), srcValue, key + "", object, source, stack) : void 0;
          if (newValue === void 0) {
            newValue = srcValue;
          }
          assignMergeValue(object, key, newValue);
        }
      }, keysIn);
    }
    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {
      var objValue = safeGet(object, key), srcValue = safeGet(source, key), stacked = stack.get(srcValue);
      if (stacked) {
        assignMergeValue(object, key, stacked);
        return;
      }
      var newValue = customizer ? customizer(objValue, srcValue, key + "", object, source, stack) : void 0;
      var isCommon = newValue === void 0;
      if (isCommon) {
        var isArr = isArray(srcValue), isBuff = !isArr && isBuffer(srcValue), isTyped = !isArr && !isBuff && isTypedArray(srcValue);
        newValue = srcValue;
        if (isArr || isBuff || isTyped) {
          if (isArray(objValue)) {
            newValue = objValue;
          } else if (isArrayLikeObject(objValue)) {
            newValue = copyArray(objValue);
          } else if (isBuff) {
            isCommon = false;
            newValue = cloneBuffer(srcValue, true);
          } else if (isTyped) {
            isCommon = false;
            newValue = cloneTypedArray(srcValue, true);
          } else {
            newValue = [];
          }
        } else if (isPlainObject(srcValue) || isArguments(srcValue)) {
          newValue = objValue;
          if (isArguments(objValue)) {
            newValue = toPlainObject(objValue);
          } else if (!isObject(objValue) || isFunction2(objValue)) {
            newValue = initCloneObject(srcValue);
          }
        } else {
          isCommon = false;
        }
      }
      if (isCommon) {
        stack.set(srcValue, newValue);
        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
        stack["delete"](srcValue);
      }
      assignMergeValue(object, key, newValue);
    }
    function baseRest(func, start) {
      return setToString(overRest(func, start, identity), func + "");
    }
    var baseSetToString = !defineProperty ? identity : function(func, string) {
      return defineProperty(func, "toString", {
        "configurable": true,
        "enumerable": false,
        "value": constant(string),
        "writable": true
      });
    };
    function cloneBuffer(buffer, isDeep) {
      if (isDeep) {
        return buffer.slice();
      }
      var length = buffer.length, result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
      buffer.copy(result);
      return result;
    }
    function cloneArrayBuffer(arrayBuffer) {
      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
      new Uint8Array(result).set(new Uint8Array(arrayBuffer));
      return result;
    }
    function cloneTypedArray(typedArray, isDeep) {
      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
    }
    function copyArray(source, array) {
      var index = -1, length = source.length;
      array || (array = Array(length));
      while (++index < length) {
        array[index] = source[index];
      }
      return array;
    }
    function copyObject(source, props, object, customizer) {
      var isNew = !object;
      object || (object = {});
      var index = -1, length = props.length;
      while (++index < length) {
        var key = props[index];
        var newValue = customizer ? customizer(object[key], source[key], key, object, source) : void 0;
        if (newValue === void 0) {
          newValue = source[key];
        }
        if (isNew) {
          baseAssignValue(object, key, newValue);
        } else {
          assignValue(object, key, newValue);
        }
      }
      return object;
    }
    function createAssigner(assigner) {
      return baseRest(function(object, sources) {
        var index = -1, length = sources.length, customizer = length > 1 ? sources[length - 1] : void 0, guard = length > 2 ? sources[2] : void 0;
        customizer = assigner.length > 3 && typeof customizer == "function" ? (length--, customizer) : void 0;
        if (guard && isIterateeCall(sources[0], sources[1], guard)) {
          customizer = length < 3 ? void 0 : customizer;
          length = 1;
        }
        object = Object(object);
        while (++index < length) {
          var source = sources[index];
          if (source) {
            assigner(object, source, index, customizer);
          }
        }
        return object;
      });
    }
    function createBaseFor(fromRight) {
      return function(object, iteratee, keysFunc) {
        var index = -1, iterable = Object(object), props = keysFunc(object), length = props.length;
        while (length--) {
          var key = props[fromRight ? length : ++index];
          if (iteratee(iterable[key], key, iterable) === false) {
            break;
          }
        }
        return object;
      };
    }
    function getMapData(map, key) {
      var data = map.__data__;
      return isKeyable(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
    }
    function getNative(object, key) {
      var value = getValue(object, key);
      return baseIsNative(value) ? value : void 0;
    }
    function getRawTag(value) {
      var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
      try {
        value[symToStringTag] = void 0;
        var unmasked = true;
      } catch (e) {
      }
      var result = nativeObjectToString.call(value);
      if (unmasked) {
        if (isOwn) {
          value[symToStringTag] = tag;
        } else {
          delete value[symToStringTag];
        }
      }
      return result;
    }
    function initCloneObject(object) {
      return typeof object.constructor == "function" && !isPrototype(object) ? baseCreate(getPrototype(object)) : {};
    }
    function isIndex(value, length) {
      var type = typeof value;
      length = length == null ? MAX_SAFE_INTEGER : length;
      return !!length && (type == "number" || type != "symbol" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
    }
    function isIterateeCall(value, index, object) {
      if (!isObject(object)) {
        return false;
      }
      var type = typeof index;
      if (type == "number" ? isArrayLike(object) && isIndex(index, object.length) : type == "string" && index in object) {
        return eq(object[index], value);
      }
      return false;
    }
    function isKeyable(value) {
      var type = typeof value;
      return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
    }
    function isMasked(func) {
      return !!maskSrcKey && maskSrcKey in func;
    }
    function isPrototype(value) {
      var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto;
      return value === proto;
    }
    function nativeKeysIn(object) {
      var result = [];
      if (object != null) {
        for (var key in Object(object)) {
          result.push(key);
        }
      }
      return result;
    }
    function objectToString(value) {
      return nativeObjectToString.call(value);
    }
    function overRest(func, start, transform) {
      start = nativeMax(start === void 0 ? func.length - 1 : start, 0);
      return function() {
        var args = arguments, index = -1, length = nativeMax(args.length - start, 0), array = Array(length);
        while (++index < length) {
          array[index] = args[start + index];
        }
        index = -1;
        var otherArgs = Array(start + 1);
        while (++index < start) {
          otherArgs[index] = args[index];
        }
        otherArgs[start] = transform(array);
        return apply(func, this, otherArgs);
      };
    }
    function safeGet(object, key) {
      if (key === "constructor" && typeof object[key] === "function") {
        return;
      }
      if (key == "__proto__") {
        return;
      }
      return object[key];
    }
    var setToString = shortOut(baseSetToString);
    function shortOut(func) {
      var count = 0, lastCalled = 0;
      return function() {
        var stamp = nativeNow(), remaining = HOT_SPAN - (stamp - lastCalled);
        lastCalled = stamp;
        if (remaining > 0) {
          if (++count >= HOT_COUNT) {
            return arguments[0];
          }
        } else {
          count = 0;
        }
        return func.apply(void 0, arguments);
      };
    }
    function toSource(func) {
      if (func != null) {
        try {
          return funcToString.call(func);
        } catch (e) {
        }
        try {
          return func + "";
        } catch (e) {
        }
      }
      return "";
    }
    function eq(value, other) {
      return value === other || value !== value && other !== other;
    }
    var isArguments = baseIsArguments(/* @__PURE__ */ function() {
      return arguments;
    }()) ? baseIsArguments : function(value) {
      return isObjectLike(value) && hasOwnProperty.call(value, "callee") && !propertyIsEnumerable.call(value, "callee");
    };
    var isArray = Array.isArray;
    function isArrayLike(value) {
      return value != null && isLength(value.length) && !isFunction2(value);
    }
    function isArrayLikeObject(value) {
      return isObjectLike(value) && isArrayLike(value);
    }
    var isBuffer = nativeIsBuffer || stubFalse;
    function isFunction2(value) {
      if (!isObject(value)) {
        return false;
      }
      var tag = baseGetTag(value);
      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
    }
    function isLength(value) {
      return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }
    function isObject(value) {
      var type = typeof value;
      return value != null && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return value != null && typeof value == "object";
    }
    function isPlainObject(value) {
      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {
        return false;
      }
      var proto = getPrototype(value);
      if (proto === null) {
        return true;
      }
      var Ctor = hasOwnProperty.call(proto, "constructor") && proto.constructor;
      return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;
    }
    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;
    function toPlainObject(value) {
      return copyObject(value, keysIn(value));
    }
    function keysIn(object) {
      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
    }
    var merge2 = createAssigner(function(object, source, srcIndex) {
      baseMerge(object, source, srcIndex);
    });
    function constant(value) {
      return function() {
        return value;
      };
    }
    function identity(value) {
      return value;
    }
    function stubFalse() {
      return false;
    }
    module.exports = merge2;
  }
});

// node_modules/react-filerobot-image-editor/lib/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/AssemblyPoint/index.js
init_react_shim();
var import_react142 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/App/index.js
init_react_shim();
init_extends();
var import_react139 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/index.js
init_react_shim();
init_extends();
var import_react122 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Layers/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/Layers/BaseLayer/index.js
init_react_shim();
init_extends();
var import_react98 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/getDimensionsMinimalRatio.js
init_react_shim();
var getDimensionsMinimalRatio = function(a, b, c, d) {
  return Math.min(a / c, b / d) || 1;
};
var getDimensionsMinimalRatio_default = getDimensionsMinimalRatio;

// node_modules/react-filerobot-image-editor/lib/utils/cropImage.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/constants.js
init_react_shim();
var ROOT_CONTAINER_CLASS_NAME = "FIE_root";
var DESIGN_LAYER_ID = "FIE_design-layer";
var BASE_LAYER_ID = "FIE_base-layer";
var TRANSFORMERS_LAYER_ID = "FIE_transformers-layer";
var IMAGE_NODE_ID = "FIE_original-image";
var NODES_TRANSFORMER_ID = "FIE_nodes-transformer";
var WATERMARK_ANNOTATION_ID = "watermark";
var TRANSLATIONS_GRID_UUID = "353297d2-40b4-4684-a875-45a2178a8157";
var DEFAULT_SAVE_QUALITY = 0.92;
var TABS_IDS = { FINETUNE: "Finetune", FILTERS: "Filters", ADJUST: "Adjust", WATERMARK: "Watermark", ANNOTATE: "Annotate", RESIZE: "Resize", AI: "AI" };
var TOOLS_IDS = { CROP: "Crop", ROTATE: "Rotate", FLIP_X: "Flip_X", FLIP_Y: "Flip_Y", BRIGHTNESS: "Brightness", CONTRAST: "Contrast", HSV: "HueSaturationValue", WARMTH: "Warmth", BLUR: "Blur", THRESHOLD: "Threshold", POSTERIZE: "Posterize", PIXELATE: "Pixelate", NOISE: "Noise", FILTERS: "Filters", RECT: "Rect", ELLIPSE: "Ellipse", POLYGON: "Polygon", TEXT: "Text", LINE: "Line", IMAGE: "Image", ARROW: "Arrow", WATERMARK: "Watermark", PEN: "Pen", RESIZE: "Resize", OBJECT_REMOVAL: "ObjectRemoval" };
var FLIP_DIRECTIONS = { X: "X", Y: "Y" };
var DEFAULT_ZOOM_FACTOR = 1;
var SUPPORTED_IMAGE_TYPES = ["png", "jpeg", "jpg", "webp"];
var POSSIBLE_IMAGE_TYPES = [].concat(SUPPORTED_IMAGE_TYPES, ["svg", "gif", "avif", "apng"]);
var DEFAULT_IMAGE_TYPE = SUPPORTED_IMAGE_TYPES[0];
var POINTER_ICONS = { DEFAULT: "default", DRAW: "crosshair", SELECT: "pointer", MOVE: "move", DRAG: "GRAB" };
var DEFAULT_ENABLED_ANCHORS = ["top-left", "top-center", "top-right", "middle-right", "middle-left", "bottom-left", "bottom-center", "bottom-right"];
var ORIGINAL_CROP = "Crop";
var CUSTOM_CROP = "custom";
var ELLIPSE_CROP = "ellipse";
var POSITIONS = { TOP_LEFT: "top-left", TOP_CENTER: "top-center", TOP_RIGHT: "top-right", MIDDLE_LEFT: "middle-left", MIDDLE_CENTER: "middle-center", MIDDLE_RIGHT: "middle-right", BOTTOM_LEFT: "bottom-left", BOTTOM_CENTER: "bottom-center", BOTTOM_RIGHT: "bottom-right" };
var MIN_CROP = { WIDTH: 14, HEIGHT: 14 };
var CLOSING_REASONS = { AFTER_SAVE: "after-saving", CLOSE_BUTTON: "close-button-clicked", BACK_BUTTON: "back-button-clicked" };
var FEEDBACK_STATUSES = { WARNING: "warning", ERROR: "error" };
var EDITOR_TO_CLOUDIMG_POSITIONS = { top: "north", bottom: "south", left: "west", center: "center", right: "east" };
var CLOUDIMG_TO_EDITOR_POSITIONS = { northwest: "top-left", northcenter: "top-center", northeast: "top-right", centerwest: "center-left", centercenter: "center-center", centereast: "center-right", southwest: "bottom-left", southcenter: "bottom-center", southeast: "bottom-right" };
var EVENTS = { ANNOTATION_ADD: "fie-annotation-add", ANNOTATION_EDIT: "fie-annotation-edit", ANNOTATIONS_DUPLICATE: "fie-annotations-duplicate", ANNOTATIONS_REMOVE: "fie-annotations-remove", ANNOTATIONS_REPLACE: "fie-annotations-replace", ANNOTATIONS_SELECT: "fie-annotations-select", ANNOTATIONS_DESELECT: "fie-annotations-deselect", DESIGN_UNDO: "fie-design-undo", DESIGN_REDO: "fie-design-redo", DESIGN_RESET: "fie-design-reset", DESIGN_UPDATE: "fie-design-modify", APPLY_TEXT_FORMAT: "fie-apply-text-annotation-format", TEXT_CONTENT_EDIT_STARTING: "fie-text-content-edit-starting", TEXT_CONTENT_EDITED: "fie-text-content-edited", TEXT_CONTENT_CHANGING: "fie-text-content-changing", TEXT_CONTENT_CHANGE_CANCELLED: "fie-text-content-change-cancelled", SAVE_EDITED_TEXT_CONTENT: "fie-save-edited-text-content" };
var ALLOWED_TEXT_PART_FORMATS = ["fontSize", "fill", "fontWeight", "fontStyle", "fontFamily", "baselineShift", "letterSpacing"];
var UNFOCUSED_MARKED_TEXT_SELECTOR_ID = "FIE_text-selected-part";
var TEXT_EDITOR_ID = "FIE_text-content-editor";

// node_modules/react-filerobot-image-editor/lib/utils/cropImage.js
var cropImage = function(a, b) {
  var c = !!(2 < arguments.length && arguments[2] !== void 0) && arguments[2];
  b.ratio !== ELLIPSE_CROP || c ? a.rect(b.x, b.y, b.width, b.height) : a.ellipse(b.x + b.width / 2, b.y + b.height / 2, b.width / 2, b.height / 2, 0, 0, 2 * Math.PI);
};
var cropImage_default = cropImage;

// node_modules/react-filerobot-image-editor/lib/hooks/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/hooks/useFinetune.js
init_react_shim();
var import_react74 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/actions/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/actions/addFilter.js
init_react_shim();
function ownKeys(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var ADD_FILTER = "ADD_FILTER";
var addFilter = function(a, b) {
  return _objectSpread(_objectSpread({}, a), {}, { isDesignState: !b.dismissHistory, filter: b.filter || null });
};
var addFilter_default = addFilter;

// node_modules/react-filerobot-image-editor/lib/actions/hideLoader.js
init_react_shim();
function ownKeys2(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread2(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys2(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys2(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var HIDE_LOADER = "HIDE_LOADER";
var hideLoader = function(a) {
  return _objectSpread2(_objectSpread2({}, a), {}, { loadingData: { isLoadingGlobally: false, text: "", cancelFn: null, useCancelConfirmationModal: false, confirmationTitle: "", confirmationHint: "" } });
};
var hideLoader_default = hideLoader;

// node_modules/react-filerobot-image-editor/lib/actions/redo.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/extractCurrentDesignState.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/context/defaultConfig.js
init_react_shim();
var _theme$annotationsCom;
var defaultConfig_default = (_theme$annotationsCom = { theme: { palette: { "bg-primary-active": "#ECF3FF" }, typography: { fontFamily: "Roboto, Arial" } }, annotationsCommon: { fill: "#000000", stroke: "#000000", strokeWidth: 0, shadowOffsetX: 0, shadowOffsetY: 0, shadowBlur: 0, shadowColor: "#000000", shadowOpacity: 1, opacity: 1 } }, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_theme$annotationsCom, TOOLS_IDS.TEXT, { text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.", fontFamily: "Arial", fonts: [{ label: "Arial", value: "Arial" }, "Tahoma", "Sans-serif", { label: "Comic Sans", value: "Comic-sans" }], fontSize: 14, letterSpacing: 0, lineHeight: 1, align: "left", fontStyle: "normal", fontWeight: "normal", onFontChange: void 0 }), TOOLS_IDS.IMAGE, { fill: void 0, disableUpload: false, gallery: [] }), TOOLS_IDS.RECT, { cornerRadius: 0 }), TOOLS_IDS.ELLIPSE, {}), TOOLS_IDS.POLYGON, { sides: 3 }), TOOLS_IDS.PEN, { strokeWidth: 1, tension: 0.5, lineCap: "round", selectAnnotationAfterDrawing: true }), TOOLS_IDS.LINE, { lineCap: "butt", strokeWidth: 1 }), TOOLS_IDS.OBJECT_REMOVAL, { opacity: 0.65, stroke: "#ffffff", strokeWidth: 50, tension: 1, lineCap: "round", lineJoin: "round", bezier: true, onSubmitDraw: void 0 }), TOOLS_IDS.ARROW, { strokeWidth: 6, lineCap: "butt", pointerLength: void 0, pointerWidth: void 0 }), TOOLS_IDS.WATERMARK, { gallery: [], textScalingRatio: 0.5, imageScalingRatio: 0.5, hideTextWatermark: false, onUploadWatermarkImgClick: void 0 }), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_theme$annotationsCom, TOOLS_IDS.CROP, { minWidth: MIN_CROP.WIDTH, minHeight: MIN_CROP.HEIGHT, width: null, height: null, maxWidth: null, maxHeight: null, ratio: null, ratioTitleKey: void 0, noPresets: false, autoResize: false, presetsItems: [], presetsFolders: [], lockCropAreaAt: null }), TOOLS_IDS.ROTATE, { angle: 60, componentType: "slider" }), "tabsIds", []), "defaultTabId", null), "defaultToolId", null), "onClose", void 0), "onSave", void 0), "onBeforeSave", void 0), "closeAfterSave", false), "defaultSavedImageName", void 0), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_theme$annotationsCom, "defaultSavedImageType", null), "defaultSavedImageQuality", 0.92), "forceToPngInEllipticalCrop", false), "useBackendTranslations", true), "translations", null), "language", "en"), "avoidChangesNotSavedAlertOnLeave", false), "loadableDesignState", null), "moreSaveOptions", []), "savingPixelRatio", 4), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_theme$annotationsCom, "previewPixelRatio", window ? window.devicePixelRatio || 1 : 1), "showBackButton", false), "useAiTab", false), "useCloudimage", false), "cloudimage", { token: "", dontPrefixUrl: false, domain: "cloudimg.io", version: "", loadableQuery: "", secureProtocol: true, imageSealing: { enable: false, salt: "", charCount: 10, includeParams: [] } }), "observePluginContainerSize", false), "showCanvasOnly", false), "getCurrentImgDataFnRef", void 0), "onModify", void 0), "useZoomPresetsMenu", true), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_theme$annotationsCom, "disableZooming", false), "noCrossOrigin", false), "disableSaveIfNoChanges", false), "removeSaveButton", false), "resetOnSourceChange", false), "previewBgColor", void 0), "previewBgImage", void 0), "keepZoomOnSourceChange", false), "showFitCenterZoomButton", true));

// node_modules/react-filerobot-image-editor/lib/context/getInitialAppState.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/filterStrToClass.js
init_react_shim();
var import_konva = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/custom/filters/index.js
var filters_exports = {};
__export(filters_exports, {
  Aden: () => Aden_default,
  Amaro: () => Amaro_default,
  Ashby: () => Ashby_default,
  BlackAndWhite: () => BlackAndWhite_default,
  Brannan: () => Brannan_default,
  Brooklyn: () => Brooklyn_default,
  Charmes: () => Charmes_default,
  Clarendon: () => Clarendon_default,
  Crema: () => Crema_default,
  Dogpatch: () => Dogpatch_default,
  Earlybird: () => Earlybird_default,
  Gingham: () => Gingham_default,
  Ginza: () => Ginza_default,
  Hefe: () => Hefe_default,
  Helena: () => Helena_default,
  Hudson: () => Hudson_default,
  Juno: () => Juno_default,
  Kelvin: () => Kelvin_default,
  Lark: () => Lark_default,
  LoFi: () => LoFi_default,
  Ludwig: () => Ludwig_default,
  Maven: () => Maven_default,
  Mayfair: () => Mayfair_default,
  Moon: () => Moon_default,
  Nashville: () => Nashville_default,
  NinteenSeventySeven: () => NinteenSeventySeven_default,
  Perpetua: () => Perpetua_default,
  Reyes: () => Reyes_default,
  Rise: () => Rise_default,
  Sierra: () => Sierra_default,
  Skyline: () => Skyline_default,
  Slumber: () => Slumber_default,
  Stinson: () => Stinson_default,
  Sutro: () => Sutro_default,
  Toaster: () => Toaster_default,
  Valencia: () => Valencia_default,
  Vesper: () => Vesper_default,
  Walden: () => Walden_default,
  Willow: () => Willow_default,
  XPro2: () => XPro2_default
});
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/custom/filters/BlackAndWhite.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/custom/filters/BaseFilters.js
init_react_shim();
function _createForOfIteratorHelper(b, c) {
  var d = "undefined" != typeof Symbol && b[Symbol.iterator] || b["@@iterator"];
  if (!d) {
    if (Array.isArray(b) || (d = _unsupportedIterableToArray(b)) || c && b && "number" == typeof b.length) {
      d && (b = d);
      var e = 0, f = function() {
      };
      return { s: f, n: function() {
        return e >= b.length ? { done: true } : { done: false, value: b[e++] };
      }, e: function(a) {
        throw a;
      }, f };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var g, h = true, i = false;
  return { s: function() {
    d = d.call(b);
  }, n: function() {
    var a = d.next();
    return h = a.done, a;
  }, e: function(a) {
    i = true, g = a;
  }, f: function() {
    try {
      h || null == d["return"] || d["return"]();
    } finally {
      if (i) throw g;
    }
  } };
}
function _unsupportedIterableToArray(b, c) {
  if (b) {
    if ("string" == typeof b) return _arrayLikeToArray(b, c);
    var a = {}.toString.call(b).slice(8, -1);
    return "Object" === a && b.constructor && (a = b.constructor.name), "Map" === a || "Set" === a ? Array.from(b) : "Arguments" === a || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a) ? _arrayLikeToArray(b, c) : void 0;
  }
}
function _arrayLikeToArray(b, c) {
  (null == c || c > b.length) && (c = b.length);
  for (var d = 0, f = Array(c); d < c; d++) f[d] = b[d];
  return f;
}
var BaseFilters = { apply: function(a) {
  for (var b = a.data, c = b.length, d = arguments.length, e = Array(1 < d ? d - 1 : 0), f = 1; f < d; f++) e[f - 1] = arguments[f];
  for (var g = 0; g < c; g += 4) {
    var h, j = _createForOfIteratorHelper(e);
    try {
      for (j.s(); !(h = j.n()).done; ) {
        var k = h.value, l = k([b[g], b[g + 1], b[g + 2]]), m = _slicedToArray(l, 3);
        b[g] = m[0], b[g + 1] = m[1], b[g + 2] = m[2];
      }
    } catch (a2) {
      j.e(a2);
    } finally {
      j.f();
    }
  }
}, brightness: function(a) {
  return function(b) {
    var c = a;
    return c = 1 < c ? 1 : c, c = -1 > c ? -1 : c, c = ~~(255 * c), [b[0] + c, b[1] + c, b[2] + c];
  };
}, contrast: function(a) {
  return function(b) {
    var c = a;
    c *= 255;
    var d = 259 * (c + 255) / (255 * (259 - c));
    return [d * (b[0] - 128) + 128, d * (b[1] - 128) + 128, d * (b[2] - 128) + 128];
  };
}, saturation: function(a) {
  return function(c) {
    var d = a;
    d = -1 > d ? -1 : d;
    var e = c[0], f = c[1], g = c[2], b = 0.2989 * e + 0.587 * f + 0.114 * g;
    return [-b * d + e * (1 + d), -b * d + f * (1 + d), -b * d + g * (1 + d)];
  };
}, grayscale: function() {
  return function(a) {
    var c = a[0], d = a[1], e = a[2];
    return [, , ,].fill(0.2126 * c + 0.7152 * d + 0.0722 * e);
  };
}, sepia: function(a) {
  return function(c) {
    var d = c[0], e = c[1], f = c[2];
    return [d * (1 - 0.607 * a) + 0.769 * e * a + 0.189 * f * a, 0.349 * d * a + e * (1 - 0.314 * a) + 0.168 * f * a, 0.272 * d * a + 0.534 * e * a + f * (1 - 0.869 * a)];
  };
}, adjustRGB: function(a) {
  return function(b) {
    return [b[0] * a[0], b[1] * a[1], b[2] * a[2]];
  };
}, colorFilter: function(a) {
  return function(c) {
    var d = c[0], e = c[1], f = c[2], b = a[3];
    return [d - (d - a[0]) * b, e - (e - a[1]) * b, f - (f - a[2]) * b];
  };
} };
var BaseFilters_default = BaseFilters;

// node_modules/react-filerobot-image-editor/lib/custom/filters/BlackAndWhite.js
function BlackAndWhite(a) {
  BaseFilters_default.apply(a, function(a2) {
    var b = (a2[0] + a2[1] + a2[2]) / 3 > 100, c = b ? 255 : 0;
    return [c, c, c];
  });
}
BlackAndWhite.filterName = "BlackAndWhite";
var BlackAndWhite_default = BlackAndWhite;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Clarendon.js
init_react_shim();
var BRIGHTNESS_CONST = 0.1;
var CONTRAST_CONST = 0.1;
var SATURATION_CONST = 0.15;
function Clarendon(a) {
  BaseFilters_default.apply(a, BaseFilters_default.brightness(BRIGHTNESS_CONST), BaseFilters_default.contrast(CONTRAST_CONST), BaseFilters_default.saturation(SATURATION_CONST));
}
Clarendon.filterName = "Clarendon";
var Clarendon_default = Clarendon;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Gingham.js
init_react_shim();
var SEPIA_CONST = 0.04;
var CONTRAST_CONST2 = -0.15;
function Gingham(a) {
  BaseFilters_default.apply(a, BaseFilters_default.sepia(SEPIA_CONST), BaseFilters_default.contrast(CONTRAST_CONST2));
}
Gingham.filterName = "Gingham";
var Gingham_default = Gingham;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Moon.js
init_react_shim();
var BRIGHTNESS_CONST2 = 0.1;
function Moon(a) {
  BaseFilters_default.apply(a, BaseFilters_default.grayscale(), BaseFilters_default.brightness(BRIGHTNESS_CONST2));
  var b = a.data, c = b.length;
}
Moon.filterName = "Moon";
var Moon_default = Moon;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Lark.js
init_react_shim();
var BRIGHTNESS_CONST3 = 0.08;
var ADJUST_RGB_CONST = [1, 1.03, 1.05];
var SATURATION_CONST2 = 0.12;
function Lark(a) {
  BaseFilters_default.apply(a, BaseFilters_default.brightness(BRIGHTNESS_CONST3), BaseFilters_default.adjustRGB(ADJUST_RGB_CONST), BaseFilters_default.saturation(SATURATION_CONST2));
}
Lark.filterName = "Lark";
var Lark_default = Lark;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Reyes.js
init_react_shim();
var SEPIA_CONST2 = 0.4;
var BRIGHTNESS_CONST4 = 0.13;
var CONTRAST_CONST3 = -0.05;
function Reyes(a) {
  BaseFilters_default.apply(a, BaseFilters_default.sepia(SEPIA_CONST2), BaseFilters_default.brightness(BRIGHTNESS_CONST4), BaseFilters_default.contrast(CONTRAST_CONST3));
}
Reyes.filterName = "Reyes";
var Reyes_default = Reyes;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Juno.js
init_react_shim();
var ADJUST_RGB_CONST2 = [1.01, 1.04, 1];
var SATURATION_CONST3 = 0.3;
function Juno(a) {
  BaseFilters_default.apply(a, BaseFilters_default.adjustRGB(ADJUST_RGB_CONST2), BaseFilters_default.saturation(SATURATION_CONST3));
}
Juno.filterName = "Juno";
var Juno_default = Juno;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Slumber.js
init_react_shim();
var BRIGHTNESS_CONST5 = 0.1;
var SATURATION_CONST4 = -0.5;
function Slumber(a) {
  BaseFilters_default.apply(a, BaseFilters_default.brightness(BRIGHTNESS_CONST5), BaseFilters_default.saturation(SATURATION_CONST4));
}
Slumber.filterName = "Slumber";
var Slumber_default = Slumber;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Crema.js
init_react_shim();
var ADJUST_RGB_CONST3 = [1.04, 1, 1.02];
var SATURATION_CONST5 = -0.05;
function Crema(a) {
  BaseFilters_default.apply(a, BaseFilters_default.adjustRGB(ADJUST_RGB_CONST3), BaseFilters_default.saturation(SATURATION_CONST5));
}
Crema.filterName = "Crema";
var Crema_default = Crema;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Ludwig.js
init_react_shim();
var BRIGHTNESS_CONST6 = 0.05;
var SATURATION_CONST6 = -0.03;
function Ludwig(a) {
  BaseFilters_default.apply(a, BaseFilters_default.brightness(BRIGHTNESS_CONST6), BaseFilters_default.saturation(SATURATION_CONST6));
}
Ludwig.filterName = "Ludwig";
var Ludwig_default = Ludwig;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Aden.js
init_react_shim();
var COLOR_FILTER_CONST = [228, 130, 225, 0.13];
var SATURATION_CONST7 = -0.2;
function Aden(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST), BaseFilters_default.saturation(SATURATION_CONST7));
}
Aden.filterName = "Aden";
var Aden_default = Aden;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Perpetua.js
init_react_shim();
var ADJUST_RGB_CONST4 = [1.05, 1.1, 1];
function Perpetua(a) {
  BaseFilters_default.apply(a, BaseFilters_default.adjustRGB(ADJUST_RGB_CONST4));
}
Perpetua.filterName = "Perpetua";
var Perpetua_default = Perpetua;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Amaro.js
init_react_shim();
var SATURATION_CONST8 = 0.3;
var BRIGHTNESS_CONST7 = 0.15;
function Amaro(a) {
  BaseFilters_default.apply(a, BaseFilters_default.saturation(SATURATION_CONST8), BaseFilters_default.brightness(BRIGHTNESS_CONST7));
}
Amaro.filterName = "Amaro";
var Amaro_default = Amaro;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Mayfair.js
init_react_shim();
var COLOR_FILTER_CONST2 = [230, 115, 108, 0.05];
var SATURATION_CONST9 = 0.15;
function Mayfair(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST2), BaseFilters_default.saturation(SATURATION_CONST9));
}
Mayfair.filterName = "Mayfair";
var Mayfair_default = Mayfair;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Rise.js
init_react_shim();
var COLOR_FILTER_CONST3 = [255, 170, 0, 0.1];
var BRIGHTNESS_CONST8 = 0.09;
var SATURATION_CONST10 = 0.1;
function Rise(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST3), BaseFilters_default.brightness(BRIGHTNESS_CONST8), BaseFilters_default.saturation(SATURATION_CONST10));
}
Rise.filterName = "Rise";
var Rise_default = Rise;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Hudson.js
init_react_shim();
var ADJUST_RGB_CONST5 = [1, 1, 1.25];
var CONTRAST_CONST4 = 0.1;
var BRIGHTNESS_CONST9 = 0.15;
function Hudson(a) {
  BaseFilters_default.apply(a, BaseFilters_default.adjustRGB(ADJUST_RGB_CONST5), BaseFilters_default.contrast(CONTRAST_CONST4), BaseFilters_default.brightness(BRIGHTNESS_CONST9));
}
Hudson.filterName = "Hudson";
var Hudson_default = Hudson;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Valencia.js
init_react_shim();
var COLOR_FILTER_CONST4 = [255, 225, 80, 0.08];
var SATURATION_CONST11 = 0.1;
var CONTRAST_CONST5 = 0.05;
function Valencia(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST4), BaseFilters_default.saturation(SATURATION_CONST11), BaseFilters_default.contrast(CONTRAST_CONST5));
}
Valencia.filterName = "Valencia";
var Valencia_default = Valencia;

// node_modules/react-filerobot-image-editor/lib/custom/filters/XPro2.js
init_react_shim();
var COLOR_FILTER_CONST5 = [255, 255, 0, 0.07];
var SATURATION_CONST12 = 0.2;
var CONTRAST_CONST6 = 0.15;
function XPro2(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST5), BaseFilters_default.saturation(SATURATION_CONST12), BaseFilters_default.contrast(CONTRAST_CONST6));
}
XPro2.filterName = "XPro2";
var XPro2_default = XPro2;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Sierra.js
init_react_shim();
var CONTRAST_CONST7 = -0.15;
var SATURATION_CONST13 = 0.1;
function Sierra(a) {
  BaseFilters_default.apply(a, BaseFilters_default.contrast(CONTRAST_CONST7), BaseFilters_default.saturation(SATURATION_CONST13));
}
Sierra.filterName = "Sierra";
var Sierra_default = Sierra;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Willow.js
init_react_shim();
var COLOR_FILTER_CONST6 = [100, 28, 210, 0.03];
var BRIGHTNESS_CONST10 = 0.1;
function Willow(a) {
  BaseFilters_default.apply(a, BaseFilters_default.grayscale(), BaseFilters_default.colorFilter(COLOR_FILTER_CONST6), BaseFilters_default.brightness(BRIGHTNESS_CONST10));
}
Willow.filterName = "Willow";
var Willow_default = Willow;

// node_modules/react-filerobot-image-editor/lib/custom/filters/LoFi.js
init_react_shim();
var CONTRAST_CONST8 = 0.15;
var SATURATION_CONST14 = 0.2;
function LoFi(a) {
  BaseFilters_default.apply(a, BaseFilters_default.contrast(CONTRAST_CONST8), BaseFilters_default.saturation(SATURATION_CONST14));
}
LoFi.filterName = "LoFi";
var LoFi_default = LoFi;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Hefe.js
init_react_shim();
var CONTRAST_CONST9 = 0.1;
var SATURATION_CONST15 = 0.15;
function Hefe(a) {
  BaseFilters_default.apply(a, BaseFilters_default.contrast(CONTRAST_CONST9), BaseFilters_default.saturation(SATURATION_CONST15));
}
Hefe.filterName = "Hefe";
var Hefe_default = Hefe;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Nashville.js
init_react_shim();
var COLOR_FILTER_CONST7 = [220, 115, 188, 0.12];
var CONTRAST_CONST10 = -0.05;
function Nashville(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST7), BaseFilters_default.contrast(CONTRAST_CONST10));
}
Nashville.filterName = "Nashville";
var Nashville_default = Nashville;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Stinson.js
init_react_shim();
var BRIGHTNESS_CONST11 = 0.1;
var SEPIA_CONST3 = 0.3;
function Stinson(a) {
  BaseFilters_default.apply(a, BaseFilters_default.brightness(BRIGHTNESS_CONST11), BaseFilters_default.sepia(SEPIA_CONST3));
}
Stinson.filterName = "Stinson";
var Stinson_default = Stinson;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Vesper.js
init_react_shim();
var COLOR_FILTER_CONST8 = [255, 225, 0, 0.05];
var BRIGHTNESS_CONST12 = 0.06;
var CONTRAST_CONST11 = 0.06;
function Vesper(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST8), BaseFilters_default.brightness(BRIGHTNESS_CONST12), BaseFilters_default.contrast(CONTRAST_CONST11));
}
Vesper.filterName = "Vesper";
var Vesper_default = Vesper;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Earlybird.js
init_react_shim();
var COLOR_FILTER_CONST9 = [255, 165, 40, 0.2];
function Earlybird(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST9));
}
Earlybird.filterName = "Earlybird";
var Earlybird_default = Earlybird;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Brannan.js
init_react_shim();
var CONTRAST_CONST12 = 0.2;
var COLOR_FILTER_CONST10 = [140, 10, 185, 0.1];
function Brannan(a) {
  BaseFilters_default.apply(a, BaseFilters_default.contrast(CONTRAST_CONST12), BaseFilters_default.colorFilter(COLOR_FILTER_CONST10));
}
Brannan.filterName = "Brannan";
var Brannan_default = Brannan;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Sutro.js
init_react_shim();
var BRIGHTNESS_CONST13 = -0.1;
var SATURATION_CONST16 = -0.1;
function Sutro(a) {
  BaseFilters_default.apply(a, BaseFilters_default.brightness(BRIGHTNESS_CONST13), BaseFilters_default.saturation(SATURATION_CONST16));
}
Sutro.filterName = "Sutro";
var Sutro_default = Sutro;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Toaster.js
init_react_shim();
var SEPIA_CONST4 = 0.1;
var COLOR_FILTER_CONST11 = [255, 145, 0, 0.2];
function Toaster(a) {
  BaseFilters_default.apply(a, BaseFilters_default.sepia(SEPIA_CONST4), BaseFilters_default.colorFilter(COLOR_FILTER_CONST11));
}
Toaster.filterName = "Toaster";
var Toaster_default = Toaster;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Walden.js
init_react_shim();
var BRIGHTNESS_CONST14 = 0.1;
var COLOR_FILTER_CONST12 = [255, 255, 0, 0.2];
function Walden(a) {
  BaseFilters_default.apply(a, BaseFilters_default.brightness(BRIGHTNESS_CONST14), BaseFilters_default.colorFilter(COLOR_FILTER_CONST12));
}
Walden.filterName = "Walden";
var Walden_default = Walden;

// node_modules/react-filerobot-image-editor/lib/custom/filters/NinteenSeventySeven.js
init_react_shim();
var COLOR_FILTER_CONST13 = [255, 25, 0, 0.15];
var BRIGHTNESS_CONST15 = 0.1;
function NinteenSeventySeven(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST13), BaseFilters_default.brightness(BRIGHTNESS_CONST15));
}
NinteenSeventySeven.filterName = "NinteenSeventySeven";
var NinteenSeventySeven_default = NinteenSeventySeven;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Kelvin.js
init_react_shim();
var COLOR_FILTER_CONST14 = [255, 140, 0, 0.1];
var ADJUST_RGB_CONST6 = [1.15, 1.05, 1];
var SATURATION_CONST17 = 0.35;
function Kelvin(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST14), BaseFilters_default.adjustRGB(ADJUST_RGB_CONST6), BaseFilters_default.saturation(SATURATION_CONST17));
}
Kelvin.filterName = "Kelvin";
var Kelvin_default = Kelvin;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Maven.js
init_react_shim();
var COLOR_FILTER_CONST15 = [225, 240, 0, 0.1];
var SATURATION_CONST18 = 0.25;
var CONTRAST_CONST13 = 0.05;
function Maven(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST15), BaseFilters_default.saturation(SATURATION_CONST18), BaseFilters_default.contrast(CONTRAST_CONST13));
}
Maven.filterName = "Maven";
var Maven_default = Maven;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Ginza.js
init_react_shim();
var SEPIA_CONST5 = 0.06;
var BRIGHTNESS_CONST16 = 0.1;
function Ginza(a) {
  BaseFilters_default.apply(a, BaseFilters_default.sepia(SEPIA_CONST5), BaseFilters_default.brightness(BRIGHTNESS_CONST16));
}
Ginza.filterName = "Ginza";
var Ginza_default = Ginza;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Skyline.js
init_react_shim();
var SATURATION_CONST19 = 0.35;
var BRIGHTNESS_CONST17 = 0.1;
function Skyline(a) {
  BaseFilters_default.apply(a, BaseFilters_default.saturation(SATURATION_CONST19), BaseFilters_default.brightness(BRIGHTNESS_CONST17));
}
Skyline.filterName = "Skyline";
var Skyline_default = Skyline;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Dogpatch.js
init_react_shim();
var CONTRAST_CONST14 = 0.15;
var BRIGHTNESS_CONST18 = 0.1;
function Dogpatch(a) {
  BaseFilters_default.apply(a, BaseFilters_default.contrast(CONTRAST_CONST14), BaseFilters_default.brightness(BRIGHTNESS_CONST18));
}
Dogpatch.filterName = "Dogpatch";
var Dogpatch_default = Dogpatch;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Brooklyn.js
init_react_shim();
var COLOR_FILTER_CONST16 = [25, 240, 252, 0.05];
var SEPIA_CONST6 = 0.3;
function Brooklyn(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST16), BaseFilters_default.sepia(SEPIA_CONST6));
}
Brooklyn.filterName = "Brooklyn";
var Brooklyn_default = Brooklyn;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Helena.js
init_react_shim();
var COLOR_FILTER_CONST17 = [208, 208, 86, 0.2];
var CONTRAST_CONST15 = 0.15;
function Helena(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST17), BaseFilters_default.contrast(CONTRAST_CONST15));
}
Helena.filterName = "Helena";
var Helena_default = Helena;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Ashby.js
init_react_shim();
var COLOR_FILTER_CONST18 = [255, 160, 25, 0.1];
var BRIGHTNESS_CONST19 = 0.1;
function Ashby(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST18), BaseFilters_default.brightness(BRIGHTNESS_CONST19));
}
Ashby.filterName = "Ashby";
var Ashby_default = Ashby;

// node_modules/react-filerobot-image-editor/lib/custom/filters/Charmes.js
init_react_shim();
var COLOR_FILTER_CONST19 = [255, 50, 80, 0.12];
var CONTRAST_CONST16 = 0.05;
function Charmes(a) {
  BaseFilters_default.apply(a, BaseFilters_default.colorFilter(COLOR_FILTER_CONST19), BaseFilters_default.contrast(CONTRAST_CONST16));
}
Charmes.filterName = "Charmes";
var Charmes_default = Charmes;

// node_modules/react-filerobot-image-editor/lib/utils/filterStrToClass.js
var filterStrToClass = function(a) {
  return a ? filters_exports[a] || import_konva.default.Filters[a] : null;
};
var filterStrToClass_default = filterStrToClass;

// node_modules/react-filerobot-image-editor/lib/utils/finetunesStrsToClasses.js
init_react_shim();
var import_konva4 = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/custom/finetunes/index.js
var finetunes_exports = {};
__export(finetunes_exports, {
  CustomThreshold: () => CustomThreshold_default,
  Warmth: () => Warmth_default
});
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/custom/finetunes/Warmth.js
init_react_shim();
var import_konva2 = __toESM(require_lib());
var import_Factory = __toESM(require_Factory());
var import_Validators = __toESM(require_Validators());
function Warmth(a) {
  for (var b = this.warmth(), c = a.data, d = c.length, e = 0; e < d; e += 4) c[e] += b, c[e + 2] -= b;
}
Warmth.finetuneName = "Warmth";
var Warmth_default = Warmth;
import_Factory.Factory.addGetterSetter(import_konva2.default.Image, "warmth", 0, (0, import_Validators.getNumberValidator)(), import_Factory.Factory.afterSetFilter);

// node_modules/react-filerobot-image-editor/lib/custom/finetunes/CustomThreshold.js
init_react_shim();
var import_konva3 = __toESM(require_lib());
var import_Factory2 = __toESM(require_Factory());
var import_Validators2 = __toESM(require_Validators());
function CustomThreshold(a) {
  for (var b = this.threshold(), c = a.data, d = c.length, e = 0; e < d; e += 4) 0 === b || (c[e] = c[e] >= b ? 255 : 0, c[e + 1] = c[e + 1] >= b ? 255 : 0, c[e + 2] = c[e + 2] >= b ? 255 : 0);
}
CustomThreshold.finetuneName = "CustomThreshold";
var CustomThreshold_default = CustomThreshold;
import_Factory2.Factory.addGetterSetter(import_konva3.default.Image, "threshold", 0, import_Validators2.getNumberValidator, import_Factory2.Factory.afterSetFilter);

// node_modules/react-filerobot-image-editor/lib/utils/finetunesStrsToClasses.js
var finetunesStrsToClasses = function(a) {
  return Array.isArray(a) && 0 < a.length ? a.map(function(a2) {
    return import_konva4.default.Filters[a2] || finetunes_exports[a2];
  }) : [];
};
var finetunesStrsToClasses_default = finetunesStrsToClasses;

// node_modules/react-filerobot-image-editor/lib/context/getInitialAppState.js
function ownKeys3(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread3(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys3(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys3(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var getInitialAppState = function() {
  var a, b, c = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, d = _objectSpread3({}, c.loadableDesignState);
  return Array.isArray(d.finetunes) && (d.finetunes = finetunesStrsToClasses_default(d.finetunes)), d.filter && (d.filter = filterStrToClass_default(d.filter)), _objectSpread3(_objectSpread3({ imgSrc: "string" == typeof c.source ? c.source : (null === (a = c.source) || void 0 === a ? void 0 : a.src) || "", finetunes: [], finetunesProps: {}, filter: null, adjustments: { crop: { ratio: c[TOOLS_IDS.CROP].ratio || ORIGINAL_CROP, ratioTitleKey: null !== (b = c[TOOLS_IDS.CROP].ratioTitleKey) && void 0 !== b ? b : c[TOOLS_IDS.CROP].ratio, width: null, height: null, x: 0, y: 0 }, isFlippedX: false, isFlippedY: false, rotation: 0 }, annotationIds: [], annotations: {}, resize: {}, shownImageDimensions: {} }, d), {}, { pointerCssIcon: POINTER_ICONS.DEFAULT, canvasScale: 1, zoom: { factor: DEFAULT_ZOOM_FACTOR, x: null, y: null, customLabel: null }, loadingData: { isLoadingGlobally: true, text: "", cancelFn: null }, selectionsIds: [], tabId: c.defaultTabId || null, toolId: c.defaultToolId || null, feedback: {}, pastDesignStates: [], futureDesignStates: [], isResetted: true, haveNotSavedChanges: false, latestColors: {}, showTabsNavbar: false, isSaving: false, presentOriginalSources: {}, selectedTextPart: { hasSelection: false, textContent: "", element: null, startIndex: null, endIndex: null, annotationId: null }, extra: void 0 });
};
var getInitialAppState_default = getInitialAppState;

// node_modules/react-filerobot-image-editor/lib/utils/extractCurrentDesignState.js
var extractCurrentDesignState = function(a, b) {
  var c = getInitialAppState_default(b ? a : defaultConfig_default);
  return { imgSrc: a.imgSrc || c.imgSrc, finetunes: a.finetunes || c.finetunes, finetunesProps: a.finetunesProps || c.finetunesProps, filter: a.filter || c.filter, adjustments: a.adjustments || c.adjustments, annotationIds: a.annotationIds || c.annotationIds, annotations: a.annotations || c.annotations, resize: a.resize || c.resize, originalSource: a.originalSource || c.originalSource, presentOriginalSources: a.presentOriginalSources || c.presentOriginalSources, extra: a.extra || c.extra };
};
var extractCurrentDesignState_default = extractCurrentDesignState;

// node_modules/react-filerobot-image-editor/lib/actions/redo.js
function ownKeys4(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread4(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys4(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys4(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var REDO = "REDO";
var redo = function(a) {
  if (a.futureDesignStates && 0 < a.futureDesignStates.length) {
    var b = extractCurrentDesignState_default(a), c = _toArray(a.futureDesignStates), d = c[0], e = c.slice(1), f = [b].concat(_toConsumableArray(a.pastDesignStates || []));
    return _objectSpread4(_objectSpread4(_objectSpread4({}, a), d), {}, { selectionsIds: [], pastDesignStates: f, futureDesignStates: e, hasUndo: true, hasRedo: 0 < e.length, haveNotSavedChanges: true });
  }
  return a;
};
var redo_default2 = redo;

// node_modules/react-filerobot-image-editor/lib/actions/reset.js
init_react_shim();
function ownKeys5(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread5(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys5(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys5(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var RESET = "RESET";
var reset = function(a, b) {
  var c, d = (null === (c = a.pastDesignStates[0]) || void 0 === c ? void 0 : c.originalSource) || a.originalSource, e = extractCurrentDesignState_default(_objectSpread5(_objectSpread5({}, b.config), {}, { imgSrc: d.src || a.imgSrc, bgColor: d.bgColor, originalSource: d }), true);
  return _objectSpread5(_objectSpread5(_objectSpread5({}, a), e), {}, { zoom: { factor: DEFAULT_ZOOM_FACTOR, x: null, y: null }, selectionsIds: [], isResetted: true, pastDesignStates: [], futureDesignStates: [], hasUndo: false, hasRedo: false, haveNotSavedChanges: false });
};
var reset_default2 = reset;

// node_modules/react-filerobot-image-editor/lib/actions/setFeedback.js
init_react_shim();
function ownKeys6(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread6(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys6(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys6(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_FEEDBACK = "SET_FEEDBACK";
var setFeedback = function(a, b) {
  return _objectSpread6(_objectSpread6({}, a), {}, { loadingData: { isLoadingGlobally: false, text: "", cancelFn: null }, feedback: b.feedback || {} });
};
var setFeedback_default = setFeedback;

// node_modules/react-filerobot-image-editor/lib/actions/showLoader.js
init_react_shim();
function ownKeys7(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread7(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys7(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys7(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SHOW_LOADER = "SHOW_LOADER";
var showLoader = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};
  return _objectSpread7(_objectSpread7({}, a), {}, { loadingData: { isLoadingGlobally: true, text: b.text, cancelFn: b.cancelFn, useCancelConfirmationModal: b.useCancelConfirmationModal, confirmationTitle: b.confirmationTitle, confirmationHint: b.confirmationHint } });
};
var showLoader_default = showLoader;

// node_modules/react-filerobot-image-editor/lib/actions/selectTab.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/tools.constants.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Brightness/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Brightness/Brightness.js
init_react_shim();
var import_react2 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/ToolsBar/ToolsBarItemButton.js
init_react_shim();
var import_react = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/ToolsBar/ToolsBar.styled.js
init_react_shim();
var StyledToolsBar = it.div.withConfig({ componentId: "sc-dwg14p-0" })(["width:fit-content;margin:0 auto;max-width:99.5%;max-height:170px;[data-phone='true'] &{padding:0;margin-top:8px;max-height:initial;}"]);
var StyledToolsBarItems = it.div.withConfig({ componentId: "sc-dwg14p-1" })(["padding:8px 16px 16px 16px;display:flex;gap:12px;align-items:center;overflow:hidden;", ""], function(a) {
  var b = a.isPhoneScreen;
  return b && "\n    justify-content: space-between;\n    padding: 12px;\n    gap: 8px;\n  ";
});
var StyledToolsBarItemButton = it.div.withConfig({ componentId: "sc-dwg14p-2" })(function(a) {
  var b = a.theme, c = a.isPhoneScreen;
  return "\n    display: flex;\n    gap: 6px;\n    border-radius: 2px;\n    align-items: center;\n    justify-content: center;\n    padding: 8px 12px;\n\n    svg {\n      color: ".concat(b.palette[Color.IconsPrimary], ";\n    }\n\n    &,\n    * {\n      cursor: pointer;\n    }\n\n    &:hover {\n      ").concat(!c && "background: ".concat(b.palette["bg-primary-active"], ";"), "\n    }\n\n    &[aria-selected='true'] {\n      ").concat(!c && "background: ".concat(b.palette["bg-primary-active"], ";"), "\n      border-radius: 4px;\n\n      * {\n        color: ").concat(b.palette["accent-primary-active"], ";\n      }\n    }\n\n    ").concat(c && ot(["display:flex;flex-direction:column;min-width:52px;min-height:52px;padding:8px;gap:4px;"]), "\n  ");
});
var StyledToolsBarItemButtonLabel = it(label_component_default).withConfig({ componentId: "sc-dwg14p-3" })(function(a) {
  var b = a.theme, c = a.isPhoneScreen;
  return ot(["color:", ";", ";"], b.palette[Color.TextPrimary], c && b.typography.font[FontVariant.LabelExtraSmallUp]);
});
var StyledToolsBarItemOptionsWrapper = it.div.withConfig({ componentId: "sc-dwg14p-4" })(["position:relative;width:100%;transition:max-height 100ms ease-in-out;display:flex;justify-content:center;align-items:center;gap:24px;", ";", ""], function(a) {
  return "\n      max-height: ".concat(a.hasChildren ? "56px" : 0, ";\n      margin: ").concat(a.hasChildren ? "0 auto 8px" : 0, ";\n    ");
}, function(a) {
  var b = a.isPhoneScreen;
  return b && "\n    max-height: unset;\n    flex-direction: column;\n    padding: 0 12px 8px 12px;\n    gap: 8px;\n    margin: 0;\n  ";
});

// node_modules/react-filerobot-image-editor/lib/components/ToolsBar/ToolsBarItemButton.js
var ToolsBarItemButton = function(a) {
  var b = a.id, c = a.label, d = void 0 === c ? "" : c, f = a.onClick, g = a.Icon, h = a.isSelected, i = a.children, j = a.className, k = a.dataTestId, l = usePhoneScreen_default(320);
  return import_react.default.createElement(StyledToolsBarItemButton, { className: j, onClick: function(a2) {
    f(b, a2);
  }, "aria-selected": void 0 !== h && h, isPhoneScreen: l, "data-testid": k || "FIE-tools-bar-item-button-".concat(b.toLowerCase()) }, import_react.default.createElement(g, { size: l ? 20 : 16 }), d && import_react.default.createElement(StyledToolsBarItemButtonLabel, { isPhoneScreen: l }, d), i);
};
var ToolsBarItemButton_default = (0, import_react.memo)(ToolsBarItemButton);

// node_modules/react-filerobot-image-editor/lib/components/tools/Brightness/Brightness.js
var Brightness2 = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react2.default.createElement(ToolsBarItemButton_default, { className: "FIE_brightness-tool-button", id: TOOLS_IDS.BRIGHTNESS, label: d("brightnessTool"), Icon: Brightness, onClick: b, isSelected: void 0 !== c && c });
};
var Brightness_default = Brightness2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Brightness/BrightnessOptions.js
init_react_shim();
var import_react4 = __toESM(require_react());
var import_konva5 = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/utils/restrictNumber.js
init_react_shim();
var restrictNumber = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : 0, c = 2 < arguments.length ? arguments[2] : void 0;
  return Math.min(Math.max(b, +a), c || 1e6);
};
var restrictNumber_default = restrictNumber;

// node_modules/react-filerobot-image-editor/lib/components/common/Slider/index.js
init_react_shim();
init_extends();
var import_react3 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/Slider/Slider.styled.js
init_react_shim();
var StyledSlider = it(slider_component_default).withConfig({ componentId: "sc-1wort0h-0" })(["width:", ";max-width:", ";user-select:none;padding:0;margin-bottom:", ";.SfxSlider-thumb{background-color:", ";}.SfxSlider-Track{height:2px;color:", ";}.SfxSlider-rail{height:2px;background-color:", ";}.SfxSlider-label{padding:6px 12px;font-size:12px;line-height:18px;}"], function(a) {
  var b = a.width;
  return b || "104px";
}, function(a) {
  var b = a.width;
  return b || "104px";
}, function(a) {
  var b = a.noMargin;
  return b ? "" : "16px";
}, function(a) {
  var b = a.theme.palette;
  return b[Color.AccentStateless];
}, function(a) {
  var b = a.theme.palette;
  return b[Color.AccentStateless];
}, function(a) {
  var b = a.theme.palette;
  return b[Color.BordersItem];
});

// node_modules/react-filerobot-image-editor/lib/components/common/Slider/index.js
var _excluded = ["onChange"];
var Slider = function(a) {
  var b = a.onChange, c = _objectWithoutProperties(a, _excluded);
  return import_react3.default.createElement(StyledSlider, _extends({ "data-testid": "FIE-slider", annotation: "", onChange: function(a2, c2) {
    return b ? b(c2) : void 0;
  }, hideAnnotation: true, labelTooltip: "auto" }, c));
};
var Slider_default = Slider;

// node_modules/react-filerobot-image-editor/lib/components/tools/tools.styled.js
init_react_shim();
var StyledHSVOptions = it.div.withConfig({ componentId: "sc-1rfxjvn-0" })(["display:flex;width:100%;justify-content:space-between;gap:10px;.SfxSlider-root{min-width:100px;}", ""], function(a) {
  var b = a.isPhoneScreen;
  return b && "\n      flex-direction: column;\n\n      .SfxSlider-root {\n        min-width: 230px;\n      }\n    ";
});
var StyledSliderContainer = it.div.withConfig({ componentId: "sc-1rfxjvn-1" })(["display:flex;flex-direction:column;"]);
var StyledSliderLabel = it(label_component_default).withConfig({ componentId: "sc-1rfxjvn-2" })(["", ";"], function(a) {
  var b = a.theme;
  return b.typography.font[FontVariant.LabelExtraSmallUp];
});
var StyledSliderWrapper = it.div.withConfig({ componentId: "sc-1rfxjvn-3" })(["display:flex;align-items:center;"]);
var StyledSliderInput = it(input_component_default).withConfig({ componentId: "sc-1rfxjvn-4" })(["display:inline-block;width:40px;padding:6px 2px;margin-left:4px;border:none;height:32px;.SfxInput-Base{text-align:center;width:100%;min-width:100%;max-width:100%;}"]);

// node_modules/react-filerobot-image-editor/lib/components/tools/Brightness/BrightnessOptions.js
var MIN_VALUE = -1;
var DEFAULT_VALUE = { brightness: 0 };
var MAX_VALUE = 1;
var sliderStyle = { width: 150, padding: 0, margin: 0 };
var BrightnessOptions = function(a) {
  var b, c, d = a.t, e = useFinetune_default(import_konva5.default.Filters.Brighten, DEFAULT_VALUE), f = _slicedToArray(e, 2), g = f[0], h = f[1], i = function(a2) {
    h({ brightness: restrictNumber_default(a2, MIN_VALUE, MAX_VALUE) });
  };
  return import_react4.default.createElement(StyledSliderContainer, { className: "FIE_brightness-option-wrapper", "data-testid": "FIE-brightness-option-wrapper" }, import_react4.default.createElement(StyledSliderLabel, { className: "FIE_brightness-option-label", "data-testid": "FIE-brightness-option-label" }, d("brightness")), import_react4.default.createElement(StyledSliderWrapper, null, import_react4.default.createElement(Slider_default, { className: "FIE_brightness-option", "data-testid": "FIE-brightness-option", min: MIN_VALUE, step: 0.05, max: MAX_VALUE, width: "124px", value: null !== (b = g.brightness) && void 0 !== b ? b : DEFAULT_VALUE.brightness, onChange: i, style: sliderStyle }), import_react4.default.createElement(StyledSliderInput, { "data-testid": "FIE-brightness-option-input", value: null !== (c = g.brightness) && void 0 !== c ? c : DEFAULT_VALUE.brightness, onChange: function(a2) {
    var b2 = a2.target.value;
    return i(b2);
  } })));
};
var BrightnessOptions_default = BrightnessOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/Crop.js
init_react_shim();
var import_react9 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetsOption.js
init_react_shim();
var import_react8 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/toPrecisedFloat.js
init_react_shim();
var toPrecisedFloat = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : 5;
  return a && +parseFloat(a).toFixed(b);
};
var toPrecisedFloat_default = toPrecisedFloat;

// node_modules/react-filerobot-image-editor/lib/utils/getZoomFitFactor.js
init_react_shim();
var getZoomFitFactor = function(a, b) {
  return Math.min(a.width / b.width, a.height / b.height) || DEFAULT_ZOOM_FACTOR;
};
var getZoomFitFactor_default = getZoomFitFactor;

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/Crop.constants.js
init_react_shim();
var DEFAULT_CROP_PRESETS = [{ titleKey: "custom", ratio: CUSTOM_CROP, icon: custom_default, hide: function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = a.lockCropAreaAt;
  return b;
} }, { titleKey: "original", ratio: ORIGINAL_CROP, icon: image_outline_default }, { titleKey: "landscape", descriptionKey: "16:9", ratio: toPrecisedFloat_default(16 / 9), icon: landscape_default }, { titleKey: "portrait", descriptionKey: "9:16", ratio: toPrecisedFloat_default(9 / 16), icon: portrait_default }, { titleKey: "ellipse", ratio: ELLIPSE_CROP, icon: ellipse_default }];

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetGroupsFolder.js
init_react_shim();
var import_react7 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetGroup.js
init_react_shim();
var import_react6 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetItem.js
init_react_shim();
var import_react5 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/Crop.styled.js
init_react_shim();
var StyledToolsBarItemButtonWrapper = it.div.withConfig({ componentId: "sc-ldar2z-0" })(["display:flex;"]);
var StyledOpenMenuButton = it(button_component_default).withConfig({ componentId: "sc-ldar2z-1" })(["margin:0 0 0 6px;padding:0;"]);
var StyledMenuItemIcon = it.div.withConfig({ componentId: "sc-ldar2z-2" })(["svg,span{vertical-align:middle;}"]);
var StyledRatioDescription = it(label_component_default).withConfig({ componentId: "sc-ldar2z-3" })(["cursor:pointer;", ""], function(a) {
  var b = a.theme.typography;
  return b.font[FontVariant.InputSm];
});
var StyledMenu = it.div.withConfig({ componentId: "sc-ldar2z-4" })(["border-radius:4px;overflow:hidden;background-color:", ";"], function(a) {
  var b = a.theme.palette;
  return b[Color.BackgroundStateless];
});
var StyledMenuItem = it(menu_item_component_default).withConfig({ componentId: "sc-ldar2z-5" })(["display:flex;gap:10px;justify-content:flex-start;align-items:center;border-radius:4px;padding:8px 16px;", " ", ""], function(a) {
  var b = a.isAccordion;
  return b && "padding-left: 22px;";
}, function(a) {
  var b = a.isListItem;
  return b && "padding: 0;";
});
var StyledMenuItemLabel = it(label_component_default).withConfig({ componentId: "sc-ldar2z-6" })(function(a) {
  var b = a.theme;
  return ot(["color:", ";", ";"], b.palette[Color.TextPrimary], b.typography.font[FontVariant.InputMd]);
});
var StyledAccordion = it(accordion_component_default).withConfig({ componentId: "sc-ldar2z-7" })(function(a) {
  var b = a.theme;
  return ot([".SfxAccordionHeader-icon{padding-left:0;}.SfxAccordionHeader-label{", ";color:", ";}.SfxAccordionHeader-root{display:flex;flex-direction:row-reverse;width:fit-content;gap:10px;}"], b.typography.font[FontVariant.LabelMediumEmphasis], b.palette[Color.TextPrimary]);
});

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetItem.js
var CropPresetItem = function(a) {
  var b = a.titleKey, c = a.description, d = a.ratio, f = a.onClick, g = a.Icon, h = a.isActive, i = a.isAccordion, j = a.theme, k = a.width, l = a.height, m = a.t, n = a.disableManualResize, o = a.noEffect;
  return import_react5.default.createElement(StyledMenuItem, { active: h, onClick: function(a2) {
    return f(a2, d, { ratioTitleKey: b, width: k, height: l, disableManualResize: void 0 !== n && n, noEffect: void 0 !== o && o });
  }, isAccordion: void 0 !== i && i, "data-testid": "FIE-crop-preset-item" }, g && import_react5.default.createElement(StyledMenuItemIcon, { "data-testid": "FIE-crop-preset-item-icon" }, "string" == typeof g ? import_react5.default.createElement("span", { dangerouslySetInnerHTML: { __html: g } }) : import_react5.default.createElement(g, { color: j.palette["icon-primary"] })), import_react5.default.createElement(StyledMenuItemLabel, { "data-testid": "FIE-crop-preset-item-label" }, m(b)), c && import_react5.default.createElement(StyledRatioDescription, { "data-testid": "FIE-crop-preset-item-description" }, c));
};
var CropPresetItem_default = CropPresetItem;

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetGroup.js
function ownKeys8(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread8(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys8(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys8(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var CropPresetGroup = function(a) {
  var b = a.groupTitleKey, c = a.items, d = a.onItemSelect, e = a.t, f = a.isExpanded, g = a.setExpandedGroup, h = useStore_default(), i = h.adjustments.crop, j = i.ratio, k = i.ratioGroupKey, l = i.ratioTitleKey, m = h.theme, n = function(a2, c2, e2) {
    d(a2, c2, _objectSpread8(_objectSpread8({}, e2), {}, { ratioGroupKey: b }));
  };
  return import_react6.default.createElement(StyledAccordion, { label: e(b), onChange: function() {
    g(f ? null : b);
  }, expanded: f, "data-testid": "FIE-crop-presets-group" }, c.map(function(a2) {
    var c2 = a2.titleKey, d2 = a2.ratio, f2 = a2.width, g2 = a2.height, h2 = a2.descriptionKey, i2 = a2.icon, o = a2.disableManualResize, p = a2.noEffect, q = null !== d2 && void 0 !== d2 ? d2 : toPrecisedFloat_default(f2 / g2);
    return import_react6.default.createElement(CropPresetItem_default, { key: c2, titleKey: c2, t: e, description: e(h2), size: "sm", onClick: n, width: f2, height: g2, ratio: q, Icon: i2, theme: m, isAccordion: true, disableManualResize: o, isActive: j === q && l === c2 && k === b, noEffect: p });
  }));
};
var CropPresetGroup_default = CropPresetGroup;

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetGroupsFolder.js
function ownKeys9(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread9(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys9(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys9(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var CropPresetGroupsFolder = function(a) {
  var b = a.titleKey, c = a.Icon, d = a.theme, e = a.groups, f = a.onItemSelect, g = a.t, h = useStore_default(), i = h.adjustments.crop, j = i.ratioFolderKey, k = i.ratioGroupKey, l = (0, import_react7.useState)(""), m = _slicedToArray(l, 2), n = m[0], o = m[1], p = function(a2, c2, d2) {
    f(a2, c2, _objectSpread9(_objectSpread9({}, d2), {}, { ratioFolderKey: b }));
  };
  return import_react7.default.createElement(StyledMenuItem, { isListItem: true, "data-testid": "FIE-crop-presets-groups-folder", list: [{ content: g(b), key: b, active: b === j, prefix: c && import_react7.default.createElement(StyledMenuItemIcon, null, "string" == typeof c ? import_react7.default.createElement("span", { dangerouslySetInnerHTML: { __html: c } }) : import_react7.default.createElement(c, { color: d.palette["icon-primary"] })), subList: e.map(function(a2) {
    var b2 = a2.titleKey, c2 = a2.items;
    return { content: import_react7.default.createElement(CropPresetGroup_default, { groupTitleKey: b2, setExpandedGroup: o, isExpanded: "" === n ? k === b2 : n === b2, t: g, items: c2, onItemSelect: p }), key: b2, disableHover: true };
  }), subMenuProps: { style: { previewBgColor: d.palette[Color.BackgroundStateless] } } }] });
};
var CropPresetGroupsFolder_default = CropPresetGroupsFolder;

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/CropPresetsOption.js
var CropPresetsOption = function(a) {
  var b = a.anchorEl, c = void 0 === b ? null : b, d = a.onClose, e = useStore_default(), f = e.dispatch, g = e.t, h = e.adjustments, i = void 0 === h ? {} : h, j = i.crop, k = void 0 === j ? {} : j, l = k.ratio, m = k.ratioTitleKey, n = k.ratioFolderKey, o = e.shownImageDimensions, p = e.config, q = e.theme, r = p[TOOLS_IDS.CROP], s = usePhoneScreen_default(), t = (0, import_react8.useMemo)(function() {
    var a2 = r.presetsItems, b2 = void 0 === a2 ? [] : a2, c2 = r.presetsFolders, d2 = void 0 === c2 ? [] : c2, e2 = r.lockCropAreaAt, f2 = e2 ? DEFAULT_CROP_PRESETS.filter(function(a3) {
      var b3;
      return !(null !== (b3 = a3.hide) && void 0 !== b3 && b3.call(a3, { lockCropAreaAt: e2 }));
    }) : DEFAULT_CROP_PRESETS;
    return [].concat(_toConsumableArray(d2), _toConsumableArray(f2), _toConsumableArray(b2));
  }, [r]), u = function(a2, b2, c2) {
    a2.stopPropagation();
    var e2 = { ratio: b2, ratioTitleKey: c2.ratioTitleKey, ratioGroupKey: c2.ratioGroupKey, ratioFolderKey: c2.ratioFolderKey, noEffect: c2.noEffect };
    f({ type: SET_CROP, payload: e2 }), r.autoResize && (f({ type: SET_RESIZE, payload: { width: c2.width, height: c2.height, manualChangeDisabled: c2.disableManualResize } }), f({ type: ZOOM_CANVAS, payload: { factor: c2.width > o.width || c2.height > o.height ? getZoomFitFactor_default(o, c2) : DEFAULT_ZOOM_FACTOR } })), d();
  };
  return import_react8.default.createElement(import_react8.default.Fragment, null, import_react8.default.createElement(StyledToolsBarItemButtonWrapper, null, import_react8.default.createElement(StyledToolsBarItemButtonLabel, { className: "FIE_crop-tool-label FIE_selected-crop-preset-label", isPhoneScreen: s, "data-testid": "FIE-crop-tool-label" }, g(m || "cropTool")), import_react8.default.createElement(StyledOpenMenuButton, { className: "FIE_crop-presets-opener-button", "data-testid": "FIE-crop-presets-opener-button", color: "link-secondary", size: "lg" }, c ? import_react8.default.createElement(MoveUpOutline, { size: 10 }) : import_react8.default.createElement(MoveDownOutline, { size: 10 }))), import_react8.default.createElement(menu_component_default, { className: "FIE_crop-presets-menu", "data-testid": "FIE-crop-presets-menu", anchorEl: c, enableOverlay: true, onClose: d, open: !!c, position: "top", popperOptions: { modifiers: [{ name: "offset", options: { offset: [0, 4] } }] }, maxHeight: "100%" }, import_react8.default.createElement(StyledMenu, null, t.map(function(a2) {
    var b2 = a2.titleKey, c2 = a2.descriptionKey, d2 = a2.ratio, e2 = a2.width, f2 = a2.height, h2 = a2.groups, i2 = a2.icon, j2 = a2.disableManualResize, k2 = a2.noEffect;
    return h2 ? import_react8.default.createElement(CropPresetGroupsFolder_default, { key: b2, titleKey: b2, groups: h2, Icon: i2, theme: q, onItemSelect: u, t: g, disableManualResize: j2 }) : import_react8.default.createElement(CropPresetItem_default, { key: d2, ratio: null !== d2 && void 0 !== d2 ? d2 : toPrecisedFloat_default(e2 / f2), titleKey: b2, t: g, description: g(c2), Icon: i2, isActive: (l || ORIGINAL_CROP) === (null !== d2 && void 0 !== d2 ? d2 : toPrecisedFloat_default(e2 / f2)) && !n, theme: q, width: e2, height: f2, onClick: u, disableManualResize: j2, noEffect: k2 });
  }))));
};
var CropPresetsOption_default = CropPresetsOption;

// node_modules/react-filerobot-image-editor/lib/components/tools/Crop/Crop.js
var Crop2 = function(a) {
  var b = a.selectTool, c = a.isSelected, d = useStore_default(), e = d.config, f = d.t, g = (0, import_react9.useState)(), h = _slicedToArray(g, 2), i = h[0], j = h[1];
  return import_react9.default.createElement(ToolsBarItemButton_default, { className: "FIE_crop-tool", id: TOOLS_IDS.CROP, Icon: Crop, onClick: function(a2, c2) {
    b(a2), j(c2.currentTarget);
  }, isSelected: void 0 !== c && c }, e[TOOLS_IDS.CROP].noPresets ? import_react9.default.createElement(StyledToolsBarItemButtonLabel, { className: "FIE_crop-tool-label" }, f("cropTool")) : import_react9.default.createElement(CropPresetsOption_default, { anchorEl: i, onClose: function() {
    j(null);
  } }));
};
var Crop_default = Crop2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Flip/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Flip/FlipX.js
init_react_shim();
var import_react10 = __toESM(require_react());
var xFlipReverseSideStyle = { transform: "scaleX(-1)" };
var FlipX2 = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t, e = useStore_default(), f = e.dispatch, g = e.adjustments.isFlippedX, h = usePhoneScreen_default(320), i = (0, import_react10.useCallback)(function() {
    return import_react10.default.createElement(FlipX, { size: h ? 20 : 16, style: g ? xFlipReverseSideStyle : void 0 });
  }, [g, h]), j = (0, import_react10.useMemo)(function() {
    return { reverseLabelOfCurrXFlipDir: g ? d("unFlipX") : d("flipX"), reverseIconOfCurrXFlipDir: i };
  }, [g, i]), k = j.reverseLabelOfCurrXFlipDir, l = j.reverseIconOfCurrXFlipDir, m = (0, import_react10.useCallback)(function() {
    f({ type: TOGGLE_FLIP, payload: { direction: FLIP_DIRECTIONS.X } });
  }, []), n = (0, import_react10.useCallback)(function(a2) {
    b(a2), m();
  }, []);
  return import_react10.default.createElement(ToolsBarItemButton_default, { className: "FIE_flip-x-tool-button", id: TOOLS_IDS.FLIP_X, label: k, Icon: l, onClick: n, isSelected: void 0 !== c && c });
};
var FlipX_default = FlipX2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Flip/FlipY.js
init_react_shim();
var import_react11 = __toESM(require_react());
var yFlipReverseSideStyle = { transform: "scaleY(-1)" };
var FlipY2 = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t, e = useStore_default(), f = e.dispatch, g = e.adjustments.isFlippedY, h = usePhoneScreen_default(320), i = (0, import_react11.useCallback)(function() {
    return import_react11.default.createElement(FlipY, { size: h ? 20 : 16, style: g ? yFlipReverseSideStyle : void 0 });
  }, [g, h]), j = (0, import_react11.useMemo)(function() {
    return { reverseLabelOfCurrYFlipDir: g ? d("unFlipY") : d("flipY"), reverseIconOfCurrYFlipDir: i };
  }, [g]), k = j.reverseLabelOfCurrYFlipDir, l = j.reverseIconOfCurrYFlipDir, m = (0, import_react11.useCallback)(function() {
    f({ type: TOGGLE_FLIP, payload: { direction: FLIP_DIRECTIONS.Y } });
  }, []), n = (0, import_react11.useCallback)(function(a2) {
    b(a2), m();
  }, []);
  return import_react11.default.createElement(ToolsBarItemButton_default, { className: "FIE_flip-y-tool-button", id: TOOLS_IDS.FLIP_Y, label: k, Icon: l, onClick: n, isSelected: void 0 !== c && c });
};
var FlipY_default = FlipY2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Rotate/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Rotate/RotateButton.js
init_react_shim();
var import_react12 = __toESM(require_react());
var RotateButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react12.default.createElement(ToolsBarItemButton_default, { className: "FIE_rotate-tool-button", id: TOOLS_IDS.ROTATE, label: d("rotateTool"), Icon: RotationLeft, onClick: b, isSelected: void 0 !== c && c });
};
var RotateButton_default = RotateButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Rotate/RotateOptions.js
init_react_shim();
var import_react13 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/getSizeAfterRotation.js
init_react_shim();
var getSizeAfterRotation = function(a, b) {
  var c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : 0, d = Math.abs(c), e = Math.round(c), f = 90 < d, g = f ? d - 90 : d, h = f ? b : a, i = f ? a : b, j = g * Math.PI / 180, k = Math.abs(Math.sin(j)), l = Math.abs(Math.cos(j));
  return { width: Math.round(h * l) + Math.round(i * k), height: Math.round(h * k) + Math.round(i * l), offsetTop: 0 <= e && 90 >= e ? 0 : function() {
    return 0 > e && -90 < e ? h * k : 90 < e ? h * k : i * l + h * k;
  }(), offsetLeft: 0 >= e && -90 <= e ? 0 : function() {
    return 90 < e ? h * l + i * k : i * k;
  }() };
};
var getSizeAfterRotation_default = getSizeAfterRotation;

// node_modules/react-filerobot-image-editor/lib/components/tools/Rotate/Rotate.styled.js
init_react_shim();
var StyledRotationOptions = it.div.withConfig({ componentId: "sc-wbx58r-0" })(["display:flex;align-items:center;gap:16px;"]);
var StyledRotationSlider = it(rotation_slider_component_default).withConfig({ componentId: "sc-wbx58r-1" })([".SfxRotationSlider-control{width:1px;height:10px;background-color:", ";&:before{box-shadow:unset;}}.SfxRotationSlider-mark,.SfxRotationSlider-small-dot-wrapper{padding:0;.SfxRotationSlider-mark-text{top:10px;}.SfxRotationSlider-big-dot{width:4px;height:4px;}.SfxRotationSlider-small-dot{width:1px;height:1px;}}.SfxRotationSlider-list{gap:4px;}"], function(a) {
  var b = a.theme.palette;
  return b[Color.IconsSecondary];
});
var StyledRotateButton = it(icon_button_component_default).withConfig({ componentId: "sc-wbx58r-2" })([""]);

// node_modules/react-filerobot-image-editor/lib/components/tools/Rotate/RotateOptions.js
var RotateOptions = function() {
  var a = useStore_default(), b = a.dispatch, c = a.adjustments.rotation, d = void 0 === c ? 0 : c, e = a.resize, f = void 0 === e ? {} : e, g = a.config, h = g[TOOLS_IDS.ROTATE], i = usePhoneScreen_default(), j = useDebouncedCallback_default(function(a2, c2) {
    var d2 = restrictNumber_default(c2, -180, 180);
    if (b({ type: CHANGE_ROTATION, payload: { rotation: d2 } }), f.width && f.height) {
      var e2 = getSizeAfterRotation_default(f.width, f.height, d2);
      b({ type: SET_RESIZE, payload: { width: e2.width, height: e2.height } });
    }
  }, 20);
  return "buttons" === h.componentType ? import_react13.default.createElement(import_react13.default.Fragment, null, import_react13.default.createElement(ToolsBarItemButton_default, { className: "FIE_rotate_button_left", id: TOOLS_IDS.IMAGE, label: "-".concat(h.angle, ""), Icon: rotation_left_default, onClick: function(a2) {
    var b2 = d - h.angle;
    j(a2, b2);
  } }), import_react13.default.createElement(ToolsBarItemButton_default, { className: "FIE_rotate_button_right", id: TOOLS_IDS.IMAGE, label: "+".concat(h.angle, ""), Icon: rotation_right_default, onClick: function(a2) {
    var b2 = d + h.angle;
    j(a2, b2);
  } })) : import_react13.default.createElement(StyledRotationOptions, null, import_react13.default.createElement(StyledRotateButton, { "data-testid": "FIE-rotate-reset-button-left", size: "sm", color: "basic", onClick: function(a2) {
    return j(a2, d - 90);
  } }, import_react13.default.createElement(Rotate90, { width: 15 })), import_react13.default.createElement(StyledRotationSlider, { className: "FIE_rotate-slider", "data-testid": "FIE-rotate-slider", showCurrentMarkText: true, min: -180, max: 180, step: i ? h.angle / 3 : 1, value: d, angle: h.angle || 90, onChange: j }), import_react13.default.createElement(StyledRotateButton, { "data-testid": "FIE-rotate-reset-button-right", size: "sm", color: "basic", onClick: function(a2) {
    return j(a2, d + 90);
  } }, import_react13.default.createElement(Rotate90, { width: 15, style: { transform: "scaleX(-1)" } })));
};
var RotateOptions_default = RotateOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Contrast/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Contrast/Contrast.js
init_react_shim();
var import_react14 = __toESM(require_react());
var Contrast2 = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react14.default.createElement(ToolsBarItemButton_default, { className: "FIE_contrast-tool-button", id: TOOLS_IDS.CONTRAST, label: d("contrastTool"), Icon: Contrast, onClick: b, isSelected: void 0 !== c && c });
};
var Contrast_default = Contrast2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Contrast/ContrastOptions.js
init_react_shim();
var import_react15 = __toESM(require_react());
var import_konva6 = __toESM(require_lib());
var MIN_VALUE2 = -100;
var DEFAULT_VALUE2 = { contrast: 0 };
var MAX_VALUE2 = 100;
var sliderStyle2 = { width: 150, padding: 0, margin: 0 };
var ContrastOptions = function(a) {
  var b, c, d = a.t, e = useFinetune_default(import_konva6.default.Filters.Contrast, DEFAULT_VALUE2), f = _slicedToArray(e, 2), g = f[0], h = f[1], i = function(a2) {
    h({ contrast: restrictNumber_default(a2, MIN_VALUE2, MAX_VALUE2) });
  };
  return import_react15.default.createElement(StyledSliderContainer, { className: "FIE_contrast-option-wrapper", "data-testid": "FIE-contrast-option-wrapper" }, import_react15.default.createElement(StyledSliderLabel, { className: "FIE_contrast-option-label", "data-testid": "FIE-contrast-option-label" }, d("contrastTool")), import_react15.default.createElement(StyledSliderWrapper, null, import_react15.default.createElement(Slider_default, { className: "FIE_contrast-option", "data-testid": "FIE-contrast-option", min: MIN_VALUE2, max: MAX_VALUE2, width: "124px", value: null !== (b = g.contrast) && void 0 !== b ? b : DEFAULT_VALUE2.contrast, onChange: i, style: sliderStyle2 }), import_react15.default.createElement(StyledSliderInput, { "data-testid": "FIE-contrast-option-input", value: null !== (c = g.contrast) && void 0 !== c ? c : DEFAULT_VALUE2.contrast, onChange: function(a2) {
    var b2 = a2.target.value;
    return i(b2);
  } })));
};
var ContrastOptions_default = ContrastOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/HSV/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/HSV/HSV.js
init_react_shim();
var import_react16 = __toESM(require_react());
var HSV = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react16.default.createElement(ToolsBarItemButton_default, { className: "FIE_hsv-tool-button", id: TOOLS_IDS.HSV, label: d("hsvTool"), Icon: Saturation, onClick: b, isSelected: void 0 !== c && c });
};
var HSV_default = HSV;

// node_modules/react-filerobot-image-editor/lib/components/tools/HSV/HSVOptions.js
init_react_shim();
var import_react17 = __toESM(require_react());
var import_konva7 = __toESM(require_lib());
var DEFAULT_VALUE3 = { hue: 0, saturation: 0, value: 0 };
var MAX_VALUE3 = { hue: 259, saturation: 10, value: 2 };
var sliderStyle3 = { padding: 0, margin: 0 };
var HSVOptions = function(a) {
  var b, c, d, e, f, g, h = a.t, i = usePhoneScreen_default(), j = useFinetune_default(import_konva7.default.Filters.HSV, DEFAULT_VALUE3), k = _slicedToArray(j, 2), l = k[0], m = k[1], n = function(a2, b2) {
    m(_defineProperty({}, a2, b2 > MAX_VALUE3[a2] ? MAX_VALUE3[a2] : +b2));
  };
  return import_react17.default.createElement(StyledHSVOptions, { isPhoneScreen: i }, import_react17.default.createElement(StyledSliderContainer, { className: "FIE_hue-option-wrapper" }, import_react17.default.createElement(StyledSliderLabel, { className: "FIE_hue-option-label" }, h("hue")), import_react17.default.createElement(StyledSliderWrapper, null, import_react17.default.createElement(Slider_default, { className: "FIE_hue-option", "data-testid": "FIE-hue-option", min: 0, step: 1, max: 259, value: null !== (b = l.hue) && void 0 !== b ? b : DEFAULT_VALUE3.hue, onChange: function(a2) {
    return n("hue", a2);
  }, style: sliderStyle3 }), import_react17.default.createElement(StyledSliderInput, { value: null !== (c = l.hue) && void 0 !== c ? c : DEFAULT_VALUE3.hue, onChange: function(a2) {
    var b2 = a2.target.value;
    return n("hue", b2);
  }, "data-testid": "FIE-hue-option-input" }))), import_react17.default.createElement(StyledSliderContainer, { className: "FIE_saturation-option-wrapper" }, import_react17.default.createElement(StyledSliderLabel, { className: "FIE_saturation-option-label" }, h("saturation")), import_react17.default.createElement(StyledSliderWrapper, null, import_react17.default.createElement(Slider_default, { className: "FIE_saturation-option", "data-testid": "FIE-saturation-option", min: -2, step: 0.5, max: 10, value: null !== (d = l.saturation) && void 0 !== d ? d : DEFAULT_VALUE3.saturation, onChange: function(a2) {
    return n("saturation", a2);
  }, style: sliderStyle3 }), import_react17.default.createElement(StyledSliderInput, { "data-testid": "FIE-saturation-option-input", value: null !== (e = l.saturation) && void 0 !== e ? e : DEFAULT_VALUE3.saturation, onChange: function(a2) {
    var b2 = a2.target.value;
    return n("saturation", b2);
  } }))), import_react17.default.createElement(StyledSliderContainer, { className: "FIE_value-option-wrapper" }, import_react17.default.createElement(StyledSliderLabel, { className: "FIE_value-option-label" }, h("value")), import_react17.default.createElement(StyledSliderWrapper, null, import_react17.default.createElement(Slider_default, { className: "FIE_value-option", "data-testid": "FIE-value-option", min: -2, step: 0.1, max: 2, value: null !== (f = l.value) && void 0 !== f ? f : DEFAULT_VALUE3.value, onChange: function(a2) {
    return n("value", a2);
  }, style: sliderStyle3 }), import_react17.default.createElement(StyledSliderInput, { "data-testid": "FIE-value-option-input", value: null !== (g = l.value) && void 0 !== g ? g : DEFAULT_VALUE3.value, onChange: function(a2) {
    var b2 = a2.target.value;
    return n("value", b2);
  } }))));
};
var HSVOptions_default = HSVOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Blur/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Blur/Blur.js
init_react_shim();
var import_react18 = __toESM(require_react());
var Blur2 = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react18.default.createElement(ToolsBarItemButton_default, { className: "FIE_blur-tool-button", id: TOOLS_IDS.BLUR, label: d("blurTool"), Icon: Blur, onClick: b, isSelected: void 0 !== c && c });
};
var Blur_default = Blur2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Blur/BlurOptions.js
init_react_shim();
var import_react19 = __toESM(require_react());
var import_konva8 = __toESM(require_lib());
var MIN_VALUE3 = 0;
var DEFAULT_VALUE4 = { blurRadius: 0 };
var MAX_VALUE4 = 100;
var sliderStyle4 = { width: 150, padding: 0, margin: 0 };
var BlurOptions = function(a) {
  var b, c, d = a.t, e = useFinetune_default(import_konva8.default.Filters.Blur, DEFAULT_VALUE4), f = _slicedToArray(e, 2), g = f[0], h = f[1], i = function(a2) {
    h({ blurRadius: restrictNumber_default(a2, MIN_VALUE3, MAX_VALUE4) });
  };
  return import_react19.default.createElement(StyledSliderContainer, { className: "FIE_blur-option-wrapper", "data-testid": "FIE-blur-option-wrapper" }, import_react19.default.createElement(StyledSliderLabel, { className: "FIE_blur-option-label", "data-testid": "FIE-blur-option-label" }, d("blur")), import_react19.default.createElement(StyledSliderWrapper, null, import_react19.default.createElement(Slider_default, { className: "FIE_blur-option", "data-testid": "FIE-blur-option", min: MIN_VALUE3, max: MAX_VALUE4, width: "124px", value: null !== (b = g.blurRadius) && void 0 !== b ? b : DEFAULT_VALUE4.blurRadius, onChange: i, style: sliderStyle4 }), import_react19.default.createElement(StyledSliderInput, { value: null !== (c = g.blurRadius) && void 0 !== c ? c : DEFAULT_VALUE4.blurRadius, onChange: function(a2) {
    var b2 = a2.target.value;
    return i(b2);
  }, "data-testid": "FIE-blur-option-input" })));
};
var BlurOptions_default = BlurOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Warmth/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Warmth/Warmth.js
init_react_shim();
var import_react20 = __toESM(require_react());
var Warmth2 = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react20.default.createElement(ToolsBarItemButton_default, { className: "FIE_warmth-tool-button", id: TOOLS_IDS.WARMTH, label: d("warmthTool"), Icon: Temprature, onClick: b, isSelected: void 0 !== c && c });
};
var Warmth_default2 = Warmth2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Warmth/WarmthOptions.js
init_react_shim();
var import_react21 = __toESM(require_react());
var MIN_VALUE4 = 0;
var DEFAULT_VALUE5 = { warmth: 0 };
var MAX_VALUE5 = 200;
var sliderStyle5 = { width: 150, padding: 0, margin: 0 };
var WarmthOptions = function(a) {
  var b, c, d = a.t, e = useFinetune_default(Warmth_default, DEFAULT_VALUE5), f = _slicedToArray(e, 2), g = f[0], h = f[1], i = function(a2) {
    h({ warmth: restrictNumber_default(a2, MIN_VALUE4, MAX_VALUE5) });
  };
  return import_react21.default.createElement(StyledSliderContainer, { className: "FIE_warmth-option-wrapper" }, import_react21.default.createElement(StyledSliderLabel, { className: "FIE_warmth-option-label" }, d("warmthTool")), import_react21.default.createElement(StyledSliderWrapper, null, import_react21.default.createElement(Slider_default, { className: "FIE_warmth-option", min: MIN_VALUE4, max: MAX_VALUE5, width: "124px", value: null !== (b = g.warmth) && void 0 !== b ? b : DEFAULT_VALUE5.warmth, onChange: i, style: sliderStyle5 }), import_react21.default.createElement(StyledSliderInput, { "data-testid": "FIE-warmth-option-input", value: null !== (c = g.warmth) && void 0 !== c ? c : DEFAULT_VALUE5.warmth, onChange: function(a2) {
    var b2 = a2.target.value;
    return i(b2);
  } })));
};
var WarmthOptions_default = WarmthOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Filters/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Filters/Filters.js
init_react_shim();
var import_react24 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/Carousel/index.js
init_react_shim();
var import_react22 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/debounce.js
init_react_shim();
var debounce = function(a) {
  var b, c = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : 300;
  return function() {
    var d, e;
    clearTimeout(b);
    for (var f = arguments.length, g = Array(f), h = 0; h < f; h++) g[h] = arguments[h];
    var i = g[0], j = g.slice(1);
    b = setTimeout(a.bind.apply(a, [null, null !== (d = null === i || void 0 === i || null === (e = i.target) || void 0 === e ? void 0 : e.value) && void 0 !== d ? d : i].concat(_toConsumableArray(j))), c);
  };
};
var debounce_default = debounce;

// node_modules/react-filerobot-image-editor/lib/utils/getScrollOffset.js
init_react_shim();
var getScrollOffset = function() {
  var a, b, c = document, d = c.body, e = document.documentElement, f = (null === (a = window) || void 0 === a ? void 0 : a.pageYOffset) || e.scrollTop || d.scrollTop, g = (null === (b = window) || void 0 === b ? void 0 : b.pageXOffset) || e.scrollLeft || d.scrollLeft;
  return { topOffset: f, leftOffset: g };
};
var getScrollOffset_default = getScrollOffset;

// node_modules/react-filerobot-image-editor/lib/components/common/Carousel/Carousel.styled.js
init_react_shim();
var StyledCarouselWrapper = it.div.withConfig({ componentId: "sc-1nr0bka-0" })(["max-width:680px;min-width:150px;position:relative;overflow:hidden;touch-action:pan-y pinch-zoom;"]);
var StyledCarousel = it.ul.withConfig({ componentId: "sc-1nr0bka-1" })(["padding:0;margin:0;white-space:nowrap;overflow:hidden;text-align:center;"]);
var StyledCarouselItem = it.li.withConfig({ componentId: "sc-1nr0bka-2" })(["padding:4px;display:inline-block;list-style-type:none;user-select:none;"]);
var arrowsCommonStyles = ot(["position:absolute;top:0;height:100%;width:60px;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:1;svg{color:", ";}"], function(a) {
  var b = a.theme.palette;
  return b[Color.IconsSecondary];
});
var StyledPrevArrowWrapper = it.div.withConfig({ componentId: "sc-1nr0bka-3" })(["", " left:0;justify-content:flex-start;background:linear-gradient( 90deg,#ffffff 1.56%,rgba(255,255,255,0.89) 52.4%,rgba(255,255,255,0.532165) 76.04%,rgba(255,255,255,0) 100% );"], arrowsCommonStyles);
var StyledNextArrowWrapper = it.div.withConfig({ componentId: "sc-1nr0bka-4" })(["", " right:0;justify-content:flex-end;background:linear-gradient( 270deg,#ffffff 1.56%,rgba(255,255,255,0.89) 52.4%,rgba(255,255,255,0.532165) 76.04%,rgba(255,255,255,0) 100% );"], arrowsCommonStyles);

// node_modules/react-filerobot-image-editor/lib/components/common/Carousel/index.js
var Carousel = function(a) {
  var b = a.children, c = a.style, d = a.className, f = (0, import_react22.useRef)(false), g = (0, import_react22.useRef)(), h = useResizeObserver_default(), i = _slicedToArray(h, 1), j = i[0], k = (0, import_react22.useState)(false), l = _slicedToArray(k, 2), m = l[0], n = l[1], o = (0, import_react22.useState)(false), p = _slicedToArray(o, 2), q = p[0], r = p[1], s = import_react22.Children.toArray(b), t = function() {
    if (g.current) {
      var a2 = g.current, b2 = a2.scrollWidth, c2 = a2.offsetWidth, d2 = a2.scrollLeft, e = Math.round(b2 - c2), f2 = Math.round(e - d2);
      n(0 < d2), r(0 < f2);
    }
  }, u = function(a2, b2) {
    var c2 = a2.findIndex(function(a3) {
      return a3.classList.contains("FIE_carousel-item");
    });
    -1 !== c2 && (a2[c2].scrollIntoView({ inline: b2, behavior: "smooth", block: "nearest" }), setTimeout(function() {
      t();
    }, 500));
  }, v = function(a2) {
    if (f.current) {
      var b2, c2 = ((null === (b2 = a2.touches) || void 0 === b2 ? void 0 : b2[0]) || a2).pageX;
      g.current.scrollBy(f.current - c2, 0), f.current = c2, debounce_default(t, 30)();
    }
  }, w = function() {
    f.current = null, document.removeEventListener("mousemove", v), document.removeEventListener("mouseup", w), document.removeEventListener("touchmove", v), document.removeEventListener("touchcancel", w), document.removeEventListener("touchend", w);
  }, x = function(a2) {
    var b2;
    f.current = ((null === (b2 = a2.touches) || void 0 === b2 ? void 0 : b2[0]) || a2).pageX, document.addEventListener("mousemove", v), document.addEventListener("mouseup", w), document.addEventListener("touchmove", v), document.addEventListener("touchcancel", w), document.addEventListener("touchend", w);
  };
  return (0, import_react22.useEffect)(function() {
    g.current && j(g.current, t);
  }, []), import_react22.default.createElement(StyledCarouselWrapper, { className: "".concat(d, "-wrapper"), "data-testid": "FIE-carousel-wrapper", style: c, onMouseDown: x, onTouchStart: x }, m && import_react22.default.createElement(StyledPrevArrowWrapper, { className: "FIE_carousel-prev-button", "data-testid": "FIE-carousel-prev-button", onClick: function(a2) {
    var b2 = getScrollOffset_default(), c2 = b2.topOffset, d2 = b2.leftOffset, e = document.elementsFromPoint(a2.pageX + a2.currentTarget.offsetWidth - d2, a2.pageY - c2);
    u(e, "end");
  } }, import_react22.default.createElement(ArrowLeftOutline, null)), import_react22.default.createElement(StyledCarousel, { className: "".concat(d, "-items"), "data-testid": "FIE-carousel-items", ref: g }, s.map(function(a2) {
    return import_react22.default.createElement(StyledCarouselItem, { className: "".concat(d, "-item-wrapper FIE_carousel-item"), "data-testid": "FIE-carousel-item", key: a2.key }, a2);
  })), q && import_react22.default.createElement(StyledNextArrowWrapper, { className: "FIE_carousel-next-button", "data-testid": "FIE-carousel-next-button", onClick: function(a2) {
    var b2 = getScrollOffset_default(), c2 = b2.topOffset, d2 = b2.leftOffset, e = document.elementsFromPoint(a2.pageX - a2.currentTarget.offsetWidth - d2, a2.pageY - c2);
    u(e, "start");
  } }, import_react22.default.createElement(ArrowRightOutline, null)));
};
var Carousel_default = Carousel;

// node_modules/react-filerobot-image-editor/lib/components/tools/Filters/FilterItem.js
init_react_shim();
var import_react23 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Filters/Filters.styled.js
init_react_shim();
var StyledFilterItem = it.div.withConfig({ componentId: "sc-oxugzy-0" })(["display:inline-flex;flex-direction:column;align-items:center;justify-content:center;padding:0px 2px;gap:6px;cursor:pointer;border-radius:2px;canvas{border-radius:2px;}"]);
var FilterItemPreview = it(Stage).withConfig({ componentId: "sc-oxugzy-1" })(["[aria-selected='true'] &{padding:1px;border:1px solid ", ";border-radius:2px;}"], function(a) {
  var b = a.theme;
  return b.palette["accent-primary-active"];
});
var FilterItemLabel = it(label_component_default).withConfig({ componentId: "sc-oxugzy-2" })(function(a) {
  var b = a.theme;
  return ot(["color:", ";", ";[aria-selected='true'] &{color:", ";}"], b.palette[Color.TextPrimary], b.typography.font[FontVariant.LabelExtraSmallUp], b.palette["accent-primary-active"]);
});

// node_modules/react-filerobot-image-editor/lib/components/tools/Filters/FilterItem.js
var MAX_FILTER_PREVIEW_WIDTH = 60;
var MAX_FILTER_PREVIEW_HEIGHT = 45;
var FilterItem = function(a) {
  var b = a.filterLabel, c = a.filterFn, d = a.applyFilter, e = a.isActive, f = a.image, g = (0, import_react23.useRef)(), h = (0, import_react23.useCallback)(function() {
    d(c);
  }, [c]), i = (0, import_react23.useCallback)(function() {
    g.current ? g.current.cache() : setTimeout(i, 0);
  }, []);
  (0, import_react23.useEffect)(function() {
    return f && i(), function() {
      var a2;
      null === (a2 = g.current) || void 0 === a2 || a2.clearCache();
    };
  }, [f]);
  var j = f.width / f.height, k = 1 > j, l = k ? MAX_FILTER_PREVIEW_WIDTH : MAX_FILTER_PREVIEW_HEIGHT * j, m = k ? MAX_FILTER_PREVIEW_WIDTH / j : MAX_FILTER_PREVIEW_HEIGHT;
  return import_react23.default.createElement(StyledFilterItem, { className: "FIE_filters-item", "data-testid": "FIE_filters-item-".concat(b.toLowerCase()), onClick: h, "aria-selected": e }, import_react23.default.createElement(FilterItemPreview, { className: "FIE_filters-item-preview", width: MAX_FILTER_PREVIEW_WIDTH, height: MAX_FILTER_PREVIEW_HEIGHT }, import_react23.default.createElement(Layer, { onTap: h }, import_react23.default.createElement(Image2, { image: f, filters: c ? [c] : [], width: l, height: m, x: -(l - MAX_FILTER_PREVIEW_WIDTH) / 2, y: -(m - MAX_FILTER_PREVIEW_HEIGHT) / 2, ref: g }))), import_react23.default.createElement(FilterItemLabel, { className: "FIE_filters-item-label" }, b));
};
var FilterItem_default = (0, import_react23.memo)(FilterItem);

// node_modules/react-filerobot-image-editor/lib/components/tools/Filters/Filters.constants.js
init_react_shim();
var import_konva9 = __toESM(require_lib());
var konvaFilters = import_konva9.default.Filters;
var AVAILABLE_FILTERS = [{ label: "Original", filterFn: null }, { label: "Invert", filterFn: konvaFilters.Invert }, { label: "Black & White", filterFn: BlackAndWhite_default }, { label: "Sepia", filterFn: konvaFilters.Sepia }, { label: "Solarize", filterFn: konvaFilters.Solarize }, { label: "Clarendon", filterFn: Clarendon_default }, { label: "Gingham", filterFn: Gingham_default }, { label: "Moon", filterFn: Moon_default }, { label: "Lark", filterFn: Lark_default }, { label: "Reyes", filterFn: Reyes_default }, { label: "Juno", filterFn: Juno_default }, { label: "Slumber", filterFn: Slumber_default }, { label: "Crema", filterFn: Crema_default }, { label: "Ludwig", filterFn: Ludwig_default }, { label: "Aden", filterFn: Aden_default }, { label: "Perpetua", filterFn: Perpetua_default }, { label: "Amaro", filterFn: Amaro_default }, { label: "Mayfair", filterFn: Mayfair_default }, { label: "Rise", filterFn: Rise_default }, { label: "Hudson", filterFn: Hudson_default }, { label: "Valencia", filterFn: Valencia_default }, { label: "X-Pro II", filterFn: XPro2_default }, { label: "Sierra", filterFn: Sierra_default }, { label: "Willow", filterFn: Willow_default }, { label: "Lo-Fi", filterFn: LoFi_default }, { label: "Inkwell", filterFn: konvaFilters.Grayscale }, { label: "Hefe", filterFn: Hefe_default }, { label: "Nashville", filterFn: Nashville_default }, { label: "Stinson", filterFn: Stinson_default }, { label: "Vesper", filterFn: Vesper_default }, { label: "Earlybird", filterFn: Earlybird_default }, { label: "Brannan", filterFn: Brannan_default }, { label: "Sutro", filterFn: Sutro_default }, { label: "Toaster", filterFn: Toaster_default }, { label: "Walden", filterFn: Walden_default }, { label: "1977", filterFn: NinteenSeventySeven_default }, { label: "Kelvin", filterFn: Kelvin_default }, { label: "Maven", filterFn: Maven_default }, { label: "Ginza", filterFn: Ginza_default }, { label: "Skyline", filterFn: Skyline_default }, { label: "Dogpatch", filterFn: Dogpatch_default }, { label: "Brooklyn", filterFn: Brooklyn_default }, { label: "Helena", filterFn: Helena_default }, { label: "Ashby", filterFn: Ashby_default }, { label: "Charmes", filterFn: Charmes_default }];

// node_modules/react-filerobot-image-editor/lib/components/tools/Filters/Filters.js
var style = { maxWidth: "100%", width: "100%" };
var Filters = function() {
  var a = useStore_default(), b = a.originalSource, c = useFilter_default(), d = _slicedToArray(c, 2), e = d[0], f = d[1];
  return import_react24.default.createElement(Carousel_default, { className: "FIE_filters", style }, AVAILABLE_FILTERS.map(function(a2) {
    return import_react24.default.createElement(FilterItem_default, { key: a2.label, filterLabel: a2.label, filterFn: a2.filterFn, applyFilter: f, isActive: e === a2.filterFn, image: b });
  }));
};
var Filters_default = Filters;

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextButton.js
init_react_shim();
var import_react25 = __toESM(require_react());
var TextButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react25.default.createElement(ToolsBarItemButton_default, { className: "FIE_text-tool-button", id: TOOLS_IDS.TEXT, label: d("textTool"), Icon: Text, onClick: b, isSelected: void 0 !== c && c });
};
var TextButton_default = TextButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/index.js
init_react_shim();
var import_react36 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextControls.js
init_react_shim();
var import_react35 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/index.js
init_react_shim();
init_extends();
var import_react32 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/OpacityField.js
init_react_shim();
var import_react26 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/AnnotationOptions.styled.js
init_react_shim();
var StyledOptions = it.div.withConfig({ componentId: "sc-qvjmv1-0" })(["display:flex;align-items:center;justify-content:center;padding:8px 16px;margin-top:4px;gap:8px;flex-wrap:wrap;", " svg{color:", ";}button svg{color:currentColor;}"], function(a) {
  var b = a.isPhoneScreen;
  return b && "\n    max-width: 315px;\n    padding: 0;\n  ";
}, function(a) {
  var b = a.theme.palette;
  return b[Color.IconsPrimary];
});
var StyledOptionsWrapper = it.div.withConfig({ componentId: "sc-qvjmv1-1" })(["display:flex;flex-wrap:wrap;margin-left:-4px;gap:4px;.FIE_annotation-option-triggerer{padding:6px;}"]);
var StyledOptionPopupContent = it.div.withConfig({ componentId: "sc-qvjmv1-2" })(["background:", ";border-radius:4px;display:flex;flex-direction:column;padding:8px 12px;overflow:visible;", " ", " *{font-family:'Roboto',sans-serif;}"], function(a) {
  var b = a.theme;
  return b.palette["bg-secondary"];
}, function(a) {
  var b = a.position;
  return b && "\n    display: grid;\n    grid-template-columns: repeat(4, auto);\n    padding: 0;\n    margin-top: 8px;\n    box-shadow: 0px 1px 2px ".concat(function(a2) {
    var b2 = a2.theme;
    return b2.palette["light-shadow"];
  }, ";\n    ");
}, function(a) {
  var b = a.disablePadding;
  return b && "\n      padding: 0;\n    ";
});
var StyledSpacedOptionFields = it.div.withConfig({ componentId: "sc-qvjmv1-3" })(["display:flex;align-items:center;gap:12px;", ""], function(a) {
  var b = a.preventFlex;
  return b && "\n      display: block;\n\n      label {\n        margin-bottom: 8px;\n      }\n  ";
});
var StyledTwoColumnsContainer = it.div.withConfig({ componentId: "sc-qvjmv1-4" })(["display:flex;align-items:center;justify-content:space-between;"]);
var StyledColumn = it.div.withConfig({ componentId: "sc-qvjmv1-5" })(["&:not(:first-child){margin-left:12px;}"]);
var StyledIconWrapper = it.div.withConfig({ componentId: "sc-qvjmv1-6" })(function(a) {
  var b = a.theme, c = a.addThinBorder, d = a.secondaryIconColor, e = a.active, f = a.watermarkTool;
  return "\n    cursor: pointer;\n    padding: ".concat(f ? "6px" : "8px 12px", ";\n    border-radius: 2px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 6px;\n\n    svg {\n      vertical-align: middle;\n      margin: 0 auto;\n      color: ").concat(b.palette[Color.IconsPrimary], ";\n    }\n\n    ").concat(c ? "border: 0.5px solid ".concat(b.palette["borders-secondary"], ";\n        padding: 8px 8px;") : "", ";\n    color: ").concat(d ? b.palette[Color.IconsSecondary] : "", ";\n\n    ").concat(e && "\n      border-radius: 4px;\n      border-color: ".concat(b.palette[Color.AccentStateless], ";\n      background-color: ").concat(b.palette[Color.BackgroundActive], ";\n\n        * {\n          color: ").concat(b.palette[Color.AccentStateless], ";\n        }\n      "), "\n\n    :hover {\n      background: ").concat(b.palette["bg-primary-active"], ";\n    }\n  ");
});
var StyledIconLabel = it(label_component_default).withConfig({ componentId: "sc-qvjmv1-7" })(["color:", ";"], function(a) {
  var b = a.theme.palette;
  return b[Color.TextPrimary];
});
var StyledOptionsPopUp = it(menu_component_default).withConfig({ componentId: "sc-qvjmv1-8" })(["width:auto;"]);

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/OpacityField.js
var MIN_PERCENTANGE = 0;
var MAX_PERCENTANGE = 1;
var OpacityField = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = a.t, e = b.opacity, f = Math.round(100 * e);
  return import_react26.default.createElement(StyledOptionPopupContent, { "data-testid": "FIE-opacity-field", disablePadding: true }, import_react26.default.createElement(label_component_default, null, d("transparency")), import_react26.default.createElement(StyledSpacedOptionFields, null, import_react26.default.createElement(Slider_default, { "data-testid": "FIE-opacity-field-slider", annotation: "%", onChange: function(a2) {
    c({ opacity: restrictNumber_default(a2 / 100, MIN_PERCENTANGE, MAX_PERCENTANGE) });
  }, value: f, noMargin: true }), import_react26.default.createElement(StyledIconLabel, { "data-testid": "FIE-opacity-field-label" }, "".concat(f, "%"))));
};
var OpacityField_default = OpacityField;

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/StrokeFields.js
init_react_shim();
var import_react29 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/ColorInput/index.js
init_react_shim();
var import_react28 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/ColorPickerModal/index.js
init_react_shim();
var import_react27 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/ColorPickerModal/ColorPickerModal.styled.js
init_react_shim();
var ColorPickerModal = it(modal_component_default).withConfig({ componentId: "sc-7tf41j-0" })(["max-width:350px;"]);
var ColorPickerWrap = it.div.withConfig({ componentId: "sc-7tf41j-1" })([".SfxColorPicker-root{max-width:100%;padding:0;box-shadow:none;border:none;", "}.SfxColorPicker-action{display:flex;gap:12px;.SfxColorPicker-select{width:100px;}}.SfxColorPicker-icon{color:", ";}.SfxColorPicker-range-picker,.SfxColorPicker-bar-wrapper{width:100%;}"], function(a) {
  var b = a.hideModalTitle;
  return b && "padding-top: 12px;";
}, function(a) {
  var b = a.theme.palette;
  return b[Color.IconsPrimary];
});
var ModalActions = it(modal_actions_component_default).withConfig({ componentId: "sc-7tf41j-2" })(["gap:12px;padding:24px;.SfxButton-root{flex:1;margin:0;height:40px;}"]);
var Styled = { ColorPickerModal, ColorPickerWrap, ModalActions };
var ColorPickerModal_styled_default = Styled;

// node_modules/react-filerobot-image-editor/lib/components/common/ColorPickerModal/index.js
var modalStyles = { zIndex: 1301 };
var ColorPickerModal2 = function(a) {
  var b = a.hideModalTitle, c = void 0 !== b && b, d = a.defaultColor, e = void 0 === d ? "" : d, f = a.onChange, g = void 0 === f ? function() {
  } : f, h = a.open, i = void 0 !== h && h, j = a.pinnedColors, k = void 0 === j ? [] : j, l = a.onClose, m = void 0 === l ? function() {
  } : l, n = a.onApply, o = void 0 === n ? function() {
  } : n, p = a.showTransparentColor, q = useStore_default(), r = q.t;
  return i ? import_react27.default.createElement(ColorPickerModal_styled_default.ColorPickerModal, { "data-testid": "FIE-color-picker-modal", onClose: m, open: i, fullWidth: true, modalStyles }, !c && import_react27.default.createElement(modal_title_component_default, { onClose: m, primary: r("colorPickerModalTitleLabel", "Pick color"), icon: import_react27.default.createElement(color_picker_default, { size: 29 }), iconShadow: true, variant: "with-icon", "data-testid": "FIE-color-picker-modal-title" }), import_react27.default.createElement(modal_content_component_default, null, import_react27.default.createElement(ColorPickerModal_styled_default.ColorPickerWrap, { hideModalTitle: c, "data-testid": "FIE-color-picker-wrap" }, import_react27.default.createElement(color_picker_component_default, { onChange: g, pinnedColors: k, defaultColor: e, showTransparentColor: !(void 0 !== p) || p, "data-testid": "FIE-color-picker" }))), import_react27.default.createElement(ColorPickerModal_styled_default.ModalActions, { "data-testid": "FIE-color-picker-modal-actions" }, import_react27.default.createElement(button_component_default, { color: "basic", onClick: m, "data-testid": "FIE-color-picker-modal-cancel-button" }, r("cancel")), import_react27.default.createElement(button_component_default, { color: "primary", onClick: o, "data-testid": "FIE-color-picker-modal-apply-button" }, r("apply")))) : null;
};
var ColorPickerModal_default = ColorPickerModal2;

// node_modules/react-filerobot-image-editor/lib/components/common/ColorInput/ColorInput.styled.js
init_react_shim();
var StyledPickerTrigger = it.div.attrs(function(a) {
  var b = a.$color;
  return { style: { background: "rgba(0,0,0,0)" === b ? "repeating-conic-gradient(#5d6d7e 0% 25%, transparent 0% 50%) 50% / 8px 8px" : b } };
}).withConfig({ componentId: "sc-zmv0gj-0" })(["background:", ";border-radius:4px;width:32px;height:32px;border:1px solid ", ";cursor:pointer;box-sizing:border-box;"], function(a) {
  var b = a.theme;
  return b.palette["icons-primary"];
}, function(a) {
  var b = a.theme;
  return b.palette[Color.BorderPrimaryStateless];
});

// node_modules/react-filerobot-image-editor/lib/components/common/ColorInput/index.js
var pinnedColorsKey = "FIE_pinnedColors";
var ColorInput = function(a) {
  var b, c = a.onChange, d = a.color, e = a.colorFor, f = a.showTransparentColor, g = useStore_default(), h = g.config.annotationsCommon, i = void 0 === h ? {} : h, j = g.dispatch, k = g.latestColors, l = void 0 === k ? {} : k, m = l[e], n = (0, import_react28.useState)(), o = _slicedToArray(n, 2), p = o[0], q = o[1], r = (0, import_react28.useState)(function() {
    return m || d || i.fill;
  }), s = _slicedToArray(r, 2), t = s[0], u = s[1], v = (0, import_react28.useState)(null !== (b = window) && void 0 !== b && b.localStorage ? JSON.parse(localStorage.getItem(pinnedColorsKey) || "[]") : []), w = _slicedToArray(v, 2), x = w[0], y = w[1], z = (0, import_react28.useRef)(t), A = function(a2) {
    var b2;
    if (null !== (b2 = window) && void 0 !== b2 && b2.localStorage) {
      var c2 = window.localStorage.getItem(pinnedColorsKey);
      if (JSON.stringify(a2) !== c2) {
        var d2 = a2.slice(-9);
        window.localStorage.setItem(pinnedColorsKey, JSON.stringify(d2)), y(d2);
      }
    }
  }, B = function(a2) {
    q(p ? null : a2.currentTarget);
  };
  return (0, import_react28.useEffect)(function() {
    u(d);
  }, [d]), import_react28.default.createElement(import_react28.default.Fragment, null, import_react28.default.createElement(StyledPickerTrigger, { className: "FIE_color-picker-triggerer", "data-testid": "FIE-color-picker-triggerer", onClick: B, $color: t, onChange: c }), import_react28.default.createElement(ColorPickerModal_default, { hideModalTitle: true, onChange: function(a2, b2, d2) {
    u(b2), c(b2), A(d2), m !== b2 && j({ type: SET_LATEST_COLOR, payload: { latestColors: _defineProperty({}, e, b2) } });
  }, defaultColor: t, pinnedColors: x, open: !!p, onClose: function(a2) {
    c(z.current || t), B(a2);
  }, onApply: B, showTransparentColor: f }));
};
var ColorInput_default = ColorInput;

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/StrokeFields.js
var MIN_PERCENTANGE2 = 0;
var MAX_PERCENTANGE2 = 100;
var StrokeFields = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = b.stroke, e = b.strokeWidth;
  return import_react29.default.createElement(StyledSpacedOptionFields, null, import_react29.default.createElement(Slider_default, { annotation: "px", onChange: function(a2) {
    c({ strokeWidth: restrictNumber_default(a2, MIN_PERCENTANGE2, MAX_PERCENTANGE2) });
  }, value: e, noMargin: true }), import_react29.default.createElement(ColorInput_default, { color: d, onChange: function(a2) {
    c({ stroke: a2 });
  }, colorFor: "stroke" }));
};
var StrokeFields_default = StrokeFields;

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/ShadowFields.js
init_react_shim();
var import_react30 = __toESM(require_react());
var ShadowFields = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = a.t, e = b.shadowOffsetX, f = b.shadowOffsetY, g = b.shadowBlur, h = b.shadowColor, i = b.shadowOpacity, j = function(a2, b2) {
    var d2 = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : 0, e2 = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : 100;
    c(_defineProperty({}, a2, restrictNumber_default(b2, d2, e2)));
  };
  return import_react30.default.createElement(StyledSpacedOptionFields, { preventFlex: true }, import_react30.default.createElement(label_component_default, null, d("shadow")), import_react30.default.createElement(StyledTwoColumnsContainer, null, import_react30.default.createElement(StyledColumn, null, import_react30.default.createElement(label_component_default, null, d("horizontal")), import_react30.default.createElement(Slider_default, { annotation: "px", min: -100, max: 100, onChange: function(a2) {
    return j("shadowOffsetX", a2, -100, 100);
  }, value: e || 0, hideTrack: true })), import_react30.default.createElement(StyledColumn, null, import_react30.default.createElement(label_component_default, null, d("vertical")), import_react30.default.createElement(Slider_default, { annotation: "px", min: -100, max: 100, onChange: function(a2) {
    return j("shadowOffsetY", a2, -100, 100);
  }, value: f || 0, hideTrack: true }))), import_react30.default.createElement(StyledTwoColumnsContainer, null, import_react30.default.createElement(StyledColumn, null, import_react30.default.createElement(label_component_default, null, d("blur")), import_react30.default.createElement(Slider_default, { annotation: "%", onChange: function(a2) {
    return j("shadowBlur", a2);
  }, value: g })), import_react30.default.createElement(StyledColumn, null, import_react30.default.createElement(label_component_default, null, d("opacity")), import_react30.default.createElement(Slider_default, { annotation: "%", onChange: function(a2) {
    return j("shadowOpacity", a2 / 100, 0, 1);
  }, value: Math.round(100 * i) }))), import_react30.default.createElement(ColorInput_default, { color: h, onChange: function(a2) {
    c({ shadowColor: a2 });
  }, colorFor: "shadow" }));
};
var ShadowFields_default = ShadowFields;

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/PositionFields.js
init_react_shim();
var import_react31 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/mapPositionStringToPoint.js
init_react_shim();
var mapPositionStringToPoint = function(a, b, c) {
  var d = a.width, e = a.height, f = a.scaleX, g = void 0 === f ? 1 : f, h = a.scaleY, i = void 0 === h ? 1 : h, j = a.rotation, k = void 0 === j ? 0 : j, l = a.padding, m = void 0 === l ? 0 : l, n = a.radiusX, o = a.radiusY, p = { width: d || 2 * n, height: e || 2 * o }, q = p.width, r = p.height, s = getSizeAfterRotation_default(q * g, r * i, k), t = b.attrs, u = t.clipWidth, v = t.clipHeight, w = t.clipX, x = void 0 === w ? 0 : w, y = t.clipY, z = void 0 === y ? 0 : y, A = b.attrs.originalSourceInitialScale;
  u /= A, v /= A, x /= A, z /= A;
  var B = { left: x + s.offsetLeft + m, center: x + u / 2 - (s.width / 2 - s.offsetLeft) + m, right: x + u - s.width - m + s.offsetLeft }, C = { top: z + s.offsetTop + m, middle: z + v / 2 - (s.height / 2 - s.offsetTop) + m, bottom: z + v - s.height - m + s.offsetTop }, D = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, POSITIONS.TOP_LEFT, function() {
    return { x: B.left, y: C.top };
  }), POSITIONS.TOP_CENTER, function() {
    return { x: B.center, y: C.top };
  }), POSITIONS.TOP_RIGHT, function() {
    return { x: B.right, y: C.top };
  }), POSITIONS.MIDDLE_LEFT, function() {
    return { x: B.left, y: C.middle };
  }), POSITIONS.MIDDLE_CENTER, function() {
    return { x: B.center, y: C.middle };
  }), POSITIONS.MIDDLE_RIGHT, function() {
    return { x: B.right, y: C.middle };
  }), POSITIONS.BOTTOM_LEFT, function() {
    return { x: B.left, y: C.bottom };
  }), POSITIONS.BOTTOM_CENTER, function() {
    return { x: B.center, y: C.bottom };
  }), POSITIONS.BOTTOM_RIGHT, function() {
    return { x: B.right, y: C.bottom };
  });
  return D[c]();
};
var mapPositionStringToPoint_default = mapPositionStringToPoint;

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/AnnotationOptions.constants.js
init_react_shim();
var AVAILABLE_POSITIONS = Object.values(POSITIONS);
var posCssRotateDegFromRightSide = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, POSITIONS.TOP_LEFT, -145), POSITIONS.TOP_CENTER, -90), POSITIONS.TOP_RIGHT, -45), POSITIONS.MIDDLE_LEFT, 180), POSITIONS.MIDDLE_CENTER, 0), POSITIONS.MIDDLE_RIGHT, 0), POSITIONS.BOTTOM_LEFT, 135), POSITIONS.BOTTOM_CENTER, 90), POSITIONS.BOTTOM_RIGHT, 45);
var POPPABLE_OPTIONS = { OPACITY: "opacity", STROKE: "stroke", SHADOW: "shadow", POSITION: "position" };

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/PositionFields.js
var PositionFields = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = (0, import_react31.useState)(null), e = _slicedToArray(d, 2), f = e[0], g = e[1], h = useStore_default(), i = h.designLayer, j = function(a2) {
    c(mapPositionStringToPoint_default(b, i, a2)), g(a2);
  }, k = AVAILABLE_POSITIONS.length;
  return AVAILABLE_POSITIONS.map(function(a2, b2) {
    return import_react31.default.createElement(import_react31.Fragment, { key: a2 }, import_react31.default.createElement(StyledIconWrapper, { onClick: function() {
      return j(a2);
    }, active: f === a2, secondaryIconColor: true, addThinBorder: true }, a2 === POSITIONS.MIDDLE_CENTER ? import_react31.default.createElement(Point, null) : import_react31.default.createElement(ArrowRight, { style: { transform: "rotate(".concat(posCssRotateDegFromRightSide[a2], "deg)") } })), 0 == (b2 + 1) % 3 && b2 + 1 !== k && import_react31.default.createElement("div", null));
  });
};
var PositionFields_default = PositionFields;

// node_modules/react-filerobot-image-editor/lib/components/common/AnnotationOptions/index.js
var _excluded2 = ["children", "morePoppableOptionsPrepended", "moreOptionsPopupComponentsObj", "morePoppableOptionsAppended", "annotation", "updateAnnotation", "hideFillOption", "hidePositionField", "className", "showTransparentColor", "dataTestId"];
function ownKeys10(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread10(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys10(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys10(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var AnnotationOptions = function(a) {
  var b = a.children, c = a.morePoppableOptionsPrepended, d = void 0 === c ? [] : c, e = a.moreOptionsPopupComponentsObj, f = void 0 === e ? {} : e, g = a.morePoppableOptionsAppended, h = void 0 === g ? [] : g, i = a.annotation, j = a.updateAnnotation, k = a.hideFillOption, l = a.hidePositionField, m = a.className, n = a.showTransparentColor, o = a.dataTestId, p = _objectWithoutProperties(a, _excluded2), q = (0, import_react32.useState)(null), r = _slicedToArray(q, 2), s = r[0], u = r[1], v = (0, import_react32.useState)(null), w = _slicedToArray(v, 2), x = w[0], y = w[1], z = useStore_default(), A = z.config.useCloudimage, B = z.t, t = usePhoneScreen_default(320), C = (0, import_react32.useMemo)(function() {
    return [].concat(_toConsumableArray(d), [{ titleKey: "opacity", name: POPPABLE_OPTIONS.OPACITY, Icon: transparency_default }], _toConsumableArray(A ? [] : [{ titleKey: "stroke", name: POPPABLE_OPTIONS.STROKE, Icon: stroke_default }, { titleKey: "shadow", name: POPPABLE_OPTIONS.SHADOW, Icon: shadow_default }]), [void 0 !== l && l ? void 0 : { titleKey: "position", name: POPPABLE_OPTIONS.POSITION, Icon: position_default }]);
  }, [d]), D = (0, import_react32.useMemo)(function() {
    return _objectSpread10(_objectSpread10({}, f), {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, POPPABLE_OPTIONS.OPACITY, OpacityField_default), POPPABLE_OPTIONS.STROKE, StrokeFields_default), POPPABLE_OPTIONS.SHADOW, ShadowFields_default), POPPABLE_OPTIONS.POSITION, PositionFields_default), h);
  }, [f]), E = (0, import_react32.useCallback)(function(a2, b2) {
    var c2 = null === a2 || void 0 === a2 ? void 0 : a2.currentTarget;
    u(c2), y(b2);
  }, []), F = (0, import_react32.useCallback)(function(a2) {
    j({ fill: a2 });
  }, [j]), G = s && x && D[x];
  return import_react32.default.createElement(StyledOptions, { className: "FIE_annotations-options".concat(m ? " ".concat(m) : ""), isPhoneScreen: t, "data-testid": o }, !(void 0 !== k && k) && import_react32.default.createElement(ColorInput_default, { color: i.fill, onChange: F, colorFor: "fill", showTransparentColor: n }), b, import_react32.default.createElement(StyledOptionsWrapper, null, C.map(function(a2) {
    return a2 && import_react32.default.createElement(StyledIconWrapper, { className: "FIE_annotation-option-triggerer", "data-testid": "FIE-annotation-option-triggerer-".concat(a2.name), key: a2.name, title: B(a2.titleKey), onClick: function(b2) {
      return E(b2, a2.name);
    }, active: x === a2.name }, import_react32.default.createElement(a2.Icon, { size: 20 }));
  })), G && import_react32.default.createElement(StyledOptionsPopUp, { className: "FIE_annotation-option-popup", "data-testid": "FIE-annotation-option-popup", anchorEl: s, open: !!s, onClose: E, position: "top" }, import_react32.default.createElement(StyledOptionPopupContent, null, x === POPPABLE_OPTIONS.POSITION ? function() {
    return import_react32.default.createElement(import_react32.default.Fragment, null, import_react32.default.createElement(label_component_default, null, B("position")), import_react32.default.createElement(StyledOptionPopupContent, { position: true }, import_react32.default.createElement(G, _extends({ annotation: i, updateAnnotation: j }, p))));
  }() : import_react32.default.createElement(G, _extends({ annotation: i, updateAnnotation: j }, p)))));
};
var AnnotationOptions_default = AnnotationOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextOptions.styled.js
init_react_shim();
var StyledFontFamilySelect = it(select_component_default).withConfig({ componentId: "sc-1cwdnjz-0" })(["width:160px;"]);
var StyledFontSizeInput = it(input_component_default).withConfig({ componentId: "sc-1cwdnjz-1" })(["width:72px;"]);
var StyledToolsWrapper = it.div.withConfig({ componentId: "sc-1cwdnjz-2" })(["display:flex;"]);

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextOptions.constants.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextSpacingsFields.js
init_react_shim();
var import_react33 = __toESM(require_react());
var MIN_VALUE5 = 0;
var MAX_VALUE6 = 1e3;
var SLIDER_STEP = 1;
var TextSpacingsFields = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = a.t, e = useStore_default(), f = e.originalSource, g = b.letterSpacing, h = b.lineHeight, i = b.baselineShift, j = b.fontSize, k = function(a2, b2) {
    var d2 = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, e2 = d2.min, f2 = void 0 === e2 ? MIN_VALUE5 : e2, g2 = d2.max, h2 = void 0 === g2 ? MAX_VALUE6 : g2;
    c(_defineProperty({}, a2, restrictNumber_default(b2, f2, h2)));
  }, l = (null === f || void 0 === f ? void 0 : f.width) || MAX_VALUE6, m = (null === f || void 0 === f ? void 0 : f.height) || MAX_VALUE6;
  return import_react33.default.createElement(StyledSpacedOptionFields, { preventFlex: true }, import_react33.default.createElement(label_component_default, null, d("letterSpacing")), import_react33.default.createElement(Slider_default, { annotation: "em", isActive: !!g, onChange: function(a2) {
    return k("letterSpacing", a2, { max: l });
  }, value: g, step: 0.01, max: Math.min(j, 20) }), import_react33.default.createElement(label_component_default, null, d("lineHeight")), import_react33.default.createElement(Slider_default, { isActive: !!i, onChange: function(a2) {
    return k("lineHeight", a2);
  }, value: h, step: SLIDER_STEP }), import_react33.default.createElement(label_component_default, null, d("baselineShift")), import_react33.default.createElement(Slider_default, { isActive: !!i, onChange: function(a2) {
    return k("baselineShift", a2, { min: -m, max: m });
  }, value: null !== i && void 0 !== i ? i : 0, min: -m, max: m, step: SLIDER_STEP, hideTrack: true }));
};
var TextSpacingsFields_default = TextSpacingsFields;

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextAlignmentFields.js
init_react_shim();
var import_react34 = __toESM(require_react());
var rightAlignmentCssTransform = { transform: "scaleX(-1)" };
var TextAlignmentFields = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = b.align, e = function(a2) {
    c({ align: a2 });
  };
  return import_react34.default.createElement(StyledSpacedOptionFields, null, import_react34.default.createElement(StyledIconWrapper, { onClick: function() {
    return e("left");
  }, active: "left" === d, "data-testid": "FIE-text-alignment-left" }, import_react34.default.createElement(TextAlignLeft, null)), import_react34.default.createElement(StyledIconWrapper, { onClick: function() {
    return e("center");
  }, active: "center" === d, "data-testid": "FIE-text-alignment-center" }, import_react34.default.createElement(TextAlignCenter, null)), import_react34.default.createElement(StyledIconWrapper, { onClick: function() {
    return e("right");
  }, active: "right" === d, "data-testid": "FIE-text-alignment-right" }, import_react34.default.createElement(TextAlignLeft, { style: rightAlignmentCssTransform })));
};
var TextAlignmentFields_default = TextAlignmentFields;

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextOptions.constants.js
var TEXT_POPPABLE_OPTIONS = [{ titleKey: "textAlignment", name: "text-alignment", Icon: TextAlignCenter }, { titleKey: "textSpacings", name: "text-spacings", Icon: spacing_default }];
var textOptionsPopupComponents = _defineProperty(_defineProperty({}, "text-alignment", TextAlignmentFields_default), "text-spacings", TextSpacingsFields_default);

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextControls.js
function ownKeys11(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread11(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys11(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys11(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var TextControls = function(a) {
  var b, c = a.text, d = a.saveText, e = a.children, f = useStore_default(), g = f.designLayer, h = f.t, i = f.config, j = useTextAnnotationEditing_default(true), k = j.updateTextFormats, l = j.currentTextAnnotation, m = _objectSpread11(_objectSpread11({}, c), l), n = i.useCloudimage, o = i[TOOLS_IDS.TEXT], p = o.fonts, q = void 0 === p ? [] : p, r = o.onFontChange, s = function() {
    var a2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {};
    return null !== l && void 0 !== l && l.id ? void k(a2) : void d(function(b2) {
      return _objectSpread11({ id: b2.id }, a2);
    });
  }, t = (0, import_react35.useCallback)(function(a2) {
    if (s({ fontFamily: a2 }), m.fontFamily !== a2 && "function" == typeof r) {
      var b2 = g.draw.bind(g);
      r(a2, b2);
    }
  }, [m, g]);
  return import_react35.default.createElement(AnnotationOptions_default, { className: "FIE_text-tool-options", "data-testid": "FIE-text-tool-options", annotation: m, updateAnnotation: s, morePoppableOptionsPrepended: n ? [] : TEXT_POPPABLE_OPTIONS, moreOptionsPopupComponentsObj: n ? {} : textOptionsPopupComponents, t: h, showTransparentColor: false }, Array.isArray(q) && 1 < q.length && import_react35.default.createElement(StyledFontFamilySelect, { className: "FIE_text-font-family-option", "data-testid": "FIE-text-font-family-option", onChange: t, value: null === (b = m.fontFamily) || void 0 === b ? void 0 : b.toLowerCase(), placeholder: h("fontFamily"), size: "sm" }, q.map(function() {
    var a2, b2, c2, d2, e2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : "";
    return import_react35.default.createElement(menu_item_component_default, { className: "FIE_text-font-family-item", key: null !== (a2 = e2.value) && void 0 !== a2 ? a2 : e2, value: null === (b2 = null !== (c2 = e2.value) && void 0 !== c2 ? c2 : e2) || void 0 === b2 ? void 0 : b2.toLowerCase() }, null !== (d2 = e2.label) && void 0 !== d2 ? d2 : e2);
  })), import_react35.default.createElement(StyledFontSizeInput, { className: "FIE_text-size-option", "data-testid": "FIE-text-size-option", value: m.fontSize || "", name: "fontSize", onChange: function(a2) {
    return s({ fontSize: parseFloat(a2.target.value) });
  }, inputMode: "numeric", type: "number", size: "sm", placeholder: h("size") }), import_react35.default.createElement(StyledToolsWrapper, null, !n && import_react35.default.createElement(import_react35.default.Fragment, null, import_react35.default.createElement(StyledIconWrapper, { className: "FIE_text-bold-option", "data-testid": "FIE-text-bold-option", active: "bold" === m.fontWeight, onClick: function() {
    return s({ fontWeight: "bold" === m.fontWeight ? "normal" : "bold" });
  }, watermarkTool: true }, import_react35.default.createElement(font_bold_default, { size: 20 })), import_react35.default.createElement(StyledIconWrapper, { className: "FIE_text-italic-option", "data-testid": "FIE-text-italic-option", active: "italic" === m.fontStyle, onClick: function() {
    return s({ fontStyle: "italic" === m.fontStyle ? "normal" : "italic" });
  }, watermarkTool: true }, import_react35.default.createElement(font_italic_default, { size: 20 }))), e));
};
var TextControls_default = TextControls;

// node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/index.js
var TextOptions = function(a) {
  var b = a.t, c = useAnnotation_default({ name: TOOLS_IDS.TEXT }), d = _slicedToArray(c, 2), e = d[0], f = d[1];
  return import_react36.default.createElement(TextControls_default, { text: e, saveText: f, t: b });
};
var TextOptions_default = TextOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImageButton.js
init_react_shim();
var import_react37 = __toESM(require_react());
var ImageButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react37.default.createElement(ToolsBarItemButton_default, { className: "FIE_image-tool-button", id: TOOLS_IDS.IMAGE, label: d("imageTool"), Icon: ImageOutline, onClick: b, isSelected: void 0 !== c && c });
};
var ImageButton_default = ImageButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImageOptions.js
init_react_shim();
var import_react42 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/HiddenUploadInput/index.js
init_react_shim();
init_extends();
var import_react38 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/HiddenUploadInput/HiddenUploadInput.styled.js
init_react_shim();
var StyledHiddenUploadInput = it.input.withConfig({ componentId: "sc-h20emh-0" })(["display:none;width:1px;height:1px;position:absolute;z-index:-1;"]);

// node_modules/react-filerobot-image-editor/lib/components/common/HiddenUploadInput/index.js
var HiddenUploadInput = function(a, b) {
  return import_react38.default.createElement(StyledHiddenUploadInput, _extends({ type: "file", ref: b }, a, { "data-testid": "FIE-hidden-upload-input" }));
};
var HiddenUploadInput_default = (0, import_react38.forwardRef)(HiddenUploadInput);

// node_modules/react-filerobot-image-editor/lib/components/common/ButtonWithMenu/index.js
init_react_shim();
var import_react39 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/ButtonWithMenu/ButtonWithMenu.styled.js
init_react_shim();
var StyledButtonWrapper = it.div.withConfig({ componentId: "sc-m9ezm7-0" })(["display:flex;align-items:center;margin-left:", ";flex-shrink:0;"], function(a) {
  var b = a.noMargin;
  return b ? "0" : "12px";
});
var StyledMainButton = it(button_component_default).withConfig({ componentId: "sc-m9ezm7-1" })(["flex-grow:1;justify-content:center;align-items:center;.SfxButton-EndIcon{margin-left:7px;}.SfxButton-Label{display:flex;gap:4px;}"]);
var StyledMenu2 = it(menu_component_default).withConfig({ componentId: "sc-m9ezm7-2" })(["padding:8px;background-color:", ";"], function(a) {
  var b = a.theme.palette;
  return b[Color.BackgroundStateless];
});
var StyledMenuItem2 = it(menu_item_component_default).withConfig({ componentId: "sc-m9ezm7-3" })(["border-radius:4px;"]);
var StyledMenuIcon = it(menu_item_icon_component_default).withConfig({ componentId: "sc-m9ezm7-4" })(["display:flex;align-items:center;"]);
var StyledArrow = it(ArrowBottom).withConfig({ componentId: "sc-m9ezm7-5" })(["margin-top:", ";transform:", ";"], function(a) {
  var b = a.$buttonSize;
  return "md" === b && "1px";
}, function(a) {
  var b = a.open;
  return b && "rotate(-180deg)";
});

// node_modules/react-filerobot-image-editor/lib/components/common/ButtonWithMenu/index.js
var ButtonWithMenu = function(a) {
  var b = a.onClick, c = a.title, d = a.label, e = a.color, f = void 0 === e ? "primary" : e, g = a.menuFromBtn, h = a.menuItems, i = a.menuPosition, j = void 0 === i ? "bottom" : i, k = a.disabled, l = void 0 !== k && k, m = a.className, n = a.menuStyle, o = a.wrapperStyle, p = a.buttonRef, q = a.noMargin, r = a.buttonSize, s = void 0 === r ? "sm" : r, u = a.dataTestId, v = useStore_default(), w = v.t, t = (0, import_react39.useRef)(true), x = (0, import_react39.useState)(null), y = _slicedToArray(x, 2), z = y[0], A = y[1], B = h.filter(Boolean), C = 1 < B.length, D = function(a2) {
    t.current && A(a2.currentTarget);
  }, E = function() {
    t.current && A(null);
  }, F = function(a2) {
    "function" == typeof a2 && a2(), E();
  };
  return (0, import_react39.useEffect)(function() {
    return t.current = true, function() {
      t.current = false;
    };
  }, []), import_react39.default.createElement(import_react39.default.Fragment, null, import_react39.default.createElement(StyledButtonWrapper, { className: "".concat(m, "-wrapper"), "data-testid": "FIE-button-with-menu-wrapper", style: o, ref: p, noMargin: q }, import_react39.default.createElement(StyledMainButton, { className: "".concat(m, "-button"), "data-testid": u || "FIE-button-with-menu-button", color: f, size: s, title: c, onClick: l ? void 0 : function(a2) {
    var c2;
    return void 0 !== g && g && C ? void D(a2) : void ("function" == typeof b ? b() : null !== (c2 = B[0]) && void 0 !== c2 && c2.onClick && B[0].onClick());
  }, disabled: l, endIcon: 0 < h.length && import_react39.default.createElement(StyledArrow, { "data-testid": "FIE-button-with-menu-arrow", open: !!z, $buttonSize: s, size: "md" === s ? 13 : 10 }) }, d || w("saveAs"))), C && import_react39.default.createElement(StyledMenu2, { className: "".concat(m, "-menu"), "data-testid": "FIE-button-with-menu-menu", anchorEl: z, onClose: E, open: !!z, style: n, position: j }, h.map(function(a2) {
    return a2 && import_react39.default.createElement(StyledMenuItem2, { className: "".concat(m, "-menu-item"), "data-testid": "FIE-button-with-menu-menu-item-".concat(a2.label), key: a2.key, active: a2.isActive, onClick: function() {
      return F(a2.onClick);
    }, size: s }, a2.icon && import_react39.default.createElement(StyledMenuIcon, { size: s }, "string" == typeof a2.icon ? import_react39.default.createElement("span", { dangerouslySetInnerHTML: { __html: a2.icon } }) : import_react39.default.createElement(a2.icon, null)), import_react39.default.createElement(menu_item_label_component_default, null, a2.label));
  })));
};
var ButtonWithMenu_default = ButtonWithMenu;

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImageControls.js
init_react_shim();
var import_react40 = __toESM(require_react());
var ImageControls = function(a) {
  var b = a.image, c = a.saveImage, d = a.children, e = a.t;
  return import_react40.default.createElement(AnnotationOptions_default, { className: "FIE_image-tool-options", "data-testid": "FIE-image-tool-options", annotation: b, updateAnnotation: c, t: e, hideFillOption: true }, d);
};
var ImageControls_default = ImageControls;

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImagesGallery.js
init_react_shim();
var import_react41 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/Image.styled.js
init_react_shim();
var StyledImagesGallery = it.div.withConfig({ componentId: "sc-dqni47-0" })(["background:", ";box-shadow:0px 1px 2px ", ";border-radius:4px;padding:8px;overflow-y:auto;max-height:350px;max-width:300px;"], function(a) {
  var b = a.theme;
  return b.palette["bg-secondary"];
}, function(a) {
  var b = a.theme;
  return b.palette["light-shadow"];
});
var StyledImageWrapper = it.div.withConfig({ componentId: "sc-dqni47-1" })(["display:inline-flex;align-items:center;justify-content:center;width:60px;height:60px;margin:4px;padding:4px;cursor:pointer;border-radius:4px;border:2px solid ", ";user-select:none;:hover{border-color:", ";}img{width:100%;height:100%;object-fit:contain;}"], function(a) {
  var b = a.theme;
  return b.palette["bg-primary-active"];
}, function(a) {
  var b = a.theme;
  return b.palette["accent-primary-active"];
});

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImagesGallery.js
var ImagesGallery = function(a) {
  var b = a.gallery, c = void 0 === b ? [] : b, d = a.anchorEl, e = void 0 === d ? null : d, f = a.onClose, g = a.onSelect;
  return import_react41.default.createElement(popper_component_default, { className: "FIE_image-tool-gallery", "data-testid": "FIE-image-tool-gallery", anchorEl: e, open: !!e, position: "top", onClick: f, overlay: true }, import_react41.default.createElement(StyledImagesGallery, null, c.map(function(a2) {
    var b2 = a2.originalUrl, c2 = a2.previewUrl;
    return import_react41.default.createElement(StyledImageWrapper, { key: b2, onClick: function() {
      return g(b2);
    }, "data-testid": "FIE-image-tool-gallery-item" }, import_react41.default.createElement("img", { src: c2, alt: c2, crossOrigin: "Anonymous", draggable: false, "data-testid": "FIE-image-tool-gallery-item-image" }));
  })));
};
var ImagesGallery_default = ImagesGallery;

// node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImageOptions.js
var ImageOptions = function() {
  var a = (0, import_react42.useState)(), b = _slicedToArray(a, 2), c = b[0], d = b[1], e = (0, import_react42.useState)(null), f = _slicedToArray(e, 2), g = f[0], h = f[1], i = (0, import_react42.useRef)(), j = (0, import_react42.useRef)(), k = useStore_default(), l = k.dispatch, m = k.t, n = k.config, o = void 0 === n ? {} : n, p = useImageScaled_default(), q = p.image, r = p.saveImage, s = p.addImgScaled, t = o[TOOLS_IDS.IMAGE], u = !t.disableUpload, v = Array.isArray(t.gallery) && 0 < t.gallery.length, w = (0, import_react42.useRef)(0), x = function(a2) {
    w.current += 1, w.current === a2 && (w.current = 0, d(false));
  }, y = function(a2) {
    l({ type: SET_FEEDBACK, payload: { feedback: { message: a2, status: FEEDBACK_STATUSES.WARNING } } });
  }, z = function() {
    i.current && i.current.click();
  }, A = function() {
    h(j.current);
  }, B = (0, import_react42.useMemo)(function() {
    return [u && { key: "add-by-upload-image", label: c ? m("importing") : m("uploadImage"), icon: UploadOutline, onClick: c ? void 0 : z }, v && { key: "add-from-gallery", label: m("fromGallery"), icon: Images, onClick: A }];
  }, [t, c, m]);
  return import_react42.default.createElement(ImageControls_default, { image: q, saveImage: r, t: m }, import_react42.default.createElement(ButtonWithMenu_default, { className: "FIE_image-tool-add-option", "data-testid": "FIE-image-tool-add-option", color: "secondary", label: import_react42.default.createElement(import_react42.default.Fragment, null, import_react42.default.createElement(PlusOutline, null), m("addImage")), title: m("addImageTitle"), menuPosition: "top", menuItems: B, size: "sm", style: { maxHeight: 24 }, buttonRef: j, menuFromBtn: true }), u && import_react42.default.createElement(HiddenUploadInput_default, { ref: i, onChange: c ? void 0 : function(a2) {
    if (a2.target.files) {
      d(true);
      var b2 = [], c2 = Array.from(a2.target.files), e2 = c2.length;
      if (c2.forEach(function(a3) {
        if (a3.type.startsWith("image/")) {
          var c3 = new Image();
          c3.onload = function() {
            s(c3), URL.revokeObjectURL(a3), x(e2);
          }, c3.onerror = function() {
            y(m("uploadImageError")), x(e2);
          }, c3.src = URL.createObjectURL(a3);
        } else b2.push(a3.name), x(e2);
      }), 0 < b2.length) {
        var f2 = 1 < b2.length ? m("areNotImages") : m("isNotImage");
        y("".concat(b2.join(", "), " ").concat(f2, " ").concat(m("toBeUploaded"), "."));
      }
    }
    a2.target.value = "";
  }, disabled: c, multiple: true }), v && import_react42.default.createElement(ImagesGallery_default, { gallery: t.gallery, onSelect: function(a2) {
    d(true);
    var b2 = new Image();
    b2.onload = function() {
      s(b2), x(1);
    }, b2.onerror = function() {
      y(m("uploadImageError")), x(1);
    }, b2.crossOrigin = "Anonymous", b2.src = a2;
  }, onClose: function() {
    h(null);
  }, anchorEl: g }));
};
var ImageOptions_default = ImageOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Rect/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Rect/RectButton.js
init_react_shim();
var import_react43 = __toESM(require_react());
var RectButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react43.default.createElement(ToolsBarItemButton_default, { className: "FIE_rect-tool-button", id: TOOLS_IDS.RECT, label: d("rectangleTool"), Icon: CropLandscape, onClick: b, isSelected: void 0 !== c && c });
};
var RectButton_default = RectButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Rect/RectOptions.js
init_react_shim();
var import_react45 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Rect/Rect.constants.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Rect/RectCornerField.js
init_react_shim();
var import_react44 = __toESM(require_react());
var MIN_VALUE6 = 0;
var MAX_VALUE7 = 150;
var RectCornerField = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = a.t, e = b.cornerRadius;
  return import_react44.default.createElement(StyledSpacedOptionFields, null, import_react44.default.createElement(label_component_default, null, d("cornerRadius")), import_react44.default.createElement(Slider_default, { annotation: "px", onChange: function(a2) {
    c({ cornerRadius: restrictNumber_default(a2, MIN_VALUE6, MAX_VALUE7) });
  }, value: e, min: MIN_VALUE6, max: MAX_VALUE7, noMargin: true }));
};
var RectCornerField_default = RectCornerField;

// node_modules/react-filerobot-image-editor/lib/components/tools/Rect/Rect.constants.js
var RECT_POPPABLE_OPTIONS = [{ titleKey: "cornerRadius", name: "corner-radius", Icon: radius_corner_default }];
var rectOptionsPopupComponents = _defineProperty({}, "corner-radius", RectCornerField_default);

// node_modules/react-filerobot-image-editor/lib/components/tools/Rect/RectOptions.js
var RectOptions = function(a) {
  var b = a.t, c = useAnnotation_default({ name: TOOLS_IDS.RECT }), d = _slicedToArray(c, 2), e = d[0], f = d[1];
  return import_react45.default.createElement(AnnotationOptions_default, { className: "FIE_rect-tool-options", "data-testid": "FIE-rect-tool-options", moreOptionsPopupComponentsObj: rectOptionsPopupComponents, morePoppableOptionsPrepended: RECT_POPPABLE_OPTIONS, annotation: e, updateAnnotation: f, t: b });
};
var RectOptions_default = RectOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Ellipse/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Ellipse/EllipseButton.js
init_react_shim();
var import_react46 = __toESM(require_react());
var EllipseButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react46.default.createElement(ToolsBarItemButton_default, { className: "FIE_ellipse-tool-button", id: TOOLS_IDS.ELLIPSE, label: d("ellipseTool"), Icon: Ellipse2, onClick: b, isSelected: void 0 !== c && c });
};
var EllipseButton_default = EllipseButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Ellipse/EllipseOptions.js
init_react_shim();
var import_react47 = __toESM(require_react());
var EllipseOptions = function(a) {
  var b = a.t, c = useAnnotation_default({ name: TOOLS_IDS.ELLIPSE }), d = _slicedToArray(c, 2), e = d[0], f = d[1];
  return import_react47.default.createElement(AnnotationOptions_default, { className: "FIE_ellipse-tool-options", "data-testid": "FIE-ellipse-tool-options", annotation: e, updateAnnotation: f, t: b });
};
var EllipseOptions_default = EllipseOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Pen/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Pen/PenButton.js
init_react_shim();
var import_react48 = __toESM(require_react());
var PenButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react48.default.createElement(ToolsBarItemButton_default, { className: "FIE_pen-tool-button", id: TOOLS_IDS.PEN, label: d("penTool"), Icon: Annotation, onClick: b, isSelected: void 0 !== c && c });
};
var PenButton_default = PenButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Pen/PenOptions.js
init_react_shim();
var import_react49 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/getPointerOffsetPosition.js
init_react_shim();
var getPointerOffsetPosition = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = null === a || void 0 === a ? void 0 : a.parent, c = b.getRelativePointerPosition();
  return { offsetX: c.x + ((null === b || void 0 === b ? void 0 : b.attrs.xPadding) || 0), offsetY: c.y + ((null === b || void 0 === b ? void 0 : b.attrs.yPadding) || 0) };
};
var getPointerOffsetPosition_default = getPointerOffsetPosition;

// node_modules/react-filerobot-image-editor/lib/utils/randomId.js
init_react_shim();
var randomId = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : "";
  return "".concat(a).concat(a ? "-" : "").concat(parseInt(Date.now() * Math.random(), 10));
};
var randomId_default = randomId;

// node_modules/react-filerobot-image-editor/lib/components/tools/Pen/PenOptions.js
function ownKeys12(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread12(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys12(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys12(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var eventsOptions = { passive: true };
var PenOptions = function(a) {
  var b = a.t, c = useStore_default(), d = c.dispatch, e = c.designLayer, f = c.previewGroup, g = c.config, h = useSetAnnotation_default(), i = useAnnotation_default(_objectSpread12(_objectSpread12(_objectSpread12({}, g.annotationsCommon), g[TOOLS_IDS.PEN]), {}, { name: TOOLS_IDS.PEN }), { enablePreview: false }), j = _slicedToArray(i, 3), k = j[0], l = j[1], m = j[2], n = (0, import_react49.useRef)(null), o = (0, import_react49.useRef)({ points: [], moved: false, id: "" }), p = (0, import_react49.useCallback)(function() {
    var a2 = getPointerOffsetPosition_default(f);
    return [a2.offsetX - (e.attrs.xPadding || 0), a2.offsetY - (e.attrs.yPadding || 0)];
  }, [e]), q = (0, import_react49.useCallback)(function() {
    o.current.moved ? (o.current.points = o.current.points.concat(p()), h({ id: o.current.id, points: o.current.points, dismissHistory: true })) : (o.current = { moved: true, id: randomId_default(TOOLS_IDS.PEN), points: [].concat(_toConsumableArray(o.current.points), _toConsumableArray(p())) }, m({ id: o.current.id, name: TOOLS_IDS.PEN, points: o.current.points }));
  }, [p]), r = (0, import_react49.useCallback)(function() {
    o.current.id && g[TOOLS_IDS.PEN].selectAnnotationAfterDrawing && d({ type: SELECT_ANNOTATION, payload: { annotationId: o.current.id } }), o.current = null, n.current.off("mousemove touchmove", q), n.current.off("mouseleave touchcancel", r), document.removeEventListener("mouseup", r, eventsOptions), document.removeEventListener("touchend", r, eventsOptions), document.removeEventListener("mouseleave", r, eventsOptions), document.removeEventListener("touchcancel", r, eventsOptions);
  }, [q]), s = (0, import_react49.useCallback)(function(a2) {
    a2.target.attrs.draggable || (a2.evt.preventDefault(), o.current = { points: p() }, n.current.on("mousemove touchmove", q), n.current.on("mouseleave touchcancel", r), document.addEventListener("mouseup", r, eventsOptions), document.addEventListener("touchend", r, eventsOptions), document.addEventListener("mouseleave", r, eventsOptions), document.addEventListener("touchcancel", r, eventsOptions));
  }, [p, q, r]);
  return (0, import_react49.useEffect)(function() {
    return n.current = null === e || void 0 === e ? void 0 : e.getStage(), n.current && n.current.on("mousedown touchstart", s), function() {
      n.current && n.current.off("mousedown touchstart", s);
    };
  }, [e]), import_react49.default.createElement(AnnotationOptions_default, { className: "FIE_pen-tool-options", "data-testid": "FIE-pen-tool-options", annotation: k, updateAnnotation: l, t: b, hidePositionField: true, hideFillOption: true });
};
var PenOptions_default = PenOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Line/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Line/LineButton.js
init_react_shim();
var import_react50 = __toESM(require_react());
var LineButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react50.default.createElement(ToolsBarItemButton_default, { className: "FIE_line-tool-button", id: TOOLS_IDS.LINE, label: d("lineTool"), Icon: line_default, onClick: b, isSelected: void 0 !== c && c });
};
var LineButton_default = LineButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Line/LineOptions.js
init_react_shim();
var import_react51 = __toESM(require_react());
var LineOptions = function(a) {
  var b = a.t, c = useAnnotation_default({ name: TOOLS_IDS.LINE }), d = _slicedToArray(c, 2), e = d[0], f = d[1];
  return import_react51.default.createElement(AnnotationOptions_default, { className: "FIE_line-tool-options", "data-testid": "FIE-line-tool-options", annotation: e, updateAnnotation: f, t: b, hidePositionField: true, hideFillOption: true });
};
var LineOptions_default = LineOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Arrow/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Arrow/ArrowButton.js
init_react_shim();
var import_react52 = __toESM(require_react());
var ArrowButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react52.default.createElement(ToolsBarItemButton_default, { className: "FIE_arrow-tool-button", id: TOOLS_IDS.ARROW, label: d("arrowTool"), Icon: ArrowTool, onClick: b, isSelected: void 0 !== c && c });
};
var ArrowButton_default = ArrowButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Arrow/ArrowOptions.js
init_react_shim();
var import_react53 = __toESM(require_react());
var ArrowOptions = function(a) {
  var b = a.t, c = useAnnotation_default({ name: TOOLS_IDS.ARROW }), d = _slicedToArray(c, 2), e = d[0], f = d[1];
  return import_react53.default.createElement(AnnotationOptions_default, { className: "FIE_arrow-tool-options", "data-testid": "FIE-arrow-tool-options", annotation: e, updateAnnotation: f, t: b, hidePositionField: true, hideFillOption: true });
};
var ArrowOptions_default = ArrowOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Polygon/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Polygon/PolygonButton.js
init_react_shim();
var import_react54 = __toESM(require_react());
var PolygonButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react54.default.createElement(ToolsBarItemButton_default, { className: "FIE_polygon-tool-button", id: TOOLS_IDS.POLYGON, label: d("polygonTool"), Icon: Polygon, onClick: b, isSelected: void 0 !== c && c });
};
var PolygonButton_default = PolygonButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/Polygon/PolygonOptions.js
init_react_shim();
var import_react56 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Polygon/Polygon.constants.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Polygon/PolygonSidesField.js
init_react_shim();
var import_react55 = __toESM(require_react());
var MIN_VALUE7 = 3;
var MAX_VALUE8 = 25;
var PolygonSidesField = function(a) {
  var b = a.annotation, c = a.updateAnnotation, d = a.t, e = b.sides;
  return import_react55.default.createElement(StyledSpacedOptionFields, null, import_react55.default.createElement(label_component_default, null, d("sides")), import_react55.default.createElement(Slider_default, { annotation: "", onChange: function(a2) {
    c({ sides: restrictNumber_default(a2, MIN_VALUE7, MAX_VALUE8) });
  }, value: e, min: MIN_VALUE7, max: MAX_VALUE8, noMargin: true }));
};
var PolygonSidesField_default = PolygonSidesField;

// node_modules/react-filerobot-image-editor/lib/components/tools/Polygon/Polygon.constants.js
var POLYGON_POPPABLE_OPTIONS = [{ titleKey: "sides", name: "sides-number", Icon: polygon_sides_default }];
var polygonOptionsPopupComponents = _defineProperty({}, "sides-number", PolygonSidesField_default);

// node_modules/react-filerobot-image-editor/lib/components/tools/Polygon/PolygonOptions.js
var PolygonOptions = function(a) {
  var b = a.t, c = useAnnotation_default({ name: TOOLS_IDS.POLYGON }), d = _slicedToArray(c, 2), e = d[0], f = d[1];
  return import_react56.default.createElement(AnnotationOptions_default, { className: "FIE_polygon-tool-options", "data-testid": "FIE-polygon-tool-options", morePoppableOptionsPrepended: POLYGON_POPPABLE_OPTIONS, moreOptionsPopupComponentsObj: polygonOptionsPopupComponents, annotation: e, updateAnnotation: f, t: b, hidePositionField: true });
};
var PolygonOptions_default = PolygonOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Resize/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Resize/Resize.js
init_react_shim();
var import_react57 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/getProperDimensions.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/mapCropBox.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/mapNumber.js
init_react_shim();
var mapNumber = function(a, b, c, d, e) {
  return "number" == typeof a && (a - b) * (e - d) / (c - b) + d;
};
var mapNumber_default = mapNumber;

// node_modules/react-filerobot-image-editor/lib/utils/mapCropBox.js
function ownKeys13(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread13(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys13(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys13(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var mapCropBox = function(a, b) {
  var c, d, e = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : { width: 0, height: 0 };
  return _objectSpread13(_objectSpread13(_objectSpread13({}, a.x || 0 === a.x ? { x: Math.round(mapNumber_default(a.x, 0, b.width, 0, e.width)) } : {}), a.y || 0 === a.y ? { y: Math.round(mapNumber_default(a.y, 0, b.height, 0, e.height)) } : {}), {}, { width: Math.round(mapNumber_default(null !== (c = a.width) && void 0 !== c ? c : b.width, 0, b.width, 0, e.width)), height: Math.round(mapNumber_default(null !== (d = a.height) && void 0 !== d ? d : b.height, 0, b.height, 0, e.height)) });
};
var mapCropBox_default = mapCropBox;

// node_modules/react-filerobot-image-editor/lib/utils/getProperDimensions.js
function ownKeys14(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread14(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys14(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys14(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var getProperDimensions = function(a, b, c) {
  var d = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : { width: 0, height: 0 }, e = 4 < arguments.length && arguments[4] !== void 0 ? arguments[4] : 0;
  if (a.width && a.height) return a;
  var f = mapCropBox_default(b, c, d), g = getSizeAfterRotation_default(f.width, f.height, e);
  return a.width || a.height ? { width: a.width || g.width, height: a.height || g.height } : g.width && g.height && g || _objectSpread14(_objectSpread14({}, d), getSizeAfterRotation_default(d.width, d.height, e));
};
var getProperDimensions_default = getProperDimensions;

// node_modules/react-filerobot-image-editor/lib/components/tools/Resize/Resize.styled.js
init_react_shim();
var StyledResizeWrapper = it.div.withConfig({ componentId: "sc-17otqpz-0" })(["display:flex;justify-content:", ";align-items:flex-end;gap:3px;flex-wrap:wrap;"], function(a) {
  var b = a.alignment;
  return b || "center";
});
var StyledResizeInput = it(input_group_component_default).withConfig({ componentId: "sc-17otqpz-1" })(function(a) {
  var b = a.theme;
  return ot(["width:106px;max-width:106px;margin-top:4px;.SfxInput-Base{width:100%;min-width:100%;max-width:100%;}span{color:", ";", ";}"], b.palette[Color.TextSecondary], b.typography.font[FontVariant.LabelMedium]);
});
var StyledRatioLockIcon = it(icon_button_component_default).withConfig({ componentId: "sc-17otqpz-2" })(["svg{margin-bottom:1px;}"]);
var StyledResetButton = it(icon_button_component_default).withConfig({ componentId: "sc-17otqpz-3" })(["margin-left:12px;"]);

// node_modules/react-filerobot-image-editor/lib/components/tools/Resize/Resize.js
function ownKeys15(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread15(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys15(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys15(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var Resize2 = function(a) {
  var b = a.onChange, c = a.currentSize, d = void 0 === c ? {} : c, e = a.hideResetButton, f = a.alignment, g = void 0 === f ? "center" : f, h = useStore_default(), i = h.dispatch, j = h.originalSource, k = h.resize, l = h.shownImageDimensions, m = h.adjustments, n = m.crop, o = m.rotation, p = void 0 === o ? 0 : o, q = h.theme, r = h.t, s = getProperDimensions_default((d.width || d.height) && d || k, n, l, j, p), t = function(a2) {
    var c2, e2 = a2.target, f2 = e2.name, g2 = e2.value;
    if (!(1 > parseFloat(g2))) {
      var h2 = Math.min(10 * j.width, 10 * j.height), m2 = getSizeAfterRotation_default(j.width, j.height, p), o2 = "height" === f2, q2 = o2 ? "width" : "height", r2 = _defineProperty(_defineProperty({}, f2, g2 ? restrictNumber_default(g2, 0, h2) : g2), q2, s[q2]), t2 = null !== (c2 = d.ratioUnlocked) && void 0 !== c2 ? c2 : k.ratioUnlocked;
      if (!t2) {
        var u2 = m2.width / m2.height;
        r2[q2] = o2 ? Math.round(r2[f2] * u2) : Math.round(r2[f2] / u2);
      }
      if (r2[f2] !== k[f2] || r2[q2] !== k[q2]) {
        if ("function" == typeof b) return void b(r2);
        i({ type: SET_RESIZE, payload: r2 });
        var v2 = n.width && n.height && n || l, w2 = _objectSpread15(_objectSpread15({}, k), r2);
        i({ type: ZOOM_CANVAS, payload: { factor: w2.width && w2.height ? getZoomFitFactor_default(v2, w2) : DEFAULT_ZOOM_FACTOR, isAbsoluteZoom: true } });
      }
    }
  }, u = "undefined" == typeof k.width && "undefined" == typeof k.height || j.width === k.width && j.height === k.height, v = k.manualChangeDisabled, w = "undefined" != typeof k.width && !k.width, x = "undefined" != typeof k.height && !k.height;
  return import_react57.default.createElement(StyledResizeWrapper, { className: "FIE_resize-tool-options", alignment: g }, import_react57.default.createElement(StyledResizeInput, { className: "FIE_resize-width-option", "data-testid": "FIE-resize-width-option", value: w ? "" : s.width, name: "width", onChange: v ? void 0 : t, inputMode: "numeric", title: r("resizeWidthTitle"), label: r("width"), inputProps: { type: "number" }, size: "sm", iconEnd: "px", placeholder: "Width", disabled: v }), import_react57.default.createElement(StyledRatioLockIcon, { className: "FIE_resize-ratio-locker", "data-testid": "FIE-resize-ratio-locker", title: r("toggleRatioLockTitle"), onClick: v ? void 0 : function() {
    return "function" == typeof b ? void b({ ratioUnlocked: !d.ratioUnlocked }) : void i({ type: SET_RESIZE, payload: { ratioUnlocked: !k.ratioUnlocked } });
  }, color: "basic", size: "sm", disabled: v }, d.ratioUnlocked || k.ratioUnlocked ? import_react57.default.createElement(unlock_outline_default, { size: 16, color: q.palette.success }) : import_react57.default.createElement(lock_outline_default, { size: 16, color: q.palette.error })), import_react57.default.createElement(StyledResizeInput, { className: "FIE_resize-height-option", "data-testid": "FIE-resize-height-option", value: x ? "" : s.height, name: "height", onChange: v ? void 0 : t, inputMode: "numeric", title: r("resizeHeightTitle"), label: r("height"), inputProps: { type: "number" }, size: "sm", iconEnd: "px", placeholder: "Height", disabled: v }), !(void 0 !== e && e) && import_react57.default.createElement(StyledResetButton, { className: "FIE_resize-reset-button", "data-testid": "FIE-resize-reset-button", size: "sm", color: "basic", onClick: u || v ? void 0 : function() {
    i({ type: SET_RESIZE, payload: { width: void 0, height: void 0, ratioUnlocked: false } });
    var a2 = n.width && n.height && n || l;
    i({ type: ZOOM_CANVAS, payload: { factor: getZoomFitFactor_default(a2, a2) } });
  }, disabled: u || v }, import_react57.default.createElement(Reset, null)));
};
var Resize_default = Resize2;

// node_modules/react-filerobot-image-editor/lib/components/tools/Watermark/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/Watermark/Watermark.js
init_react_shim();
var import_react60 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/tools/Watermark/Watermark.styled.js
init_react_shim();
var StyledWatermarkWrapper = it.div.withConfig({ componentId: "sc-fvaj5j-0" })(["display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:8px;overflow:hidden;", ";"], function(a) {
  var b = a.noWrap;
  return b ? "flex-wrap: nowrap;" : "";
});
var StyledControlsWrapper = it.div.withConfig({ componentId: "sc-fvaj5j-1" })(["margin-bottom:8px;"]);
var StyledWatermarkGalleryItem = it.div.withConfig({ componentId: "sc-fvaj5j-2" })(function(a) {
  var b = a.theme;
  return "\n    padding: 6px 4px;\n    border: 1px solid ".concat(b.palette["borders-secondary"], ";\n    width: fit-content;\n    height: 32px;\n    border-radius: 2px;\n    overflow: hidden;\n    cursor: pointer;\n    border-radius: 4px;\n\n    :hover {\n      background: ").concat(b.palette["bg-primary-active"], ";\n    }\n\n    &[aria-selected='true'] {\n      background: ").concat(b.palette["bg-primary-active"], ";\n      border-color: ").concat(b.palette["accent-primary-active"], ";\n    }\n\n    img {\n      max-width: 100%;\n      max-height: 100%;\n    }\n  ");
});

// node_modules/react-filerobot-image-editor/lib/components/tools/Watermark/WatermarksGallery.js
init_react_shim();
var import_react58 = __toESM(require_react());
var WatermarksGallery = function(a) {
  var b = a.addImgWatermark, c = a.loadAndSetWatermarkImg, d = a.style, e = useStore_default(), f = e.config, g = e.annotations, h = e.dispatch, i = e.t, j = (0, import_react58.useMemo)(function() {
    var a2;
    return null === (a2 = (g[WATERMARK_ANNOTATION_ID] || {}).image) || void 0 === a2 ? void 0 : a2.src;
  }, [g[WATERMARK_ANNOTATION_ID]]), k = function(a2) {
    var c2 = a2.currentTarget.children[0];
    if (c2.complete) {
      if (!c2.naturalWidth) return void h({ type: SET_FEEDBACK, payload: { feedback: { message: i("mutualizedFailedToLoadImg"), duration: 2e3 } } });
      b(c2);
    }
  }, l = f[TOOLS_IDS.WATERMARK] || {}, m = l.gallery, n = void 0 === m ? [] : m;
  return 0 === n.length ? null : import_react58.default.createElement(Carousel_default, { className: "FIE_watermark-gallery", style: d }, n.map(function(a2) {
    var b2 = (null === a2 || void 0 === a2 ? void 0 : a2.url) || a2, d2 = (null === a2 || void 0 === a2 ? void 0 : a2.previewUrl) || b2;
    return import_react58.default.createElement(StyledWatermarkGalleryItem, { className: "FIE_watermark-selected-item", "data-testid": "FIE-watermark-gallery-item", onClick: function(a3) {
      return b2 === d2 ? k(a3) : c(b2);
    }, key: b2, "aria-selected": b2 === j }, import_react58.default.createElement("img", { "data-testid": "FIE-watermark-gallery-item-image", src: d2, alt: "Failed to load.", crossOrigin: "Anonymous", draggable: false }));
  }));
};
var WatermarksGallery_default = WatermarksGallery;

// node_modules/react-filerobot-image-editor/lib/components/tools/Watermark/WatermarkPadding.js
init_react_shim();
var import_react59 = __toESM(require_react());
var WatermarkPadding = function(a) {
  var b = a.watermark, c = a.saveWatermark, d = a.t, e = (0, import_react59.useState)(null), f = _slicedToArray(e, 2), g = f[0], h = f[1], i = b.padding || 0;
  return import_react59.default.createElement(import_react59.default.Fragment, null, import_react59.default.createElement(StyledIconWrapper, { className: "FIE_watermark-padding-triggerer", "data-testid": "FIE-watermark-padding-triggerer", title: d("padding"), onClick: function(a2) {
    h(a2.currentTarget);
  }, active: g }, import_react59.default.createElement(padding_default, { size: 20 })), import_react59.default.createElement(menu_component_default, { className: "FIE_watermark-padding-popup", "data-testid": "FIE-watermark-padding-popup", anchorEl: g, open: !!g, onClose: function() {
    h(null);
  }, position: "top" }, import_react59.default.createElement(StyledOptionPopupContent, null, import_react59.default.createElement(label_component_default, null, d("padding")), import_react59.default.createElement(StyledSpacedOptionFields, null, import_react59.default.createElement(Slider_default, { annotation: "px", onChange: function(a2) {
    c({ padding: restrictNumber_default(a2, 0, 100) });
  }, value: i, noMargin: true }), import_react59.default.createElement(StyledIconLabel, null, "".concat(i, "px"))))));
};
var WatermarkPadding_default = WatermarkPadding;

// node_modules/react-filerobot-image-editor/lib/components/tools/Watermark/Watermark.js
function ownKeys16(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread16(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys16(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys16(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var WATERMARK_IMG_RATIO_FROM_ORIGINAL = 0.33;
var WATERMARK_ANNOTATION_ID2 = "watermark";
var Watermark2 = function() {
  var a = useSetAnnotation_default(), b = useStore_default(), c = b.annotations, d = b.originalSource, e = b.shownImageDimensions, f = b.selectionsIds, g = b.config, h = b.dispatch, i = b.t, j = b.adjustments.crop, k = void 0 === j ? {} : j, l = usePhoneScreen_default(), m = (0, import_react60.useState)(false), n = _slicedToArray(m, 2), o = n[0], p = n[1], q = (0, import_react60.useRef)(), r = g[TOOLS_IDS.WATERMARK], s = (0, import_react60.useMemo)(function() {
    return c[WATERMARK_ANNOTATION_ID2];
  }, [c[WATERMARK_ANNOTATION_ID2]]), t = k.width / e.originalSourceInitialScale || d.width, u = k.height / e.originalSourceInitialScale || d.height, v = k.x / e.originalSourceInitialScale || 0, w = k.y / e.originalSourceInitialScale || 0, x = r.textScalingRatio || WATERMARK_IMG_RATIO_FROM_ORIGINAL, y = r.imageScalingRatio || WATERMARK_IMG_RATIO_FROM_ORIGINAL, z = function(b2) {
    var c2 = b2.naturalWidth || b2.width, d2 = b2.naturalHeight || b2.height, e2 = u > t ? u * y / d2 : t * y / c2, f2 = _objectSpread16(_objectSpread16(_objectSpread16({}, g.annotationsCommon), g[TOOLS_IDS.IMAGE]), {}, { scaleX: e2, scaleY: e2, padding: 1, image: b2, width: c2, height: d2, x: v + t / 2 - c2 * e2 / 2, y: w + u / 2 - d2 * e2 / 2, id: WATERMARK_ANNOTATION_ID2, name: TOOLS_IDS.IMAGE, replaceCurrent: true });
    a(f2);
  }, A = function(b2) {
    a(_objectSpread16(_objectSpread16({}, "function" == typeof b2 ? b2(s) : b2), {}, { id: WATERMARK_ANNOTATION_ID2 }));
  }, B = function(a2) {
    h({ type: SET_FEEDBACK, payload: { feedback: { message: a2, status: FEEDBACK_STATUSES.WARNING } } });
  }, C = function(a2, b2) {
    if (a2) {
      p(true);
      var c2 = new Image();
      c2.onload = function() {
        z(c2), b2 && URL.revokeObjectURL(a2), p(false);
      }, c2.onerror = function() {
        B(i("mutualizedFailedToLoadImg")), b2 && URL.revokeObjectURL(a2), p(false);
      }, c2.src = a2;
    }
  };
  (0, import_react60.useEffect)(function() {
    s && (h({ type: CLEAR_ANNOTATIONS_SELECTIONS }), h({ type: SELECT_ANNOTATION, payload: { annotationId: "watermark" } }));
  }, [s]), (0, import_react60.useEffect)(function() {
    s && (0 === f.length || f[0].id !== WATERMARK_ANNOTATION_ID2) && h({ type: SELECT_ANNOTATION, payload: { annotationId: "watermark", keepTextEditing: true } });
  }, [f]);
  var D = [(!g.useCloudimage || "function" == typeof r.onUploadWatermarkImgClick) && { key: "upload-watermark", label: i("uploadWatermark"), icon: upload_outline_default, onClick: function() {
    if ("function" == typeof r.onUploadWatermarkImgClick) {
      var a2 = r.onUploadWatermarkImgClick(C);
      return void (a2 instanceof Promise && a2.then(function() {
        var a3 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, b2 = a3.url, c2 = a3.revokeObjectUrl;
        return C(b2, void 0 !== c2 && c2);
      }));
    }
    q.current && q.current.click();
  } }, !r.hideTextWatermark && { key: "add-text-watermark", label: i("addWatermarkAsText"), icon: text_default, onClick: function() {
    var b2 = { height: u * x, width: t * x }, c2 = _objectSpread16(_objectSpread16(_objectSpread16(_objectSpread16({}, g.annotationsCommon), g[TOOLS_IDS.TEXT]), b2), {}, { padding: 1, x: v + t / 2 - b2.width / 2, y: w + u / 2 - b2.height / 2, fill: "#000000", id: WATERMARK_ANNOTATION_ID2, name: TOOLS_IDS.TEXT, replaceCurrent: true });
    a(c2);
  } }], E = function() {
    return import_react60.default.createElement(WatermarkPadding_default, { watermark: s, saveWatermark: A, t: i });
  };
  return import_react60.default.createElement("div", { className: "FIE_watermark-tool-wrapper" }, (null === s || void 0 === s ? void 0 : s.name) === TOOLS_IDS.TEXT && import_react60.default.createElement(StyledControlsWrapper, { className: "FIE_watermark-options-wrapper" }, import_react60.default.createElement(TextControls_default, { text: s, saveText: A, t: i }, E())), (null === s || void 0 === s ? void 0 : s.name) === TOOLS_IDS.IMAGE && import_react60.default.createElement(StyledControlsWrapper, { className: "FIE_watermark-options-wrapper" }, import_react60.default.createElement(ImageControls_default, { image: s, saveImage: A, t: i }, E())), import_react60.default.createElement(StyledWatermarkWrapper, { className: "FIE_watermark-add-wrapper", noWrap: true }, import_react60.default.createElement(ButtonWithMenu_default, { className: "FIE_watermark-add", color: "secondary", label: function() {
    return l ? import_react60.default.createElement(Plus, null) : import_react60.default.createElement(import_react60.default.Fragment, null, import_react60.default.createElement(PlusOutline, null), D[0] ? i("addWatermark") : i("addTextWatermark"));
  }(), title: i("addWatermarkTitle"), menuPosition: "top", menuItems: D, menuFromBtn: true, noMargin: true }), import_react60.default.createElement(WatermarksGallery_default, { loadAndSetWatermarkImg: C, addImgWatermark: z, style: l && !(!(null !== s && void 0 !== s) || !s.name) ? { width: "55%" } : void 0 }), import_react60.default.createElement(HiddenUploadInput_default, { onChange: o ? void 0 : function(a2) {
    if (a2.target.files) {
      var b2 = a2.target.files[0];
      b2.type.startsWith("image/") && C(URL.createObjectURL(b2), true);
    }
    a2.target.value = "";
  }, disabled: o, ref: q })));
};
var Watermark_default = Watermark2;

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemovalButton.js
init_react_shim();
var import_react61 = __toESM(require_react());
var ObjectRemovalButton = function(a) {
  var b = a.selectTool, c = a.isSelected, d = a.t;
  return import_react61.default.createElement(ToolsBarItemButton_default, { className: "FIE_object-removal-tool-button", id: TOOLS_IDS.OBJECT_REMOVAL, label: d("objectRemovalTool"), Icon: RemoveBrush, onClick: b, isSelected: void 0 !== c && c });
};
var ObjectRemovalButton_default = ObjectRemovalButton;

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemovalOptions.js
init_react_shim();
var import_react69 = __toESM(require_react());
var import_react_dom = __toESM(require_react_dom());
var import_konva11 = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/utils/isFunction.js
init_react_shim();
var isFunction = function(a) {
  return "function" == typeof a;
};
var isFunction_default = isFunction;

// node_modules/react-filerobot-image-editor/lib/utils/getElementOffsetPosition.js
init_react_shim();
var getElementOffsetPosition = function(a, b) {
  var c, d, e = a.evt || a;
  if (e.type.includes("touch")) {
    var f = e.touches[0] || e.changedTouches[0], g = b.getBoundingClientRect();
    c = f.clientX - g.left, d = f.clientY - g.top;
  } else c = e.offsetX, d = e.offsetY;
  return { offsetX: c, offsetY: d };
};
var getElementOffsetPosition_default = getElementOffsetPosition;

// node_modules/react-filerobot-image-editor/lib/utils/constructMaskImage.js
init_react_shim();
var import_konva10 = __toESM(require_lib());
var constructMaskImage = function(a, b) {
  var c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : "toBlob", d = new import_konva10.default.Stage({ container: document.createElement("div"), width: a.width, height: a.height, listening: false }), e = new import_konva10.default.Layer({ listening: false });
  d.add(e);
  var f = new import_konva10.default.Rect({ x: 0, y: 0, width: a.width, height: a.height, fill: "#000000", listening: false }), g = b.map(function(a2) {
    var b2 = a2.strokeWidth, c2 = void 0 === b2 ? 50 : b2, d2 = a2.stroke, e2 = void 0 === d2 ? "#ffffff" : d2, f2 = a2.tension, g2 = void 0 === f2 ? 1 : f2, h2 = a2.lineCap, i = void 0 === h2 ? "round" : h2, j = a2.lineJoin, k = void 0 === j ? "round" : j, l = a2.bezier, m = a2.points, n = void 0 === m ? [] : m;
    return new import_konva10.default.Line({ opacity: 1, stroke: e2, strokeWidth: c2, bezier: void 0 === l || l, tension: g2, lineCap: i, lineJoin: k, listening: false, closed: false, points: n });
  });
  e.add.apply(e, [f].concat(_toConsumableArray(g)));
  var h = isFunction_default(d[c]) ? d[c]() : d.toBlob();
  return d.destroy(), h;
};
var constructMaskImage_default = constructMaskImage;

// node_modules/react-filerobot-image-editor/lib/utils/getFileFullName.js
init_react_shim();
var getFileFullName = function() {
  var a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "", b = 1 < arguments.length ? arguments[1] : void 0, c = b, d = a;
  if (!c && POSSIBLE_IMAGE_TYPES.some(function(b2) {
    return a.lastIndexOf(".".concat(b2)) === a.length - ".".concat(b2).length;
  })) {
    var e, f = null === (e = a.slice(a.lastIndexOf(".") + 1)) || void 0 === e ? void 0 : e.toLowerCase();
    c = f && SUPPORTED_IMAGE_TYPES.includes(f) ? f : DEFAULT_IMAGE_TYPE, d = a.slice(0, a.lastIndexOf("."));
  }
  return c = c || DEFAULT_IMAGE_TYPE, { fullName: "".concat(d, ".").concat(c), name: d, extension: c };
};
var getFileFullName_default = getFileFullName;

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemoval.styled.js
init_react_shim();
var StyledRemoveOptionLabel = it(label_component_default).withConfig({ componentId: "sc-h2vnvw-0" })(["margin-bottom:8px;", ";"], function(a) {
  var b = a.theme.typography;
  return b.font[FontVariant.LabelExtraSmallUp];
});
var StyledBrushSizeWrapper = it.div.withConfig({ componentId: "sc-h2vnvw-1" })(["max-width:330px;min-width:200px;margin-right:16px;@media (max-width:480px){max-width:100%;width:100%;order:1;margin-right:0;}"]);
var StyledBrushCursor = it.div.attrs(function(a) {
  var b = a.$zoom, c = void 0 === b ? 1 : b, d = a.$display, e = void 0 === d ? "none" : d, f = a.$size, g = a.$x, h = a.$y;
  return { style: { transform: "translate(".concat(g, "px, ").concat(h, "px) scale(").concat(c, ", ").concat(c, ")"), display: e, width: f, height: f } };
}).withConfig({ componentId: "sc-h2vnvw-2" })(["transform-origin:center;border-radius:", ";position:absolute;top:0;left:0;margin:0;padding:0;border:2px solid rgba(255,255,255,1);outline:none;pointer-events:none;transition:width 0.1s ease-in-out,height 0.1s ease-in-out;background-color:", ";z-index:1111;"], function(a) {
  var b = a.$isSquareBrushType;
  return b ? "4px" : "50%";
}, function(a) {
  var b = a.$isHighlightMode, c = a.theme.palette;
  return b ? c[Color.Accent_0_7_Opacity] : c[Color.Extra_0_7_Overlay];
});
var StyledRemoveObjectOptionsWrapper = it.div.withConfig({ componentId: "sc-h2vnvw-3" })(["display:flex;align-items:flex-end;@media (max-width:480px){flex-wrap:wrap;}"]);
var StyledBrushModeWrapper = it.div.withConfig({ componentId: "sc-h2vnvw-4" })(["align-self:stretch;"]);
var StyledButtonsWrapper = it.div.withConfig({ componentId: "sc-h2vnvw-5" })(["display:flex;align-items:center;gap:8px;"]);
var StyledIconButton = it(icon_button_component_default).withConfig({ componentId: "sc-h2vnvw-6" })(["width:", ";height:", ";", ";svg{flex-shrink:0;color:", ";}"], function(a) {
  var b = a.$width;
  return b || "32px";
}, function(a) {
  var b = a.$height;
  return b || "32px";
}, function(a) {
  var b = a.$margin;
  return b && "margin: ".concat(b);
}, function(a) {
  var b = a.theme.palette, c = a.active;
  return c && b[Color.AccentStateless];
});
var StyledMenuPopup = it(menu_component_default).withConfig({ componentId: "sc-h2vnvw-7" })([".SfxMenuItem-root{align-items:flex-start;}"]);
var StyledActiveMenuItem = it(menu_item_icon_component_default).withConfig({ componentId: "sc-h2vnvw-8" })(["margin-right:0;svg{color:", ";}"], function(a) {
  var b = a.theme.palette;
  return b[Color.AccentStateless];
});
var StyledMenuArrow = it(ArrowBottom).withConfig({ componentId: "sc-h2vnvw-9" })(["transform:rotate(", "deg);transition:transform 0.1s ease-in-out;"], function(a) {
  var b = a.$rotate, c = void 0 === b ? 0 : b;
  return c;
});
var StyledApplyButton = it(button_component_default).withConfig({ componentId: "sc-h2vnvw-10" })(["height:32px;.SfxButton-StartIcon{margin-right:6px;}"]);

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemovalBrushType.js
init_react_shim();
var import_react62 = __toESM(require_react());
var ObjectRemovalBrushType = function(a) {
  var b = a.isSquareBrushType, c = a.setIsSquareBrushType, d = a.t, e = (0, import_react62.useState)(null), f = _slicedToArray(e, 2), g = f[0], h = f[1];
  return React.createElement(React.Fragment, null, React.createElement(StyledIconButton, { onClick: function() {
    c(function(a2) {
      return !a2;
    });
  }, size: "sm", "data-testid": "FIE-object-removal-tool-brush-square-type-toggle", color: "base", $margin: "0 2px 0 24px" }, b ? React.createElement(Square, { size: 20 }) : React.createElement(Circle, { size: 20 })), React.createElement(StyledIconButton, { onClick: function(a2) {
    return h(g ? null : a2.currentTarget);
  }, size: "sm", "data-testid": "FIE-object-removal-tool-brush-square-type-menu-trigger", active: !!g, color: "base", $width: "16px", $height: "100%", $margin: "0 16px 0 0" }, React.createElement(StyledMenuArrow, { size: 12, $rotate: g ? 180 : 0 })), React.createElement(StyledMenuPopup, { onClose: function() {
    return h(null);
  }, anchorEl: g, position: "top", open: !!g, "data-testid": "FIE-object-removal-tool-brush-square-type-menu" }, React.createElement(menu_item_component_default, { onClick: function() {
    return c(false);
  }, active: !b }, React.createElement(menu_item_icon_component_default, null, React.createElement(Circle, { size: 14 })), React.createElement(menu_item_label_component_default, null, d("objectRemovalBrushCircleType")), !b && React.createElement(StyledActiveMenuItem, null, React.createElement(Tick, { size: 14 }))), React.createElement(menu_item_component_default, { onClick: function() {
    return c(true);
  }, active: b }, React.createElement(menu_item_icon_component_default, null, React.createElement(Square, { size: 14 })), React.createElement(menu_item_label_component_default, null, d("objectRemovalBrushSquareType")), b && React.createElement(StyledActiveMenuItem, null, React.createElement(Tick, { size: 14 })))));
};
var ObjectRemovalBrushType_default = ObjectRemovalBrushType;

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemovalBrushMode.js
init_react_shim();
var ObjectRemovalBrushMode = function(a) {
  var b = a.t, c = a.isHighlightMode, d = a.setIsHighlightMode;
  return React.createElement(StyledBrushModeWrapper, null, React.createElement(StyledRemoveOptionLabel, { size: "sm" }, b("objectRemovalBrushMode")), React.createElement(StyledButtonsWrapper, null, React.createElement(tooltip_v2_component_default, { title: b("objectRemovalMarkModeTooltip"), size: "md" }, React.createElement(StyledIconButton, { onClick: function() {
    return d(true);
  }, size: "sm", "data-testid": "FIE-object-removal-tool-brush-mode-toggle", active: c, color: "base" }, React.createElement(BrushOutline, { size: 20 }))), React.createElement(tooltip_v2_component_default, { title: b("objectRemovalUnMarkModeTooltip"), size: "md" }, React.createElement(StyledIconButton, { onClick: function() {
    return d(false);
  }, size: "sm", "data-testid": "FIE-object-removal-tool-brush-mode-toggle", active: !c, color: "base" }, React.createElement(EraserOutline, { size: 20 })))));
};
var ObjectRemovalBrushMode_default = ObjectRemovalBrushMode;

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemovalBrushSize.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/common/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/common/Separator/index.js
init_react_shim();
var import_react63 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/Separator/Separator.styled.js
init_react_shim();
var StyledSeparator = it.div.withConfig({ componentId: "sc-etsyb6-0" })(["display:inline-block;height:", ";width:", ";border-radius:1px;background:", ";"], function(a) {
  return a.height;
}, function(a) {
  return a.width;
}, function(a) {
  var b = a.theme.palette;
  return b[Color.BordersSecondary];
});

// node_modules/react-filerobot-image-editor/lib/components/common/Separator/index.js
var Separator = function(a) {
  var b = a.height, c = void 0 === b ? "24px" : b, d = a.width, e = void 0 === d ? "1px" : d;
  return import_react63.default.createElement(StyledSeparator, { height: c, width: e });
};
var Separator_default = Separator;

// node_modules/react-filerobot-image-editor/lib/components/common/Spinner/index.js
init_react_shim();
var import_react68 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/Spinner/Spinner.styled.js
init_react_shim();
var spin = ut(["to{transform:rotate(360deg);}"]);
var StyledSpinnerWrapper = it.div.withConfig({ componentId: "sc-m42fbk-0" })(["background:rgba(255,255,255,0.78);display:flex;align-items:center;justify-content:center;position:absolute;z-index:11111;top:0;bottom:0;right:0;left:0;flex-direction:column;user-select:none;gap:12px;"]);
var StyledSpinnerCancelButton = it(button_component_default).withConfig({ componentId: "sc-m42fbk-1" })(["margin-top:4px;"]);
var StyledSpinner = it(Loading).withConfig({ componentId: "sc-m42fbk-2" })(["animation:", " 1.2s infinite;"], spin);

// node_modules/react-filerobot-image-editor/lib/components/common/ConfirmationModals/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/common/ConfirmationModals/ConfirmationModal.js
init_react_shim();
var import_react65 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/Modal/index.js
init_react_shim();
var import_react64 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/common/Modal/Modal.styled.js
init_react_shim();
var StyledModal = it(modal_component_default).withConfig({ componentId: "sc-kpjpf5-0" })(["width:", ";max-width:unset;"], function(a) {
  var b = a.width;
  return b || "300px";
});
var StyledModalTitle = it(modal_title_component_default).withConfig({ componentId: "sc-kpjpf5-1" })(function(a) {
  var b = a.theme, c = a.isWarning, d = a.isError;
  return ot(["padding-bottom:0;.SfxModalTitle-Icon{background-color:", ";}.SfxModalTitle-LabelPrimary{margin-bottom:24px;", ";}.SfxModalTitle-LabelSecondary{margin-top:0;", ";text-align:center;}"], c && b.palette[Color.Orange_0_1_Overlay] || d && b.palette[Color.Error_0_12_Opacity], b.typography.font[FontVariant.TitleH3], b.typography.font[FontVariant.TextLarge]);
});
var StyledModalActions = it(modal_actions_component_default).withConfig({ componentId: "sc-kpjpf5-2" })(["gap:12px;padding:24px;.SfxButton-root{flex:1;margin:0;height:40px;}"]);

// node_modules/react-filerobot-image-editor/lib/components/common/Modal/index.js
var Modal = function(a) {
  var b = a.title, c = a.hint, d = a.Icon, f = a.onDone, g = a.onCancel, h = a.doneLabel, i = void 0 === h ? "Yes" : h, j = a.cancelLabel, k = void 0 === j ? "No" : j, l = a.isOpened, m = a.doneButtonStyle, n = a.doneButtonColor, o = void 0 === n ? "basic" : n, p = a.cancelButtonColor, q = void 0 === p ? "basic" : p, r = a.children, s = a.areButtonsDisabled, t = void 0 !== s && s, u = a.zIndex, v = a.className, w = a.width, x = a.isWarning, y = void 0 !== x && x, z = a.isError;
  return import_react64.default.createElement(StyledModal, { "data-testid": "FIE-modal-container", className: v, open: void 0 !== l && l, onClose: g, style: { zIndex: u }, onKeyUp: function(a2) {
    return "Enter" === a2.key ? (a2.preventDefault(), a2.stopPropagation(), void f(a2)) : void ("Escape" === a2.key && (a2.preventDefault(), a2.stopPropagation(), g(a2)));
  }, width: w, role: "dialog", tabIndex: -1, "aria-modal": "true", "aria-label": b }, import_react64.default.createElement(StyledModalTitle, { "data-testid": "FIE-modal-title", icon: import_react64.default.createElement(d, { size: 25 }), iconShadow: true, isWarning: y, isError: void 0 !== z && z, onClose: g, primary: b, secondary: c, variant: "with-icon" }), r && import_react64.default.createElement(modal_content_component_default, { "data-testid": "FIE-modal-content" }, r), import_react64.default.createElement(StyledModalActions, { "data-testid": "FIE-modal-actions", align: "center" }, import_react64.default.createElement(button_component_default, { "data-testid": "FIE-modal-cancel-button", color: q, onClick: g, size: "md", disabled: t }, k), import_react64.default.createElement(button_component_default, { "data-testid": "FIE-modal-confirm-button", color: o, onClick: f, size: "md", warning: y, style: m, disabled: t }, i)));
};
var Modal_default = Modal;

// node_modules/react-filerobot-image-editor/lib/components/common/ConfirmationModals/ConfirmationModal.js
var WarningIcon = function() {
  var a = useTheme();
  return import_react65.default.createElement(Warning, { color: a.palette.warning, size: 25 });
};
var ConfirmationModal = function(a) {
  var b = a.children, c = a.eventName, d = void 0 === c ? "onClick" : c, e = a.onEventName, f = a.onClick, g = a.icon, h = a.doneButtonLabel, i = a.doneButtonColor, j = void 0 === i ? "warning-primary" : i, k = a.onConfirm, l = a.title, m = a.hint, n = useStore_default(), o = n.t, p = (0, import_react65.useState)(false), q = _slicedToArray(p, 2), r = q[0], s = q[1], t = function() {
    s(false);
  };
  return import_react65.default.createElement(import_react65.default.Fragment, null, import_react65.default.cloneElement(b, _defineProperty({}, d, e || function() {
    s(true), "function" == typeof f && f();
  })), r && import_react65.default.createElement(Modal_default, { title: l || o("discardChanges"), hint: m || o("discardChangesWarningHint"), isOpened: r, onCancel: t, onDone: function() {
    if ("function" == typeof k) {
      var a2 = k();
      if (a2 instanceof Promise) return void a2.then(t);
    }
    t();
  }, Icon: g || WarningIcon, doneLabel: h || o("confirm"), doneButtonColor: j, cancelLabel: o("cancel"), width: "400px", isWarning: true }));
};
var ConfirmationModal_default = ConfirmationModal;

// node_modules/react-filerobot-image-editor/lib/components/common/ConfirmationModals/DiscardConfirmationModal.js
init_react_shim();
var import_react66 = __toESM(require_react());
var DiscardConfirmationModal = function(a) {
  var b = a.children, c = a.onDiscard, d = a.eventName, e = void 0 === d ? "onClick" : d, f = a.discardReason, g = useStore_default(), h = g.t, i = g.config, j = g.dispatch, k = g.haveNotSavedChanges, l = g.isResetted, m = g.config, n = m.onClose, o = m.onBack, p = function() {
    var a2 = c || n || o;
    if ("function" == typeof a2) {
      var b2 = f || n && CLOSING_REASONS.CLOSE_BUTTON || o && CLOSING_REASONS.BACK_BUTTON;
      a2(b2 || "", k);
    }
    j({ type: RESET, payload: { config: i } });
  };
  return import_react66.default.createElement(ConfirmationModal_default, { title: h("discardChanges"), hint: h("discardChangesWarningHint"), eventName: e, onEventName: !(void 0 !== l) || l ? p : void 0, onConfirm: p }, b);
};
var DiscardConfirmationModal_default = DiscardConfirmationModal;

// node_modules/react-filerobot-image-editor/lib/components/common/ConfirmationModals/ResetConfirmationModal.js
init_react_shim();
var import_react67 = __toESM(require_react());
var ResetConfirmationModal = function(a) {
  var b = a.children, c = a.eventName, d = void 0 === c ? "onClick" : c, e = useStore_default(), f = e.t, g = useManageHistoryState_default(), h = g.reset;
  return import_react67.default.createElement(ConfirmationModal_default, { title: f("warning"), hint: f("discardChangesWarningHint"), onConfirm: h, eventName: d }, b);
};
var ResetConfirmationModal_default = ResetConfirmationModal;

// node_modules/react-filerobot-image-editor/lib/components/common/Spinner/index.js
var Spinner = function(a) {
  var b = a.loadingData, c = a.theme, d = a.t, e = b || {}, f = e.isLoadingGlobally, g = e.text, h = e.cancelFn, i = e.useCancelConfirmationModal, j = e.confirmationTitle, k = e.confirmationHint;
  return f ? import_react68.default.createElement(StyledSpinnerWrapper, { "data-testid": "FIE-spinner-wrapper", className: "FIE_spinner-wrapper" }, import_react68.default.createElement(StyledSpinner, { "data-testid": "FIE-spinner", size: 50, color: c.palette[Color.AccentStateless] }), g && import_react68.default.createElement(label_component_default, { size: "lg" }, g), isFunction_default(h) && (i ? import_react68.default.createElement(ConfirmationModal_default, { title: j, hint: k, onConfirm: h }, import_react68.default.createElement(StyledSpinnerCancelButton, { onClick: h, size: "md", "data-testid": "FIE-spinner-cancel-button" }, d("cancel"))) : import_react68.default.createElement(StyledSpinnerCancelButton, { onClick: h, size: "md", "data-testid": "FIE-spinner-cancel-button" }, d("cancel")))) : null;
};
var Spinner_default = Spinner;

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemovalBrushSize.js
var ObjectRemovalBrushSize = function(a) {
  var b = a.t, c = a.minSize, d = a.maxSize, e = a.brushSize, f = a.changeBrushSize;
  return React.createElement(StyledBrushSizeWrapper, { "data-testid": "FIE-object-removal-tool-brush-size-option" }, React.createElement(StyledRemoveOptionLabel, { size: "sm" }, b("objectRemovalBrushSize")), React.createElement(StyledSliderWrapper, null, React.createElement(Slider_default, { "data-testid": "FIE-object-removal-tool-brush-size-slider", annotation: "px", min: c, max: d, onChange: f, value: +e, width: "100%", noMargin: true }), React.createElement(StyledSliderInput, { "data-testid": "FIE-object-removal-tool-brush-size-input", value: e, onChange: function(a2) {
    var b2 = a2.target.value;
    return f(b2);
  } })));
};
var ObjectRemovalBrushSize_default = ObjectRemovalBrushSize;

// node_modules/react-filerobot-image-editor/lib/components/tools/ObjectRemoval/ObjectRemovalOptions.js
var _excluded3 = ["onSubmitDraw"];
function ownKeys17(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread17(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys17(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys17(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var cursorTimeout = null;
var getObjectPathPoints = function(a) {
  var b = a.attrs, c = a.position, d = a.strokeWidth;
  return { points: (b.points || []).concat(c), strokeWidth: d || b.strokeWidth };
};
var MASK_STROKE = "rgba(104, 121, 235)";
var UNMASK_STROKE = "#000000";
var DEFAULT_OPACITY = 0.7;
var getDrawInstance = function(a) {
  var b = a.toolConfig, c = a.drawInstanceConfig, d = a.isHighlightMode, e = a.isSquareBrushType;
  return new import_konva11.default.Line(_objectSpread17(_objectSpread17(_objectSpread17({}, b), c), {}, { lineJoin: e ? "bevel" : "round", lineCap: e ? "square" : "round", tension: e ? 0 : b.tension || 1, bezier: !e && (b.bezier || true), id: randomId_default(TOOLS_IDS.OBJECT_REMOVAL), name: TOOLS_IDS.OBJECT_REMOVAL, points: [], stroke: d ? MASK_STROKE : UNMASK_STROKE, opacity: d ? (null === b || void 0 === b ? void 0 : b.opacity) || DEFAULT_OPACITY : 1, globalCompositeOperation: d ? "source-over" : "destination-out", listening: false }));
};
var ObjectRemovalOptions = function(a) {
  var b = a.t, c = a.renderCustomOptionsChildren, d = a.onSubmitDraw, e = a.minSize, f = void 0 === e ? 1 : e, g = a.maxSize, h = void 0 === g ? 300 : g, i = a.drawInstanceConfig, j = void 0 === i ? {} : i, k = useDispatch_default(), l = useStore_default(), m = l.designLayer, n = l.config, o = l.zoom, p = void 0 === o ? {} : o, q = p.factor, r = l.shownImageDimensions, s = void 0 === r ? {} : r, t = s.originalSourceInitialScale, u = l.originalSource, v = n || {}, w = v.defaultSavedImageName, x = v[TOOLS_IDS.OBJECT_REMOVAL], y = void 0 === x ? {} : x, z = y.onSubmitDraw, A = _objectWithoutProperties(y, _excluded3), B = (0, import_react69.useState)(true), C = _slicedToArray(B, 2), D = C[0], E = C[1], F = (0, import_react69.useState)([]), G = _slicedToArray(F, 2), H = G[0], I = G[1], J = (0, import_react69.useState)(A.strokeWidth || f), K = _slicedToArray(J, 2), L = K[0], M = K[1], N = (0, import_react69.useState)(false), O = _slicedToArray(N, 2), P = O[0], Q = O[1], R = 0 < H.length, S = useSetOriginalSource_default({ resetOnSourceChange: false, keepZoomOnSourceChange: true }), T = (0, import_react69.useRef)(null), U = (0, import_react69.useState)({ x: 0, y: 0, display: "none" }), V = _slicedToArray(U, 2), W = V[0], X = V[1], Y = (0, import_react69.useMemo)(function() {
    var a2;
    return null === m || void 0 === m || null === (a2 = m.getStage()) || void 0 === a2 ? void 0 : a2.getContainer();
  }, [m]), Z = d || z, $ = function() {
    X(function(a2) {
      return _objectSpread17(_objectSpread17({}, a2), {}, { display: "none" });
    });
  }, _ = (0, import_react69.useCallback)(function() {
    var a2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b2 = a2.x, c2 = a2.y;
    clearTimeout(cursorTimeout);
    var d2 = { display: "block" };
    b2 && c2 && ![b2, c2].includes(0) && (d2.x = b2, d2.y = c2), X(function(a3) {
      return _objectSpread17(_objectSpread17({}, a3), d2);
    });
  }, []), aa = (0, import_react69.useCallback)(function(a2) {
    var b2 = a2.event;
    if (b2.evt) {
      var c2 = getElementOffsetPosition_default(b2, Y), d2 = c2.offsetX, e2 = c2.offsetY, f2 = d2 - parseInt(T.current.style.width, 10) / 2, g2 = e2 - parseInt(T.current.style.height, 10) / 2;
      _({ x: f2, y: g2 });
    }
  }, [_]), ba = useDrawPreviewByPointer_default({ createNewDrawInstance: function(a2) {
    return getDrawInstance({ toolConfig: A, drawInstanceConfig: _objectSpread17(_objectSpread17({}, j), a2), isHighlightMode: D, isSquareBrushType: P });
  }, onPointerMove: aa, onPointerStart: function(a2) {
    return getObjectPathPoints(_objectSpread17(_objectSpread17({}, a2), {}, { strokeWidth: L }));
  }, onHoldPointerMove: getObjectPathPoints, onPointerReleased: function(a2) {
    var b2 = a2.attrs;
    0 < b2.points.length && I(function(a3) {
      return [].concat(_toConsumableArray(a3), [b2]);
    });
  }, onPointerLeaveCanvas: $, dontResetPreview: true }), ca = ba.tmpDrawAttrs, da = ba.setIsDisabled, ea = ba.resetTmpDrawInstance, fa = function(a2) {
    var b2 = +a2;
    if (0 == b2) return void M("");
    if (!(Number.isNaN(b2) || b2 > h)) {
      M(b2);
      var c2 = Y.offsetWidth, d2 = Y.offsetHeight;
      _({ x: c2 / 2 - b2 / 2, y: d2 / 2 - b2 / 2 }), cursorTimeout = setTimeout(function() {
        $();
      }, 1e3);
    }
  }, ga = function() {
    if (R) {
      var a2 = isFunction_default(Z), c2 = new AbortController(), d2 = getFileFullName_default(w || u.name), e2 = d2.name;
      k({ type: SHOW_LOADER, payload: { text: b("objectRemovalApplyingText"), cancelFn: a2 ? function() {
        return c2.abort("ui-cancelled");
      } : null, useCancelConfirmationModal: true, confirmationTitle: b("objectRemovalCancelConfirmationTitle"), confirmationHint: "".concat(b("objectRemovalCancelConfirmationHint"), " ").concat(e2 ? "".concat(e2, "") : b("theKeyword"), " ").concat(b("objectRemovalCancelConfirmationHintCompletion")) } }), da(true), $(), a2 ? Promise.resolve(Z({ attrs: _objectSpread17({}, ca), updateOriginalSourceFns: S, appStore: l, setIsDisabled: da, resetTmpDrawInstance: ea, objectPathsAttrs: H, originalSource: u, cancellationSignal: c2.signal, cancelFn: function() {
        var a3 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : void 0;
        return c2.abort(a3);
      }, getMaskedImage: function() {
        var a3 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : "toBlob";
        return constructMaskImage_default(u, H, a3);
      } }))["finally"](function() {
        da(false), k({ type: HIDE_LOADER }), _(), ea(_objectSpread17(_objectSpread17({}, H[H.length - 1]), {}, { points: [] })), I([]);
      }) : (da(false), k({ type: HIDE_LOADER }), _(), ea(_objectSpread17(_objectSpread17({}, H[H.length - 1]), {}, { points: [] })), I([]));
    }
  };
  return import_react69.default.createElement(import_react69.default.Fragment, null, Y && (0, import_react_dom.createPortal)(import_react69.default.createElement(StyledBrushCursor, { $size: L, $zoom: q * t, $display: W.display, $x: W.x, $y: W.y, $isSquareBrushType: P, $isHighlightMode: D, ref: T, "data-testid": "FIE-object-removal-tool-brush-cursor" }), Y), function() {
    return isFunction_default(c) ? c(_objectSpread17(_objectSpread17({}, ba), {}, { changeBrushSize: fa })) : import_react69.default.createElement(StyledRemoveObjectOptionsWrapper, { "data-testid": "FIE-object-removal-brush-mode-toggle" }, import_react69.default.createElement(ObjectRemovalBrushMode_default, { isHighlightMode: D, setIsHighlightMode: E, t: b }), import_react69.default.createElement(ObjectRemovalBrushType_default, { isSquareBrushType: P, setIsSquareBrushType: Q, t: b }), import_react69.default.createElement(ObjectRemovalBrushSize_default, { t: b, minSize: f, maxSize: h, brushSize: L, changeBrushSize: fa }), import_react69.default.createElement(StyledApplyButton, { onClick: ga, size: "sm", "data-testid": "FIE-object-removal-tool-apply-button", startIcon: import_react69.default.createElement(Shine, null), disabled: !R, color: "secondary" }, b("objectRemovalApplyButton")));
  }());
};
var ObjectRemovalOptions_default = ObjectRemovalOptions;

// node_modules/react-filerobot-image-editor/lib/components/tools/tools.constants.js
var _TOOLS_ITEMS;
var TOOLS_ITEMS = (_TOOLS_ITEMS = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_TOOLS_ITEMS, TOOLS_IDS.CROP, { id: TOOLS_IDS.CROP, Item: Crop_default }), TOOLS_IDS.ROTATE, { id: TOOLS_IDS.ROTATE, Item: RotateButton_default, ItemOptions: RotateOptions_default }), TOOLS_IDS.FLIP_X, { id: TOOLS_IDS.FLIP_X, Item: FlipX_default }), TOOLS_IDS.FLIP_Y, { id: TOOLS_IDS.FLIP_Y, Item: FlipY_default }), TOOLS_IDS.BRIGHTNESS, { id: TOOLS_IDS.BRIGHTNESS, Item: Brightness_default, ItemOptions: BrightnessOptions_default }), TOOLS_IDS.CONTRAST, { id: TOOLS_IDS.CONTRAST, Item: Contrast_default, ItemOptions: ContrastOptions_default }), TOOLS_IDS.HSV, { id: TOOLS_IDS.HSV, Item: HSV_default, ItemOptions: HSVOptions_default, hideFn: function(a) {
  var b = a.useCloudimage;
  return b;
} }), TOOLS_IDS.BLUR, { id: TOOLS_IDS.BLUR, Item: Blur_default, ItemOptions: BlurOptions_default }), TOOLS_IDS.WARMTH, { id: TOOLS_IDS.WARMTH, Item: Warmth_default2, ItemOptions: WarmthOptions_default, hideFn: function(a) {
  var b = a.useCloudimage;
  return b;
} }), TOOLS_IDS.FILTERS, { id: TOOLS_IDS.FILTERS, Item: Filters_default }), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_TOOLS_ITEMS, TOOLS_IDS.WATERMARK, { id: TOOLS_IDS.WATERMARK, Item: Watermark_default }), TOOLS_IDS.TEXT, { id: TOOLS_IDS.TEXT, Item: TextButton_default, ItemOptions: TextOptions_default }), TOOLS_IDS.IMAGE, { id: TOOLS_IDS.IMAGE, Item: ImageButton_default, ItemOptions: ImageOptions_default }), TOOLS_IDS.RECT, { id: TOOLS_IDS.RECT, Item: RectButton_default, ItemOptions: RectOptions_default }), TOOLS_IDS.POLYGON, { id: TOOLS_IDS.POLYGON, Item: PolygonButton_default, ItemOptions: PolygonOptions_default }), TOOLS_IDS.ELLIPSE, { id: TOOLS_IDS.ELLIPSE, Item: EllipseButton_default, ItemOptions: EllipseOptions_default }), TOOLS_IDS.PEN, { id: TOOLS_IDS.PEN, Item: PenButton_default, ItemOptions: PenOptions_default }), TOOLS_IDS.LINE, { id: TOOLS_IDS.LINE, Item: LineButton_default, ItemOptions: LineOptions_default }), TOOLS_IDS.ARROW, { id: TOOLS_IDS.ARROW, Item: ArrowButton_default, ItemOptions: ArrowOptions_default }), TOOLS_IDS.RESIZE, { id: TOOLS_IDS.RESIZE, Item: Resize_default }), _defineProperty(_TOOLS_ITEMS, TOOLS_IDS.OBJECT_REMOVAL, { id: TOOLS_IDS.OBJECT_REMOVAL, Item: ObjectRemovalButton_default, ItemOptions: ObjectRemovalOptions_default }));
var TABS_TOOLS = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, TABS_IDS.ADJUST, [TOOLS_IDS.CROP, TOOLS_IDS.ROTATE, TOOLS_IDS.FLIP_X, TOOLS_IDS.FLIP_Y]), TABS_IDS.FINETUNE, [TOOLS_IDS.BRIGHTNESS, TOOLS_IDS.CONTRAST, TOOLS_IDS.HSV, TOOLS_IDS.BLUR, TOOLS_IDS.WARMTH]), TABS_IDS.FILTERS, [TOOLS_IDS.FILTERS]), TABS_IDS.WATERMARK, [TOOLS_IDS.WATERMARK]), TABS_IDS.ANNOTATE, [TOOLS_IDS.TEXT, TOOLS_IDS.IMAGE, TOOLS_IDS.RECT, TOOLS_IDS.ELLIPSE, TOOLS_IDS.POLYGON, TOOLS_IDS.PEN, TOOLS_IDS.LINE, TOOLS_IDS.ARROW]), TABS_IDS.RESIZE, [TOOLS_IDS.RESIZE]), TABS_IDS.AI, [TOOLS_IDS.OBJECT_REMOVAL]);
var DRAW_TOOLS = [].concat(_toConsumableArray(TABS_TOOLS[TABS_IDS.ANNOTATE]), _toConsumableArray(TABS_TOOLS[TABS_IDS.AI]));

// node_modules/react-filerobot-image-editor/lib/utils/isDrawTool.js
init_react_shim();
var isDrawTool = function(a) {
  return DRAW_TOOLS.includes(a);
};
var isDrawTool_default = isDrawTool;

// node_modules/react-filerobot-image-editor/lib/actions/selectTab.js
function ownKeys18(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread18(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys18(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys18(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SELECT_TAB = "SELECT_TAB";
var selectTab = function(a, b) {
  var c = a.tabId === b.tabId, d = c ? null : b.tabId, e = d ? TABS_TOOLS[d][0] : null;
  return _objectSpread18(_objectSpread18({}, a), {}, { tabId: d, toolId: e, selectionsIds: [], pointerCssIcon: d === TABS_IDS.ANNOTATE || isDrawTool_default(e) ? POINTER_ICONS.DRAW : POINTER_ICONS.DEFAULT });
};
var selectTab_default = selectTab;

// node_modules/react-filerobot-image-editor/lib/actions/undo.js
init_react_shim();
function ownKeys19(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread19(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys19(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys19(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var UNDO = "UNDO";
var undo = function(a) {
  if (a.pastDesignStates && 0 < a.pastDesignStates.length) {
    var b = extractCurrentDesignState_default(a), c = _toArray(a.pastDesignStates), d = c[0], e = c.slice(1), f = [b].concat(_toConsumableArray(a.futureDesignStates || []));
    return _objectSpread19(_objectSpread19(_objectSpread19({}, a), d), {}, { selectionsIds: [], pastDesignStates: e, futureDesignStates: f, hasUndo: 0 < e.length, hasRedo: true, haveNotSavedChanges: 0 < e.length });
  }
  return a;
};
var undo_default2 = undo;

// node_modules/react-filerobot-image-editor/lib/actions/setFinetune.js
init_react_shim();
function ownKeys20(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread20(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys20(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys20(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_FINETUNE = "SET_FINETUNE";
var setFinetune = function(a, b) {
  return _objectSpread20(_objectSpread20({}, a), {}, { isDesignState: !b.dismissHistory, finetunes: !b.finetune || a.finetunes.includes(b.finetune) ? a.finetunes : [].concat(_toConsumableArray(a.finetunes), [b.finetune]), finetunesProps: _objectSpread20(_objectSpread20({}, a.finetunesProps), b.finetuneProps) });
};
var setFinetune_default = setFinetune;

// node_modules/react-filerobot-image-editor/lib/actions/setAnnotation.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/emitCustomEvent.js
init_react_shim();
var emitCustomEvent = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};
  setTimeout(function() {
    var c = new CustomEvent(a, { detail: b });
    window.dispatchEvent(c);
  }, 0);
};
var emitCustomEvent_default = emitCustomEvent;

// node_modules/react-filerobot-image-editor/lib/actions/setAnnotation.js
var _excluded4 = ["dismissHistory", "replaceCurrent", "selectOnSet", "onAnnotationAdd"];
function ownKeys21(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread21(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys21(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys21(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_ANNOTATION = "SET_ANNOTATION";
var setAnnotation = function(a) {
  var b, c = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, d = c.dismissHistory, e = c.replaceCurrent, f = void 0 !== e && e, g = c.selectOnSet, h = c.onAnnotationAdd, i = _objectWithoutProperties(c, _excluded4), j = null !== (b = i.id) && void 0 !== b ? b : randomId_default(i.name), k = a.annotations[j] || {}, l = 0 === Object.keys(k).length, m = _objectSpread21(_objectSpread21({}, i), {}, { id: j });
  if ((f || l) && "function" == typeof h) {
    var n = h(m, a);
    m = _objectSpread21(_objectSpread21({}, m), n);
  }
  if (k && !Object.keys(m).some(function(a2) {
    return "undefined" != typeof m[a2] && m[a2] !== k[a2];
  })) return a;
  var o = _objectSpread21(_objectSpread21({}, f ? {} : k), m);
  return emitCustomEvent_default(l ? EVENTS.ANNOTATION_ADD : EVENTS.ANNOTATION_EDIT, { annotation: o }), _objectSpread21(_objectSpread21({}, a), {}, { isDesignState: !(void 0 !== d && d), annotationIds: l ? [].concat(_toConsumableArray(a.annotationIds), [o.id]) : a.annotationIds, annotations: _objectSpread21(_objectSpread21({}, a.annotations), {}, _defineProperty({}, o.id, o)), selectionsIds: void 0 !== g && g ? [o.id] : a.selectionsIds });
};
var setAnnotation_default = setAnnotation;

// node_modules/react-filerobot-image-editor/lib/actions/changePointerIcon.js
init_react_shim();
function ownKeys22(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread22(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys22(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys22(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var CHANGE_POINTER_ICON = "CHANGE_POINTER_ICON";
var changingPointerIcon = function(a, b) {
  return a.pointerCssIcon === b.pointerCssIcon ? a : _objectSpread22(_objectSpread22({}, a), {}, { pointerCssIcon: b.pointerCssIcon });
};
var changePointerIcon_default = changingPointerIcon;

// node_modules/react-filerobot-image-editor/lib/actions/selectAnnotation.js
init_react_shim();
function ownKeys23(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread23(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys23(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys23(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SELECT_ANNOTATION = "SELECT_ANNOTATION";
var selectAnnotation = function(a, b) {
  if (1 === a.selectionsIds.length && a.selectionsIds[0] === b.annotationId) return a;
  var c;
  if (b.multiple) {
    c = a.selectionsIds.filter(function(a2) {
      return a2 !== b.annotationId;
    });
    var d = c.length !== a.selectionsIds.length;
    d || c.push(b.annotationId);
  } else c = [b.annotationId];
  return emitCustomEvent_default(EVENTS.ANNOTATIONS_SELECT, { ids: c }), _objectSpread23(_objectSpread23({}, a), {}, { textIdOfEditableContent: b.keepTextEditing ? a.textIdOfEditableContent : null, selectionsIds: c, toolId: b.toolId || a.toolId });
};
var selectAnnotation_default = selectAnnotation;

// node_modules/react-filerobot-image-editor/lib/actions/clearAnnotationsSelections.js
init_react_shim();
function ownKeys24(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread24(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys24(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys24(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var CLEAR_ANNOTATIONS_SELECTIONS = "CLEAR_ANNOTATIONS_SELECTIONS";
var clearAnnotationsSelections = function(a) {
  return 0 === a.selectionsIds.length ? a : (emitCustomEvent_default(EVENTS.ANNOTATIONS_DESELECT), _objectSpread24(_objectSpread24({}, a), {}, { selectionsIds: [] }));
};
var clearAnnotationsSelections_default = clearAnnotationsSelections;

// node_modules/react-filerobot-image-editor/lib/actions/toggleOriginalImageDisplay.js
init_react_shim();
function ownKeys25(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread25(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys25(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys25(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var TOGGLE_ORIGINAL_IMAGE_DISPLAY = "TOGGLE_ORIGINAL_IMAGE_DISPLAY";
var toggleOriginalImageDisplay = function(a, b) {
  return _objectSpread25(_objectSpread25({}, a), {}, { isShowOriginalImage: b.isShow });
};
var toggleOriginalImageDisplay_default = toggleOriginalImageDisplay;

// node_modules/react-filerobot-image-editor/lib/actions/selectTool.js
init_react_shim();
function ownKeys26(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread26(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys26(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys26(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SELECT_TOOL = "SELECT_TOOL";
var selectTool = function(a, b) {
  return a.toolId === b.toolId ? a : _objectSpread26(_objectSpread26({}, a), {}, { toolId: b.toolId, selectionsIds: b.keepSelections ? a.selectionsIds : [], pointerCssIcon: isDrawTool_default(b.toolId) ? POINTER_ICONS.DRAW : POINTER_ICONS.DEFAULT });
};
var selectTool_default = selectTool;

// node_modules/react-filerobot-image-editor/lib/actions/toggleFlip.js
init_react_shim();
function ownKeys27(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread27(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys27(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys27(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var TOGGLE_FLIP = "TOGGLE_FLIP";
var toggleFlip = function(a, b) {
  var c = "isFlipped".concat(b.direction === FLIP_DIRECTIONS.X ? "X" : "Y");
  return _objectSpread27(_objectSpread27({}, a), {}, { isDesignState: !b.dismissHistory, adjustments: _objectSpread27(_objectSpread27({}, a.adjustments), {}, _defineProperty({}, c, !a.adjustments[c])) });
};
var toggleFlip_default = toggleFlip;

// node_modules/react-filerobot-image-editor/lib/actions/setCrop.js
init_react_shim();
function ownKeys28(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread28(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys28(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys28(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_CROP = "SET_CROP";
var setCrop = function(a, b) {
  var c, d, e, f, g, h, i, j = null !== (c = a.adjustments.crop) && void 0 !== c ? c : {}, k = { x: null !== (d = toPrecisedFloat_default(b.x)) && void 0 !== d ? d : j.x, y: null !== (e = toPrecisedFloat_default(b.y)) && void 0 !== e ? e : j.y, ratio: "string" == typeof b.ratio ? b.ratio : null !== (f = toPrecisedFloat_default(b.ratio)) && void 0 !== f ? f : j.ratio, width: null !== (g = toPrecisedFloat_default(b.width)) && void 0 !== g ? g : j.width, height: null !== (h = toPrecisedFloat_default(b.height)) && void 0 !== h ? h : j.height, ratioTitleKey: null !== (i = b.ratioTitleKey) && void 0 !== i ? i : j.ratioTitleKey, ratioGroupKey: b.ratioGroupKey, ratioFolderKey: b.ratioFolderKey, noEffect: b.noEffect };
  return _objectSpread28(_objectSpread28({}, a), {}, { isDesignState: !b.dismissHistory, adjustments: _objectSpread28(_objectSpread28({}, a.adjustments), {}, { crop: _objectSpread28(_objectSpread28({}, j), k) }) });
};
var setCrop_default = setCrop;

// node_modules/react-filerobot-image-editor/lib/actions/changeRotation.js
init_react_shim();
function ownKeys29(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread29(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys29(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys29(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var CHANGE_ROTATION = "CHANGE_ROTATION";
var changeRotation = function(a, b) {
  return a.adjustments.rotation === b.rotation ? a : _objectSpread29(_objectSpread29({}, a), {}, { isDesignState: !b.dismissHistory, adjustments: _objectSpread29(_objectSpread29({}, a.adjustments), {}, { rotation: b.rotation }) });
};
var changeRotation_default = changeRotation;

// node_modules/react-filerobot-image-editor/lib/actions/zoomCanvas.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/calculateZoomData.js
init_react_shim();
function ownKeys30(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread30(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys30(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys30(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var calculateZoomData = function(a, b, c, d) {
  if (a.factor === DEFAULT_ZOOM_FACTOR) return _objectSpread30(_objectSpread30({}, a), {}, { x: 0, y: 0, factor: DEFAULT_ZOOM_FACTOR });
  var e = a.factor > b.factor, f = { x: (a.x - b.x || 0) / b.factor, y: (a.y - b.y || 0) / b.factor }, g = { x: a.x - f.x * a.factor, y: a.y - f.y * a.factor };
  if (e && 1 === b.factor || (g.x = Math.min(0, Math.max(g.x, c * (1 - b.factor))), g.y = Math.min(0, Math.max(g.y, d * (1 - b.factor)))), 1 > a.factor) {
    var h = c - c * a.factor, i = d - d * a.factor;
    g.x += h / 2, g.y += i / 2;
  }
  return _objectSpread30(_objectSpread30(_objectSpread30({}, a), g), {}, { factor: a.factor });
};
var calculateZoomData_default = calculateZoomData;

// node_modules/react-filerobot-image-editor/lib/actions/zoomCanvas.js
var _excluded5 = ["preparedDimensions"];
function ownKeys31(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread31(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys31(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys31(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var ZOOM_CANVAS = "ZOOM_CANVAS";
var MIN_ZOOM_FACTOR = 0.1;
var MAX_ZOOM_FACTOR = 60;
var zoomCanvas = function(a, b) {
  if (b.resetZoom) return _objectSpread31(_objectSpread31({}, a), {}, { zoom: { factor: DEFAULT_ZOOM_FACTOR, x: null, y: null, customLabel: null } });
  var c, d = restrictNumber_default(parseFloat(b.factor).toFixed(2), MIN_ZOOM_FACTOR, MAX_ZOOM_FACTOR);
  if (b.preparedDimensions) {
    var e = b.preparedDimensions, f = _objectWithoutProperties(b, _excluded5);
    c = f;
  } else {
    var g, h, i = { x: b.x || 0 === b.x ? null !== (g = b.x) && void 0 !== g ? g : a.zoom.x : a.canvasWidth / 2, y: b.y || 0 === b.y ? null !== (h = b.y) && void 0 !== h ? h : a.zoom.y : a.canvasHeight / 2 };
    c = calculateZoomData_default(_objectSpread31(_objectSpread31({}, i), {}, { factor: d }), b.isAbsoluteZoom ? { factor: DEFAULT_ZOOM_FACTOR, x: null, y: null, customLabel: null } : a.zoom, a.canvasWidth, a.canvasHeight);
  }
  return c.factor === a.zoom.factor && c.x === a.zoom.x && c.y === a.zoom.y ? a : _objectSpread31(_objectSpread31({}, a), {}, { zoom: _objectSpread31(_objectSpread31(_objectSpread31({}, a.zoom), c), {}, { customLabel: b.customLabel || c.customLabel || null }) });
};
var zoomCanvas_default = zoomCanvas;

// node_modules/react-filerobot-image-editor/lib/actions/setCanvasSize.js
init_react_shim();
function ownKeys32(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread32(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys32(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys32(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_CANVAS_SIZE = "SET_CANVAS_SIZE";
var setCanvasSize = function(a, b) {
  if (a.canvasWidth === b.canvasWidth && a.canvasHeight === b.canvasHeight) return a;
  var c = a.initialCanvasWidth, d = void 0 === c ? b.canvasWidth : c, e = a.initialCanvasHeight, f = void 0 === e ? b.canvasHeight : e, g = getDimensionsMinimalRatio_default(a.initialCanvasWidth, a.initialCanvasHeight, a.originalSource.width, a.originalSource.height), h = g * a.originalSource.width, i = g * a.originalSource.height, j = 1;
  if (d !== b.canvasWidth || f !== b.canvasHeight) {
    var k = b.canvasWidth / h, l = b.canvasHeight / i;
    j = Math.min(k, l);
  }
  return _objectSpread32(_objectSpread32({}, a), {}, { initialCanvasWidth: d, initialCanvasHeight: f, canvasWidth: b.canvasWidth, canvasHeight: b.canvasHeight, canvasScale: j });
};
var setCanvasSize_default = setCanvasSize;

// node_modules/react-filerobot-image-editor/lib/actions/setOriginalSource.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/getOriginalSourceInitialScale.js
init_react_shim();
var getOriginalSourceInitialScale = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = a.initialCanvasWidth, c = a.initialCanvasHeight, d = a.originalSource;
  return b >= d.width && c >= d.height ? 1 : getDimensionsMinimalRatio_default(b, c, d.width, d.height);
};
var getOriginalSourceInitialScale_default = getOriginalSourceInitialScale;

// node_modules/react-filerobot-image-editor/lib/utils/getShownImageZoomPercentage.js
init_react_shim();
var getShownImageZoomPercentage = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = a.originalSource, c = a.resize, d = a.shownImageDimensions, e = a.zoom, f = !b || c.width || c.height ? e.factor : d.originalSourceInitialScale * e.factor;
  return toPrecisedFloat_default(100 * f, 0) || 100;
};
var getShownImageZoomPercentage_default = getShownImageZoomPercentage;

// node_modules/react-filerobot-image-editor/lib/actions/setOriginalSource.js
function ownKeys33(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread33(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys33(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys33(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_ORIGINAL_SOURCE = "SET_ORIGINAL_SOURCE";
var isNewImg = function(a, b) {
  var c, d, e, f;
  return (null === (c = a.originalSource) || void 0 === c ? void 0 : c.width) !== (null === (d = b.originalSource) || void 0 === d ? void 0 : d.width) || (null === (e = a.originalSource) || void 0 === e ? void 0 : e.height) !== b.originalSource.height || b.originalSource.src && (null === (f = a.originalSource) || void 0 === f ? void 0 : f.src) !== b.originalSource.src;
};
var setOriginalSource = function(a, b) {
  var c = !a.originalSource, d = b.zoom || a.zoom;
  if (b.keepPrevZoomRatio && !c && isNewImg(a, b)) {
    var e = getOriginalSourceInitialScale_default({ initialCanvasWidth: a.initialCanvasWidth, initialCanvasHeight: a.initialCanvasHeight, originalSource: b.originalSource }), f = getShownImageZoomPercentage_default(a) / 100 / e;
    d = calculateZoomData_default(_objectSpread33(_objectSpread33({}, d), {}, { x: a.canvasWidth / 2, y: a.canvasHeight / 2, factor: f }), { factor: DEFAULT_ZOOM_FACTOR, x: null, y: null, customLabel: null }, a.canvasWidth, a.canvasHeight);
  }
  return _objectSpread33(_objectSpread33({}, a), {}, { isDesignState: !c && !b.dismissHistory, feedback: {}, zoom: d, presentOriginalSources: _objectSpread33(_objectSpread33({}, a.presentOriginalSources), {}, _defineProperty({}, b.originalSource.key || "default", b.originalSource)), originalSource: b.originalSource, imgSrc: b.originalSource.src, bgColor: b.originalSource.bgColor });
};
var setOriginalSource_default = setOriginalSource;

// node_modules/react-filerobot-image-editor/lib/actions/setShownImageDimensions.js
init_react_shim();
function ownKeys34(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread34(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys34(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys34(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_SHOWN_IMAGE_DIMENSIONS = "SET_SHOWN_IMAGE_DIMENSIONS";
var setShownImageDimensions = function(a, b) {
  return _objectSpread34(_objectSpread34({}, a), {}, { shownImageDimensions: _objectSpread34(_objectSpread34({}, a.shownImageDimensions), b.shownImageDimensions), designLayer: b.designLayer || a.designLayer, previewGroup: b.previewGroup || a.previewGroup });
};
var setShownImageDimensions_default = setShownImageDimensions;

// node_modules/react-filerobot-image-editor/lib/actions/removeAnnotations.js
init_react_shim();
function ownKeys35(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread35(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys35(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys35(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var REMOVE_ANNOTATIONS = "REMOVE_ANNOTATIONS";
var removeAnnotations = function(a, b) {
  var c = a.annotations, d = a.annotationIds, e = _objectSpread35({}, c), f = d, g = a.selectionsIds;
  return b.annotationsIds.forEach(function(b2) {
    if (g = g.filter(function(a2) {
      return a2 !== b2;
    }), a.designLayer && e[b2]) {
      var c2 = a.designLayer.findOne("#".concat(b2));
      c2 && c2.destroy(), delete e[b2], f = f.filter(function(a2) {
        return b2 !== a2;
      });
    }
  }), emitCustomEvent_default(EVENTS.ANNOTATIONS_REMOVE, { ids: b.annotationsIds }), _objectSpread35(_objectSpread35({}, a), {}, { isDesignState: !b.dismissHistory, annotationIds: f, textIdOfEditableContent: null, annotations: e, selectionsIds: [] });
};
var removeAnnotations_default = removeAnnotations;

// node_modules/react-filerobot-image-editor/lib/actions/duplicateAnnotations.js
init_react_shim();
function ownKeys36(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread36(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys36(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys36(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var DUPLICATE_ANNOTATIONS = "DUPLICATE_ANNOTATIONS";
var duplicateAnnotations = function(a, b) {
  var c = a.annotations, d = b.onAnnotationAdd, e = {}, f = [];
  return b.annotationsIds.forEach(function(b2) {
    var g = c[b2];
    if (g) {
      var h = _objectSpread36(_objectSpread36({}, g), {}, { id: randomId_default(g.name), label: "".concat(g.label || g.id, " - Copy"), x: g.x + 20, y: g.y + 20 });
      if ("function" == typeof d) {
        var i = d(_objectSpread36(_objectSpread36({}, h), {}, { isDuplicated: true }), a);
        h = _objectSpread36(_objectSpread36({}, h), i);
      }
      f.push(h.id), e[h.id] = h;
    }
  }), emitCustomEvent_default(EVENTS.ANNOTATIONS_DUPLICATE, { duplicated: e, originalIds: b.annotationsIds }), _objectSpread36(_objectSpread36({}, a), {}, { selectionsIds: f, isDesignState: !b.dismissHistory, annotationIds: [].concat(_toConsumableArray(a.annotationIds), f), annotations: _objectSpread36(_objectSpread36({}, c), e) });
};
var duplicateAnnotations_default = duplicateAnnotations;

// node_modules/react-filerobot-image-editor/lib/actions/enableTextContentEdit.js
init_react_shim();
function ownKeys37(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread37(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys37(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys37(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var ENABLE_TEXT_CONTENT_EDIT = "ENABLE_TEXT_CONTENT_EDIT";
var enableTextContentEdit = function(a, b) {
  return _objectSpread37(_objectSpread37({}, a), {}, { textIdOfEditableContent: b.textIdOfEditableContent || null, selectedTextPart: b.textIdOfEditableContent && (!a.textIdOfEditableContent || a.textIdOfEditableContent === b.textIdOfEditableContent) ? _objectSpread37(_objectSpread37({}, a.selectedTextPart), {}, { annotationId: b.textIdOfEditableContent }) : {}, selectionsIds: [] });
};
var enableTextContentEdit_default = enableTextContentEdit;

// node_modules/react-filerobot-image-editor/lib/actions/setResize.js
init_react_shim();
function ownKeys38(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread38(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys38(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys38(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_RESIZE = "SET_RESIZE";
var setResize = function(a, b) {
  var c;
  return _objectSpread38(_objectSpread38({}, a), {}, { isDesignState: !b.dismissHistory, resize: _objectSpread38(_objectSpread38(_objectSpread38({}, a.resize), b), {}, { manualChangeDisabled: !(null === (c = b.manualChangeDisabled) || void 0 === c) && c }) });
};
var setResize_default = setResize;

// node_modules/react-filerobot-image-editor/lib/actions/setSaved.js
init_react_shim();
function ownKeys39(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread39(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys39(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys39(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_SAVED = "SET_SAVED";
var setSaved = function(a) {
  return a.haveNotSavedChanges ? _objectSpread39(_objectSpread39({}, a), {}, { haveNotSavedChanges: false }) : a;
};
var setSaved_default = setSaved;

// node_modules/react-filerobot-image-editor/lib/actions/updateState.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/deepMerge.js
init_react_shim();
function ownKeys40(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread40(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys40(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys40(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var _deepMerge = function(a) {
  var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, c = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2], d = _objectSpread40({}, a), e = Object.keys(b);
  return e.forEach(function(e2) {
    var f = b[e2];
    if (void 0 !== f) {
      var g = _typeof(f);
      if ("object" !== g || f instanceof HTMLElement || null === f || Array.isArray(f) || !a[e2] || "object" !== _typeof(a[e2])) return void (d[e2] = c && Array.isArray(d[e2]) && Array.isArray(f) ? [].concat(_toConsumableArray(d[e2]), _toConsumableArray(f)) : f);
      d[e2] = _deepMerge(a[e2], f);
    }
  }), d;
};
var deepMerge_default = _deepMerge;

// node_modules/react-filerobot-image-editor/lib/actions/updateState.js
var UPDATE_STATE = "UPDATE_STATE";
var updateState = function(a, b) {
  var c = b && "function" == typeof b ? b(a) : b;
  return c ? deepMerge_default(a, c) : a;
};
var updateState_default = updateState;

// node_modules/react-filerobot-image-editor/lib/actions/setLatestColor.js
init_react_shim();
function ownKeys41(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread41(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys41(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys41(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_LATEST_COLOR = "SET_LATEST_COLOR";
var setLatestColor = function(a, b) {
  return _objectSpread41(_objectSpread41({}, a), {}, { latestColors: _objectSpread41(_objectSpread41({}, a.latestColors), b.latestColors) });
};
var setLatestColor_default = setLatestColor;

// node_modules/react-filerobot-image-editor/lib/actions/toggleTabsNavbar.js
init_react_shim();
function ownKeys42(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread42(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys42(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys42(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var TOGGLE_TABS_NAVBAR = "TOGGLE_TABS_NAVBAR";
var toggleTabsNavbar = function(a, b) {
  var c;
  return _objectSpread42(_objectSpread42({}, a), {}, { showTabsNavbar: null !== (c = b.opened) && void 0 !== c ? c : !a.showTabsNavbar });
};
var toggleTabsNavbar_default = toggleTabsNavbar;

// node_modules/react-filerobot-image-editor/lib/actions/setSaving.js
init_react_shim();
function ownKeys43(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread43(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys43(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys43(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_SAVING = "SET_SAVING";
var setSaving = function(a, b) {
  return _objectSpread43(_objectSpread43({}, a), {}, { isSaving: b.isSaving, loadingData: { isLoadingGlobally: b.isSaving, text: b.loadingText || "", cancelFn: b.loadingCancelFn || null } });
};
var setSaving_default = setSaving;

// node_modules/react-filerobot-image-editor/lib/actions/replaceAnnotations.js
init_react_shim();
function ownKeys44(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread44(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys44(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys44(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var REPLACE_ANNOTATIONS = "REPLACE_ANNOTATIONS";
var replaceAnnotations = function(a) {
  var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, c = b.dismissHistory, d = b.applyDeepMerge, e = b.considerArrayInDeepMerge, f = b.newAnnotations;
  if (!f) return a;
  var g = void 0 !== d && d ? deepMerge_default(a.annotations, f, void 0 !== e && e) : f;
  return emitCustomEvent_default(EVENTS.ANNOTATIONS_REPLACE, { annotations: g }), _objectSpread44(_objectSpread44({}, a), {}, { isDesignState: !(void 0 !== c && c), annotations: g });
};
var replaceAnnotations_default = replaceAnnotations;

// node_modules/react-filerobot-image-editor/lib/actions/injectIntoLastState.js
init_react_shim();
var _excluded6 = ["considerArrayInDeepMerge"];
function ownKeys45(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread45(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys45(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys45(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var INJECT_INTO_LAST_STATE = "INJECT_INTO_LAST_STATE";
var injectIntoLastState = function(a, b) {
  var c = b.considerArrayInDeepMerge, d = _objectWithoutProperties(b, _excluded6);
  if (0 < Object.keys(d).length) {
    var e, f = deepMerge_default((null === (e = a.pastDesignStates) || void 0 === e ? void 0 : e[0]) || {}, d, c);
    return _objectSpread45(_objectSpread45({}, a), {}, { pastDesignStates: [f].concat(_toConsumableArray(a.pastDesignStates || [])), hasUndo: true, isResetted: false, haveNotSavedChanges: true });
  }
  return a;
};
var injectIntoLastState_default = injectIntoLastState;

// node_modules/react-filerobot-image-editor/lib/actions/updateExtraState.js
init_react_shim();
var _excluded7 = ["dismissHistory"];
function ownKeys46(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread46(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys46(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys46(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var UPDATE_EXTRA_STATE = "UPDATE_EXTRA_STATE";
var updateExtraState = function(a, b) {
  var c = b.dismissHistory, d = _objectWithoutProperties(b, _excluded7);
  return _objectSpread46(_objectSpread46({}, a), {}, { isDesignState: !(void 0 !== c && c), extra: _objectSpread46(_objectSpread46({}, a.extra), d) });
};
var updateExtraState_default = updateExtraState;

// node_modules/react-filerobot-image-editor/lib/actions/updateAnnotationIds.js
init_react_shim();
function ownKeys47(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread47(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys47(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys47(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var UPDATE_ANNOTATION_IDS = "UPDATE_ANNOTATION_IDS";
var updateAnnotationIds = function(a, b) {
  return _objectSpread47(_objectSpread47({}, a), {}, { isDesignState: !b.dismissHistory, annotationIds: b.annotationIds });
};
var updateAnnotationIds_default = updateAnnotationIds;

// node_modules/react-filerobot-image-editor/lib/actions/setSelectedTextPart.js
init_react_shim();
function ownKeys48(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread48(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys48(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys48(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var SET_SELECTED_TEXT_PART = "SET_SELECTED_TEXT_PART";
var setSelectedTextPart = function(a, b) {
  var c, d, e, f, g;
  return _objectSpread48(_objectSpread48({}, a), {}, { selectedTextPart: { hasSelection: !(null === (c = b.hasSelection) || void 0 === c) && c, textContent: b.textContent || 0 === b.textContent ? b.textContent : "", element: b.element || null, startIndex: null !== (d = b.startIndex) && void 0 !== d ? d : null, endIndex: null !== (e = b.endIndex) && void 0 !== e ? e : null, annotationId: null !== (f = null !== (g = b.annotationId) && void 0 !== g ? g : a.textIdOfEditableContent) && void 0 !== f ? f : null } });
};
var setSelectedTextPart_default = setSelectedTextPart;

// node_modules/react-filerobot-image-editor/lib/actions/index.js
var _SET_ORIGINAL_SOURCE$;
var actions_default = (_SET_ORIGINAL_SOURCE$ = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_SET_ORIGINAL_SOURCE$, SET_ORIGINAL_SOURCE, setOriginalSource_default), SET_FEEDBACK, setFeedback_default), SHOW_LOADER, showLoader_default), HIDE_LOADER, hideLoader_default), CHANGE_POINTER_ICON, changePointerIcon_default), SELECT_ANNOTATION, selectAnnotation_default), CLEAR_ANNOTATIONS_SELECTIONS, clearAnnotationsSelections_default), TOGGLE_ORIGINAL_IMAGE_DISPLAY, toggleOriginalImageDisplay_default), SELECT_TAB, selectTab_default), SELECT_TOOL, selectTool_default), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_SET_ORIGINAL_SOURCE$, ZOOM_CANVAS, zoomCanvas_default), SET_CANVAS_SIZE, setCanvasSize_default), SET_SHOWN_IMAGE_DIMENSIONS, setShownImageDimensions_default), ENABLE_TEXT_CONTENT_EDIT, enableTextContentEdit_default), SET_LATEST_COLOR, setLatestColor_default), TOGGLE_TABS_NAVBAR, toggleTabsNavbar_default), SET_SAVING, setSaving_default), ADD_FILTER, addFilter_default), SET_FINETUNE, setFinetune_default), SET_ANNOTATION, setAnnotation_default), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_SET_ORIGINAL_SOURCE$, REPLACE_ANNOTATIONS, replaceAnnotations_default), SET_CROP, setCrop_default), CHANGE_ROTATION, changeRotation_default), TOGGLE_FLIP, toggleFlip_default), SET_RESIZE, setResize_default), REMOVE_ANNOTATIONS, removeAnnotations_default), DUPLICATE_ANNOTATIONS, duplicateAnnotations_default), UPDATE_ANNOTATION_IDS, updateAnnotationIds_default), UNDO, undo_default2), REDO, redo_default2), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_SET_ORIGINAL_SOURCE$, RESET, reset_default2), SET_SAVED, setSaved_default), UPDATE_STATE, updateState_default), UPDATE_EXTRA_STATE, updateExtraState_default), INJECT_INTO_LAST_STATE, injectIntoLastState_default), SET_SELECTED_TEXT_PART, setSelectedTextPart_default));

// node_modules/react-filerobot-image-editor/lib/utils/isDefaultZeroValuesOnly.js
init_react_shim();
var isDefaultZeroValuesOnly = function(a, b) {
  return a && Object.keys(a || {}).every(function(b2) {
    return 0 === a[b2];
  }) && b && 0 === Object.keys(b || {}).length;
};
var isDefaultZeroValuesOnly_default = isDefaultZeroValuesOnly;

// node_modules/react-filerobot-image-editor/lib/hooks/useStore.js
init_react_shim();
var import_react73 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/context/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/context/AppContext.js
init_react_shim();
var import_react70 = __toESM(require_react());
var AppContext = (0, import_react70.createContext)({});
var AppContext_default = AppContext;

// node_modules/react-filerobot-image-editor/lib/context/AppProvider.js
init_react_shim();
var import_react71 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/translator.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/context/defaultTranslations.js
init_react_shim();
var defaultTranslations_default = { name: "Name", save: "Save", saveAs: "Save as", back: "Back", loading: "Loading...", resetOperations: "Reset/delete all operations", changesLoseWarningHint: "If you press button reset your changes will lost. Would you like to continue?", discardChangesWarningHint: "If you close modal, your last change will not be saved.", cancel: "Cancel", apply: "Apply", warning: "Warning", confirm: "Confirm", discardChanges: "Discard changes", undoTitle: "Undo last operation", redoTitle: "Redo last operation", showImageTitle: "Show original image", zoomInTitle: "Zoom in", fitTitle: "Fit", zoomOutTitle: "Zoom out", toggleZoomMenuTitle: "Toggle zoom menu", adjustTab: "Adjust", finetuneTab: "Finetune", filtersTab: "Filters", watermarkTab: "Watermark", annotateTabLabel: "Annotate", resize: "Resize", resizeTab: "Resize", imageName: "Image name", invalidImageError: "Invalid image provided.", uploadImageError: "Error while uploading the image.", areNotImages: "are not images", isNotImage: "is not image", toBeUploaded: "to be uploaded", cropTool: "Crop", original: "Original", custom: "Custom", square: "Square", landscape: "Landscape", portrait: "Portrait", ellipse: "Ellipse", classicTv: "Classic TV", cinemascope: "Cinemascope", arrowTool: "Arrow", blurTool: "Blur", brightnessTool: "Brightness", contrastTool: "Contrast", ellipseTool: "Ellipse", unFlipX: "Un-Flip X", flipX: "Flip X", unFlipY: "Un-Flip Y", flipY: "Flip Y", hsvTool: "HSV", hue: "Hue", brightness: "Brightness", saturation: "Saturation", value: "Value", imageTool: "Image", importing: "Importing...", addImage: "Add image", uploadImage: "Upload image", fromGallery: "From gallery", lineTool: "Line", penTool: "Pen", polygonTool: "Polygon", sides: "Sides", rectangleTool: "Rectangle", cornerRadius: "Corner Radius", resizeWidthTitle: "Width in pixels", resizeHeightTitle: "Height in pixels", toggleRatioLockTitle: "Toggle ratio lock", resetSize: "Reset to original image size", rotateTool: "Rotate", textTool: "Text", textSpacings: "Text spacings", textAlignment: "Text alignment", fontFamily: "Font family", size: "Size", letterSpacing: "Letter Spacing", lineHeight: "Line height", warmthTool: "Warmth", addWatermark: "Add watermark", addTextWatermark: "Add text watermark", addWatermarkTitle: "Choose the watermark type", uploadWatermark: "Upload watermark", addWatermarkAsText: "Add as text", padding: "Padding", paddings: "Paddings", shadow: "Shadow", horizontal: "Horizontal", vertical: "Vertical", blur: "Blur", opacity: "Opacity", transparency: "Transparency", position: "Position", stroke: "Stroke", saveAsModalTitle: "Save as", extension: "Extension", format: "Format", nameIsRequired: "Name is required.", quality: "Quality", imageDimensionsHoverTitle: "Saved image size (width x height)", cropSizeLowerThanResizedWarning: "Note, the selected crop area is lower than the applied resize which might cause quality decrease", actualSize: "Actual size (100%)", fitSize: "Fit size", addImageTitle: "Select image to add...", mutualizedFailedToLoadImg: "Failed to load image.", tabsMenu: "Menu", download: "Download", width: "Width", height: "Height", cropItemNoEffect: "No preview available for this crop item", px: "px", invalidTextContent: "Invalid text content", baselineShift: "Baseline shift", aiTab: "AI tools", objectRemovalTool: "Object removal", objectRemovalBrushSize: "Brush size (px)", objectRemovalApplyButton: "Apply", objectRemovalBrushMode: "Brush mode", objectRemovalBrushCircleType: "Circle brush", objectRemovalBrushSquareType: "Square brush", objectRemovalApplyingText: "Removing the selected area", objectRemovalMarkModeTooltip: "Mark mode", objectRemovalUnMarkModeTooltip: "Unmark mode", objectRemovalCancelConfirmationTitle: "Cancel process", objectRemovalCancelConfirmationHint: "Are you sure you want to cancel removing object from", objectRemovalCancelConfirmationHintCompletion: "asset?", theKeyword: "the" };

// node_modules/react-filerobot-image-editor/lib/utils/translator.js
function ownKeys49(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread49(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys49(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys49(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var backendTranslations = {};
var activatedTranslations = _objectSpread49({}, defaultTranslations_default);
var hardcodedErrorMsg = "Error while loading translations from backend.";
var updateTranslations = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : "en";
  return Object.assign(activatedTranslations, backendTranslations[null === b || void 0 === b ? void 0 : b.toLowerCase()] || {}, a);
};
var getBackendTranslations = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : "en";
  return new Promise(function(c, d) {
    var e = b.toLowerCase(), f = new XMLHttpRequest();
    f.responseType = "json", f.onload = function() {
      if (200 <= f.status && 300 > f.status) {
        (f.response || []).forEach(function(a2) {
          backendTranslations[e] = _objectSpread49(_objectSpread49({}, backendTranslations[e]), {}, _defineProperty({}, a2.translation_key, a2.translations[e]));
        });
        var b2 = [];
        Object.keys(defaultTranslations_default).forEach(function(a2) {
          var c2;
          a2 && !(null !== (c2 = backendTranslations[e]) && void 0 !== c2 && c2[a2]) && b2.push({ key: a2, lang: e, default: defaultTranslations_default[a2] });
        }), updateTranslations(a, e), c(activatedTranslations);
      } else {
        var g, h, i;
        console.error("Status code: ".concat(f.status)), console.error((null === (g = f.response) || void 0 === g ? void 0 : g.msg) || (null === (h = f.response) || void 0 === h ? void 0 : h.msg) || (null === (i = f.response) || void 0 === i ? void 0 : i.details) || hardcodedErrorMsg), d();
      }
    }, f.onerror = function() {
      console.error("Status code ".concat(f.status, ", error: ").concat(hardcodedErrorMsg)), d();
    }, f.open("GET", "https://i18n-fastly.ultrafast.io/api/export?grid=".concat(TRANSLATIONS_GRID_UUID)), f.send();
  });
};
var translate = function(a) {
  return activatedTranslations[a] || a || "";
};

// node_modules/react-filerobot-image-editor/lib/context/appReducer.js
init_react_shim();
var appReducer = function(a, b) {
  return actions_default[b.type] ? actions_default[b.type](a, b.payload) || a : a;
};
var appReducer_default = appReducer;

// node_modules/react-filerobot-image-editor/lib/context/AppProvider.js
function ownKeys50(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread50(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys50(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys50(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var isFieMounted = true;
var AppProvider = function(a) {
  var b = a.children, c = a.config, d = void 0 === c ? {} : c, e = useAppReducer_default(appReducer_default, getInitialAppState_default(d), d), f = _slicedToArray(e, 2), g = f[0], h = f[1];
  (0, import_react71.useEffect)(function() {
    return isFieMounted = true, function() {
      isFieMounted = false;
    };
  }, []);
  var i = (0, import_react71.useCallback)(function() {
    isFieMounted && h.apply(void 0, arguments);
  }, [h]);
  (0, import_react71.useEffect)(function() {
    updateTranslations(d.translations, d.language);
  }, [d.useBackendTranslations, d.language, d.translations]);
  var j = useTheme(), k = (0, import_react71.useMemo)(function() {
    return _objectSpread50(_objectSpread50({}, g), {}, { config: d, theme: j, dispatch: i, t: translate });
  }, [d, g]);
  return import_react71.default.createElement(AppContext_default.Provider, { value: k }, b);
};
var AppProvider_default = AppProvider;

// node_modules/react-filerobot-image-editor/lib/context/AppProviderOverriddenValue.js
init_react_shim();
var import_react72 = __toESM(require_react());
var AppProviderOverriddenValue = function(a) {
  var b = a.children, c = a.overridingValue;
  return import_react72.default.createElement(AppContext_default.Provider, { value: c }, b);
};
var AppProviderOverriddenValue_default = AppProviderOverriddenValue;

// node_modules/react-filerobot-image-editor/lib/context/index.js
var context_default = AppContext_default;

// node_modules/react-filerobot-image-editor/lib/hooks/useStore.js
var useStore = function() {
  return (0, import_react73.useContext)(context_default);
};
var useStore_default = useStore;

// node_modules/react-filerobot-image-editor/lib/hooks/useFinetune.js
function ownKeys51(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread51(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys51(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys51(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useFinetune = function(a, b) {
  var c = useStore_default(), d = c.dispatch, e = c.finetunes, f = c.finetunesProps, g = (0, import_react74.useCallback)(function(b2) {
    d({ type: SET_FINETUNE, payload: { finetune: a, finetuneProps: b2 } });
  }, []);
  return (0, import_react74.useEffect)(function() {
    e.includes(a) || isDefaultZeroValuesOnly_default(b, f) || g(_objectSpread51(_objectSpread51({}, b), f));
  }, []), (0, import_react74.useMemo)(function() {
    return [f, g];
  }, [f]);
};
var useFinetune_default = useFinetune;

// node_modules/react-filerobot-image-editor/lib/hooks/useFilter.js
init_react_shim();
var import_react75 = __toESM(require_react());
var useFilter = function() {
  var a = useStore_default(), b = a.dispatch, c = a.filter, d = (0, import_react75.useCallback)(function(a2) {
    b({ type: ADD_FILTER, payload: { filter: a2 } });
  }, []);
  return (0, import_react75.useMemo)(function() {
    return [c, d];
  }, [c]);
};
var useFilter_default = useFilter;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/index.js
init_react_shim();
var import_react77 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/previewThenCallAnnotationAdding.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/getBoundingRectUnScaled.js
init_react_shim();
var getBoundingRectUnScaled = function() {
  var a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, c = 2 < arguments.length ? arguments[2] : void 0, d = {};
  if (!c) return d;
  var e = c.parent.attrs;
  return d.x = Math.min(a.offsetX, b.startedX) - e.xPadding || 0, d.y = Math.min(a.offsetY, b.startedY) - e.yPadding || 0, d.width = a.offsetX - b.startedX, d.height = a.offsetY - b.startedY, d.startedX = b.startedX - e.xPadding || 0, d.startedY = b.startedY - e.yPadding || 0, d;
};
var getBoundingRectUnScaled_default = getBoundingRectUnScaled;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/getNewAnnotationPreview.js
init_react_shim();
var import_konva12 = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/custom/shapes/FormattedText.js
init_react_shim();
var import_Factory3 = __toESM(require_Factory());
var import_Global = __toESM(require_Global());
var import_Shape = __toESM(require_Shape());
var import_Util = __toESM(require_Util());
var import_Validators3 = __toESM(require_Validators());
function ownKeys52(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread52(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys52(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys52(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
function _callSuper(a, b, c) {
  return b = _getPrototypeOf(b), _possibleConstructorReturn(a, _isNativeReflectConstruct() ? Reflect.construct(b, c || [], _getPrototypeOf(a).constructor) : b.apply(a, c));
}
function _isNativeReflectConstruct() {
  try {
    var a = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
  } catch (a2) {
  }
  return (_isNativeReflectConstruct = function() {
    return !!a;
  })();
}
var dummyContext;
function getDummyContext() {
  return dummyContext ? dummyContext : (dummyContext = import_Util.Util.createCanvasElement().getContext("2d"), dummyContext);
}
function normalizeFontFamily(a) {
  return a ? a.split(",").map(function(a2) {
    a2 = a2.trim();
    var b = 0 <= a2.indexOf(" "), c = 0 <= a2.indexOf('"') || 0 <= a2.indexOf("'");
    return b && !c && (a2 = '"'.concat(a2, '"')), a2;
  }).join(", ") : "";
}
var CHANGEABLE_ATTRS = ["padding", "wrap", "lineHeight", "letterSpacing", "width", "height", "text", "fontSize", "fill", "fontWeight", "fontStyle", "fontFamily", "verticalAlign", "scaleFormatDimensionsBy"];
var NEWLINE_COUNT_CONST = 1;
var FormattedTextFIE = function(a) {
  function b(a2) {
    var c;
    return _classCallCheck(this, b), c = _callSuper(this, b, [a2]), CHANGEABLE_ATTRS.forEach(function(a3) {
      c.on("".concat(a3, "Change.konva"), c.computeTextParts);
    }), c.computeTextParts(), c;
  }
  return _inherits(b, a), _createClass(b, [{ key: "formatFont", value: function(a2) {
    var b2, c = this.getDefaultTextPartFormat();
    return "".concat(a2.style.fontStyle || c.fontStyle, " ").concat(a2.style.fontWeight || c.fontWeight, " ").concat(a2.style.fontVariant || c.fontVariant, " ").concat(null !== (b2 = a2.style.fontSize) && void 0 !== b2 ? b2 : c.fontSize, "px ").concat(normalizeFontFamily(a2.style.fontFamily || c.fontFamily));
  } }, { key: "measurePart", value: function(a2) {
    var b2 = getDummyContext(), c = a2.style.letterSpacing || 0, d = c;
    if (b2.font = this.formatFont(a2), 0 === c) return b2.measureText(a2.text).width;
    var e = Array.from(a2.text);
    if (1 === e.length) return b2.measureText(a2.text).width + d;
    for (var f = 0, g = 0; g < e.length; g += 1) f += b2.measureText(e[g]).width, g < e.length - 1 && (f += d);
    return f;
  } }, { key: "getDefaultTextPartFormat", value: function() {
    return { fontSize: this.fontSize(), fill: this.fill(), fontWeight: this.fontWeight(), fontStyle: this.fontStyle(), baselineShift: 0, letterSpacing: this.letterSpacing(), fontVariant: this.fontVariant(), fontFamily: this.fontFamily() };
  } }, { key: "fullText", value: function() {
    return Array.isArray(this.text()) ? this.text().map(function() {
      var a2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, b2 = a2.textContent;
      return b2;
    }).join("") : this.text();
  } }, { key: "computeTextParts", value: function() {
    var a2, b2 = this;
    this.textLines = [], this.visibleLinesStartIndex = 0;
    for (var c = this.fullText(), d = c.split("\n"), e = this.attrs.width, f = this.attrs.height, g = "auto" !== f && void 0 !== f, h = g && "top" === this.verticalAlign(), j = "none" !== this.wrap(), k = "char" !== this.wrap() && j, l = this.ellipsis(), m = "", n = this.getDefaultTextPartFormat(), o = l ? this.measurePart({ text: m, style: _objectSpread52(_objectSpread52({}, n), Array.isArray(this.text()) && (null === (a2 = this.text().slice(-1)) || void 0 === a2 ? void 0 : a2.style)) }) : 0, p = function(a3, d2) {
      return Array.isArray(b2.text()) && 0 < b2.text().length ? b2.text().filter(function() {
        var b3 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, c2 = b3.startIndex, e2 = void 0 === c2 ? 0 : c2, f2 = b3.endIndex, g2 = void 0 === f2 ? 1 / 0 : f2;
        return a3 >= e2 && a3 <= g2 || d2 >= e2 && d2 <= g2 || e2 >= a3 && g2 <= d2;
      }).map(function() {
        var c2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, e2 = c2.style, f2 = void 0 === e2 ? {} : e2, g2 = c2.startIndex, h2 = void 0 === g2 ? 0 : g2, i = c2.endIndex, j2 = void 0 === i ? 1 / 0 : i;
        return { style: _objectSpread52(_objectSpread52({}, n), f2), width: 0, text: b2.fullText().slice(Math.max(a3, h2), Math.min(d2, j2)).replaceAll("\n", "") };
      }) : [{ text: c.slice(a3, d2).replaceAll("\n", ""), style: n, width: 0 }];
    }, q = function(a3) {
      return a3.reduce(function(a4, c2) {
        return c2.width = b2.measurePart(c2), a4 + c2.width;
      }, 0);
    }, r = function(a3, b3) {
      return q(p(a3, b3));
    }, s = function(a3) {
      return Math.max.apply(Math, _toConsumableArray(a3.map(function(a4) {
        var c2;
        return (null !== (c2 = a4.style.fontSize) && void 0 !== c2 ? c2 : b2.fontSize) * b2.lineHeight();
      })));
    }, t = function(a3) {
      var c2 = Math.max.apply(Math, _toConsumableArray(a3.map(function(a4) {
        var c3;
        return null !== (c3 = a4.style.fontSize) && void 0 !== c3 ? c3 : b2.fontSize();
      })));
      return 0.7 * c2;
    }, u = 0, v = 0, w = function(a3, c2, d2) {
      if (g && u + c2 > f) {
        if ("top" === b2.verticalAlign()) return;
        b2.visibleLinesStartIndex += 1;
      }
      var e2 = t(d2);
      b2.textLines.push({ width: a3, parts: d2.map(function(a4, c3) {
        return a4.text = 0 === c3 ? a4.text.replace(/^\s{1}/, "") : a4.text, a4.width = 0 === a4.width ? b2.measurePart(a4) : a4.width, a4;
      }), totalHeight: c2, trimmedHeight: e2 });
    }, x = d.length, y = 0; y < x; y += 1) {
      var z = d[y], A = z, B = r(v, v + A.length), C = void 0;
      if ("auto" !== e && void 0 !== e && B > e) for (var D = 0; 0 < A.length; ) {
        for (var E = 0, F = A.length, G = "", H = 0; E < F; ) {
          var I = E + F >>> 1, J = A.slice(0, I + 1), K = r(v + D, v + D + I + 1) + o;
          K <= e ? (E = I + 1, G = J, H = K) : F = I;
        }
        if (G) {
          if (k) {
            var L = void 0, M = A[G.length], N = " " === M || "-" === M;
            L = N && H <= e ? G.length : Math.max(G.lastIndexOf(" "), G.lastIndexOf("-")) + 1, 0 < L && (E = L, G = G.slice(0, E), H = r(v + D, v + D + E));
          }
          var O = p(v + D, v + D + E).filter(function(a3) {
            return a3.text;
          });
          if (C = s(O), w(q(O), C, O), u += C, !j || h && u + C > f) {
            var P = this.textLines[this.textLines.length - 1];
            if (P && l) {
              var Q = P.parts[P.parts.length - 1], R = this.measurePart(_objectSpread52(_objectSpread52({}, Q), {}, { text: "".concat(Q.text).concat(m) })), S = R < e;
              S || (Q.text = Q.text.slice(0, Q.text.length - 3)), P.parts.splice(P.parts.length - 1, 1), P.parts.push(_objectSpread52(_objectSpread52({}, Q), {}, { width: R, text: "".concat(Q.text).concat(m) }));
            }
            break;
          }
          if (A = A.slice(E), D += E + NEWLINE_COUNT_CONST, 0 < A.length) {
            var T = p(v + D, v + D + A.length);
            if (B = q(T), B <= e && T) {
              var U = s(T);
              w(B, U, T), u += U;
              break;
            }
          }
        } else break;
      }
      else {
        var V = p(v, v + A.length);
        C = s(V), w(B, C, V);
      }
      if (h && u + C > f) break;
      v += z.length + NEWLINE_COUNT_CONST, u += C;
    }
    var W = "middle" === this.verticalAlign(), X = W ? this.visibleLinesStartIndex / 2 : this.visibleLinesStartIndex, Y = this.textLines.slice(Math.floor(X), W ? this.textLines.length - Math.ceil(X) : void 0);
    if (0 === Y.length) this.linesHeight = 0;
    else {
      var Z = Y[0], $ = Math.max.apply(Math, _toConsumableArray(Z.parts.map(function(a3) {
        var c2;
        return null !== (c2 = a3.style.fontSize) && void 0 !== c2 ? c2 : b2.fontSize();
      }))), _ = 0.7 * $, aa = 0.02 * $;
      if (1 === Y.length) this.linesHeight = aa + _;
      else {
        var ba = Y.slice(0, -1).reduce(function(a3, b3) {
          return a3 + b3.totalHeight;
        }, 0);
        this.linesHeight = aa + _ + ba;
      }
    }
    this.linesWidth = Math.max.apply(Math, _toConsumableArray(this.textLines.map(function(a3) {
      return a3.width;
    }, 0)));
  } }, { key: "getHeight", value: function() {
    var a2 = "auto" === this.attrs.height || void 0 === this.attrs.height;
    return a2 ? this.linesHeight + 2 * this.padding() : this.attrs.height;
  } }, { key: "getWidth", value: function() {
    var a2 = "auto" === this.attrs.width || void 0 === this.attrs.width;
    return a2 ? this.linesWidth + 2 * this.padding() : this.attrs.width;
  } }, { key: "_sceneFunc", value: function(a2) {
    var b2, c = this;
    if (0 !== this.text().length && 0 !== (null === (b2 = this.textLines) || void 0 === b2 ? void 0 : b2.length)) {
      var d = this.getWidth(), e = this.getHeight();
      a2.setAttr("textBaseline", "alphabetic"), a2.setAttr("textAlign", "left");
      var f = "middle" === this.verticalAlign(), g = this.padding(), h = 0;
      f ? h = (e - this.textLines[0].totalHeight / 2 - this.linesHeight - 2 * g) / 2 : "bottom" === this.verticalAlign() && (h = e - this.linesHeight - 2 * g), a2.translate(g, h + g);
      var i = f ? this.visibleLinesStartIndex / 2 : this.visibleLinesStartIndex, j = this.textLines.slice(Math.floor(i), f ? this.textLines.length - Math.ceil(i) : void 0), k = Math.max.apply(Math, _toConsumableArray(this.textLines[0].parts.map(function(a3) {
        var b3;
        return null !== (b3 = a3.style.fontSize) && void 0 !== b3 ? b3 : c.fontSize();
      }))), l = 0.02 * k + 0.7 * k, m = 0;
      j.forEach(function(b3) {
        var e2 = m === j.length - 1, f2 = 0;
        a2.save(), "right" === c.align() ? f2 += d - b3.width - 2 * g : "center" === c.align() && (f2 += (d - b3.width - 2 * g) / 2), b3.parts.forEach(function(h2) {
          var i2, k2;
          if (null !== (i2 = h2.style.textDecoration) && void 0 !== i2 && i2.includes("underline")) {
            a2.save(), a2.beginPath(), a2.moveTo(f2, l + Math.round(h2.style.fontSize / 2) - h2.style.baselineShift);
            var n = h2.text.split(" ").length - 1, o = "justify" === c.align() && e2 && !(0 === n) ? d - 2 * g : h2.width;
            a2.lineTo(f2 + Math.round(o), l + Math.round(h2.style.fontSize / 2) - h2.style.baselineShift), a2.lineWidth = h2.style.fontSize / 15, a2.strokeStyle = h2.style.fill, a2.stroke(), a2.restore();
          }
          if (null !== (k2 = h2.style.textDecoration) && void 0 !== k2 && k2.includes("line-through")) {
            a2.save(), a2.beginPath(), a2.moveTo(f2, l - h2.style.baselineShift);
            var p = h2.text.split(" ").length - 1, q = "justify" === c.align() && e2 && !(0 === p) ? d - 2 * g : h2.width;
            a2.lineTo(f2 + Math.round(q), l - h2.style.baselineShift), a2.lineWidth = h2.style.fontSize / 15, a2.strokeStyle = h2.style.fill, a2.stroke(), a2.restore();
          }
          if (c.fill(h2.style.fill), a2.setAttr("font", c.formatFont(h2)), 0 !== h2.style.letterSpacing || "justify" === c.align()) {
            for (var r, s = h2.text.split(" ").length - 1, t = Array.from(h2.text), u = h2.style.letterSpacing || 0, v = u, w = 0; w < t.length; w += 1) {
              r = t[w], " " === r && m !== j.length - 1 && "justify" === c.align() && (f2 += (d - 2 * g - b3.width) / s), c.drawState = { x: f2, y: l - h2.style.baselineShift, text: r }, a2.fillStrokeShape(c);
              var x = a2.measureText(r).width;
              f2 += x, w < t.length - 1 && (f2 += v);
            }
            1 === t.length && (f2 += v);
          } else c.drawState = { x: f2, y: l - h2.style.baselineShift, text: h2.text }, a2.fillStrokeShape(c), f2 += h2.width;
        }), a2.restore(), "undefined" != typeof j[m + 1] && (l += j[m + 1].totalHeight), m += 1;
      });
    }
  } }, { key: "_fillFunc", value: function(a2) {
    a2.fillText(this.drawState.text, this.drawState.x, this.drawState.y);
  } }, { key: "_strokeFunc", value: function(a2) {
    a2.strokeText(this.drawState.text, this.drawState.x, this.drawState.y, void 0);
  } }, { key: "_hitFunc", value: function(a2) {
    a2.beginPath(), a2.rect(0, 0, this.getWidth(), this.getHeight()), a2.closePath(), a2.fillStrokeShape(this);
  } }, { key: "getStrokeScaleEnabled", value: function() {
    return true;
  } }]);
}(import_Shape.Shape);
FormattedTextFIE.prototype.className = "FormattedTextFIE", (0, import_Global._registerNode)(FormattedTextFIE), import_Factory3.Factory.overWriteSetter(FormattedTextFIE, "width", (0, import_Validators3.getNumberOrAutoValidator)()), import_Factory3.Factory.overWriteSetter(FormattedTextFIE, "height", (0, import_Validators3.getNumberOrAutoValidator)()), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "padding", 0, (0, import_Validators3.getNumberValidator)()), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "align", "left"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "verticalAlign", "top"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "lineHeight", 1, (0, import_Validators3.getNumberValidator)()), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "wrap", "word"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "ellipsis", false, (0, import_Validators3.getBooleanValidator)()), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "letterSpacing", 0, (0, import_Validators3.getNumberValidator)()), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "text"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "fontFamily", "Arial"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "fontSize", 16, (0, import_Validators3.getNumberValidator)()), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "fontVariant", "normal"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "fontStyle", "normal"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "fontWeight", "normal"), import_Factory3.Factory.addGetterSetter(FormattedTextFIE, "scaleFormatDimensionsBy", 1);

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/getNewAnnotationPreview.js
var _excluded8 = ["width", "height", "startedX", "startedY"];
function ownKeys53(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread53(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys53(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys53(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var annotationsNamesToKonvaClasses = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, TOOLS_IDS.RECT, import_konva12.default.Rect), TOOLS_IDS.ELLIPSE, import_konva12.default.Ellipse), TOOLS_IDS.POLYGON, import_konva12.default.RegularPolygon), TOOLS_IDS.LINE, import_konva12.default.Line), TOOLS_IDS.IMAGE, import_konva12.default.Image), TOOLS_IDS.TEXT, FormattedTextFIE), TOOLS_IDS.ARROW, import_konva12.default.Arrow);
var ANNOTATIONS_WITH_POINTS = [TOOLS_IDS.LINE, TOOLS_IDS.ARROW];
var NO_WIDTH_HEIGHT_ANNOTATIONS = [].concat(ANNOTATIONS_WITH_POINTS, [TOOLS_IDS.ELLIPSE, TOOLS_IDS.POLYGON]);
var getNewAnnotationPreview = function(a, b) {
  var c = _objectSpread53(_objectSpread53({}, annotationsNamesToKonvaClasses), b);
  if (c[a.name]) {
    var d, e, f;
    return new c[a.name](_objectSpread53(_objectSpread53({}, a), {}, { opacity: null !== (d = a.opacity) && void 0 !== d ? d : 0.7, x: null !== (e = a.x) && void 0 !== e ? e : 0, y: null !== (f = a.y) && void 0 !== f ? f : 0, width: Math.abs(a.width) || 0, height: Math.abs(a.height) || 0 }, ANNOTATIONS_WITH_POINTS.includes(a.name) ? { stroke: a.stroke || "#000000" } : {}));
  }
  return {};
};
var dimensToProperAnnotationDimens = function(a, b, c) {
  var d = a.width, e = a.height, f = a.startedX, g = a.startedY, h = _objectWithoutProperties(a, _excluded8), i = Math.abs(d), j = Math.abs(e), k = 0 > d, l = 0 > e;
  switch (b) {
    case TOOLS_IDS.RECT:
      c ? (h.width = Math.sqrt(i * i + j * j), h.height = h.width, h.x -= k ? h.width - i : 0, h.y -= l ? h.height - j : 0) : (h.width = i, h.height = j);
      break;
    case TOOLS_IDS.ELLIPSE:
      c ? (h.radiusX = Math.sqrt(i * i + j * j) / 2, h.radiusY = h.radiusX, h.x -= k ? 2 * h.radiusX - i : 0, h.y -= l ? 2 * h.radiusY - j : 0) : (h.radiusX = i / 2, h.radiusY = j / 2), h.offsetX = -h.radiusX, h.offsetY = -h.radiusY;
      break;
    case TOOLS_IDS.POLYGON:
      h.radius = (i + j) / 2, h.x -= k ? 2 * h.radius - i : 0, h.y -= l ? 2 * h.radius - j : 0, h.offsetX = -h.radius, h.offsetY = -h.radius;
      break;
    case TOOLS_IDS.LINE:
    case TOOLS_IDS.ARROW:
      h.x = f, h.y = g, h.points = [0, 0], c ? h.points.push(i >= j ? d : 0, j > i ? e : 0) : h.points = [0, 0, d, e];
      break;
    default:
      h.width = i, h.height = j;
  }
  return h;
};
var getNewAnnotationPreview_default = getNewAnnotationPreview;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/previewThenCallAnnotationAdding.js
var _excluded9 = ["id", "x", "y", "points"];
var _excluded22 = ["startedX", "startedY", "offsetX", "offsetY", "width", "height"];
function ownKeys54(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread54(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys54(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys54(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var pointerDown = { startedX: void 0, startedY: void 0, isOutOfCanvas: false };
var eventsOptions2 = { passive: true };
var MIN_PIXELS = 1;
var shownAnnotationPreview = null;
var textAnnotationWrappedRect = null;
var latestAnnotationProps = null;
var previewThenCallAnnotationAdding = function(a, b, c, d, e) {
  var f = function b2(a2) {
    textAnnotationWrappedRect = getNewAnnotationPreview_default(_objectSpread54(_objectSpread54({}, a2), {}, { name: TOOLS_IDS.RECT, fill: "", stroke: "#000000", strokeWidth: 2, shadowColor: "#ffffff", shadowBlur: 1, shadowOpacity: 0.7 }), e), c && c.add(textAnnotationWrappedRect);
  }, g = function b2(a2) {
    shownAnnotationPreview = getNewAnnotationPreview_default(a2, e), c && c.add(shownAnnotationPreview), a2.name === TOOLS_IDS.TEXT && f(a2), latestAnnotationProps = a2;
  }, h = function c2(a2, b2) {
    if (latestAnnotationProps) {
      var d2 = dimensToProperAnnotationDimens(a2, latestAnnotationProps.name, b2);
      textAnnotationWrappedRect && textAnnotationWrappedRect.setAttrs(d2), shownAnnotationPreview.setAttrs(d2), latestAnnotationProps = _objectSpread54(_objectSpread54({}, latestAnnotationProps), d2);
    }
  }, i = function b2(a2) {
    var d2 = getPointerOffsetPosition_default(c);
    h(getBoundingRectUnScaled_default(d2, pointerDown, c), a2.shiftKey);
  }, j = function a2() {
    c && shownAnnotationPreview && c.destroyChildren();
  }, k = function e2(d2) {
    var f2;
    if (!(1 < (null === (f2 = d2.evt.touches) || void 0 === f2 ? void 0 : f2.length))) {
      var j2 = getPointerOffsetPosition_default(c);
      pointerDown.isOutOfCanvas && (document.removeEventListener("mousemove", i, eventsOptions2), document.removeEventListener("touchmove", i, eventsOptions2), pointerDown.isOutOfCanvas = false);
      var k2 = getBoundingRectUnScaled_default(j2, pointerDown, c);
      if (shownAnnotationPreview) h(k2, d2.evt.shiftKey);
      else {
        var l2 = b.id, m2 = b.x, n2 = b.y, o = b.points, p = _objectWithoutProperties(b, _excluded9);
        g(_objectSpread54(_objectSpread54({}, p), k2));
      }
      a.setAttrs({ isDrawing: true });
    }
  }, l = function a2() {
    pointerDown.isOutOfCanvas || (document.addEventListener("mousemove", i, eventsOptions2), document.addEventListener("touchmove", i, eventsOptions2), pointerDown.isOutOfCanvas = true);
  }, m = function c2() {
    var e2, f2;
    if (j(), latestAnnotationProps && (latestAnnotationProps.width >= MIN_PIXELS && latestAnnotationProps.height >= MIN_PIXELS || latestAnnotationProps.radiusX >= MIN_PIXELS && latestAnnotationProps.radiusY >= MIN_PIXELS || null !== (e2 = latestAnnotationProps.points) && void 0 !== e2 && e2[2] || null !== (f2 = latestAnnotationProps.points) && void 0 !== f2 && f2[3] || latestAnnotationProps.radius >= MIN_PIXELS)) {
      var g2 = latestAnnotationProps, h2 = g2.startedX, n2 = g2.startedY, o = g2.offsetX, p = g2.offsetY, q = g2.width, r = g2.height, s = _objectWithoutProperties(g2, _excluded22);
      NO_WIDTH_HEIGHT_ANNOTATIONS.includes(b.name) || (s.width = q, s.height = r), d(s, true);
    }
    shownAnnotationPreview = null, textAnnotationWrappedRect = null, latestAnnotationProps = null, a.setAttrs({ isDrawing: false }), a.off("mousemove touchmove", k), a.off("mouseleave touchcancel", l), document.removeEventListener("mouseup", m, eventsOptions2), document.removeEventListener("touchend", m, eventsOptions2), document.removeEventListener("mouseleave", m, eventsOptions2), document.removeEventListener("touchcancel", m, eventsOptions2), document.removeEventListener("mousemove", i, eventsOptions2), document.removeEventListener("touchmove", i, eventsOptions2), pointerDown.isOutOfCanvas = false;
  }, n = function d2(b2) {
    var e2;
    if (b2.evt.preventDefault(), !(b2.target.attrs.draggable || 1 < (null === (e2 = b2.evt.touches) || void 0 === e2 ? void 0 : e2.length))) {
      j();
      var f2 = getPointerOffsetPosition_default(c);
      pointerDown.startedX = f2.offsetX, pointerDown.startedY = f2.offsetY, pointerDown.isOutOfCanvas = false, a.on("mousemove touchmove", k), a.on("mouseleave touchcancel", l), document.addEventListener("mouseup", m, eventsOptions2), document.addEventListener("touchend", m, eventsOptions2), document.addEventListener("mouseleave", m, eventsOptions2), document.addEventListener("touchcancel", m, eventsOptions2);
    }
  };
  return a.on("mousedown touchstart", n), function() {
    j(), a.off("mousedown touchstart", n);
  };
};
var previewThenCallAnnotationAdding_default = previewThenCallAnnotationAdding;

// node_modules/react-filerobot-image-editor/lib/hooks/useDebouncedCallback.js
init_react_shim();
var import_react76 = __toESM(require_react());
var useDebouncedCallback = function(a, b) {
  var c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : [];
  return (0, import_react76.useCallback)(debounce_default(a, b), c);
};
var useDebouncedCallback_default = useDebouncedCallback;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/index.js
var _excluded10 = ["fonts", "onFontChange"];
var _excluded23 = ["id", "x", "y", "width", "height", "radius", "radiusX", "radiusY", "points", "image", "originalImage", "text", "scaleX", "scaleY", "rotation", "place", "gravity"];
var _excluded32 = ["shouldSave", "neverSave"];
function ownKeys55(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread55(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys55(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys55(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var getTextPartSharedFormats = function(a) {
  var b = {};
  return ALLOWED_TEXT_PART_FORMATS.forEach(function(c) {
    "undefined" !== a[c] && (b[c] = a[c]);
  }), b;
};
var useAnnotation = function() {
  var a, b = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, c = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, d = c.enablePreview, e = void 0 === d || d, f = c.selectToolOnAnnotationChange, g = useSetAnnotation_default(), h = useStore_default(), i = h.previewGroup, j = h.annotations, k = h.selectionsIds, l = void 0 === k ? [] : k, m = h.config, n = h.toolId, o = m.moreAnnotationPreviewClasses, p = useSelectTool_default(), q = null === (a = j[l[0]]) || void 0 === a ? void 0 : a.name, r = _objectSpread55(_objectSpread55({}, m.annotationsCommon), m[b.name || q]), s = (0, import_react77.useState)(function() {
    return _objectSpread55(_objectSpread55(_objectSpread55({}, r), b), q === b.name && j[l[0]]);
  }), t = _slicedToArray(s, 2), u = t[0], v = t[1], w = (0, import_react77.useRef)(), x = null === i || void 0 === i ? void 0 : i.getStage(), y = (0, import_react77.useCallback)(function(a2) {
    var c2 = a2.fonts, d2 = a2.onFontChange, e2 = _objectWithoutProperties(a2, _excluded10), f2 = e2.id && b.name !== TOOLS_IDS.PEN;
    g(_objectSpread55(_objectSpread55({}, e2), {}, { selectOnSet: f2 }));
  }, []), z = useDebouncedCallback_default(function(a2) {
    var b2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, c2 = b2.overrideWithDefaults, d2 = b2.overrideWithoutDefaults;
    v(function(b3) {
      var e2 = "function" == typeof a2 ? a2(b3) : a2, f2 = void 0 !== c2 && c2 ? _objectSpread55(_objectSpread55({}, m.annotationsCommon), m[e2.name]) : b3;
      return _objectSpread55(_objectSpread55({}, void 0 !== d2 && d2 ? {} : f2), {}, { shouldSave: false, neverSave: false }, e2);
    });
  }, 15), A = (0, import_react77.useCallback)(function(a2, c2) {
    if (a2.name === c2) {
      var d2 = a2.id, e2 = a2.x, f2 = a2.y, g2 = a2.width, h2 = a2.height, i2 = a2.radius, j2 = a2.radiusX, k2 = a2.radiusY, l2 = a2.points, m2 = a2.image, n2 = a2.originalImage, o2 = a2.text, p2 = a2.scaleX, q2 = a2.scaleY, s2 = a2.rotation, t2 = a2.place, u2 = a2.gravity, v2 = _objectWithoutProperties(a2, _excluded23), w2 = _objectSpread55(_objectSpread55({}, r), b);
      if (Array.isArray(w2.text) && 0 < w2.text.length) {
        var x2 = getTextPartSharedFormats(v2);
        w2.text = w2.text.map(function(a3) {
          return _objectSpread55(_objectSpread55({}, a3), {}, { style: _objectSpread55(_objectSpread55({}, a3.style), x2) });
        });
      }
      return _objectSpread55(_objectSpread55({}, w2), v2);
    }
    return _objectSpread55(_objectSpread55({}, r), b);
  }, [r, b]), B = (0, import_react77.useCallback)(function(a2) {
    v(function(c2) {
      var d2 = A(c2, a2.name || b.name);
      return _objectSpread55(_objectSpread55(_objectSpread55({}, d2), a2), {}, { id: a2.id || randomId_default(a2.name || c2.name), shouldSave: true, neverSave: false });
    });
  }, [A]);
  return (0, import_react77.useEffect)(function() {
    var a2 = (void 0 === f || f) && u.name && u.name !== n;
    a2 && p(u.name, true);
  }, [u.name]), useUpdateEffect_default(function() {
    var a2 = u.shouldSave, b2 = u.neverSave, c2 = _objectWithoutProperties(u, _excluded32), d2 = 1 === l.length && j[l[0]];
    !b2 && (a2 || d2) && y(_objectSpread55(_objectSpread55({}, c2), {}, { id: a2 ? c2.id : d2.id }));
  }, [u]), useUpdateEffect_default(function() {
    setTimeout(function() {
      1 === l.length ? (w.current = u, v(_objectSpread55(_objectSpread55({}, j[l[0]]), {}, { neverSave: true }))) : w.current && (v(_objectSpread55(_objectSpread55({}, w.current), {}, { neverSave: true })), w.current = null);
    });
  }, [l, j]), (0, import_react77.useEffect)(function() {
    var a2 = null;
    if (x && e) {
      var c2 = A(u, b.name);
      a2 = previewThenCallAnnotationAdding_default(x, _objectSpread55(_objectSpread55({}, c2), {}, { name: b.name }), i, B, o);
    }
    return function() {
      a2 && a2();
    };
  }, [x, u, i, e]), (0, import_react77.useMemo)(function() {
    return [u, z, B];
  }, [u, z, B]);
};
var useAnnotation_default = useAnnotation;

// node_modules/react-filerobot-image-editor/lib/hooks/useAppReducer.js
init_react_shim();
var import_react78 = __toESM(require_react());
var _excluded11 = ["isDesignState"];
function ownKeys56(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread56(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys56(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys56(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var applyCallbackFn = function(a, b) {
  setTimeout(function() {
    isFunction_default(a) && b && a(b);
  });
};
var useAppReducer = function(a, b) {
  var c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, d = _objectSpread56(_objectSpread56({}, b), {}, { pastDesignStates: [], futureDesignStates: [], hasRedo: false, hasUndo: false });
  return (0, import_react78.useReducer)(function(b2, e) {
    var f = a(b2, e) || d;
    if ([UNDO, REDO, RESET].includes(e.type)) {
      var g;
      return e.type === UNDO && (g = c.onUndo, emitCustomEvent_default(EVENTS.DESIGN_UNDO, f)), e.type === REDO && (g = c.onRedo, emitCustomEvent_default(EVENTS.DESIGN_REDO, f)), e.type === RESET && (g = c.onReset, emitCustomEvent_default(EVENTS.DESIGN_RESET, f)), emitCustomEvent_default(EVENTS.DESIGN_UPDATE, f), applyCallbackFn(c.onModify, f), applyCallbackFn(g, f), f;
    }
    if (f.isDesignState) {
      var h = extractCurrentDesignState_default(b2), i = f.isDesignState, j = _objectWithoutProperties(f, _excluded11), k = _objectSpread56(_objectSpread56({}, j), {}, { pastDesignStates: [h].concat(_toConsumableArray(b2.pastDesignStates)), hasUndo: true, hasRedo: false, futureDesignStates: [], isResetted: false, haveNotSavedChanges: true });
      return emitCustomEvent_default(EVENTS.DESIGN_UPDATE, k), applyCallbackFn(c.onModify, k), k;
    }
    return f;
  }, d);
};
var useAppReducer_default = useAppReducer;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotationEvents.js
init_react_shim();
var import_react81 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/hooks/useSetAnnotation.js
init_react_shim();
var import_react80 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/hooks/useDispatch.js
init_react_shim();
var import_react79 = __toESM(require_react());
var useDispatch = function() {
  var a = useStore_default(), b = a.dispatch;
  return (0, import_react79.useCallback)(b, [b]);
};
var useDispatch_default = useDispatch;

// node_modules/react-filerobot-image-editor/lib/hooks/useSetAnnotation.js
function ownKeys57(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread57(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys57(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys57(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useSetAnnotation = function() {
  var a = useDispatch_default(), b = useStore_default(), c = b.config, d = void 0 === c ? {} : c, e = (0, import_react80.useCallback)(function(b2) {
    a({ type: SET_ANNOTATION, payload: _objectSpread57(_objectSpread57({}, b2), {}, { onAnnotationAdd: d.onAnnotationAdd }) });
  }, [d.onAnnotationAdd]);
  return e;
};
var useSetAnnotation_default = useSetAnnotation;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotationEvents.js
var useAnnotationEvents = function() {
  var a = useStore_default(), b = a.tabId, c = a.toolId, d = a.dispatch, e = a.config.keepAnnotationEventsEnabled, f = useSetAnnotation_default(), g = (0, import_react81.useMemo)(function() {
    return !(void 0 !== e && e) && b !== TABS_IDS.ANNOTATE && b !== TABS_IDS.WATERMARK && !isDrawTool_default(c);
  }, [b, c]), h = (0, import_react81.useCallback)(function(a2) {
    var b2 = { id: a2.target.id(), x: a2.target.x(), y: a2.target.y() };
    f(b2);
  }, []), i = (0, import_react81.useCallback)(function(a2) {
    var b2 = { id: a2.target.id(), rotation: a2.target.rotation(), x: a2.target.x(), y: a2.target.y() };
    return a2.target.name() === TOOLS_IDS.TEXT || a2.target.name() === TOOLS_IDS.IMAGE ? (b2.width = a2.target.width() * a2.target.scaleX(), b2.height = a2.target.height() * a2.target.scaleY(), b2.scaleX = 1, b2.scaleY = 1) : (b2.scaleX = a2.target.scaleX(), b2.scaleY = a2.target.scaleY()), b2;
  }, []), j = (0, import_react81.useCallback)(function(a2) {
    f(i(a2));
  }, []), k = (0, import_react81.useCallback)(function(a2) {
    (a2.target.name() === TOOLS_IDS.TEXT || a2.target.name() === TOOLS_IDS.IMAGE) && a2.target.setAttrs(i(a2));
  }), l = (0, import_react81.useCallback)(function(a2) {
    if (!(a2.target.id() === WATERMARK_ANNOTATION_ID || a2.target.getStage().attrs.isDrawing)) {
      var b2 = a2.evt.ctrlKey || a2.evt.shiftKey || a2.evt.metaKey;
      d({ type: SELECT_ANNOTATION, payload: { annotationId: a2.target.id(), toolId: a2.target.name(), multiple: b2 } });
    }
  }, []);
  return (0, import_react81.useMemo)(function() {
    return g ? {} : { onTransform: k, onTransformEnd: j, onDragEnd: h, onClick: l, onTap: l };
  }, [g]);
};
var useAnnotationEvents_default = useAnnotationEvents;

// node_modules/react-filerobot-image-editor/lib/hooks/useResizeObserver.js
init_react_shim();
var import_react82 = __toESM(require_react());
var useResizeObserver = function() {
  var a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : function() {
  }, b = (0, import_react82.useRef)(a), c = (0, import_react82.useRef)(), d = (0, import_react82.useCallback)(function(a2) {
    a2.forEach(function(a3) {
      if (a3.contentRect) {
        var c2 = a3.contentRect, d2 = c2.width, e2 = c2.height;
        b.current({ entry: a3, width: d2, height: e2 });
      }
    });
  }, []), e = (0, import_react82.useCallback)(function(a2) {
    b.current = a2;
  }, []), f = (0, import_react82.useCallback)(function() {
    c.current || (c.current = new ResizeObserver(d));
  }, []), g = (0, import_react82.useCallback)(function(a2, d2) {
    a2 && (!c.current && f(), c.current.observe(a2), d2 && (b.current = d2));
  }, []), h = (0, import_react82.useCallback)(function(a2) {
    c.current && a2 && c.current.unobserve(a2);
  }, []), i = (0, import_react82.useCallback)(function() {
    c.current && c.current.disconnect();
  }, []);
  return (0, import_react82.useEffect)(function() {
    return f(), i;
  }, []), (0, import_react82.useMemo)(function() {
    return [g, h, e];
  }, []);
};
var useResizeObserver_default = useResizeObserver;

// node_modules/react-filerobot-image-editor/lib/hooks/useDrag.js
init_react_shim();
var useDrag = function(a, b, c) {
  var d = function(b2) {
    if ("function" == typeof a) {
      var c2;
      a((null === (c2 = b2.touches) || void 0 === c2 ? void 0 : c2[0]) || b2);
    }
  }, f = function(a2) {
    if (document.removeEventListener("mousemove", d), document.removeEventListener("mouseup", f), document.removeEventListener("mouseleave", f), document.removeEventListener("touchmove", d), document.removeEventListener("touchend", f), document.removeEventListener("touchcancel", f), "function" == typeof c) {
      var b2;
      c((null === (b2 = a2.touches) || void 0 === b2 ? void 0 : b2[0]) || a2);
    }
  }, g = function(a2) {
    if (document.addEventListener("mousemove", d), document.addEventListener("mouseup", f), document.addEventListener("mouseleave", f), document.addEventListener("touchmove", d), document.addEventListener("touchend", f), document.addEventListener("touchcancel", f), "function" == typeof b) {
      var c2;
      b((null === (c2 = a2.touches) || void 0 === c2 ? void 0 : c2[0]) || a2);
    }
  };
  return { onMouseDown: g, onTouchStart: g };
};
var useDrag_default = useDrag;

// node_modules/react-filerobot-image-editor/lib/hooks/usePhoneScreen.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/hooks/useScreenWidth.js
init_react_shim();
var useScreenWidth = function(a) {
  return window.matchMedia("(max-width: ".concat(a, "px)")).matches;
};
var useScreenWidth_default = useScreenWidth;

// node_modules/react-filerobot-image-editor/lib/hooks/usePhoneScreen.js
var usePhoneScreen = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : 438;
  return useScreenWidth_default(a);
};
var usePhoneScreen_default = usePhoneScreen;

// node_modules/react-filerobot-image-editor/lib/hooks/useTransformedImgData.js
init_react_shim();
var import_konva13 = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/utils/imageToBase64.js
init_react_shim();
var imageToBase64 = function(a) {
  if (a instanceof HTMLImageElement) {
    var b = document.createElement("canvas"), c = b.getContext("2d");
    return b.width = a.width, b.height = a.height, c.drawImage(a, 0, 0), b.toDataURL();
  }
  return "";
};
var imageToBase64_default = imageToBase64;

// node_modules/react-filerobot-image-editor/lib/utils/operationsToCloudimageUrl.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/getImageSealingParams.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/sha1.js
init_react_shim();
var rotateLeft = function(a, b) {
  return a << b | a >>> 32 - b;
};
var cvtHex = function(a) {
  var b, c, d = "";
  for (b = 7; 0 <= b; b--) c = 15 & a >>> 4 * b, d += c.toString(16);
  return d;
};
var Utf8Encode = function(a) {
  for (var b, d = a.replace(/\r\n/g, "\n"), e = "", f = 0; f < d.length; f++) b = d.charCodeAt(f), 128 > b ? e += String.fromCharCode(b) : 127 < b && 2048 > b ? (e += String.fromCharCode(192 | b >> 6), e += String.fromCharCode(128 | 63 & b)) : (e += String.fromCharCode(224 | b >> 12), e += String.fromCharCode(128 | 63 & b >> 6), e += String.fromCharCode(128 | 63 & b));
  return e;
};
var sha1 = function(a) {
  var b, c, d, e, f, g, h, k, l, m = a, n = Array(80), o = 1732584193, p = 4023233417, q = 2562383102, r = 271733878, s = 3285377520;
  m = Utf8Encode(m);
  var t = m.length, u = [];
  for (c = 0; c < t - 3; c += 4) d = m.charCodeAt(c) << 24 | m.charCodeAt(c + 1) << 16 | m.charCodeAt(c + 2) << 8 | m.charCodeAt(c + 3), u.push(d);
  switch (t % 4) {
    case 0:
      c = 2147483648;
      break;
    case 1:
      c = 8388608 | m.charCodeAt(t - 1) << 24;
      break;
    case 2:
      c = 32768 | (m.charCodeAt(t - 2) << 24 | m.charCodeAt(t - 1) << 16);
      break;
    case 3:
      c = 128 | (m.charCodeAt(t - 3) << 24 | m.charCodeAt(t - 2) << 16 | m.charCodeAt(t - 1) << 8);
      break;
    default:
  }
  for (u.push(c); 14 != u.length % 16; ) u.push(0);
  for (u.push(t >>> 29), u.push(4294967295 & t << 3), b = 0; b < u.length; b += 16) {
    for (c = 0; 16 > c; c++) n[c] = u[b + c];
    for (c = 16; 79 >= c; c++) n[c] = rotateLeft(n[c - 3] ^ n[c - 8] ^ n[c - 14] ^ n[c - 16], 1);
    for (e = o, f = p, g = q, h = r, k = s, c = 0; 19 >= c; c++) l = 4294967295 & rotateLeft(e, 5) + (f & g | ~f & h) + k + n[c] + 1518500249, k = h, h = g, g = rotateLeft(f, 30), f = e, e = l;
    for (c = 20; 39 >= c; c++) l = 4294967295 & rotateLeft(e, 5) + (f ^ g ^ h) + k + n[c] + 1859775393, k = h, h = g, g = rotateLeft(f, 30), f = e, e = l;
    for (c = 40; 59 >= c; c++) l = 4294967295 & rotateLeft(e, 5) + (f & g | f & h | g & h) + k + n[c] + 2400959708, k = h, h = g, g = rotateLeft(f, 30), f = e, e = l;
    for (c = 60; 79 >= c; c++) l = 4294967295 & rotateLeft(e, 5) + (f ^ g ^ h) + k + n[c] + 3395469782, k = h, h = g, g = rotateLeft(f, 30), f = e, e = l;
    o = 4294967295 & o + e, p = 4294967295 & p + f, q = 4294967295 & q + g, r = 4294967295 & r + h, s = 4294967295 & s + k;
  }
  return l = cvtHex(o) + cvtHex(p) + cvtHex(q) + cvtHex(r) + cvtHex(s), l.toLowerCase();
};
var sha1_default = sha1;

// node_modules/react-filerobot-image-editor/lib/utils/getImageSealingParams.js
var encodeBase64 = function(a) {
  return btoa(a).replace(/=*$/g, "");
};
var getSha1 = function(a, b) {
  return sha1_default(a).slice(0, b);
};
var getSealingParams = function(a, b, c, d) {
  var e = encodeBase64(a), f = getSha1(b + e + c, d);
  return [f ? "ci_seal=".concat(f) : "", e ? "ci_eqs=".concat(e) : ""].filter(function(a2) {
    return a2;
  }).join("&");
};
var getImageSealingParams = function(a, b, c) {
  var d = b || {}, e = d.salt, f = d.charCount, g = d.includeParams, h = void 0 === g ? [] : g, i = !h || 0 === (null === h || void 0 === h ? void 0 : h.length), j = "", k = "", l = [], m = [];
  return a.split("&").forEach(function(a2) {
    var b2 = a2.split("="), c2 = _slicedToArray(b2, 1), d2 = c2[0];
    -1 < (null === h || void 0 === h ? void 0 : h.indexOf(d2)) || i ? l.push(a2) : m.push(a2);
  }), 0 < m.length && (k = m.join("&")), j = getSealingParams(l.join("&"), c, e, f), [j, k].filter(function(a2) {
    return a2;
  }).join("&");
};
var getImageSealingParams_default = getImageSealingParams;

// node_modules/react-filerobot-image-editor/lib/utils/rgbaToHexa.js
init_react_shim();
var rgbaToHexWithOpacity = function() {
  var a, c = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "", d = { hex: "000000", opacity: 1 };
  if (!c) return d;
  if (c.startsWith("#")) return { hex: c.replace("#", ""), opacity: 1 };
  var e = c.split(","), f = _slicedToArray(e, 4), h = f[0], i = f[1], j = f[2], k = f[3];
  return "undefined" == typeof h || "undefined" == typeof i || "undefined" == typeof j ? d : (h = parseFloat(h.replace(/rgba?\(/, "").trim()).toString(16), i = parseFloat(i.trim()).toString(16), j = parseFloat(j.trim()).toString(16), k = k ? parseFloat(null !== (a = k.trim()) && void 0 !== a ? a : 1) : void 0, 1 === h.length && (h = "0".concat(h)), 1 === i.length && (i = "0".concat(i)), 1 === j.length && (j = "0".concat(j)), { hex: "".concat(h).concat(i).concat(j), opacity: k });
};
var rgbaToHexa_default = rgbaToHexWithOpacity;

// node_modules/react-filerobot-image-editor/lib/utils/operationsToCloudimageUrl.js
var _excluded12 = ["width", "height", "x", "y", "opacity", "scaleX", "scaleY"];
function ownKeys58(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread58(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys58(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys58(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var generateCropQuery = function(a) {
  var b = a.crop, c = a.previewDimensions, d = a.originalDimensions, e = a.cropConfig, f = a.isFlippedX, g = a.isFlippedY;
  if (b.noEffect) return b.ratio.includes("=") ? b.ratio : "gravity=".concat(b.ratio);
  var h = (e || {}).lockCropAreaAt, i = mapCropBox_default(b, c, d), j = i.x, k = i.y, l = i.width, m = i.height, n = b.ratio === ELLIPSE_CROP ? "&radius=".concat(Math.max(l, m), "&force_format=png") : "";
  if (h) {
    var o = h.split("-"), p = _slicedToArray(o, 2), q = p[0], r = p[1], s = "".concat(EDITOR_TO_CLOUDIMG_POSITIONS[q]).concat(EDITOR_TO_CLOUDIMG_POSITIONS[r]);
    return "gravity=".concat(s, "&aspect_ratio=").concat(toPrecisedFloat_default("string" == typeof b.ratio ? l / m : b.ratio, 2)).concat(n);
  }
  var t = f ? d.width - (j + l) : j, u = g ? d.height - (k + m) : k;
  return "tl_px=".concat(t, ",").concat(u, "&br_px=").concat((f ? t : j) + l, ",").concat((g ? u : k) + m).concat(n);
};
var generateResizeQuery = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = a.width, c = a.height;
  return "w=".concat(b, "&h=").concat(c);
};
var generateRotationQuery = function(a) {
  return "r=".concat(-a);
};
var generateFlipQuery = function(a, b) {
  return "flip=".concat(a ? "x" : "").concat(b ? "y" : "");
};
var generateWatermarkQuery = function(a) {
  var b, c = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {}, d = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, e = c.width, f = c.height, g = c.x, h = c.y, i = c.opacity, j = c.scaleX, k = void 0 === j ? 1 : j, l = c.scaleY, m = void 0 === l ? 1 : l, n = _objectWithoutProperties(c, _excluded12), o = a.width / a.height, p = "wat=1&wat_gravity=absolute&wat_pos=".concat(Math.floor(100 * ((g - (d.x || 0)) / a.width), 2), "p,").concat(Math.floor(100 * ((h - (d.y || 0)) / a.height), 2), "p");
  if (c.name === TOOLS_IDS.TEXT) {
    var q, r = rgbaToHexa_default(n.fill), s = r.hex, t = r.opacity;
    return "".concat(p, "&wat_text=").concat(n.text.replaceAll("\n", ""), "&wat_font=").concat(n.fontFamily, "&wat_color=").concat(s, "&wat_opacity=").concat(null !== (q = null !== t && void 0 !== t ? t : i) && void 0 !== q ? q : 1, "&wat_fontsize=").concat(n.fontSize, "max");
  }
  var u = (null === (b = n.image) || void 0 === b ? void 0 : b.src) || n.image, v = !u.startsWith("blob:") && u, w = toPrecisedFloat_default(100 * (e / f > o ? e * k / a.width : f * m / a.height), 2);
  return "".concat(p, "&wat_opacity=").concat(i, "&wat_scale=").concat(w, "p").concat(v ? "&wat_url=".concat(encodeURIComponent(v)) : "");
};
var finetuneNameToParamInfo = { Brighten: { cloudimage: { name: "bright", min: -100, max: 100 }, internal: { propName: "brightness", min: -1, max: 1 } }, Contrast: { cloudimage: { name: "contrast", min: -100, max: 100 }, internal: { propName: "contrast", min: -100, max: 100 } }, Blur: { cloudimage: { name: "blur", min: 0, max: 100 }, internal: { propName: "blurRadius", min: 0, max: 100 } } };
var generateFinetuneQuery = function(a) {
  var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, c = [];
  return a.forEach(function(a2) {
    var d = (a2.finetuneName || a2.name) && finetuneNameToParamInfo[a2.finetuneName || a2.name];
    if (d) {
      var e = toPrecisedFloat_default(mapNumber_default(b[d.internal.propName], d.internal.min, d.internal.max, d.cloudimage.min, d.cloudimage.max), 2);
      c.push("".concat(d.cloudimage.name, "=").concat(e));
    }
  }), c.join("&");
};
var operationsToCloudimageUrl = function(a, b, c, d, e) {
  var f = a.token, g = a.domain, h = a.dontPrefixUrl, i = a.version, j = a.imageSealing, k = a.secureProtocol, l = b.imgSrc, m = b.adjustments, n = m.crop, o = m.rotation, p = m.isFlippedX, q = m.isFlippedY, r = b.resize, s = void 0 === r ? {} : r, t = b.finetunes, u = void 0 === t ? {} : t, v = b.finetunesProps, w = b.annotations, x = void 0 === w ? {} : w, y = h ? "" : "http".concat(k ? "s" : "", "://").concat(f, ".").concat(g.replace(/^(https?:\/\/)?(www\.)?|^\.|\/$/g, ""), "/").concat(i ? "".concat(i, "/") : ""), z = [];
  n.width && n.height && (n.x || 0 === n.x) && (n.y || 0 === n.y) && z.push(generateCropQuery({ crop: n, previewDimensions: c, originalDimensions: d, cropConfig: e, isFlippedX: p, isFlippedY: q })), (s.width || s.height) && z.push(generateResizeQuery(_objectSpread58({ width: null === d || void 0 === d ? void 0 : d.width, height: null === d || void 0 === d ? void 0 : d.height }, s))), o && z.push(generateRotationQuery(o)), (p || q) && z.push(generateFlipQuery(p, q)), 0 < u.length && v && z.push(generateFinetuneQuery(u, v)), x[WATERMARK_ANNOTATION_ID] && z.push(generateWatermarkQuery(d, x[WATERMARK_ANNOTATION_ID], n)), z.push("ci_url_encoded=1");
  var A = z.join("&");
  j.enable && (A = getImageSealingParams_default(A, j, l)), A = A.replaceAll(" ", "+");
  var B = !h && "?" || -1 === l.indexOf("?") ? "?" : "&";
  return "".concat(y).concat(h ? l : encodeURIComponent(l)).concat(A ? "".concat(B).concat(A.replace(/&$/, "")) : "");
};
var operationsToCloudimageUrl_default = operationsToCloudimageUrl;

// node_modules/react-filerobot-image-editor/lib/hooks/useTransformedImgData.js
var _excluded13 = ["filter"];
function ownKeys59(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread59(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys59(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys59(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useTransformedImgData = function() {
  var a = useStore_default(), b = a.dispatch, c = a.designLayer, d = a.shownImageDimensions, e = a.originalSource, f = a.resize, g = void 0 === f ? {} : f, h = a.adjustments, i = void 0 === h ? {} : h, j = i.crop, k = void 0 === j ? {} : j, l = i.rotation, m = void 0 === l ? 0 : l, n = a.config, o = n.savingPixelRatio, p = n.previewPixelRatio, q = n.forceToPngInEllipticalCrop, r = n.defaultSavedImageType, s = n.useCloudimage, t = n.cloudimage, u = n[TOOLS_IDS.CROP];
  return s ? function() {
    var b2, c2, f2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, g2 = extractCurrentDesignState_default(a), h2 = g2.filter, i2 = _objectWithoutProperties(g2, _excluded13), j2 = operationsToCloudimageUrl_default(t, i2, d, e, u), l2 = mapCropBox_default({ x: k.x, y: k.y, width: k.width, height: k.height }, d, e), m2 = { cloudimageUrl: j2, width: (null === f2 || void 0 === f2 || null === (b2 = f2.size) || void 0 === b2 ? void 0 : b2.width) || l2.width, height: (null === f2 || void 0 === f2 || null === (c2 = f2.size) || void 0 === c2 ? void 0 : c2.height) || l2.height };
    return { imageData: m2, designState: i2 };
  } : function() {
    var f2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, h2 = !!(1 < arguments.length && void 0 !== arguments[1]) && arguments[1], i2 = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2], j2 = _objectSpread59({ size: g }, f2);
    import_konva13.default.pixelRatio = h2 || o;
    var l2 = c.attrs, n2 = l2.clipWidth, s2 = l2.clipHeight, t2 = l2.clipX, u2 = l2.clipY;
    c.setAttr("isSaving", true);
    var v = c.getStage().clone({ width: e.width, height: e.height, scaleX: 1, scaleY: 1 }), w = _slicedToArray(v.children, 2), x = w[0], y = w[1];
    v.children[2].destroy();
    var z = v.findOne("#".concat(IMAGE_NODE_ID));
    null === z || void 0 === z || z.cache();
    var A = { x: v.width() / d.width, y: v.height() / d.height }, B = { rotation: 0, offsetX: 0, offsetY: 0, x: 0, y: 0, scaleX: A.x, scaleY: A.y };
    x.setAttrs(B), y.setAttrs(B);
    var C = _objectSpread59(_objectSpread59({}, (!j2.name || !j2.extension) && getFileFullName_default(e.name, q && k.ratio === ELLIPSE_CROP ? "png" : SUPPORTED_IMAGE_TYPES.includes(null === r || void 0 === r ? void 0 : r.toLowerCase()) && r)), j2), D = C.name, E = C.extension, F = C.quality, G = void 0 === F ? 92 : F, H = C.size, I = void 0 === H ? {} : H, J = ["jpeg", "jpg", "webp"].includes(E), K = mapCropBox_default(k.noEffect ? { x: 0, y: 0 } : { x: k.x || t2, y: k.y || u2, width: k.width || n2, height: k.height || s2 }, d, v.attrs), L = getSizeAfterRotation_default(K.width, K.height, m);
    if (v.setAttrs({ offsetX: K.width / 2 + K.x, offsetY: K.height / 2 + K.y, width: L.width, height: L.height, x: L.width / 2, y: L.height / 2, rotation: m }), I.width) {
      var M = I.width / v.width();
      v.setAttrs({ scaleX: M, width: I.width, x: v.x() * Math.abs(M) });
    }
    if (I.height) {
      var N = I.height / v.height();
      v.setAttrs({ scaleY: N, height: I.height, y: v.y() * Math.abs(N) });
    }
    var O = _objectSpread59({ mimeType: "image/".concat("jpg" === E ? "jpeg" : E) }, J ? { quality: G } : {}), P = v.toCanvas(O), Q = v.toDataURL(O), R = _objectSpread59(_objectSpread59({}, extractCurrentDesignState_default(a)), {}, { shownImageDimensions: { width: a.shownImageDimensions.width, height: a.shownImageDimensions.height, scaledBy: a.shownImageDimensions.scaledBy } });
    R.filter && (R.filter = R.filter.filterName || R.filter.name), R.finetunes = R.finetunes.map(function(a2) {
      return a2.finetuneName || a2.name;
    }), Object.keys(R.annotations).forEach(function(a2) {
      var b2, c2 = R.annotations[a2], d2 = c2.name === TOOLS_IDS.IMAGE && (null === (b2 = c2.image) || void 0 === b2 ? void 0 : b2.src);
      d2 && d2.startsWith("blob:") ? R.annotations[a2].image = imageToBase64_default(c2.image) : c2.image instanceof HTMLImageElement && (R.annotations[a2].image = d2);
    });
    var S = _objectSpread59({ fullName: "".concat(D, ".").concat(E), name: D, extension: E, mimeType: "image/".concat(E), imageCanvas: P, imageBase64: Q, width: I.width || K.width, height: I.height || K.height }, J ? { quality: G } : {});
    c.setAttr("isSaving", false), b({ type: SET_SAVED }), null === z || void 0 === z || z.clearCache(), v.destroy(), import_konva13.default.pixelRatio = p;
    var T = function() {
      b({ type: HIDE_LOADER });
    };
    return i2 || T(), { imageData: S, designState: R, hideLoadingSpinner: T };
  };
};
var useTransformedImgData_default = useTransformedImgData;

// node_modules/react-filerobot-image-editor/lib/hooks/useUpdateEffect.js
init_react_shim();
var import_react83 = __toESM(require_react());
var useUpdateEffect = function(a, b) {
  var c = (0, import_react83.useRef)(true);
  (0, import_react83.useEffect)(function() {
    return function() {
      c.current = true;
    };
  }, []), (0, import_react83.useEffect)(function() {
    if (c.current) c.current = false;
    else if ("function" == typeof a) return a();
  }, b);
};
var useUpdateEffect_default = useUpdateEffect;

// node_modules/react-filerobot-image-editor/lib/hooks/useLoadMainSource.js
init_react_shim();
var import_react85 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/isSameSource.js
init_react_shim();
var isSameSource = function(a, b) {
  return a && b && (a instanceof HTMLImageElement && a === b || "object" === _typeof(a) && Object.keys(a).every(function(c) {
    return a[c] === b[c] || "object" === _typeof(a[c]);
  }));
};
var isSameSource_default = isSameSource;

// node_modules/react-filerobot-image-editor/lib/utils/cloudimageQueryToDesignState.js
init_react_shim();
var import_konva14 = __toESM(require_lib());
var _excluded14 = ["cropX2", "cropY2", "crop", "watermark"];
function ownKeys60(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread60(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys60(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys60(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var propertyToOperation = function(a, b) {
  var c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, d = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : {}, e = CLOUDIMG_TO_EDITOR_POSITIONS[b];
  switch (a) {
    case "wat_text":
      return { watermark: { text: b.replaceAll("+", " ") } };
    case "wat_font":
      return { watermark: { fontFamily: b } };
    case "wat_color":
      return { watermark: { fill: "#".concat(b) } };
    case "wat_fontsize":
      return { watermark: { fontSize: parseFloat(b) } };
    case "wat_opacity":
      return { watermark: { opacity: parseFloat(b) } };
    case "wat_pos": {
      var f = b.split(","), g = _slicedToArray(f, 2), h = g[0], i = g[1];
      return { watermark: { x: parseFloat(h) / 100 * c.width, y: parseFloat(i) / 100 * c.height } };
    }
    case "wat_url":
      return { watermark: { image: decodeURIComponent(b) } };
    case "wat_scale": {
      var j = b.split(","), k = _slicedToArray(j, 2), l = k[0], m = k[1];
      return { watermark: { width: parseFloat(l) / 100 * (c.width || 0), height: parseFloat(m) / 100 * (c.height || 0) } };
    }
    case "tl_px": {
      var n = b.split(","), o = _slicedToArray(n, 2), p = o[0], q = o[1];
      return { crop: { x: mapNumber_default(parseFloat(p), 0, d.width, 0, c.width), y: mapNumber_default(parseFloat(q), 0, d.height, 0, c.height) } };
    }
    case "br_px": {
      var r = b.split(","), s = _slicedToArray(r, 2), t = s[0], u = s[1];
      return { cropX2: mapNumber_default(parseFloat(t), 0, d.width, 0, c.width), cropY2: mapNumber_default(parseFloat(u), 0, d.height, 0, c.height) };
    }
    case "round":
      return { crop: { ratio: ELLIPSE_CROP } };
    case "gravity":
      return { crop: e ? { lockCropAreaAt: e, width: null, height: null } : { noEffect: true, ratio: b, ratioTitleKey: b, width: null, height: null } };
    case "aspect_ratio":
      return { crop: { ratio: +b } };
    case "w":
      return { resize: { width: parseFloat(b) } };
    case "h":
      return { resize: { height: parseFloat(b) } };
    case "r":
      return { adjustments: { rotation: -parseInt(b, 10) } };
    case "flip":
    case "mirror":
      return { adjustments: { isFlippedX: b.includes("x") || b.includes("h"), isFlippedY: b.includes("y") || b.includes("v") } };
    default: {
      var v;
      if (Object.keys(finetuneNameToParamInfo).forEach(function(b2) {
        finetuneNameToParamInfo[b2].cloudimage.name === a.toLowerCase() && (v = b2);
      }), !v) return null;
      var w = finetuneNameToParamInfo[v], x = w.cloudimage, y = w.internal;
      return { finetunes: [import_konva14.default.Filters[v]], finetunesProps: _defineProperty({}, y.propName, mapNumber_default(parseFloat(b), x.min, x.max, y.min, y.max)) };
    }
  }
};
var cloudimageQueryToDesignState = function(a, b, c) {
  var d, e;
  if (!a) return null;
  var f = a.split("&"), g = {};
  f.forEach(function(a2) {
    var d2 = a2.split("="), e2 = _slicedToArray(d2, 2), f2 = e2[0], h2 = e2[1], i2 = propertyToOperation(f2, h2, b, c);
    i2 && (g = deepMerge_default(g, i2, true));
  });
  var h = g, i = h.cropX2, j = h.cropY2, k = h.crop, l = void 0 === k ? {} : k, m = h.watermark, n = _objectWithoutProperties(h, _excluded14);
  null !== (d = g.adjustments) && void 0 !== d && d.isFlippedX && (l.x = null !== l && void 0 !== l && l.lockCropAreaAt || null !== l && void 0 !== l && l.noEffect ? 0 : b.width - (i || 0)), null !== (e = g.adjustments) && void 0 !== e && e.isFlippedY && (l.y = null !== l && void 0 !== l && l.lockCropAreaAt || null !== l && void 0 !== l && l.noEffect ? 0 : b.height - (j || 0));
  var o = _objectSpread60(_objectSpread60(_objectSpread60({}, n), i && j && l || null !== l && void 0 !== l && l.noEffect || null !== l && void 0 !== l && l.lockCropAreaAt ? { adjustments: _objectSpread60(_objectSpread60({}, n.adjustments), {}, { crop: _objectSpread60({ width: i || 0, height: j || 0 }, l) }) } : {}), {}, { annotations: _objectSpread60({}, m ? _defineProperty({}, WATERMARK_ANNOTATION_ID, _objectSpread60(_objectSpread60({}, m), {}, { x: ((null === l || void 0 === l ? void 0 : l.x) || 0) + (m.x || 0), y: ((null === l || void 0 === l ? void 0 : l.y) || 0) + (m.y || 0), id: WATERMARK_ANNOTATION_ID, name: m.text ? TOOLS_IDS.TEXT : TOOLS_IDS.IMAGE }, m.text ? { width: m.text.length * m.fontSize, height: m.fontSize } : {})) : {}) });
  return o;
};
var cloudimageQueryToDesignState_default = cloudimageQueryToDesignState;

// node_modules/react-filerobot-image-editor/lib/hooks/useSetOriginalSource.js
init_react_shim();
var import_react84 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/loadImage.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/extractNameFromUrl.js
init_react_shim();
var extractNameFromUrl = function(a) {
  var b = a.split("/");
  return b[b.length - 1].split("?")[0] || "default name";
};
var extractNameFromUrl_default = extractNameFromUrl;

// node_modules/react-filerobot-image-editor/lib/utils/loadImage.js
var loadImage = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};
  return new Promise(function(c, d) {
    var e = b.noCrossOrigin, f = b.name, g = b.width, h = b.height, i = b.key, j = new Image();
    e || (j.crossOrigin = "Anonymous"), j.src = a, j.name = null !== f && void 0 !== f ? f : extractNameFromUrl_default(a), j.key = i, j.onload = function() {
      j.width = g || j.width, j.height = h || j.height, c(j);
    }, j.onerror = function() {
      d(new Error("Error in loading the image with the provided url: ".concat(a)));
    };
  });
};
var loadImage_default = loadImage;

// node_modules/react-filerobot-image-editor/lib/hooks/useSetOriginalSource.js
function ownKeys61(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread61(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys61(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys61(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useSetOriginalSource = function(a) {
  var b = a.resetOnSourceChange, c = a.keepZoomOnSourceChange, d = useDispatch_default(), e = (0, import_react84.useRef)(null), f = useStore_default(), g = f.t, h = f.originalSource, i = f.config, j = i.defaultSavedImageName, k = i.noCrossOrigin, l = (0, import_react84.useCallback)(function(a2) {
    d({ type: SET_ORIGINAL_SOURCE, payload: _objectSpread61({ originalSource: a2, dismissHistory: null === a2 || void 0 === a2 ? void 0 : a2.noHistoryRecord, keepPrevZoomRatio: c }, !(b || c) && { zoom: { factor: DEFAULT_ZOOM_FACTOR, x: null, y: null } }) });
  }, [b, c]), m = function(a2) {
    if (null !== a2 && void 0 !== a2 && a2.width && a2.height) {
      var b2 = _objectSpread61({}, a2);
      return delete b2.src, l(b2), true;
    }
    return false;
  }, n = (0, import_react84.useCallback)(function(a2) {
    d({ type: SET_FEEDBACK, payload: { feedback: { message: a2.message || a2, duration: 0 } } });
  }, []);
  return { loadAndSetOriginalSource: function(a2) {
    return new Promise(function(b2) {
      var c2 = (null === a2 || void 0 === a2 ? void 0 : a2.src) || a2;
      if (e.current === c2 || !c2 && h || isSameSource_default(c2, h)) return void (e.current || b2());
      var d2 = function() {
        e.current = null, b2();
      };
      e.current = c2, setTimeout(function() {
        if (a2 instanceof HTMLImageElement) {
          if (!a2.name && j && (a2.name = j), !a2.complete) return void a2.addEventListener("load", function() {
            l(a2), d2();
          });
          l(a2), d2();
        } else a2 && ("string" == typeof a2 || null !== a2 && void 0 !== a2 && a2.src) ? loadImage_default((null === a2 || void 0 === a2 ? void 0 : a2.src) || a2, { name: j, noCrossOrigin: k, width: null === a2 || void 0 === a2 ? void 0 : a2.width, height: null === a2 || void 0 === a2 ? void 0 : a2.height, key: null === a2 || void 0 === a2 ? void 0 : a2.key }).then(l)["catch"](function(b3) {
          m(a2) || n(b3);
        })["finally"](d2) : m(a2) ? d2() : (n(g("invalidImageError")), d2());
      }, 0);
    });
  }, setOriginalSource: l, setOriginalSourceIfDimensionsFound: m };
};
var useSetOriginalSource_default = useSetOriginalSource;

// node_modules/react-filerobot-image-editor/lib/hooks/useLoadMainSource.js
function ownKeys62(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread62(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys62(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys62(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useLoadMainSource = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = a.sourceToLoad, c = a.onPluginRootResize, d = a.pluginRootRef, e = a.resetOnSourceChange, f = a.keepZoomOnSourceChange, g = useStore_default(), h = g.config, i = g.haveNotSavedChanges, j = g.dispatch, k = g.originalSource, l = g.shownImageDimensions, m = h.useCloudimage, n = h.cloudimage, o = h.loadableDesignState, p = h.source, q = h.avoidChangesNotSavedAlertOnLeave, r = h.useBackendTranslations, s = h.translations, t = h.language, u = h.observePluginContainerSize, v = h.getCurrentImgDataFnRef, w = h.updateStateFnRef, x = h.resetOnSourceChange, y = h.keepZoomOnSourceChange, z = null !== e && void 0 !== e ? e : x, A = null !== f && void 0 !== f ? f : y, B = useSetOriginalSource_default({ resetOnSourceChange: z, keepZoomOnSourceChange: A }), C = B.loadAndSetOriginalSource, D = b || p, E = useResizeObserver_default(), F = _slicedToArray(E, 2), G = F[0], H = F[1], I = (0, import_react85.useRef)(false), J = (0, import_react85.useRef)(i), K = useTransformedImgData_default(), L = function(a2) {
    J.current && (a2.preventDefault(), a2.returnValue = "");
  }, M = function() {
    var a2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : function() {
      return [];
    };
    return j({ type: SHOW_LOADER }), Promise.all(a2())["catch"](function() {
    })["finally"](function() {
      setTimeout(function() {
        return j({ type: HIDE_LOADER });
      }, 0);
    });
  }, N = function() {
    o && 0 < Object.keys(o).length && j({ type: UPDATE_STATE, payload: _objectSpread62(_objectSpread62({}, o), {}, { finetunes: finetunesStrsToClasses_default(null === o || void 0 === o ? void 0 : o.finetunes), filter: filterStrToClass_default(null === o || void 0 === o ? void 0 : o.filter) }) });
  };
  useUpdateEffect_default(function() {
    if (D && !isSameSource_default(D, k)) {
      I.current = false;
      var a2 = "undefined" == typeof (null === k || void 0 === k ? void 0 : k.src) && "undefined" == typeof (null === D || void 0 === D ? void 0 : D.src) && "string" != typeof D || ((null === D || void 0 === D ? void 0 : D.src) || D) === (null === k || void 0 === k ? void 0 : k.src);
      a2 ? C(D) : M(function() {
        return [C(D)];
      }), z && j({ type: RESET, payload: { config: h } });
    }
  }, [D]), useUpdateEffect_default(function() {
    var a2 = null === o || void 0 === o ? void 0 : o.imgSrc;
    a2 && !isSameSource_default(a2, k) ? M(function() {
      return [C(a2).then(N)];
    }) : N();
  }, [o]), (0, import_react85.useEffect)(function() {
    return M(function() {
      return [C((null === o || void 0 === o ? void 0 : o.imgSrc) || D)].concat(_toConsumableArray(r ? [getBackendTranslations(s, t)] : []));
    }), window && !q && window.addEventListener("beforeunload", L), function() {
      window && !q && window.removeEventListener("beforeunload", L);
    };
  }, []), (0, import_react85.useEffect)(function() {
    w && "object" === _typeof(w) && (w.current = function(a2) {
      j({ type: UPDATE_STATE, payload: a2 });
    });
  }, [w, j]), (0, import_react85.useEffect)(function() {
    v && "object" === _typeof(v) && (v.current = K);
  }, [K]), (0, import_react85.useEffect)(function() {
    J.current = i;
  }, [i]), (0, import_react85.useEffect)(function() {
    0 < Object.keys(l || {}).length && !Object.keys(l).some(function(a2) {
      return !l[a2] && 0 !== l[a2];
    }) && k && m && null !== n && void 0 !== n && n.loadableQuery && !I.current && (j({ type: UPDATE_STATE, payload: cloudimageQueryToDesignState_default(n.loadableQuery, l, k) }), I.current = true);
  }, [l, k, m, n]), (0, import_react85.useEffect)(function() {
    var a2 = false;
    return u && d.current && "function" === c ? G(d.current.parentNode, function(a3) {
      var b2 = a3.width, d2 = a3.height;
      "function" == typeof c && c(b2, d2);
    }) : a2 && "function" == typeof c && c(void 0, void 0), function() {
      u && d.current && H(d.current), a2 = true;
    };
  }, [u]), (0, import_react85.useEffect)(function() {
    w && "object" === _typeof(w) && (w.current = function(a2) {
      j({ type: UPDATE_STATE, payload: a2 });
    });
  }, [w, j]);
};
var useLoadMainSource_default = useLoadMainSource;

// node_modules/react-filerobot-image-editor/lib/hooks/useTabletScreen.js
init_react_shim();
var useTabletScreen = function() {
  return useScreenWidth_default(760);
};
var useTabletScreen_default = useTabletScreen;

// node_modules/react-filerobot-image-editor/lib/hooks/useToggleTabsNavbar.js
init_react_shim();
var import_react86 = __toESM(require_react());
var useToggleTabsNavbar = function() {
  var a = useDispatch_default(), b = (0, import_react86.useCallback)(function(b2) {
    return a({ type: TOGGLE_TABS_NAVBAR, payload: { opened: b2 } });
  }, []);
  return b;
};
var useToggleTabsNavbar_default = useToggleTabsNavbar;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotations.js
init_react_shim();
var import_react89 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/hooks/useSelectedAnnotations.js
init_react_shim();
var import_react88 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/hooks/useEditableTextId.js
init_react_shim();
var import_react87 = __toESM(require_react());
var useEditableTextId = function() {
  var a = useStore_default(), b = a.textIdOfEditableContent;
  return (0, import_react87.useMemo)(function() {
    return b;
  }, [b]);
};
var useEditableTextId_default = useEditableTextId;

// node_modules/react-filerobot-image-editor/lib/hooks/useSelectedAnnotations.js
function ownKeys63(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread63(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys63(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys63(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useSelectedAnnotations = function() {
  var a = useStore_default(), b = a.annotations, c = a.selectionsIds, d = void 0 === c ? [] : c, e = useSetAnnotation_default(), f = useEditableTextId_default(), g = f || d[0], h = b[f] || b[g], i = (0, import_react88.useCallback)(function(a2) {
    e(_objectSpread63({ id: g }, a2));
  }, [g]);
  return (0, import_react88.useMemo)(function() {
    return { isMultiple: 1 < (null === d || void 0 === d ? void 0 : d.length), selectedIds: f ? [f] : d, firstSelectedAnnotation: h, updateFirstSelectedAnnotation: i };
  }, [h, d, i]);
};
var useSelectedAnnotations_default = useSelectedAnnotations;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotations.js
function ownKeys64(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread64(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys64(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys64(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useAnnotations = function() {
  var a = useStore_default(), b = a.dispatch, c = a.annotationIds, d = void 0 === c ? [] : c, e = a.annotations, f = void 0 === e ? {} : e, g = a.designLayer, h = a.config, i = void 0 === h ? {} : h, j = i.onAnnotationAdd, k = useSetAnnotation_default(), l = useSelectedAnnotations_default(), m = (0, import_react89.useCallback)(function(a2) {
    var c2 = !!(1 < arguments.length && arguments[1] !== void 0) && arguments[1];
    b({ type: SELECT_ANNOTATION, payload: { annotationId: a2, multiple: c2 } });
  }, []), n = (0, import_react89.useCallback)(function() {
    b({ type: CLEAR_ANNOTATIONS_SELECTIONS });
  }, []), o = (0, import_react89.useCallback)(function() {
    var a2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : [], c2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};
    Array.isArray(a2) && 0 !== a2.length && b({ type: REMOVE_ANNOTATIONS, payload: _objectSpread64(_objectSpread64({}, c2), {}, { annotationsIds: a2 }) });
  }, []), p = (0, import_react89.useCallback)(function(a2) {
    var c2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};
    a2 && b({ type: REPLACE_ANNOTATIONS, payload: _objectSpread64(_objectSpread64({}, c2), {}, { newAnnotations: a2 }) });
  }, []), q = (0, import_react89.useCallback)(function() {
    var a2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : [], c2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};
    Array.isArray(a2) && 0 !== a2.length && b({ type: DUPLICATE_ANNOTATIONS, payload: _objectSpread64(_objectSpread64({}, c2), {}, { annotationsIds: a2, onAnnotationAdd: j }) });
  }, [j]), r = (0, import_react89.useCallback)(function(a2) {
    return g.findOne("#".concat(a2));
  }, [g]);
  return (0, import_react89.useMemo)(function() {
    return { annotationIds: d, annotations: f, selectedAnnotations: l, selectAnnotation: m, deselectAnnotations: n, removeAnnotations: o, replaceAnnotations: p, setAnnotation: k, duplicateAnnotations: q, getAnnotationElementById: r };
  }, [d, f, m, n, o, p, l, k, q, r]);
};
var useAnnotations_default = useAnnotations;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotationPositioning.js
init_react_shim();
var import_react90 = __toESM(require_react());
var useAnnotationPositioning = function(a) {
  var b = useStore_default(), c = b.designLayer, d = (0, import_react90.useCallback)(function(b2) {
    return mapPositionStringToPoint_default(a, c, b2);
  }, [a, c]);
  return { POSITIONS, mapPositionStrToPoint: d };
};
var useAnnotationPositioning_default = useAnnotationPositioning;

// node_modules/react-filerobot-image-editor/lib/hooks/useSelectTool.js
init_react_shim();
var import_react91 = __toESM(require_react());
var useSelectTool = function(a) {
  var b = useDispatch_default(), c = (0, import_react91.useCallback)(function(c2) {
    var d = !!(1 < arguments.length && arguments[1] !== void 0) && arguments[1];
    b({ type: SELECT_TOOL, payload: { toolId: c2, keepSelections: d } }), isFunction_default(a) && a(c2);
  }, [a]);
  return c;
};
var useSelectTool_default = useSelectTool;

// node_modules/react-filerobot-image-editor/lib/hooks/useTextAnnotationEditing.js
init_react_shim();
var import_react92 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/TextNode/TextNode.utils.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/getNodeText.js
init_react_shim();
var getNodeText = function(a) {
  return (null === a || void 0 === a ? void 0 : a.innerText) || (null === a || void 0 === a ? void 0 : a.textContent);
};
var getNodeText_default = getNodeText;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/TextNode/TextNode.utils.js
function ownKeys65(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread65(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys65(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys65(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var getQuotedFontFamily = function(a) {
  return a && '"'.concat(a.replaceAll('"', ""), '"');
};
var jsCanvasCssPropToCssTextProp = function(a) {
  return "fill" === a ? "color" : "baselineShift" === a ? "transform" : "".concat(a.replaceAll(/[A-Z]/g, function(a2) {
    return "-".concat(a2.toLowerCase());
  }));
};
var jsStyleToCssText = function(a) {
  return Object.keys(a || {}).map(function(b) {
    return "".concat(jsCanvasCssPropToCssTextProp(b), ": ").concat(Number.isFinite(a[b]) ? "".concat(a[b], "px") : a[b], ";");
  }).join(" ");
};
var cssStyleToJsCanvasProps = function(a) {
  if (!a) return {};
  var b = {};
  return a.split(/;\s*/).forEach(function(a2) {
    if (a2) {
      var c = a2.split(/:\s*/), d = _slicedToArray(c, 2), e = d[0], f = d[1], g = e.replaceAll(/-([a-z])/g, function(a3, b2) {
        return "".concat(b2[0].toUpperCase()).concat(b2.slice(1));
      });
      b[g] = null !== f && void 0 !== f && f.toLowerCase().endsWith("px") || /^[0-9]*$/.test(f) ? parseFloat(f) : null === f || void 0 === f ? void 0 : f.replaceAll('"', "");
    }
  }), b.color && (b.fill = b.color, delete b.color), b.transform && (b.baselineShift = -parseFloat(b.transform.match(/\((.*)px\)/)[1]), delete b.transform), "undefined" != typeof b.letterSpacing && (b.letterSpacing = parseFloat(b.letterSpacing)), b;
};
var getNewFormattedContent = function(a, b) {
  var c = [], d = _objectSpread65({}, b);
  return Array.from(a.childNodes).forEach(function(a2, b2) {
    var e;
    if ("BR" === a2.nodeName) return void c.push(a2);
    var f = getNodeText_default(a2);
    if (f) {
      var g = a2;
      if ("#text" === a2.nodeName) {
        var h, i = a2.parentNode;
        if (null !== (h = i.style) && void 0 !== h && h.cssText.includes(jsStyleToCssText(d))) return;
        var j = getNodeText_default(i) === getNodeText_default(a2) && (null === i || void 0 === i ? void 0 : i.style) && "MARK" !== i.nodeName;
        g = j && i || document.createElement("span"), j || (g.innerText = f);
      }
      return d.fontFamily && (d.fontFamily = getQuotedFontFamily(d.fontFamily)), Object.assign(g.style, d), 0 < b2 && f && g.style.cssText === (null === (e = c[b2 - 1]) || void 0 === e ? void 0 : e.style.cssText) ? void (c[b2 - 1].innerText = "".concat(c[b2 - 1].innerText).concat(f)) : void c.push(g);
    }
  }), c;
};
var _pushNodeFlattenedContent = function(a, b) {
  var c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, d = "BR" === b.nodeName;
  if ("#text" !== b.nodeName || b.textContent || 0 === b.textContent || d) {
    if ("#text" === b.nodeName && b.textContent || d) {
      var e, f, g = a[a.length - 1], h = (null === g || void 0 === g ? void 0 : g.endIndex) || 0, i = d ? "\n" : b.textContent;
      if (g && !g.isDetached && "true" !== (null === (e = b.parentNode) || void 0 === e || null === (e = e.dataset) || void 0 === e ? void 0 : e.detached) && JSON.stringify(c) === JSON.stringify(g.style)) g.textContent = "".concat(g.textContent).concat(i), g.endIndex = g.startIndex + g.textContent.length;
      else {
        var j, k = h + (i.length || 1);
        a.push({ style: c, textContent: i, startIndex: h, endIndex: k, isDetached: "true" === (null === (j = b.parentNode) || void 0 === j || null === (j = j.dataset) || void 0 === j ? void 0 : j.detached) });
      }
      var l = "MARK" === b.parentNode.nodeName && b.parentNode || "MARK" === (null === (f = b.parentNode.parentNode) || void 0 === f ? void 0 : f.nodeName) && b.parentNode.parentNode;
      return void (l && (getNodeText_default(l).startsWith(b.textContent) && (l.dataset.startIndex = h), getNodeText_default(l).endsWith(b.textContent) && (l.dataset.endIndex = (parseInt(l.dataset.startIndex, 10) || 0) + getNodeText_default(l).length)));
    }
    var m = cssStyleToJsCanvasProps(b.style.cssText);
    b.childNodes.forEach(function(b2) {
      (getNodeText_default(b2) || "BR" === b2.nodeName) && _pushNodeFlattenedContent(a, b2, _objectSpread65(_objectSpread65({}, c), m));
    });
  }
};
var _recursivelyRemoveCssProperties = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : [];
  "#text" === a.nodeName || a.childNodes.forEach(function(a2) {
    var c;
    null !== (c = a2.style) && void 0 !== c && c.cssText && b.forEach(function(b2) {
      return a2.style.removeProperty(jsCanvasCssPropToCssTextProp(b2));
    }), _recursivelyRemoveCssProperties(a2, b);
  });
};
var _getCurrentSelectedNodeStyles = function(a) {
  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {};
  if (!a) return b;
  var c = _objectSpread65(_objectSpread65({}, a.style && cssStyleToJsCanvasProps(a.style.cssText)), b);
  return a.id === TEXT_EDITOR_ID || "true" === a.contentEditable ? (c.fill && (c.fill = "#".concat(rgbaToHexa_default(c.fill).hex)), c) : _getCurrentSelectedNodeStyles(a.parentNode, c);
};
var calculateTextChanges = function(a, b) {
  var c = a.current.innerText, d = window.getSelection(), e = 0;
  if (0 < d.rangeCount) {
    var f = d.getRangeAt(0), g = f.cloneRange();
    g.selectNodeContents(a.current), g.setEnd(f.endContainer, f.endOffset), e = g.toString().length;
  }
  var h = 0;
  if (void 0 !== b && (h = c.length - b.length, 0 < h)) {
    for (var i = 0, j = 0; i < b.length && i < c.length && b[i] === c[i]; ) i++;
    for (; j < b.length - i && j < c.length - i && b[b.length - 1 - j] === c[c.length - 1 - j]; ) j++;
    var k = b.slice(i, b.length - j), l = c.slice(i, c.length - j);
    h = l.length - k.length;
  }
  return { charsDiff: h, oldText: b, newText: c, oldCaretPosition: e - h, caretPosition: e };
};
var dispatchTextContentChangingEvent = function(a, b, c) {
  var d = calculateTextChanges(a, b);
  return emitCustomEvent_default(EVENTS.TEXT_CONTENT_CHANGING, _objectSpread65(_objectSpread65({}, d), {}, { annotationId: c })), d;
};

// node_modules/react-filerobot-image-editor/lib/hooks/useTextAnnotationEditing.js
function ownKeys66(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread66(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys66(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys66(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useTextAnnotationEditing = function() {
  var a = !!(0 < arguments.length && void 0 !== arguments[0]) && arguments[0], b = useStore_default(), c = b.dispatch, d = b.t, e = b.config.textContentRegex, f = b.annotations, g = b.selectionsIds, h = b.selectedTextPart, i = b.shownImageDimensions, j = void 0 === i ? {} : i, k = j.originalSourceInitialScale, l = useEditableTextId_default(), m = useSetAnnotation_default(), n = (0, import_react92.useState)({}), o = _slicedToArray(n, 2), p = o[0], q = o[1], r = function() {
    var a2 = document.querySelector("#".concat(UNFOCUSED_MARKED_TEXT_SELECTOR_ID));
    return a2 ? { element: a2, textContent: a2.textContent, startIndex: +a2.dataset.startIndex, endIndex: +a2.dataset.endIndex } : void 0;
  }, s = function(a2) {
    c({ type: SET_SELECTED_TEXT_PART, payload: a2 });
  }, t = (0, import_react92.useMemo)(function() {
    var a2 = f[l];
    return a2 ? _objectSpread66(_objectSpread66({}, a2), p) : f[g[0]];
  }, [f, l, g, p]), u = (0, import_react92.useCallback)(function() {
    var a2 = !(0 < arguments.length && void 0 !== arguments[0]) || arguments[0], b2 = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1];
    c({ type: ENABLE_TEXT_CONTENT_EDIT, payload: { editableTextId: null } }), b2 && c({ type: SELECT_ANNOTATION, payload: { annotationId: t.id } }), a2 && m({ id: l, tmpText: void 0 }), emitCustomEvent_default(EVENTS.TEXT_CONTENT_CHANGE_CANCELLED, { annotationId: t.id, textContent: t.text });
  }, [l, m]), v = function() {
    var a2 = window.getSelection(), b2 = r() || {}, c2 = b2.element, d2 = b2.textContent, e2 = b2.startIndex, f2 = b2.endIndex;
    if (s({ textContent: d2, element: c2, startIndex: e2, endIndex: f2, hasSelection: !a2.isCollapsed || !!c2 }), 0 === a2.rangeCount && !c2) return void q({});
    var g2 = !c2 && a2.getRangeAt(0), h2 = c2 || g2.commonAncestorContainer, i2 = !c2 && g2.cloneContents().firstElementChild;
    if (h2) {
      var j2 = _getCurrentSelectedNodeStyles("#text" !== h2.nodeName && (h2.firstElementChild || h2.firstChild) || h2, null !== i2 && void 0 !== i2 && i2.style ? cssStyleToJsCanvasProps(i2.style.cssText, k) : {}, { originalSourceInitialScale: k });
      q(j2);
    }
  };
  return useUpdateEffect_default(function() {
    null !== t && void 0 !== t && t.tmpText && v();
  }, [null === t || void 0 === t ? void 0 : t.tmpText]), (0, import_react92.useEffect)(function() {
    return l && a && document.addEventListener("selectionchange", v), function() {
      a && document.removeEventListener("selectionchange", v), l || s({});
    };
  }, [l, a, k]), { currentTextAnnotation: t, commitTextUpdates: function() {
    var a2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "", b2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : [], f2 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}, g2 = f2.cancelEditingAfterCommit;
    return e && e.test(a2) ? (c({ type: SET_FEEDBACK, payload: { feedback: { message: d("invalidTextContent") } } }), false) : (Array.isArray(b2) && 0 < b2.length && (m({ id: l, text: b2, tmpText: void 0 }), emitCustomEvent_default(EVENTS.TEXT_CONTENT_EDITED, { id: l, textContent: a2, formattedText: b2, annotation: _objectSpread66(_objectSpread66({}, t), {}, { text: b2 }) })), void 0 !== g2 && g2 && u(false), true);
  }, updateTextFormats: function() {
    var a2, b2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, c2 = !l || window.getSelection().isCollapsed && !(null !== (a2 = r()) && void 0 !== a2 && a2.element);
    if (c2 || Object.keys(b2).some(function(a3) {
      return !ALLOWED_TEXT_PART_FORMATS.includes(a3);
    })) {
      var d2 = false, e2 = Object.keys(b2).reduce(function(a3, c3) {
        return ALLOWED_TEXT_PART_FORMATS.includes(c3) ? _objectSpread66(_objectSpread66({}, a3), {}, { textPartFormats: _objectSpread66(_objectSpread66({}, a3.textPartFormats), {}, _defineProperty({}, c3, b2[c3])) }) : (!d2 && (c3.startsWith("stroke") || c3.startsWith("shadow")) && (d2 = true), _objectSpread66(_objectSpread66({}, a3), {}, { generalTextFormats: _objectSpread66(_objectSpread66({}, a3.generalTextFormats), {}, _defineProperty({}, c3, b2[c3])) }));
      }, { generalTextFormats: void 0, textPartFormats: void 0 }), f2 = e2.generalTextFormats, g2 = e2.textPartFormats;
      return m(_objectSpread66(_objectSpread66({ id: t.id, dismissHistory: !!l, text: Array.isArray(t.text) && g2 ? t.text.map(function(a3) {
        return _objectSpread66(_objectSpread66({}, a3), {}, { style: _objectSpread66(_objectSpread66({}, a3.style), g2) });
      }) : t.text }, f2), g2)), q(function(a3) {
        return _objectSpread66(_objectSpread66(_objectSpread66({}, a3), f2), g2);
      }), void (d2 && u(true));
    }
    emitCustomEvent_default(EVENTS.APPLY_TEXT_FORMAT, b2);
  }, cancelTextEditing: u, textContentRegex: e, getEditableSelectedUnfocusedTextData: r, replaceEditableUnfocusedSelectedText: function(a2) {
    var b2 = !!(1 < arguments.length && void 0 !== arguments[1]) && arguments[1];
    if (a2) {
      var c2 = r() || {}, d2 = c2.element, e2 = c2.startIndex;
      if (d2) {
        var f2;
        if (d2.firstElementChild) d2.firstElementChild.innerText = a2, d2.replaceChildren(d2.firstElementChild);
        else if ("#text" === (null === (f2 = d2.firstChild) || void 0 === f2 ? void 0 : f2.nodeName)) {
          var g2 = document.createElement("span");
          g2.innerText = a2, d2.replaceChildren(g2);
        } else d2.innerText = a2;
        d2.dataset.endIndex = parseInt(e2, 10) + a2.length, d2.firstElementChild && b2 && (d2.firstElementChild.dataset.detached = "true");
      }
    }
  }, selectedTextPart: h, editableTextId: l, triggerTextSaveAndClose: function() {
    l && emitCustomEvent_default(EVENTS.SAVE_EDITED_TEXT_CONTENT);
  } };
};
var useTextAnnotationEditing_default = useTextAnnotationEditing;

// node_modules/react-filerobot-image-editor/lib/hooks/useImageScaled.js
init_react_shim();
function ownKeys67(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread67(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys67(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys67(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var ADDED_IMG_SPACING_PERCENT = 0.15;
var useImageScaled = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : ADDED_IMG_SPACING_PERCENT, b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {}, c = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, d = useStore_default(), e = d.originalSource, f = d.shownImageDimensions, g = d.adjustments.crop, h = void 0 === g ? {} : g, i = useAnnotation_default(_objectSpread67({ name: TOOLS_IDS.IMAGE, opacity: 1 }, b), _objectSpread67({ enablePreview: false }, c)), j = _slicedToArray(i, 3), k = j[0], l = j[1], m = j[2], n = function(b2, c2) {
    var d2 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}, g2 = h.width / f.originalSourceInitialScale || e.width, i2 = h.height / f.originalSourceInitialScale || e.height, j2 = h.x / f.originalSourceInitialScale || 0, k2 = h.y / f.originalSourceInitialScale || 0, l2 = Math.min(1, g2 / (b2.width + b2.width * a), i2 / (b2.height + b2.height * a)), m2 = _objectSpread67(_objectSpread67({ image: b2, x: j2 + g2 / 2 - b2.width * l2 / 2, y: k2 + i2 / 2 - b2.height * l2 / 2, width: b2.width * l2, height: b2.height * l2 }, d2), {}, { name: TOOLS_IDS.IMAGE });
    return c2(m2), m2;
  };
  return { image: k, saveImage: l, addImgScaled: function(a2, b2) {
    n(a2, m, b2);
  }, updateImageScaled: function(a2, b2) {
    var c2 = n(a2, l, _objectSpread67(_objectSpread67({}, b2), {}, { originalImage: a2 }));
    return c2;
  } };
};
var useImageScaled_default = useImageScaled;

// node_modules/react-filerobot-image-editor/lib/hooks/useUpdateState.js
init_react_shim();
var import_react93 = __toESM(require_react());
var useUpdateState = function() {
  var a = useDispatch_default(), b = (0, import_react93.useCallback)(function(b2) {
    b2 && a({ type: UPDATE_STATE, payload: b2 });
  }, [a]);
  return b;
};
var useUpdateState_default = useUpdateState;

// node_modules/react-filerobot-image-editor/lib/hooks/useMapDimensions.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/mapDimensions.js
init_react_shim();
function ownKeys68(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread68(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys68(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys68(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var isNumber = function(a) {
  return "number" == typeof a;
};
var mapDimensions = function(a) {
  var b = a.dimensions, c = a.oldMapDimensions, d = a.newMapDimensions;
  if (!b) return {};
  var e = _objectSpread68(_objectSpread68(_objectSpread68(_objectSpread68(_objectSpread68(_objectSpread68({}, isNumber(b.width) && { width: mapNumber_default(b.width, 0, c.width, 0, d.width) }), isNumber(b.height) && { height: mapNumber_default(b.height, 0, c.height, 0, d.height) }), isNumber(b.x) && { x: mapNumber_default(b.x, 0, c.width, 0, d.width) }), isNumber(b.y) && { y: mapNumber_default(b.y, 0, c.height, 0, d.height) }), isNumber(b.radiusX) && { radiusX: mapNumber_default(b.radiusX, 0, c.width, 0, d.width) }), isNumber(b.radiusY) && { radiusY: mapNumber_default(b.radiusY, 0, c.height, 0, d.height) });
  return e;
};
var mapDimensions_default = mapDimensions;

// node_modules/react-filerobot-image-editor/lib/hooks/useMapDimensions.js
var useMapDimensions = function() {
  var a = useStore_default(), b = a.originalSource, c = a.resize, d = void 0 === c ? {} : c, e = a.adjustments, f = e.crop, g = e.rotation, h = void 0 === g ? 0 : g, i = a.shownImageDimensions, j = function() {
    return getProperDimensions_default(d, f, i, b, h);
  };
  return { getCanvasDimensions: j, mapDimensionsToOriginal: function(a2) {
    var b2 = j();
    return mapDimensions_default({ dimensions: a2, oldMapDimensions: i, newMapDimensions: b2 });
  }, mapDimensionsToPreview: function(a2) {
    var b2 = j();
    return mapDimensions_default({ dimensions: a2, oldMapDimensions: b2, newMapDimensions: i });
  } };
};
var useMapDimensions_default = useMapDimensions;

// node_modules/react-filerobot-image-editor/lib/hooks/useManageHistoryState.js
init_react_shim();
var import_react94 = __toESM(require_react());
function ownKeys69(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread69(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys69(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys69(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useManageHistoryState = function() {
  var a = useDispatch_default(), b = useStore_default(), c = b.hasUndo, d = b.hasRedo, e = b.isResetted, f = b.haveNotSavedChanges, g = b.pastDesignStates, h = void 0 === g ? [] : g, i = b.futureDesignStates, j = void 0 === i ? [] : i, k = b.config, l = (0, import_react94.useCallback)(function() {
    a({ type: UNDO });
  }, []), m = (0, import_react94.useCallback)(function() {
    a({ type: REDO });
  }, []), n = (0, import_react94.useCallback)(function() {
    a({ type: RESET, payload: { config: k } });
  }, [k]);
  return { undo: l, redo: m, reset: n, injectIntoLastState: function(b2) {
    b2 && a({ type: INJECT_INTO_LAST_STATE, payload: b2 });
  }, updateExtraState: function(b2) {
    b2 && a({ type: UPDATE_EXTRA_STATE, payload: _objectSpread69({ dismissHistory: false }, b2) });
  }, hasUndo: void 0 !== c && c, hasRedo: void 0 !== d && d, isResetted: !(void 0 !== e) || e, haveNotSavedChanges: void 0 !== f && f, pastDesignStates: h, futureDesignStates: j };
};
var useManageHistoryState_default = useManageHistoryState;

// node_modules/react-filerobot-image-editor/lib/hooks/useAnnotationOrdering.js
init_react_shim();
var useAnnotationOrdering = function() {
  var a = useDispatch_default(), b = useStore_default(), c = b.annotationIds, d = function(b2) {
    a({ type: UPDATE_ANNOTATION_IDS, payload: { annotationIds: b2 } });
  }, e = function(a2, b2) {
    var d2, e2 = c.filter(function(b3, c2) {
      return a2 !== b3 || (d2 = c2, false);
    });
    return "undefined" != typeof d2 && e2.splice(restrictNumber_default(d2 + b2, 0, c.length - 1), 0, a2), e2;
  };
  return { getReorderedAnnotationIds: e, bringToFront: function(a2) {
    c.includes(a2) && d([].concat(_toConsumableArray(c.filter(function(b2) {
      return a2 !== b2;
    })), [a2]));
  }, sendToBack: function(a2) {
    c.includes(a2) && d([a2].concat(_toConsumableArray(c.filter(function(b2) {
      return a2 !== b2;
    }))));
  }, moveBySteps: function(a2) {
    var b2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : 1;
    d(e(a2, b2));
  } };
};
var useAnnotationOrdering_default = useAnnotationOrdering;

// node_modules/react-filerobot-image-editor/lib/hooks/useZoom.js
init_react_shim();
var import_react95 = __toESM(require_react());
var MULTIPLY_ZOOM_FACTOR = 1.1;
var useZoom = function() {
  var a = useStore_default(), b = a.dispatch, c = a.zoom, d = void 0 === c ? {} : c, e = a.toolId, f = a.feedback, g = a.shownImageDimensions, h = a.resize, i = a.originalSource, j = a.adjustments.crop, k = 0 === f.duration, l = (0, import_react95.useState)(null), m = _slicedToArray(l, 2), n = m[0], o = m[1], p = function(a2, c2, d2) {
    b({ type: ZOOM_CANVAS, payload: { factor: a2, isAbsoluteZoom: c2, customLabel: d2 } });
  }, q = function() {
    var a2 = h.width && h.height && h || j.width && j.height && j || g, b2 = getZoomFitFactor_default(j.width && j.height && j || g, a2);
    p(b2 || DEFAULT_ZOOM_FACTOR, true);
  }, r = function(a2) {
    o(n || !a2 ? null : a2.target);
  }, s = e === TOOLS_IDS.CROP || k;
  return { applyZoomFactorPreset: function(a2, b2) {
    if ("fit" === a2) return q(), void r();
    var c2 = h.width || h.height ? a2 : a2 / g.originalSourceInitialScale;
    p(c2, true, b2), r();
  }, getPreviewedZoomLevelLabel: function() {
    if (d.customLabel) return d.customLabel;
    var a2 = getShownImageZoomPercentage_default({ originalSource: i, resize: h, shownImageDimensions: g, zoom: d });
    return "".concat(a2, "%");
  }, isZoomDisabled: s, fitCanvas: q, zoomIn: function() {
    p(d.factor * MULTIPLY_ZOOM_FACTOR);
  }, zoomOut: function() {
    p(d.factor / MULTIPLY_ZOOM_FACTOR);
  }, saveZoom: p, toggleZoomingMenu: r, zoomingMenuAnchorEl: n, setZoomingMenuAnchorEl: o };
};
var useZoom_default = useZoom;

// node_modules/react-filerobot-image-editor/lib/hooks/useTextAnnotationPartEditing.js
init_react_shim();
var _excluded15 = ["textContent"];
function ownKeys70(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread70(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys70(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys70(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var useTextAnnotationPartEditing = function() {
  var a = useStore_default(), b = a.dispatch, c = a.annotations, d = a.selectedTextPart, e = useEditableTextId_default(), f = useSetAnnotation_default();
  return { selectedTextPart: d, setCurrentSelectedText: function(a2) {
    b({ type: SET_SELECTED_TEXT_PART, payload: a2 });
  }, editableTextId: e, updateAnnotationTextSlice: function(a2) {
    var b2 = a2.annotationId, d2 = a2.searchValue, g = a2.replaceValue, h = a2.emitUpdateEvent, i = c[b2] || {}, j = i.defaultText || i.text;
    if (i) {
      var k, l = Array.isArray(j) ? j : [{ textContent: j }];
      l = l.map(function(a3) {
        var b3, c2 = a3.textContent, e2 = _objectWithoutProperties(a3, _excluded15);
        if (!c2) return e2;
        var f2 = e2.startIndex, h2 = e2.endIndex, i2 = c2.replace(d2, g), j2 = "undefined" == typeof f2 ? void 0 : null !== (b3 = k) && void 0 !== b3 ? b3 : f2;
        return k = "undefined" == typeof j2 ? h2 : j2 + i2.length, _objectSpread70(_objectSpread70(_objectSpread70({}, e2), "undefined" != typeof j2 && { startIndex: j2, endIndex: k }), {}, { textContent: i2 });
      }), f({ id: b2, text: l, tmpText: void 0 }), (!(void 0 !== h) || h) && emitCustomEvent_default(EVENTS.TEXT_CONTENT_EDITED, { id: e, textContent: l, annotation: _objectSpread70(_objectSpread70({}, i), {}, { text: l }) });
    }
  }, updateAnnotationTextSlices: function(a2) {
    var b2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : [], d2 = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, g = d2.annotationTextProperty, h = void 0 === g ? "defaultText" : g, i = d2.emitUpdateEvent, j = d2.dismissHistory, k = void 0 !== j && j, l = c[a2] || {}, m = l[h] || l.text;
    if (l && Array.isArray(b2) && 0 !== b2.length) {
      var n, o = Array.isArray(m) ? m : [{ textContent: m }];
      o = o.map(function(a3) {
        var c2, d3 = _objectSpread70({}, a3), e2 = d3.textContent || "";
        b2.forEach(function(a4) {
          var b3, c3 = a4.searchValue, d4 = a4.replaceValue;
          e2 = null === (b3 = e2) || void 0 === b3 ? void 0 : b3.replace(c3, d4);
        });
        var f2 = "undefined" == typeof d3.startIndex ? void 0 : null !== (c2 = n) && void 0 !== c2 ? c2 : d3.startIndex;
        return n = "undefined" == typeof f2 ? d3.endIndex : f2 + e2.length, _objectSpread70(_objectSpread70({}, d3), {}, { textContent: e2 }, "undefined" != typeof f2 && { startIndex: f2, endIndex: n });
      }), f({ id: a2, text: o, tmpText: void 0, dismissHistory: k }), (!(void 0 !== i) || i) && emitCustomEvent_default(EVENTS.TEXT_CONTENT_EDITED, { id: e, textContent: o, annotation: _objectSpread70(_objectSpread70({}, l), {}, { text: o }), dismissHistory: k });
    }
  }, updateAnnotationTextSliceUsingIndices: function(a2) {
    var b2 = a2.annotationId, d2 = a2.startIndex, g = a2.endIndex, h = a2.newTextContent, i = a2.emitUpdateEvent, j = c[b2] || {}, k = j.defaultText || j.text;
    if (j) {
      var l, m = Array.isArray(k) ? k : [{ textContent: k }];
      m = m.map(function(a3) {
        var b3 = a3.startIndex, c2 = a3.endIndex, e2 = null !== d2 && void 0 !== d2 ? d2 : 0, f2 = a3.textContent || k || "", i2 = null !== g && void 0 !== g ? g : f2.length, j2 = null !== b3 && void 0 !== b3 ? b3 : 0, m2 = null !== c2 && void 0 !== c2 ? c2 : f2.length;
        if (e2 >= j2 && i2 <= m2) {
          var n, o = f2.slice(0, e2 - j2) + h + f2.slice(i2 - m2 || f2.length), p = "undefined" == typeof b3 ? void 0 : null !== (n = l) && void 0 !== n ? n : b3;
          return l = "undefined" == typeof p ? c2 : p + o.length, _objectSpread70(_objectSpread70(_objectSpread70({}, a3), "undefined" != typeof p && { startIndex: p, endIndex: l }), {}, { textContent: o });
        }
        return a3;
      }), f({ id: b2, text: m, tmpText: void 0 }), (!(void 0 !== i) || i) && emitCustomEvent_default(EVENTS.TEXT_CONTENT_EDITED, { id: e, textContent: m, annotation: _objectSpread70(_objectSpread70({}, j), {}, { text: m }) });
    }
  }, updateAnnotationTextSlicesUsingIndices: function(a2) {
    var b2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : [], d2 = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : {}, g = d2.annotationTextProperty, h = void 0 === g ? "defaultText" : g, i = d2.emitUpdateEvent, j = d2.dismissHistory, k = void 0 !== j && j, l = c[a2] || {}, m = l[h] || l.text;
    if (l && Array.isArray(b2) && 0 !== b2.length) {
      var n, o = Array.isArray(m) ? m : [{ textContent: m }];
      o = o.map(function(a3) {
        var c2, d3, e2, f2 = a3, g2 = 0;
        _toConsumableArray(b2).sort(function(c3, a4) {
          var b3, d4;
          return (null !== (b3 = c3.startIndex) && void 0 !== b3 ? b3 : 0) - (null !== (d4 = a4.startIndex) && void 0 !== d4 ? d4 : 0);
        }).forEach(function(a4) {
          var b3, c3, d4 = a4.startIndex, e3 = a4.endIndex, h3 = a4.newTextContent, i2 = f2.textContent || m || "", j2 = null !== (b3 = f2.startIndex) && void 0 !== b3 ? b3 : 0, k2 = null !== (c3 = f2.endIndex) && void 0 !== c3 ? c3 : i2.length, l2 = null !== d4 && void 0 !== d4 ? d4 : 0, n2 = null !== e3 && void 0 !== e3 ? e3 : i2.length;
          if (l2 >= j2 && n2 <= k2) {
            var o2, p, q = i2.slice(0, l2 - j2 + g2) + h3 + i2.slice(n2 - k2 || i2.length);
            g2 += null !== (o2 = q.length - (null !== (p = i2.length) && void 0 !== p ? p : 0)) && void 0 !== o2 ? o2 : 0, f2 = _objectSpread70(_objectSpread70({}, f2), {}, { textContent: q });
          }
        });
        var h2 = "undefined" == typeof f2.startIndex ? void 0 : null !== (c2 = n) && void 0 !== c2 ? c2 : f2.startIndex;
        return n = "undefined" == typeof h2 ? f2.endIndex : h2 + (null !== (d3 = null === (e2 = f2.textContent) || void 0 === e2 ? void 0 : e2.length) && void 0 !== d3 ? d3 : 0), _objectSpread70(_objectSpread70({}, f2), "undefined" != typeof h2 && { startIndex: h2, endIndex: n });
      }), f({ id: a2, text: o, tmpText: void 0, dismissHistory: k }), (!(void 0 !== i) || i) && emitCustomEvent_default(EVENTS.TEXT_CONTENT_EDITED, { id: e, textContent: o, annotation: _objectSpread70(_objectSpread70({}, l), {}, { text: o }), dismissHistory: k });
    }
  } };
};
var useTextAnnotationPartEditing_default = useTextAnnotationPartEditing;

// node_modules/react-filerobot-image-editor/lib/hooks/useDrawPreviewByPointer.js
init_react_shim();
var import_react96 = __toESM(require_react());
function ownKeys71(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread71(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys71(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys71(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var eventsOptions3 = { passive: true };
var useDrawPreviewByPointer = function(a) {
  var b = a.createNewDrawInstance, c = a.onPointerStart, d = a.onPointerMove, e = a.onHoldPointerMove, f = a.onPointerLeaveCanvas, g = a.onPointerReleased, h = a.dontResetPreview, i = void 0 !== h && h, j = useStore_default(), k = j.previewGroup, l = j.designLayer, m = null === k || void 0 === k ? void 0 : k.getStage(), n = (0, import_react96.useRef)(b()), o = (0, import_react96.useState)(function() {
    return n.current.attrs;
  }), p = _slicedToArray(o, 2), q = p[0], r = p[1], s = (0, import_react96.useRef)(false), t = (0, import_react96.useRef)(_objectSpread71({}, q)), u = (0, import_react96.useCallback)(function(a2) {
    s.current = a2;
  }, []), v = (0, import_react96.useCallback)(function(a2) {
    var b2 = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1];
    b2 && m.setAttrs({ isDrawing: true }), r(function() {
      var b3 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, c2 = _objectSpread71(_objectSpread71({}, b3), a2);
      return n.current && n.current.setAttrs(c2), c2;
    });
  }, [m, k, q]), w = function() {
    var a2 = b(_objectSpread71({}, n.current.attrs));
    k.add(a2), n.current = a2, r(a2.attrs);
  }, x = (0, import_react96.useCallback)(function() {
    var a2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : t.current;
    0 < (null === k || void 0 === k ? void 0 : k.children.length) && k.destroyChildren(), r(a2), n.current.setAttrs(a2);
  }, [m, k]), y = (0, import_react96.useCallback)(function() {
    if (!l || !k) return [0, 0];
    var a2 = getPointerOffsetPosition_default(k);
    return [a2.offsetX - (l.attrs.xPadding || 0), a2.offsetY - (l.attrs.yPadding || 0)];
  }, [l]), z = (0, import_react96.useCallback)(function(a2, b2) {
    if (isFunction_default(b2)) {
      var c2 = b2({ event: a2, attrs: n.current.attrs, position: y(), setIsDisabled: u, isDisabled: s.current });
      c2 && v(c2);
    }
  }, [v, y]), A = (0, import_react96.useCallback)(function(a2) {
    s.current || z(a2, d);
  }, [z, d]), B = (0, import_react96.useCallback)(function(a2) {
    z(a2, e);
  }, [z, e]), C = (0, import_react96.useCallback)(function(a2) {
    var b2;
    n.current && (b2 = g({ event: a2, attrs: n.current.attrs, setIsDisabled: u, isDisabled: s.current })), m.setAttrs({ isDrawing: false }), i || x(b2), m.off("mousemove touchmove", B), m.off("mouseleave touchcancel", C), document.removeEventListener("mouseup", C, eventsOptions3), document.removeEventListener("touchend", C, eventsOptions3), document.removeEventListener("mouseleave", C, eventsOptions3), document.removeEventListener("touchcancel", C, eventsOptions3);
  }, [B, g, x, i]), D = (0, import_react96.useCallback)(function(a2) {
    a2.target.attrs.draggable || s.current || (i && w(), a2.evt.preventDefault(), z(a2, c), m.on("mousemove touchmove", B), m.on("mouseleave touchcancel", C), document.addEventListener("mouseup", C, eventsOptions3), document.addEventListener("touchend", C, eventsOptions3), document.addEventListener("mouseleave", C, eventsOptions3), document.addEventListener("touchcancel", C, eventsOptions3));
  }, [B, C, c, z]);
  return (0, import_react96.useEffect)(function() {
    return function() {
      k && k.destroyChildren();
    };
  }, []), (0, import_react96.useEffect)(function() {
    return m && (m.on("mousedown touchstart", D), isFunction_default(d) && m.on("mousemove touchmove", A), isFunction_default(f) && m.on("mouseleave touchcancel", f)), function() {
      m && (m.off("mousedown touchstart", D), isFunction_default(d) && m.off("mousemove touchmove", A), isFunction_default(f) && m.off("mouseleave touchcancel", f));
    };
  }, [l, D, A, f]), { tmpDrawAttrs: q, updateTmpDrawAttrs: v, resetTmpDrawInstance: x, isDisabled: null === s || void 0 === s ? void 0 : s.current, setIsDisabled: u };
};
var useDrawPreviewByPointer_default = useDrawPreviewByPointer;

// node_modules/react-filerobot-image-editor/lib/utils/getCenterRotatedPoint.js
init_react_shim();
var getRotatedPoint = function(a, b) {
  var c = a.x, d = a.y, e = b * Math.PI / 180, f = Math.cos(e), g = Math.sin(e);
  return { x: c * f - d * g, y: d * f + c * g };
};
var getCenterRotatedPoint = function(a, b, c) {
  if (!a || !b || !c && 0 !== c) return { x: 0, y: 0, rotation: c };
  var d = { x: -a / 2, y: -b / 2 }, e = getRotatedPoint(d, 0), f = getRotatedPoint(d, c), g = f.x - e.x, h = f.y - e.y;
  return { x: g, y: h, rotation: c };
};
var getCenterRotatedPoint_default = getCenterRotatedPoint;

// node_modules/react-filerobot-image-editor/lib/components/Layers/LayersBackground.js
init_react_shim();
init_extends();
var import_react97 = __toESM(require_react());
function ownKeys72(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread72(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys72(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys72(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var LayersBackground = function(a) {
  var b, c = a.width, d = a.height, e = a.bgX, f = a.bgY, g = a.imageNodeRef, h = a.customFinetuneProps, i = a.customFilters, j = void 0 === i ? [] : i, k = a.originalSourceId, l = a.customSource, m = useStore_default(), n = m.originalSource, o = m.finetunes, p = void 0 === o ? [] : o, q = m.finetunesProps, r = void 0 === q ? {} : q, s = m.filter, t = void 0 === s ? null : s, u = m.adjustments, v = void 0 === u ? {} : u, w = v.isFlippedX, x = v.isFlippedY, y = m.isSaving, z = m.previewBgColor, A = m.previewBgImage, B = m.config, C = void 0 === B ? {} : B, D = C.previewBgColor, E = C.previewBgImage, F = l || n, G = z || D, H = A || E, I = (0, import_react97.useMemo)(function() {
    return t ? [].concat(_toConsumableArray(p), [t], _toConsumableArray(j)) : [].concat(_toConsumableArray(p), _toConsumableArray(j));
  }, [j, p, t]), J = e || c / 2, K = f || d / 2, L = _objectSpread72(_objectSpread72({}, r), h);
  return import_react97.default.createElement(import_react97.default.Fragment, null, !y && (G || H) && import_react97.default.createElement(Rect, _extends({ x: w ? c : 0, y: x ? d : 0, fill: G, fillPatternImage: H, fillPatternRepeat: "repeat", width: c, height: d, listening: false, scaleX: w ? -1 : 1, scaleY: x ? -1 : 1, filters: I, "data-testid": "FIE-layers-preview-background" }, L)), F.bgColor && import_react97.default.createElement(Rect, _extends({ width: c, height: d, offsetX: J, offsetY: K, x: J, y: K, opacity: null !== (b = F.opacity) && void 0 !== b ? b : 1, listening: false, fill: F.bgColor, filters: I, "data-testid": "FIE-layers-background-color" }, L)), F.src && import_react97.default.createElement(Image2, _extends({ id: k, image: F, width: c, height: d, offsetX: J, offsetY: K, x: J, y: K, listening: false, filters: I, ref: g, scaleX: w ? -1 : 1, scaleY: x ? -1 : 1, "data-testid": "FIE-layers-image" }, L)));
};
var LayersBackground_default = LayersBackground;

// node_modules/react-filerobot-image-editor/lib/components/Layers/BaseLayer/index.js
var _excluded16 = ["children"];
function ownKeys73(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread73(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys73(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys73(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var BaseLayer = function(a) {
  var b, c, d, e, f = a.children, g = _objectWithoutProperties(a, _excluded16), h = (0, import_react98.useRef)(), i = (0, import_react98.useRef)(), j = useStore_default(), k = j.initialCanvasWidth, l = j.initialCanvasHeight, m = j.canvasWidth, n = j.canvasHeight, o = j.toolId, p = j.canvasScale, q = j.originalSource, r = void 0 === q ? {} : q, s = j.shownImageDimensions, t = j.adjustments, u = void 0 === t ? {} : t, v = u.rotation, w = void 0 === v ? 0 : v, x = u.crop, y = void 0 === x ? {} : x, z = j.resize, A = o === TOOLS_IDS.CROP, B = (0, import_react98.useMemo)(function() {
    return getSizeAfterRotation_default(r.width, r.height, w);
  }, [r, w]), C = (0, import_react98.useMemo)(function() {
    return getOriginalSourceInitialScale_default({ initialCanvasWidth: k, initialCanvasHeight: l, originalSource: r });
  }, [r, k, l]), D = (0, import_react98.useMemo)(function() {
    return { width: r.width * C, height: r.height * C };
  }, [r, C]), E = z.width && !A ? z.width / (null !== (b = null !== (c = y.width) && void 0 !== c ? c : D.width) && void 0 !== b ? b : B.width) : 1, F = z.height && !A ? z.height / (null !== (d = null !== (e = y.height) && void 0 !== e ? e : D.height) && void 0 !== d ? d : B.height) : 1, G = m / (2 * p) - D.width * E / 2, H = n / (2 * p) - D.height * F / 2, I = m / (2 * p) - D.width / 2, J = n / (2 * p) - D.height / 2, K = (0, import_react98.useCallback)(function() {
    null !== i && void 0 !== i && i.current ? i.current.cache() : setTimeout(K, 0);
  }, []), L = getSizeAfterRotation_default(s.width, s.height, w), M = A ? 1 : getDimensionsMinimalRatio_default(s.width, s.height, L.width, L.height);
  if ((0, import_react98.useEffect)(function() {
    return r && K(), function() {
      var a2;
      null === i || void 0 === i || null === (a2 = i.current) || void 0 === a2 || a2.clearCache();
    };
  }, [r]), !G && 0 !== G || !H && 0 !== H || !s) return null;
  var N = getCenterRotatedPoint_default(y.x, y.y, w), O = G + (!A && y.width ? (s.width / 2 - y.x - y.width / 2 + N.x) * E : 0), P = H + (!A && y.height ? (s.height / 2 - y.y - y.height / 2 + N.y) * F : 0), Q = A ? I : O, R = A ? J : P, S = (A ? 1 : E) * M, T = (A ? 1 : F) * M;
  return import_react98.default.createElement(Layer, _extends({ id: BASE_LAYER_ID, ref: h, xPadding: Q, yPadding: R, offsetX: D.width / 2, offsetY: D.height / 2, x: D.width * E / 2 + Q, y: D.height * F / 2 + R, scaleX: S, scaleY: T, rotation: A ? 0 : w, clipFunc: function(a2) {
    var b2, c2 = A && !(null !== (b2 = h.current) && void 0 !== b2 && null !== (b2 = b2.attrs) && void 0 !== b2 && b2.isSaving), d2 = c2 || y.noEffect ? _objectSpread73(_objectSpread73({}, s), {}, { x: 0, y: 0 }) : { width: y.width || s.width, height: y.height || s.height, x: y.x || 0, y: y.y || 0 };
    cropImage_default(a2, _objectSpread73({ ratio: y.ratio }, d2), c2), h.current && h.current.setAttrs({ clipX: d2.x, clipY: d2.y, clipWidth: d2.width, clipHeight: d2.height, originalSourceInitialScale: C });
  }, "data-testid": "FIE-base-layer" }, g), import_react98.default.createElement(LayersBackground_default, { width: D.width, height: D.height, imageNodeRef: i, originalSourceId: IMAGE_NODE_ID }), f);
};
var BaseLayer_default = BaseLayer;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/index.js
init_react_shim();
var import_react113 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/index.js
init_react_shim();
init_extends();
var import_react100 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/MemoizedAnnotation.js
init_react_shim();
init_extends();
var import_react99 = __toESM(require_react());
var _excluded17 = ["annotation", "annotationEvents", "selectionsIds", "annotationNamesToNodeComponents"];
var MemoizedAnnotation = function(a) {
  var b = a.annotation, c = a.annotationEvents, d = a.selectionsIds, e = a.annotationNamesToNodeComponents, f = _objectWithoutProperties(a, _excluded17), g = null === e || void 0 === e ? void 0 : e[null === b || void 0 === b ? void 0 : b.name];
  return g ? import_react99.default.createElement(g, _extends({ key: b.id, annotationEvents: c, draggable: d.includes(b.id) }, b, f)) : null;
};
var MemoizedAnnotation_default = (0, import_react99.memo)(MemoizedAnnotation);

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/index.js
var _excluded18 = ["annotationIds", "annotations", "annotationNamesToNodeComponents"];
var AnnotationNodes = function(a) {
  var b = a.annotationIds, c = a.annotations, d = a.annotationNamesToNodeComponents, e = _objectWithoutProperties(a, _excluded18), f = useStore_default(), g = f.selectionsIds, h = void 0 === g ? [] : g, i = useAnnotationEvents_default();
  return (0, import_react100.useMemo)(function() {
    return b.map(function(a2) {
      return import_react100.default.createElement(MemoizedAnnotation_default, _extends({ key: a2, annotation: c[a2], annotationEvents: i, selectionsIds: h, annotationNamesToNodeComponents: d }, e));
    });
  }, [b, c, i, h]);
};
var AnnotationNodes_default = AnnotationNodes;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/PreviewGroup.js
init_react_shim();
init_extends();
var import_react101 = __toESM(require_react());
var PreviewGroup = function(a, b) {
  return import_react101.default.createElement(Group, _extends({ ref: b }, a));
};
var PreviewGroup_default = (0, import_react101.forwardRef)(PreviewGroup);

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/DesignLayerWrapper.js
init_react_shim();
init_extends();
var import_react102 = __toESM(require_react());
var _excluded19 = ["children", "previewGroupRef"];
function ownKeys74(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread74(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys74(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys74(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var DesignLayerWrapper = function(a) {
  var b, c, d, e, f = a.children, g = a.previewGroupRef, h = _objectWithoutProperties(a, _excluded19), i = (0, import_react102.useRef)(), j = useStore_default(), k = j.initialCanvasWidth, l = j.initialCanvasHeight, m = j.canvasWidth, n = j.canvasHeight, o = j.dispatch, p = j.toolId, q = j.canvasScale, r = j.originalSource, s = void 0 === r ? {} : r, t = j.adjustments, u = void 0 === t ? {} : t, v = u.rotation, w = void 0 === v ? 0 : v, x = u.crop, y = void 0 === x ? {} : x, z = j.resize, A = p === TOOLS_IDS.CROP, B = (0, import_react102.useMemo)(function() {
    return getSizeAfterRotation_default(s.width, s.height, w);
  }, [s, w]), C = (0, import_react102.useMemo)(function() {
    return getOriginalSourceInitialScale_default({ initialCanvasWidth: k, initialCanvasHeight: l, originalSource: s });
  }, [s, k, l]), D = (0, import_react102.useMemo)(function() {
    return { width: s.width * C, height: s.height * C };
  }, [s, C]), E = z.width && !A ? z.width / (null !== (b = null !== (c = y.width) && void 0 !== c ? c : D.width) && void 0 !== b ? b : B.width) : 1, F = z.height && !A ? z.height / (null !== (d = null !== (e = y.height) && void 0 !== e ? e : D.height) && void 0 !== d ? d : B.height) : 1, G = m / (2 * q) - D.width * E / 2, H = n / (2 * q) - D.height * F / 2, I = m / (2 * q) - D.width / 2, J = n / (2 * q) - D.height / 2, K = (0, import_react102.useMemo)(function() {
    return { x: Math.round(G), y: Math.round(H), abstractX: Math.round(I), abstractY: Math.round(J), width: D.width, height: D.height, scaledBy: q, originalSourceInitialScale: C };
  }, [q, G, H, I, J, D, C]), L = getSizeAfterRotation_default(K.width, K.height, w), M = A ? 1 : getDimensionsMinimalRatio_default(K.width, K.height, L.width, L.height);
  if ((0, import_react102.useEffect)(function() {
    K && o({ type: SET_SHOWN_IMAGE_DIMENSIONS, payload: { shownImageDimensions: K, designLayer: i.current, previewGroup: g.current } });
  }, [K]), !G && 0 !== G || !H && 0 !== H || !K) return null;
  var N = getCenterRotatedPoint_default(y.x, y.y, w), O = G + (!A && y.width ? (K.width / 2 - y.x - y.width / 2 + N.x) * E : 0), P = H + (!A && y.height ? (K.height / 2 - y.y - y.height / 2 + N.y) * F : 0), Q = A ? I : O, R = A ? J : P, S = (A ? 1 : E) * M, T = (A ? 1 : F) * M;
  return import_react102.default.createElement(Layer, _extends({ id: DESIGN_LAYER_ID, ref: i, xPadding: Q, yPadding: R, offsetX: D.width / 2, offsetY: D.height / 2, x: D.width * E / 2 + Q, y: D.height * F / 2 + R, scaleX: S, scaleY: T, rotation: A ? 0 : w, clipFunc: function(a2) {
    var b2, c2 = A && !(null !== (b2 = i.current) && void 0 !== b2 && null !== (b2 = b2.attrs) && void 0 !== b2 && b2.isSaving), d2 = c2 || y.noEffect ? _objectSpread74(_objectSpread74({}, K), {}, { x: 0, y: 0 }) : { width: y.width || K.width, height: y.height || K.height, x: y.x || 0, y: y.y || 0 };
    cropImage_default(a2, _objectSpread74({ ratio: y.ratio }, d2), c2), i.current && i.current.setAttrs({ clipX: d2.x, clipY: d2.y, clipWidth: d2.width, clipHeight: d2.height, originalSourceInitialScale: C });
  }, "data-testid": "FIE-design-layer" }, h), f && import_react102.default.createElement(Group, { xPadding: Q, yPadding: R, scaleX: C, scaleY: C }, f));
};
var DesignLayerWrapper_default = DesignLayerWrapper;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/AnnotationNodes.constants.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/RectNode.js
init_react_shim();
init_extends();
var import_react103 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/nodesCommonPropTypes.js
init_react_shim();
var import_prop_types = __toESM(require_prop_types());
var nodesCommonPropTypes = { definitions: { id: import_prop_types.default.string.isRequired, name: import_prop_types.default.string.isRequired, rotation: import_prop_types.default.number, scaleX: import_prop_types.default.number, scaleY: import_prop_types.default.number, stroke: import_prop_types.default.string, strokeWidth: import_prop_types.default.number, shadowOffsetX: import_prop_types.default.number, shadowOffsetY: import_prop_types.default.number, shadowBlur: import_prop_types.default.number, shadowColor: import_prop_types.default.string, shadowOpacity: import_prop_types.default.number, opacity: import_prop_types.default.number } };

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/RectNode.js
var _excluded20 = ["id", "name", "fill", "x", "y", "width", "height", "scaleX", "scaleY", "rotation", "annotationEvents", "stroke", "strokeWidth", "shadowOffsetX", "shadowOffsetY", "shadowBlur", "shadowColor", "shadowOpacity", "opacity", "cornerRadius"];
var RectNode = function(a) {
  var b = a.id, c = a.name, d = a.fill, e = a.x, f = a.y, g = a.width, h = void 0 === g ? 0 : g, i = a.height, j = void 0 === i ? 0 : i, k = a.scaleX, l = void 0 === k ? 1 : k, m = a.scaleY, n = void 0 === m ? 1 : m, o = a.rotation, p = void 0 === o ? 0 : o, q = a.annotationEvents, r = a.stroke, s = a.strokeWidth, t = a.shadowOffsetX, u = a.shadowOffsetY, v = a.shadowBlur, w = a.shadowColor, x = a.shadowOpacity, y = a.opacity, z = void 0 === y ? 1 : y, A = a.cornerRadius, B = void 0 === A ? 0 : A, C = _objectWithoutProperties(a, _excluded20);
  return import_react103.default.createElement(Rect, _extends({ id: b, name: c, rotation: p, scaleX: l, scaleY: n, stroke: r, strokeWidth: s, shadowOffsetX: t, shadowOffsetY: u, shadowBlur: v, shadowColor: w, shadowOpacity: x, fill: d, x: e, y: f, width: h, height: j, opacity: z, cornerRadius: B }, q, C));
};
var RectNode_default = RectNode;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/EllipseNode.js
init_react_shim();
init_extends();
var import_react104 = __toESM(require_react());
var _excluded21 = ["id", "name", "fill", "x", "y", "radiusX", "radiusY", "scaleX", "scaleY", "rotation", "annotationEvents", "stroke", "strokeWidth", "shadowOffsetX", "shadowOffsetY", "shadowBlur", "shadowColor", "shadowOpacity", "opacity"];
var EllipseNode = function(a) {
  var b = a.id, c = a.name, d = a.fill, e = void 0 === d ? "#000000" : d, f = a.x, g = a.y, h = a.radiusX, i = void 0 === h ? 0 : h, j = a.radiusY, k = void 0 === j ? 0 : j, l = a.scaleX, m = void 0 === l ? 1 : l, n = a.scaleY, o = void 0 === n ? 1 : n, p = a.rotation, q = void 0 === p ? 0 : p, r = a.annotationEvents, s = a.stroke, t = a.strokeWidth, u = a.shadowOffsetX, v = a.shadowOffsetY, w = a.shadowBlur, x = a.shadowColor, y = a.shadowOpacity, z = a.opacity, A = void 0 === z ? 1 : z, B = _objectWithoutProperties(a, _excluded21);
  return import_react104.default.createElement(Ellipse, _extends({ id: b, name: c, rotation: q, scaleX: m, scaleY: o, stroke: s, strokeWidth: t, shadowOffsetX: u, shadowOffsetY: v, shadowBlur: w, shadowColor: x, shadowOpacity: y, fill: e, x: f, y: g, radiusX: i, radiusY: k, offsetX: -i, offsetY: -k, opacity: A }, r, B));
};
var EllipseNode_default = EllipseNode;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/PolygonNode.js
init_react_shim();
init_extends();
var import_react105 = __toESM(require_react());
var _excluded24 = ["id", "name", "fill", "x", "y", "radius", "scaleX", "scaleY", "rotation", "sides", "annotationEvents", "stroke", "strokeWidth", "shadowOffsetX", "shadowOffsetY", "shadowBlur", "shadowColor", "shadowOpacity", "opacity"];
var PolygonNode = function(a) {
  var b = a.id, c = a.name, d = a.fill, e = void 0 === d ? "#000000" : d, f = a.x, g = a.y, h = a.radius, i = a.scaleX, j = void 0 === i ? 1 : i, k = a.scaleY, l = void 0 === k ? 1 : k, m = a.rotation, n = void 0 === m ? 0 : m, o = a.sides, p = void 0 === o ? 3 : o, q = a.annotationEvents, r = a.stroke, s = a.strokeWidth, t = a.shadowOffsetX, u = a.shadowOffsetY, v = a.shadowBlur, w = a.shadowColor, x = a.shadowOpacity, y = a.opacity, z = void 0 === y ? 1 : y, A = _objectWithoutProperties(a, _excluded24);
  return import_react105.default.createElement(RegularPolygon, _extends({ id: b, name: c, rotation: n, scaleX: j, scaleY: l, stroke: r, strokeWidth: s, shadowOffsetX: t, shadowOffsetY: u, shadowBlur: v, shadowColor: w, shadowOpacity: x, fill: e, x: f, y: g, radius: h, offsetX: -h, offsetY: -h, sides: p, opacity: z }, q, A));
};
var PolygonNode_default = PolygonNode;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/TextNode/index.js
init_react_shim();
init_extends();
var import_react109 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/TextNode/TextNodeContentTextarea.js
init_react_shim();
var import_react108 = __toESM(require_react());

// node_modules/react-konva-utils/es/index.js
init_react_shim();

// node_modules/react-konva-utils/es/html.js
init_react_shim();
var import_react106 = __toESM(require_react());
var import_client = __toESM(require_client());
var __rest = function(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
    t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
};
var needForceStyle = (el) => {
  const pos = window.getComputedStyle(el).position;
  const ok = pos === "absolute" || pos === "relative";
  return !ok;
};
function useEvent(fn = () => {
}) {
  const ref = import_react106.default.useRef(fn);
  ref.current = fn;
  return import_react106.default.useCallback((...args) => {
    return ref.current.apply(null, args);
  }, []);
}
var Html = ({ children, groupProps, divProps, transform, transformFunc, parentNodeFunc }) => {
  const Bridge = useContextBridge();
  const groupRef = import_react106.default.useRef(null);
  const [div] = import_react106.default.useState(() => document.createElement("div"));
  const root = import_react106.default.useMemo(() => import_client.default.createRoot(div), [div]);
  const shouldTransform = transform !== null && transform !== void 0 ? transform : true;
  const handleTransform = useEvent(() => {
    if (shouldTransform && groupRef.current) {
      const tr = groupRef.current.getAbsoluteTransform();
      let attrs = tr.decompose();
      if (transformFunc) {
        attrs = transformFunc(attrs);
      }
      div.style.position = "absolute";
      div.style.zIndex = "10";
      div.style.top = "0px";
      div.style.left = "0px";
      div.style.transform = `translate(${attrs.x}px, ${attrs.y}px) rotate(${attrs.rotation}deg) scaleX(${attrs.scaleX}) scaleY(${attrs.scaleY})`;
      div.style.transformOrigin = "top left";
    } else {
      div.style.position = "";
      div.style.zIndex = "";
      div.style.top = "";
      div.style.left = "";
      div.style.transform = ``;
      div.style.transformOrigin = "";
    }
    const _a = divProps || {}, { style: style3 } = _a, restProps = __rest(_a, ["style"]);
    Object.assign(div.style, style3);
    Object.assign(div, restProps);
  });
  import_react106.default.useLayoutEffect(() => {
    var _a;
    const group = groupRef.current;
    if (!group) {
      return;
    }
    const parent = parentNodeFunc ? parentNodeFunc({ stage: group.getStage() }) : (_a = group.getStage()) === null || _a === void 0 ? void 0 : _a.container();
    if (!parent) {
      return;
    }
    parent.appendChild(div);
    if (shouldTransform && needForceStyle(parent)) {
      parent.style.position = "relative";
    }
    group.on("absoluteTransformChange", handleTransform);
    handleTransform();
    return () => {
      var _a2;
      group.off("absoluteTransformChange", handleTransform);
      (_a2 = div.parentNode) === null || _a2 === void 0 ? void 0 : _a2.removeChild(div);
    };
  }, [shouldTransform, parentNodeFunc]);
  import_react106.default.useLayoutEffect(() => {
    handleTransform();
  }, [divProps, transformFunc]);
  import_react106.default.useLayoutEffect(() => {
    root.render(import_react106.default.createElement(Bridge, null, children));
  });
  import_react106.default.useLayoutEffect(() => {
    return () => {
      setTimeout(() => {
        root.unmount();
      });
    };
  }, []);
  return import_react106.default.createElement(Group, Object.assign({ ref: groupRef }, groupProps));
};

// node_modules/react-konva-utils/es/portal.js
init_react_shim();
var import_react107 = __toESM(require_react());

// node_modules/react-konva-utils/es/use-image.js
init_react_shim();
var import_use_image = __toESM(require_use_image());

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/TextNode/TextNode.styled.js
init_react_shim();
var StyledTextNodeContentTextarea = it.div.withConfig({ componentId: "sc-4tf56w-0" })(function(a) {
  var b = a.$opacity, c = a.$textAlign, d = a.$width, e = a.$height;
  return "\n  background: transparent;\n  opacity: ".concat(b, ";\n  text-align: ").concat(c, ";\n  width: ").concat(d, "px;\n  height: ").concat(e, "px;\n  border: none;\n  outline: 3px solid #000;\n  border-radius: 2px;\n  resize: none;\n  padding: 0;\n  margin: 0;\n  overflow: visible auto;\n  cursor: text;\n  overflow-wrap: break-word;\n  word-break: normal;\n  user-select: text;\n\n  mark, mark * {\n    background: rgba(40, 90, 195, 0.75) !important;\n    color: #fff !important;\n  }\n");
});

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/TextNode/TextNodeContentTextarea.js
function ownKeys75(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread75(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys75(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys75(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var timeoutId;
var getPreparedStyle = function(a) {
  var b = a.fontWeight, c = a.fontStyle, d = a.fontSize, e = a.fontFamily, f = a.fill, g = a.letterSpacing, h = a.baselineShift;
  return { fontWeight: b, fontStyle: c, fontSize: d, color: f, letterSpacing: g && "".concat(g, "px"), transform: "translateY(".concat(-h, "px)"), display: h && "inline-block", fontFamily: getQuotedFontFamily(e) };
};
var TextNodeContentTextarea = function(a) {
  var b = a.id, c = a.fill, d = a.opacity, e = a.fontFamily, f = a.fontSize, g = a.fontWeight, h = a.fontStyle, i = a.letterSpacing, j = a.lineHeight, k = a.textAlign, l = a.text, m = a.width, n = a.height, o = (0, import_react108.useRef)(), p = (0, import_react108.useRef)(""), q = useStore_default(), r = q.toolId, s = q.designLayer, t = useSetAnnotation_default(), u = useTextAnnotationEditing_default(true), v = u.commitTextUpdates, w = u.cancelTextEditing, x = u.getEditableSelectedUnfocusedTextData, y = function a2() {
    var b2 = [];
    return _pushNodeFlattenedContent(b2, o.current, {}), b2;
  }, z = function c2(a2) {
    t(_objectSpread75(_objectSpread75({}, a2), {}, { id: b, tmpText: y(), dismissHistory: true }));
  }, A = function a2() {
    timeoutId && clearTimeout(timeoutId), timeoutId = setTimeout(function() {
      o.current && (p.current = Array.isArray(l) ? l.map(function() {
        var a3 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b2 = a3.textContent, c2 = void 0 === b2 ? "" : b2;
        return c2;
      }).join("") : l);
    }, 0);
  }, B = (0, import_react108.useCallback)(function(a2) {
    if (o.current = a2, o.current) {
      var b2 = document.createRange(), c2 = window.getSelection();
      b2.selectNodeContents(o.current), b2.collapse(false), c2.removeAllRanges(), c2.addRange(b2), p.current = o.current.innerText;
    }
  }, []), C = function a2() {
    if (o.current) {
      var c2 = dispatchTextContentChangingEvent(o, p.current, b);
      p.current = c2.newText, z();
    }
  }, D = function a2() {
    var b2 = o.current.innerText;
    return v(b2, y());
  }, E = function a2() {
    var b2 = !(0 < arguments.length && arguments[0] !== void 0) || arguments[0], c2 = !!(1 < arguments.length && arguments[1] !== void 0) && arguments[1];
    D() && !c2 && w(false, b2);
  }, F = function a2() {
    E(false);
  }, G = function b2(a2) {
    var c2, d2, e2, f2 = a2 || {}, g2 = f2.detail, h2 = window.getSelection();
    if (0 !== h2.rangeCount && g2 && !Object.keys(g2).some(function(a3) {
      return !ALLOWED_TEXT_PART_FORMATS.includes(a3);
    })) {
      var i2 = _objectSpread75({}, g2);
      "undefined" == typeof i2.fontSize || "number" != typeof i2.fontSize && i2.fontSize.endsWith("px") || (i2.fontSize = "".concat(i2.fontSize, "px")), "undefined" != typeof i2.letterSpacing && (i2.letterSpacing = "".concat(parseFloat(i2.letterSpacing), "em")), "undefined" != typeof i2.baselineShift && (i2.transform = "translateY(".concat(-i2.baselineShift, "px)"), i2.display = "inline-block", delete i2.baselineShift), g2.fill && (i2.color = i2.fill, delete i2.fill);
      var j2 = h2.getRangeAt(0), k2 = h2.isCollapsed, l2 = k2 && (null === (c2 = x()) || void 0 === c2 ? void 0 : c2.element), m2 = k2 ? l2 || o.current : j2.extractContents(), n2 = (null === (d2 = getNodeText_default(m2)) || void 0 === d2 ? void 0 : d2.length) === (null === (e2 = getNodeText_default(o.current)) || void 0 === e2 ? void 0 : e2.length), p2 = Object.keys(i2);
      k2 && !l2 && _recursivelyRemoveCssProperties(o.current, p2);
      var q2 = getNewFormattedContent(m2, i2);
      m2 !== q2[0] && m2.replaceChildren.apply(m2, _toConsumableArray(q2)), k2 || j2.insertNode(m2), z(n2 && g2);
    }
  };
  (0, import_react108.useEffect)(function() {
    var a2, b2 = function a3() {
      var b3 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, c2 = b3.detail.avoidEditingCancel, d2 = void 0 !== c2 && c2;
      E(false, d2);
    };
    return null === (a2 = window) || void 0 === a2 || a2.addEventListener(EVENTS.SAVE_EDITED_TEXT_CONTENT, b2), function() {
      var a3;
      null === (a3 = window) || void 0 === a3 || a3.removeEventListener(EVENTS.SAVE_EDITED_TEXT_CONTENT, b2);
    };
  }, []), (0, import_react108.useEffect)(function() {
    A();
  }, [l]), (0, import_react108.useEffect)(function() {
    var a2 = null === s || void 0 === s ? void 0 : s.getStage();
    return window && (a2.on("click", F), window.addEventListener(EVENTS.APPLY_TEXT_FORMAT, G)), function() {
      var b2;
      a2.off("click", F), null === (b2 = window) || void 0 === b2 || b2.removeEventListener(EVENTS.APPLY_TEXT_FORMAT, G), timeoutId = null;
    };
  }, []), useUpdateEffect_default(function() {
    if (o.current) {
      var a2 = D();
      w(!a2, false);
    }
  }, [r]);
  var H = function b2(a2) {
    return a2.split("\n").map(function(a3, b3) {
      return import_react108.default.createElement(import_react108.Fragment, { key: b3 }, 0 !== b3 && import_react108.default.createElement("br", null), a3);
    });
  };
  return import_react108.default.createElement(Html, null, import_react108.default.createElement(StyledTextNodeContentTextarea, { id: TEXT_EDITOR_ID, ref: B, onKeyDown: function b2(a2) {
    return "Enter" === a2.key ? void (a2.shiftKey || (a2.preventDefault(), a2.stopPropagation(), E())) : void ("Escape" === a2.key && (a2.preventDefault(), a2.stopPropagation(), w()));
  }, onBlur: function a2() {
    var b2 = window.getSelection();
    if (!(0 >= b2.rangeCount || b2.isCollapsed)) {
      var c2 = b2.getRangeAt(0), d2 = c2.extractContents(), e2 = document.createElement("mark");
      e2.id = UNFOCUSED_MARKED_TEXT_SELECTOR_ID, e2.appendChild(d2), b2.removeAllRanges(), c2.insertNode(e2), y();
    }
  }, onFocus: function a2() {
    var b2, c2 = null === (b2 = x()) || void 0 === b2 ? void 0 : b2.element;
    if (c2) {
      var d2, e2, f2, g2, h2 = document.createDocumentFragment(), i2 = [];
      c2.childNodes.forEach(function(a3, b3, c3) {
        var d3;
        if ("BR" === a3.nodeName) return void i2.push(a3);
        if (a3.textContent || 0 === a3.textContent) {
          var e3 = 0 < b3 ? c3[b3 - 1] : void 0, f3 = "true" === (null === (d3 = a3.dataset) || void 0 === d3 ? void 0 : d3.detached);
          "#text" !== (null === e3 || void 0 === e3 ? void 0 : e3.nodeName) || "#text" !== a3.nodeName || f3 ? i2.push(a3) : e3.textContent = "".concat(e3.textContent).concat(a3.textContent);
        }
      }), "#text" === (null === (d2 = c2.previousSibling) || void 0 === d2 ? void 0 : d2.nodeName) && "#text" === i2[0].nodeName && "true" !== (null === (e2 = i2[0].dataset) || void 0 === e2 ? void 0 : e2.detached) && (i2[0].textContent = "".concat(c2.previousSibling.textContent).concat(i2[0].textContent), c2.previousSibling.remove());
      var j2 = i2[i2.length - 1];
      "#text" === (null === (f2 = c2.nextSibling) || void 0 === f2 ? void 0 : f2.nodeName) && "#text" === j2.nodeName && "true" !== (null === (g2 = j2.dataset) || void 0 === g2 ? void 0 : g2.detached) && (j2.textContent = "".concat(j2.textContent).concat(c2.nextSibling.textContent), c2.nextSibling.remove()), h2.replaceChildren.apply(h2, i2), c2.replaceWith(h2);
      var k2 = window.getSelection();
      k2.removeAllRanges();
    }
  }, onInput: C, contentEditable: true, suppressContentEditableWarning: true, $width: m, $height: n, $textAlign: k, $opacity: d, onPaste: function b2(a2) {
    var c2;
    a2.preventDefault();
    var d2 = null === (c2 = (a2.clipboardData || window.clipboardData).getData("text/plain")) || void 0 === c2 ? void 0 : c2.split(/\r?\n/), e2 = document.createDocumentFragment();
    d2.forEach(function(a3, b3) {
      0 !== b3 && e2.appendChild(document.createElement("br")), e2.appendChild(document.createTextNode(a3));
    });
    var f2 = window.getSelection();
    f2.rangeCount && (f2.deleteFromDocument(), f2.getRangeAt(0).insertNode(e2), f2.collapseToEnd(), C());
  }, style: { color: c, fontFamily: getQuotedFontFamily(e), fontSize: f, letterSpacing: i && "".concat(i, "px"), lineHeight: j, fontWeight: g, fontStyle: h } }, Array.isArray(l) ? l.map(function() {
    var a2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b2 = a2.textContent, c2 = void 0 === b2 ? "" : b2, d2 = a2.style, e2 = a2.isDetached, f2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : 0;
    return import_react108.default.createElement("span", { style: getPreparedStyle(d2 || {}), key: f2, "data-detached": e2 }, H(c2));
  }) : H(l)));
};
var TextNodeContentTextarea_default = TextNodeContentTextarea;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/TextNode/index.js
var _excluded25 = ["id", "name", "text", "fontFamily", "fontSize", "fontStyle", "fill", "x", "y", "width", "height", "scaleX", "scaleY", "rotation", "annotationEvents", "stroke", "strokeWidth", "shadowOffsetX", "shadowOffsetY", "shadowBlur", "shadowColor", "shadowOpacity", "opacity", "letterSpacing", "lineHeight", "align", "autoWidth", "autoHeight", "visible", "padding", "fontWeight", "originalSourceInitialScale"];
var FormattedText = "FormattedTextFIE";
var TextNode = function(a) {
  var b = a.id, c = a.name, d = a.text, e = void 0 === d ? "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur imperdiet tortor quis odio facilisis, id aliquet nulla facilisis. Etiam tincidunt tempor odio nec placerat." : d, f = a.fontFamily, g = void 0 === f ? "Arial" : f, h = a.fontSize, i = void 0 === h ? 14 : h, j = a.fontStyle, k = a.fill, l = void 0 === k ? "#000" : k, m = a.x, n = a.y, o = a.width, p = void 0 === o ? 0 : o, q = a.height, r = void 0 === q ? 0 : q, s = a.scaleX, t = void 0 === s ? 1 : s, u = a.scaleY, v = void 0 === u ? 1 : u, w = a.rotation, x = void 0 === w ? 0 : w, y = a.annotationEvents, z = a.stroke, A = a.strokeWidth, B = a.shadowOffsetX, C = a.shadowOffsetY, D = a.shadowBlur, E = a.shadowColor, F = a.shadowOpacity, G = a.opacity, H = void 0 === G ? 1 : G, I = a.letterSpacing, J = a.lineHeight, K = a.align, L = void 0 === K ? "left" : K, M = a.autoWidth, N = void 0 !== M && M, O = a.autoHeight, P = void 0 !== O && O, Q = a.visible, R = a.padding, S = a.fontWeight, T = a.originalSourceInitialScale, U = _objectWithoutProperties(a, _excluded25), V = useEditableTextId_default(), W = V === b, X = m || 0, Y = n || 0, Z = import_react109.default.createElement(FormattedText, _extends({ id: b, name: c, scaleX: t, scaleY: v, stroke: z, strokeWidth: A, shadowOffsetX: B, shadowOffsetY: C, shadowBlur: D, shadowColor: E, shadowOpacity: F, opacity: H || 0, fill: l, text: e, fontFamily: g, fontStyle: j, fontWeight: S, fontSize: i || 1, letterSpacing: I || 0, lineHeight: "number" == typeof J ? J : 1, align: L, x: W ? 0 : X, y: W ? 0 : Y, rotation: W ? 0 : x, visible: !W && Q, width: N ? void 0 : p, height: P ? void 0 : r, autoWidth: N, autoHeight: P, scaleFormatDimensionsBy: T }, y, U));
  return W ? import_react109.default.createElement(Group, { x: X, y: Y, rotation: x }, Z, import_react109.default.createElement(TextNodeContentTextarea_default, { id: b, text: e, fill: l, opacity: H, fontFamily: g, fontSize: i, fontStyle: j, letterSpacing: I, lineHeight: J, textAlign: L, width: p, height: r })) : Z;
};
var TextNode_default = TextNode;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/ImageNode.js
init_react_shim();
init_extends();
var import_react110 = __toESM(require_react());
var _excluded26 = ["id", "name", "image", "x", "y", "width", "height", "scaleX", "scaleY", "rotation", "annotationEvents", "stroke", "strokeWidth", "shadowOffsetX", "shadowOffsetY", "shadowBlur", "shadowColor", "shadowOpacity", "opacity"];
var ImageNode = function(a) {
  var b = a.id, c = a.name, d = a.image, e = a.x, f = a.y, g = a.width, h = void 0 === g ? 0 : g, i = a.height, j = void 0 === i ? 0 : i, k = a.scaleX, l = void 0 === k ? 1 : k, m = a.scaleY, n = void 0 === m ? 1 : m, o = a.rotation, p = void 0 === o ? 0 : o, q = a.annotationEvents, r = a.stroke, s = a.strokeWidth, t = a.shadowOffsetX, u = a.shadowOffsetY, v = a.shadowBlur, w = a.shadowColor, x = a.shadowOpacity, y = a.opacity, z = void 0 === y ? 1 : y, A = _objectWithoutProperties(a, _excluded26), B = (0, import_react110.useState)(null), C = _slicedToArray(B, 2), D = C[0], E = C[1];
  (0, import_react110.useEffect)(function() {
    "string" == typeof d && loadImage_default(d).then(E);
  }, [d]);
  var F = d instanceof HTMLImageElement || d instanceof HTMLCanvasElement;
  if (!F && !D) return null;
  var G = F ? d : D;
  return import_react110.default.createElement(Image2, _extends({ id: b, name: c, rotation: p, scaleX: l, scaleY: n, stroke: r, strokeWidth: s, shadowOffsetX: t, shadowOffsetY: u, shadowBlur: v, shadowColor: w, shadowOpacity: x, image: G, x: e || 0, y: f || 0, width: h, height: j, opacity: z || 0 }, A, q, A));
};
var ImageNode_default = ImageNode;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/LineNode.js
init_react_shim();
init_extends();
var import_react111 = __toESM(require_react());
var _excluded27 = ["id", "name", "scaleX", "scaleY", "rotation", "annotationEvents", "points", "lineCap", "stroke", "strokeWidth", "shadowOffsetX", "shadowOffsetY", "shadowBlur", "shadowColor", "shadowOpacity", "tension", "opacity"];
var LineNode = function(a) {
  var b = a.id, c = a.name, d = a.scaleX, e = void 0 === d ? 1 : d, f = a.scaleY, g = void 0 === f ? 1 : f, h = a.rotation, i = void 0 === h ? 0 : h, j = a.annotationEvents, k = void 0 === j ? {} : j, l = a.points, m = a.lineCap, n = void 0 === m ? "butt" : m, o = a.stroke, p = void 0 === o ? "#000000" : o, q = a.strokeWidth, r = void 0 === q ? 1 : q, s = a.shadowOffsetX, t = a.shadowOffsetY, u = a.shadowBlur, v = a.shadowColor, w = a.shadowOpacity, x = a.tension, y = a.opacity, z = void 0 === y ? 1 : y, A = _objectWithoutProperties(a, _excluded27);
  return import_react111.default.createElement(Line, _extends({ id: b, name: c, rotation: i, scaleX: e, scaleY: g, stroke: p, strokeWidth: r, shadowOffsetX: s, shadowOffsetY: t, shadowBlur: u, shadowColor: v, shadowOpacity: w, points: l, lineCap: n, tension: x, hitStrokeWidth: 20, x: 0, y: 0, opacity: z }, k, A));
};
var LineNode_default = LineNode;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/ArrowNode.js
init_react_shim();
init_extends();
var import_react112 = __toESM(require_react());
var _excluded28 = ["id", "name", "fill", "pointerLength", "pointerWidth", "scaleX", "scaleY", "rotation", "annotationEvents", "points", "lineCap", "stroke", "strokeWidth", "shadowOffsetX", "shadowOffsetY", "shadowBlur", "shadowColor", "shadowOpacity", "opacity"];
var ArrowNode = function(a) {
  var b = a.id, c = a.name, d = a.fill, e = a.pointerLength, f = a.pointerWidth, g = a.scaleX, h = void 0 === g ? 1 : g, i = a.scaleY, j = void 0 === i ? 1 : i, k = a.rotation, l = void 0 === k ? 0 : k, m = a.annotationEvents, n = a.points, o = a.lineCap, p = void 0 === o ? "butt" : o, q = a.stroke, r = void 0 === q ? "#000000" : q, s = a.strokeWidth, t = void 0 === s ? 6 : s, u = a.shadowOffsetX, v = a.shadowOffsetY, w = a.shadowBlur, x = a.shadowColor, y = a.shadowOpacity, z = a.opacity, A = void 0 === z ? 1 : z, B = _objectWithoutProperties(a, _excluded28);
  return import_react112.default.createElement(Arrow, _extends({ id: b, name: c, rotation: l, scaleX: h, scaleY: j, stroke: r, strokeWidth: t, shadowOffsetX: u, shadowOffsetY: v, shadowBlur: w, shadowColor: x, shadowOpacity: y, fill: d, x: 0, y: 0, points: n, pointerLength: e, pointerWidth: f, lineCap: p, opacity: A }, m, B));
};
var ArrowNode_default = ArrowNode;

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/AnnotationNodes/AnnotationNodes.constants.js
var ANNOTATION_NAMES_TO_COMPONENT = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, TOOLS_IDS.RECT, RectNode_default), TOOLS_IDS.ELLIPSE, EllipseNode_default), TOOLS_IDS.POLYGON, PolygonNode_default), TOOLS_IDS.TEXT, TextNode_default), TOOLS_IDS.IMAGE, ImageNode_default), TOOLS_IDS.LINE, LineNode_default), TOOLS_IDS.ARROW, ArrowNode_default), TOOLS_IDS.PEN, LineNode_default);

// node_modules/react-filerobot-image-editor/lib/components/Layers/DesignLayer/index.js
var DesignLayer = function() {
  var a = useStore_default(), b = a.annotationIds, c = a.annotations, d = a.config.annotationComponents, e = void 0 === d ? ANNOTATION_NAMES_TO_COMPONENT : d, f = a.shownImageDimensions, g = void 0 === f ? {} : f, h = g.originalSourceInitialScale, i = (0, import_react113.useRef)();
  return import_react113.default.createElement(DesignLayerWrapper_default, { previewGroupRef: i }, import_react113.default.createElement(AnnotationNodes_default, { annotationIds: b, annotations: c, annotationNamesToNodeComponents: e, originalSourceInitialScale: h }), import_react113.default.createElement(PreviewGroup_default, { ref: i }));
};
var DesignLayer_default = DesignLayer;

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/index.js
init_react_shim();
var import_react118 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/CropTransformer.js
init_react_shim();
init_extends();
var import_react114 = __toESM(require_react());
var import_konva15 = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/TransformersLayer.utils.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/utils/compareRatios.js
init_react_shim();
var compareRatios = function(a, b) {
  return toPrecisedFloat_default(a) === toPrecisedFloat_default(b);
};
var compareRatios_default = compareRatios;

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/TransformersLayer.utils.js
function ownKeys76(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread76(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys76(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys76(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var boundDragging = function(a, b) {
  var c = b.width - (2 * a.radiusX || a.width), d = b.height - (2 * a.radiusY || a.height);
  return { x: toPrecisedFloat_default(Math.min(Math.max(a.x, 0), c)), y: toPrecisedFloat_default(Math.min(Math.max(a.y, 0), d)) };
};
var getPositionByPlaceLabel = function(a, b, c) {
  var d = a.split("-"), e = _slicedToArray(d, 2), f = e[0], g = e[1], h = { x: 0, y: 0 };
  return "center" === f ? h.y = b.height / 2 - c.height / 2 : "bottom" === f && (h.y = b.height - c.height), "center" === g ? h.x = b.width / 2 - c.width / 2 : "right" === g && (h.x = b.width - c.width), h;
};
var boundResizing = function(a, b, c, d) {
  var e = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : {}, f = { x: toPrecisedFloat_default(c.abstractX * c.scaledBy), y: toPrecisedFloat_default(c.abstractY * c.scaledBy), width: toPrecisedFloat_default(c.width * (e.noScale ? 1 : c.scaledBy)), height: toPrecisedFloat_default(c.height * (e.noScale ? 1 : c.scaledBy)) }, g = _objectSpread76({}, b);
  if (b.x < f.x && (g.x = f.x, g.width = a.x - f.x + a.width), b.y < f.y && (g.y = f.y, g.height = a.y - f.y + a.height), g.x + g.width > f.x + f.width && (g.width = f.x + f.width - g.x), g.y + g.height > f.y + f.height && (g.height = f.y + f.height - g.y), "number" == typeof d && !compareRatios_default(g.width / g.height, d)) {
    var h = g.height * d, i = g.width / d;
    toPrecisedFloat_default(g.y + i) <= f.y + f.height ? g.height = i : g.width = h;
  }
  if ((e.minWidth && g.width <= e.minWidth || e.maxWidth && g.width >= e.maxWidth) && (g.width = restrictNumber_default(g.width, e.minWidth, e.maxWidth), g.x = a.x, g.y = a.y, "number" == typeof d && (g.height = g.width / d)), (e.minHeight && b.height <= e.minHeight || e.maxHeight && b.height >= e.maxHeight) && (g.height = restrictNumber_default(g.height, e.minHeight, e.maxHeight), g.x = a.x, g.y = a.y, "number" == typeof d && (g.width = g.height * d)), "string" == typeof e.lockCropAreaAt) {
    var j = getPositionByPlaceLabel(e.lockCropAreaAt, f, g), k = j.x, l = j.y;
    g.x = k, g.y = l;
  }
  return g;
};

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/CropTransformer.js
function ownKeys77(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread77(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys77(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys77(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var noEffectTextDimensions = { width: 200, height: 100 };
var CropTransformer = function(a) {
  var b = useStore_default(), c = b.dispatch, d = b.theme, e = b.designLayer, f = b.originalSource, g = b.shownImageDimensions, h = b.adjustments, i = void 0 === h ? {} : h, j = i.crop, k = void 0 === j ? {} : j, l = i.isFlippedX, m = i.isFlippedY, n = b.resize, o = void 0 === n ? {} : n, p = b.config, q = b.t, r = (0, import_react114.useRef)(), s = (0, import_react114.useRef)(), t = (0, import_react114.useRef)(), u = (0, import_react114.useRef)(), v = p[TOOLS_IDS.CROP], w = (0, import_react114.useMemo)(function() {
    var a2;
    return _objectSpread77(_objectSpread77({}, v), {}, { lockCropAreaAt: null !== (a2 = k.lockCropAreaAt) && void 0 !== a2 ? a2 : null === v || void 0 === v ? void 0 : v.lockCropAreaAt });
  }, [k.lockCropAreaAt, v]), z = w.lockCropAreaAt, A = k.ratio || w.ratio, B = A === CUSTOM_CROP, C = A === ELLIPSE_CROP, D = function a2() {
    return A === ORIGINAL_CROP ? f.width / f.height : A;
  }, E = function d2(a2, b2) {
    var e2 = a2.width, f2 = a2.height, g2 = a2.x, h2 = a2.y, i2 = { x: g2, y: h2, width: e2, height: f2 }, j2 = k.width >= o.width && k.height >= o.height;
    o.width && o.height && (e2 < o.width || f2 < o.height) && j2 && c({ type: SET_FEEDBACK, payload: { feedback: { message: q("cropSizeLowerThanResizedWarning"), status: FEEDBACK_STATUSES.WARNING } } }), c({ type: SET_CROP, payload: _objectSpread77(_objectSpread77(_objectSpread77({}, k), i2), {}, { dismissHistory: b2 }) });
  }, F = function c2(a2, b2) {
    var d2, e2, f2 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : { noScale: true };
    s.current && r.current && s.current.nodes([r.current]);
    var g2 = u.current, h2 = { width: a2, height: b2, x: null !== (d2 = k.x) && void 0 !== d2 ? d2 : 0, y: null !== (e2 = k.y) && void 0 !== e2 ? e2 : 0 };
    E(boundResizing(h2, h2, _objectSpread77(_objectSpread77({}, g2), {}, { abstractX: 0, abstractY: 0 }), !(B || C) && D(), _objectSpread77(_objectSpread77({}, w), f2)), true);
  };
  if ((0, import_react114.useEffect)(function() {
    return e && s.current && r.current && (t.current && t.current.cache(), s.current.nodes([r.current])), function() {
      t.current && t.current.clearCache();
    };
  }, [e, f, g]), (0, import_react114.useEffect)(function() {
    if (g && (u.current = g, "undefined" != typeof g.x && g.width)) {
      var a2, b2;
      F(null !== (a2 = k.width) && void 0 !== a2 ? a2 : g.width, null !== (b2 = k.height) && void 0 !== b2 ? b2 : g.height);
    }
  }, [A, g, w]), !e) return null;
  var G, H = (z || k.noEffect) && [] || (B || C ? void 0 : ["top-left", "bottom-left", "top-right", "bottom-right"]), I = function b2(a2) {
    var c2 = !!(1 < arguments.length && void 0 !== arguments[1]) && arguments[1];
    a2.target && E({ width: a2.target.width() * a2.target.scaleX(), height: a2.target.height() * a2.target.scaleY(), x: a2.target.x(), y: a2.target.y() }, c2);
  };
  if (!k.width && !k.height) {
    var J = 1 > g.scaledBy ? g.scaledBy : 1, K = _objectSpread77(_objectSpread77({}, g), {}, { width: g.width / J, height: g.height / J });
    G = boundResizing(K, _objectSpread77(_objectSpread77({}, K), {}, { x: 0, y: 0 }), _objectSpread77(_objectSpread77({}, K), {}, { abstractX: 0, abstractY: 0 }), !(B || C) && D(), w);
  } else G = k;
  var L = G, M = L.x, N = void 0 === M ? 0 : M, x = L.y, O = void 0 === x ? 0 : x, y = L.width, P = L.height, Q = { x: N, y: O, ref: r, fill: "#FFFFFF", scaleX: 1, scaleY: 1, globalCompositeOperation: "destination-out", onDragEnd: z ? void 0 : I, onDragMove: z ? void 0 : function b2(a2) {
    var c2 = a2.target;
    c2.setAttrs(boundDragging(c2.attrs, u.current));
  }, onTransformEnd: z ? void 0 : I, draggable: !z };
  return import_react114.default.createElement(import_react114.default.Fragment, null, import_react114.default.createElement(LayersBackground_default, { width: g.width, height: g.height, imageNodeRef: t, bgX: l ? g.width / 2 : 0, bgY: m ? g.height / 2 : 0, customFilters: [import_konva15.default.Filters.Blur, import_konva15.default.Filters.Brighten], customFinetuneProps: { blurRadius: 10, brightness: -0.15 } }), C ? import_react114.default.createElement(Ellipse, _extends({}, Q, { radiusX: y / 2, radiusY: P / 2, offset: { x: -y / 2, y: -P / 2 } })) : import_react114.default.createElement(Rect, _extends({}, Q, { width: k.noEffect ? 0 : y, height: k.noEffect ? 0 : P })), k.noEffect && import_react114.default.createElement(TextNode_default, { name: "Text", id: "no-preview-text-node", text: q("cropItemNoEffect"), x: g.width / 2 - noEffectTextDimensions.width / 2, y: g.height / 2 - noEffectTextDimensions.height / 2, fontSize: 20, fill: "#ffffff", stroke: "#ff0000", strokeWidth: 0.2, shadowColor: "#ff0000", shadowBlur: 10, annotationEvents: {}, align: "center", width: noEffectTextDimensions.width, height: noEffectTextDimensions.height }), import_react114.default.createElement(Transformer, _extends({ centeredScaling: false, flipEnabled: false, rotateEnabled: false, nodes: r.current ? [r.current] : [], anchorSize: 14, anchorCornerRadius: 7, enabledAnchors: H, ignoreStroke: false, anchorStroke: d.palette["accent-primary"], anchorFill: d.palette["access-primary"], anchorStrokeWidth: 2, borderStroke: d.palette["accent-primary"], borderStrokeWidth: 2, borderDash: [4], keepRatio: !B || !C, ref: s, boundBoxFunc: function c2(a2, b2) {
    return boundResizing(a2, b2, u.current, !(B || C) && D(), w);
  } }, a)));
};
var CropTransformer_default = CropTransformer;

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/NodesTransformer.js
init_react_shim();
init_extends();
var import_react116 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/NodeControls/index.js
init_react_shim();
var import_react115 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/NodeControls/NodeControls.styled.js
init_react_shim();
var StyledNodeControls = it.div.withConfig({ componentId: "sc-1tst9ex-0" })(function(a) {
  var b = a.theme;
  return "\n  position: absolute;\n  z-index: 1;\n  background: ".concat(b.palette["bg-secondary"], ";\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0px 1px 2px ").concat(b.palette["light-shadow"], ";\n  transform: translate(-5%, -110%);\n  transform-origin: center;\n  height: 32px;\n");
});

// node_modules/react-filerobot-image-editor/lib/components/NodeControls/index.js
function ownKeys78(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread78(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys78(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys78(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var NodeControls = function(a) {
  var b = a.onClickAnnotationDelete, c = useStore_default(), d = c.selectionsIds, e = void 0 === d ? [] : d, f = c.dispatch, g = c.config, h = e.length;
  if (0 === h) return null;
  var i = function() {
    f({ type: REMOVE_ANNOTATIONS, payload: { annotationsIds: e } });
  };
  return import_react115.default.createElement(Html, { transformFunc: function(a2) {
    return _objectSpread78(_objectSpread78({}, a2), {}, { scaleX: 1, scaleY: 1, rotation: 0 });
  } }, import_react115.default.createElement(StyledNodeControls, { className: "FIE_annotation-controls-overlay" }, e[0] !== WATERMARK_ANNOTATION_ID && import_react115.default.createElement(icon_button_component_default, { color: "basic", size: "sm", onClick: function() {
    f({ type: DUPLICATE_ANNOTATIONS, payload: { annotationsIds: e, onAnnotationAdd: g.onAnnotationAdd } });
  } }, import_react115.default.createElement(copy_outline_default, null)), import_react115.default.createElement(icon_button_component_default, { color: "basic", size: "sm", onClick: isFunction_default(b) ? function() {
    return b(i);
  } : i }, import_react115.default.createElement(delete_outline_default, null))));
};
var NodeControls_default = NodeControls;

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/NodesTransformer.js
var isUnMounted = false;
var NodesTransformer = function(a) {
  var b, c = useStore_default(), d = c.selectionsIds, e = void 0 === d ? [] : d, f = c.theme, g = c.designLayer, h = c.dispatch, i = c.config.useCloudimage, j = useEditableTextId_default(), k = (0, import_react116.useState)([]), l = _slicedToArray(k, 2), m = l[0], n = l[1], o = debounce_default(function() {
    if (!isUnMounted) {
      var a2 = null !== g && void 0 !== g && g.findOne && 0 < e.length ? e.map(function(a3) {
        return g.findOne("#".concat(a3));
      }).filter(Boolean) : [];
      n(a2);
    }
  }, 5), p = function() {
    1 === m.length && m[0].name() === TOOLS_IDS.TEXT && (emitCustomEvent_default(EVENTS.TEXT_CONTENT_EDIT_STARTING, { annotationId: m[0].id() }), h({ type: ENABLE_TEXT_CONTENT_EDIT, payload: { textIdOfEditableContent: m[0].id() } }));
  };
  (0, import_react116.useEffect)(function() {
    return isUnMounted = false, function() {
      isUnMounted = true;
    };
  }, []), (0, import_react116.useEffect)(function() {
    isUnMounted || o();
  }, [e]);
  var q = m.filter(function() {
    var a2 = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b2 = a2.attrs, c2 = void 0 === b2 ? {} : b2, d2 = c2.name;
    return d2 === TOOLS_IDS.TEXT;
  }), r = i ? ["top-left", "bottom-left", "top-right", "bottom-right"] : function(a2) {
    if (a2[0]) {
      var b2 = a2.some(function(a3) {
        var b3 = a3.attrs.autoWidth;
        return b3;
      }), c2 = a2.some(function(a3) {
        var b3 = a3.attrs.autoHeight;
        return b3;
      });
      return b2 || c2 ? [].concat(_toConsumableArray(b2 ? [] : ["middle-right", "middle-left"]), _toConsumableArray(c2 ? [] : ["top-center", "bottom-center"])) : void 0;
    }
  }(q);
  return j ? null : import_react116.default.createElement(Transformer, _extends({ id: NODES_TRANSFORMER_ID, centeredScaling: false, rotationSnaps: [0, 45, 90, 135, 180, 225, 270, 315], nodes: m, rotateAnchorOffset: 50, anchorSize: 14, anchorCornerRadius: 7, padding: 1 === m.length ? null !== (b = m[0].attrs.padding) && void 0 !== b ? b : 1 : 1, ignoreStroke: false, anchorStroke: f.palette["accent-primary"], anchorFill: f.palette["access-primary"], anchorStrokeWidth: 2, borderStroke: f.palette["accent-primary"], borderStrokeWidth: 2, borderDash: [4], rotateEnabled: !i, onMouseOver: function() {
    h({ type: CHANGE_POINTER_ICON, payload: { pointerCssIcon: POINTER_ICONS.MOVE } });
  }, onMouseLeave: function() {
    h({ type: CHANGE_POINTER_ICON, payload: { pointerCssIcon: POINTER_ICONS.DRAW } });
  }, onDblClick: p, onDblTap: p, enabledAnchors: r, flipEnabled: !i && !q[0], shouldOverdrawWholeArea: true, "data-testid": "FIE-nodes-transformer" }, a), import_react116.default.createElement(NodeControls_default, a));
};
var NodesTransformer_default = NodesTransformer;

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/TransformersLayerWrapper.js
init_react_shim();
var import_react117 = __toESM(require_react());
var TransformersLayerWrapper = function(a) {
  var b = a.children, c = useStore_default(), d = c.shownImageDimensions;
  return import_react117.default.createElement(Layer, { id: TRANSFORMERS_LAYER_ID, x: d.abstractX || 0, y: d.abstractY || 0 }, b);
};
var TransformersLayerWrapper_default = TransformersLayerWrapper;

// node_modules/react-filerobot-image-editor/lib/components/Layers/TransformersLayer/index.js
var TransformersLayer = function(a) {
  var b = a.onClickAnnotationDelete, c = useStore_default(), d = c.toolId;
  return import_react118.default.createElement(TransformersLayerWrapper_default, null, import_react118.default.createElement(NodesTransformer_default, { onClickAnnotationDelete: b }), d === TOOLS_IDS.CROP && import_react118.default.createElement(CropTransformer_default, null));
};
var TransformersLayer_default = TransformersLayer;

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/MainCanvasWrapper.js
init_react_shim();
init_extends();
var import_react121 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/FeedbackPopup/index.js
init_react_shim();
var import_react119 = __toESM(require_react());
var defaultAnchorOrigin = { horizontal: "center", vertical: "bottom" };
var ERROR_TO_ROBOT_STATUS = _defineProperty(_defineProperty({}, FEEDBACK_STATUSES.ERROR, "error"), FEEDBACK_STATUSES.WARNING, "warning");
var FeedbackPopup = function(a) {
  var b, c = a.anchorOrigin, d = void 0 === c ? defaultAnchorOrigin : c, e = useStore_default(), f = e.feedback, g = void 0 === f ? {} : f, h = e.dispatch;
  if (!g.message) return null;
  return import_react119.default.createElement(popup_component_default, { className: "FIE_feedback-robot", "data-testid": "FIE-feedback-popup", anchorOrigin: d, autoHideDuration: null !== (b = g.duration) && void 0 !== b ? b : 5e3, message: g.message, open: !!g.message, status: ERROR_TO_ROBOT_STATUS[g.status || FEEDBACK_STATUSES.ERROR], onClose: function() {
    h({ type: SET_FEEDBACK, payload: { feedback: {} } });
  } });
};
var FeedbackPopup_default = FeedbackPopup;

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/CanvasNode.js
init_react_shim();
var import_react120 = __toESM(require_react());
var import_konva16 = __toESM(require_lib());

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/touchZoomingEvents.js
init_react_shim();
function ownKeys79(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread79(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys79(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys79(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
function getDistance(a, b) {
  return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));
}
function getCenter(a, b) {
  return { x: (a.x + b.x) / 2, y: (a.y + b.y) / 2 };
}
var lastCenter = null;
var lastDist = 0;
var zoomOnTouchesMove = function(a, b) {
  a.evt.preventDefault();
  var c = a.evt.touches[0], d = a.evt.touches[1];
  if (c && d) {
    var e = a.currentTarget;
    e.isDragging() && e.stopDrag();
    var f = { x: c.clientX, y: c.clientY }, g = { x: d.clientX, y: d.clientY };
    if (!lastCenter) return void (lastCenter = getCenter(f, g));
    var h = getCenter(f, g), i = getDistance(f, g);
    lastDist || (lastDist = i);
    var j = e.attrs.zoomFactor || DEFAULT_ZOOM_FACTOR, k = { x: (h.x - e.x()) / j, y: (h.y - e.y()) / j }, l = (j || DEFAULT_ZOOM_FACTOR) * (i / lastDist), m = h.x - lastCenter.x, n = h.y - lastCenter.y, o = { x: h.x - k.x * l + m, y: h.y - k.y * l + n };
    lastDist = i, lastCenter = h, b(_objectSpread79(_objectSpread79({}, o), {}, { factor: l, preparedDimensions: true }));
  }
};
var endTouchesZooming = function(a) {
  lastDist = 0, lastCenter = null, "function" == typeof a && a();
};

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/MainCanvas.styled.js
init_react_shim();
var CanvasContainer = it.div.withConfig({ componentId: "sc-3ln9py-0" })(["width:100%;position:relative;overflow:hidden;min-height:250px;height:100%;"]);
var StyledOriginalImage = it.img.withConfig({ componentId: "sc-3ln9py-1" })(["max-width:98%;max-height:98%;box-shadow:0 0 0 5px rgba(0,0,0,0.1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;"]);
var StyledCanvasNode = it(Stage).withConfig({ componentId: "sc-3ln9py-2" })(["outline:none;background:", ";position:relative;"], function(a) {
  var b = a.theme;
  return b.palette["bg-primary"];
});

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/MainCanvas.utils.js
init_react_shim();
var getCursorStyle = function() {
  var a = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : {}, b = a.tabId, c = a.toolId, d = a.pointerCssIcon;
  return c === TOOLS_IDS.OBJECT_REMOVAL ? "none" : d === POINTER_ICONS.DEFAULT && (b === TABS_IDS.ANNOTATE || isDrawTool_default(c)) ? POINTER_ICONS.DRAW : d;
};

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/CanvasNode.js
function ownKeys80(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread80(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys80(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys80(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var ZOOM_DELTA_TO_SCALE_CONVERT_FACTOR = 6e-3;
var CanvasNode = function(a) {
  var b = a.children;
  useStrictMode(true);
  var c = (0, import_react120.useRef)(), d = useStore_default(), f = d.dispatch, g = d.pointerCssIcon, h = d.tabId, i = d.toolId, j = d.canvasWidth, k = d.canvasHeight, l = d.canvasScale, m = d.selectionsIds, n = void 0 === m ? [] : m, o = d.zoom, p = void 0 === o ? {} : o, q = d.config, r = q.previewPixelRatio, s = q.disableZooming, t = useEditableTextId_default();
  import_konva16.default.pixelRatio = r;
  var u = DEFAULT_ZOOM_FACTOR, v = !s && i !== TOOLS_IDS.CROP, w = (0, import_react120.useState)(function() {
    return (h !== TABS_IDS.ANNOTATE && h !== TABS_IDS.WATERMARK || !isDrawTool_default(i)) && p.factor > u;
  }), x = _slicedToArray(w, 2), y = x[0], z = x[1], A = (0, import_react120.useMemo)(function() {
    return { cursor: getCursorStyle({ tabId: h, toolId: i, pointerCssIcon: g }) };
  }, [h, i, g]), B = function(a2) {
    f({ type: ZOOM_CANVAS, payload: a2 });
  }, C = (0, import_react120.useCallback)(function(a2) {
    var b2, c2;
    a2.evt.preventDefault(), null === (b2 = (c2 = a2.currentTarget).container) || void 0 === b2 || b2.call(c2).focus(), a2.target instanceof import_konva16.default.Stage && 0 < n.length && f({ type: CLEAR_ANNOTATIONS_SELECTIONS });
  }, [n]), D = function() {
    return z(h !== TABS_IDS.ANNOTATE && !isDrawTool_default(i) || h === TABS_IDS.WATERMARK);
  }, E = function(a2) {
    !a2.target.isContentEditable && (" " === a2.key || "Control" === a2.key || "Meta" === a2.key) && !a2.repeat && p.factor > u && v && (a2.preventDefault(), z(true), f({ type: CHANGE_POINTER_ICON, payload: { pointerCssIcon: POINTER_ICONS.DRAG } }));
  }, F = function(a2) {
    (" " === a2.key || "Control" === a2.key) && (a2.preventDefault(), D());
  }, G = function() {
    c.current && !t && c.current.container().focus();
  };
  (0, import_react120.useEffect)(function() {
    z(h !== TABS_IDS.ANNOTATE && h !== TABS_IDS.WATERMARK && !isDrawTool_default(i) && p.factor > u);
    var a2;
    return c.current && (a2 = c.current.container(), a2.addEventListener("mouseenter", G), a2.addEventListener("keydown", E), a2.addEventListener("keyup", F)), function() {
      a2 && (a2.removeEventListener("mouseenter", G), a2.removeEventListener("keydown", E), a2.removeEventListener("keyup", F));
    };
  }, [h, i, p.factor, u, t]), (0, import_react120.useEffect)(function() {
    f({ type: CHANGE_POINTER_ICON, payload: { pointerCssIcon: POINTER_ICONS[y ? "DRAG" : "DEFAULT"] } });
  }, [y]);
  var H = l * (v && p.factor || u);
  return import_react120.default.createElement(StyledCanvasNode, { className: "FIE_canvas-node", tabIndex: -1, ref: c, width: j, height: k, scaleX: H, scaleY: H, x: v && p.x || null, y: v && p.y || null, zoomFactor: v && p.factor || u, onWheel: v ? function(a2) {
    a2.evt.preventDefault();
    var b2 = (p.factor || u) + a2.evt.deltaY * -ZOOM_DELTA_TO_SCALE_CONVERT_FACTOR, c2 = a2.currentTarget.getPointerPosition();
    B(_objectSpread80(_objectSpread80({}, c2), {}, { factor: b2 }));
  } : void 0, onTap: C, onClick: C, onTouchMove: v ? function(a2) {
    return zoomOnTouchesMove(a2, B);
  } : void 0, onDragStart: function(a2) {
    var b2;
    1 < (null === (b2 = a2.evt.touches) || void 0 === b2 ? void 0 : b2.length) && z(false);
  }, onTouchEnd: v ? function() {
    endTouchesZooming(D);
  } : void 0, dragBoundFunc: function(a2) {
    var b2 = Math.min(0, Math.max(a2.x, j * (1 - p.factor))), c2 = Math.min(0, Math.max(a2.y, k * (1 - p.factor)));
    return { x: b2, y: c2 };
  }, draggable: v && y, onDragEnd: function(a2) {
    a2.currentTarget.draggable() && "stage" === a2.target.nodeType.toLowerCase() && v && y && B({ factor: p.factor, x: a2.target.x(), y: a2.target.y(), preparedDimensions: true });
  }, style: A }, b);
};
var CanvasNode_default = (0, import_react120.memo)(CanvasNode);

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/MainCanvasWrapper.js
var _excluded29 = ["onPluginRootResize", "pluginRootRef", "source", "previewBgColor", "previewBgImage", "resetOnSourceChange", "children"];
function ownKeys81(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread81(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys81(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys81(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var MainCanvasWrapper = function(a) {
  var b = a.onPluginRootResize, c = a.pluginRootRef, d = a.source, e = a.previewBgColor, f = a.previewBgImage, g = a.resetOnSourceChange, h = a.children, i = _objectWithoutProperties(a, _excluded29), j = useResizeObserver_default(), k = _slicedToArray(j, 2), l = k[0], m = k[1], n = useStore_default(), o = (0, import_react121.useRef)(null);
  useLoadMainSource_default({ sourceToLoad: d, resetOnSourceChange: g, onPluginRootResize: b, pluginRootRef: c });
  var p = (0, import_react121.useMemo)(function() {
    return _objectSpread81(_objectSpread81({}, n), {}, { previewBgColor: e || n.previewBgColor, previewBgImage: f || n.previewBgImage });
  }, [n, e, f]), q = (0, import_react121.useCallback)(function(a2) {
    var b2 = a2.width, c2 = a2.height;
    b2 && c2 && p.dispatch({ type: SET_CANVAS_SIZE, payload: { canvasWidth: b2, canvasHeight: c2 } });
  }, []);
  (0, import_react121.useEffect)(function() {
    return p.originalSource && l(o.current, q), function() {
      o.current && m(o.current);
    };
  }, [p.originalSource]);
  var r = 0 === p.feedback.duration;
  return import_react121.default.createElement(import_react121.default.Fragment, null, import_react121.default.createElement(Spinner_default, { loadingData: p.loadingData, theme: p.theme, t: p.t }), import_react121.default.createElement(CanvasContainer, _extends({ className: "FIE_canvas-container", "data-testid": "FIE-canvas-container", ref: o }, i), !r && !!p.originalSource && function() {
    var a2;
    return import_react121.default.createElement(import_react121.default.Fragment, null, p.isShowOriginalImage && (null === (a2 = p.originalSource) || void 0 === a2 ? void 0 : a2.src) && import_react121.default.createElement(StyledOriginalImage, { className: "FIE_original-image-compare", src: p.originalSource.src }), import_react121.default.createElement(CanvasNode_default, null, import_react121.default.createElement(AppProviderOverriddenValue_default, { overridingValue: p }, h)));
  }()), import_react121.default.createElement(FeedbackPopup_default, null));
};
var MainCanvasWrapper_default = MainCanvasWrapper;

// node_modules/react-filerobot-image-editor/lib/components/MainCanvas/index.js
var _excluded30 = ["onPluginRootResize", "pluginRootRef", "source", "previewBgColor", "previewBgImage", "resetOnSourceChange", "onClickAnnotationDelete"];
var MainCanvas = function(a) {
  var b = a.onPluginRootResize, c = a.pluginRootRef, d = a.source, e = a.previewBgColor, f = a.previewBgImage, g = a.resetOnSourceChange, h = a.onClickAnnotationDelete, i = _objectWithoutProperties(a, _excluded30);
  return import_react122.default.createElement(MainCanvasWrapper_default, _extends({ onPluginRootResize: b, pluginRootRef: c, source: d, previewBgColor: e, previewBgImage: f, resetOnSourceChange: g }, i), import_react122.default.createElement(BaseLayer_default, null), import_react122.default.createElement(DesignLayer_default, null), import_react122.default.createElement(TransformersLayer_default, { onClickAnnotationDelete: h }));
};
var MainCanvas_default = MainCanvas;

// node_modules/react-filerobot-image-editor/lib/components/Topbar/index.js
init_react_shim();
init_extends();
var import_react131 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/buttons/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/buttons/BackButton.js
init_react_shim();
init_extends();
var import_react123 = __toESM(require_react());
var _excluded31 = ["onBack", "backLabel"];
var StyledBackButtonLabel = it.span.withConfig({ componentId: "sc-hj9lra-0" })(["", ";"], function(a) {
  var b = a.theme.typography;
  return b.font[FontVariant.ButtonMdEmphasis];
});
var BackButton = function(a) {
  var b = a.onBack, c = a.backLabel, d = _objectWithoutProperties(a, _excluded31), e = useStore_default(), f = e.t, g = e.config, h = g.onBack, i = g.onClose, j = usePhoneScreen_default(), k = b || h || i;
  return "function" == typeof k ? import_react123.default.createElement(DiscardConfirmationModal_default, { onDiscard: k, discardReason: CLOSING_REASONS.BACK_BUTTON }, import_react123.default.createElement(button_component_default, _extends({ className: "FIE_buttons-back-btn", "data-testid": "FIE-buttons-back-btn", color: "link-secondary", size: "sm", startIcon: import_react123.default.createElement(arrow_left_outline_default, null), onClick: k }, d), !j && import_react123.default.createElement(StyledBackButtonLabel, null, c || f("back")))) : null;
};
var BackButton_default = BackButton;

// node_modules/react-filerobot-image-editor/lib/components/buttons/CloseButton.js
init_react_shim();
init_extends();
var import_react124 = __toESM(require_react());
var _excluded33 = ["onClose", "prefix"];
var StyledCloseButton = it(cross_button_component_default).withConfig({ componentId: "sc-xf55dg-0" })(["padding:8px;z-index:111;"]);
var CloseButton = function(a) {
  var b = a.onClose, c = a.prefix, d = _objectWithoutProperties(a, _excluded33), e = useStore_default(), f = e.config.onClose, g = b || f;
  return "function" == typeof g ? import_react124.default.createElement(import_react124.default.Fragment, null, c, import_react124.default.createElement(DiscardConfirmationModal_default, { onDiscard: g, discardReason: CLOSING_REASONS.CLOSE_BUTTON }, import_react124.default.createElement(StyledCloseButton, _extends({ "data-testid": "FIE-close-button", className: "FIE_buttons-close-btn", color: "basic", size: "md" }, d), import_react124.default.createElement(cross_outline_default, null)))) : null;
};
var CloseButton_default = CloseButton;

// node_modules/react-filerobot-image-editor/lib/components/buttons/ZoomButtons/index.js
init_react_shim();
init_extends();
var import_react125 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/buttons/ZoomButtons/ZoomButtons.styled.js
init_react_shim();
var StyledSmallButton = it(icon_button_component_default).withConfig({ componentId: "sc-961muh-0" })(["padding:8px;svg{color:", ";}"], function(a) {
  var b = a.theme.palette, c = a.showBackButton;
  return c ? b[Color.IconsPrimary] : b[Color.IconsMuted];
});
var StyledZoomPercentageLabel = it(label_component_default).withConfig({ componentId: "sc-961muh-1" })(["cursor:pointer;color:", ";", ";"], function(a) {
  var b = a.theme.palette;
  return b[Color.TextPrimary];
}, function(a) {
  var b = a.theme.typography;
  return b.font[FontVariant.InputMd];
});
var StyledZoomingWrapper = it.div.withConfig({ componentId: "sc-961muh-2" })(["display:flex;align-items:center;gap:2px;"]);

// node_modules/react-filerobot-image-editor/lib/components/buttons/ZoomButtons/ZoomButtons.constants.js
init_react_shim();
var ZOOM_FACTORS_PRESETS = [{ labelKey: "fitSize", factor: "fit" }, { labelKey: "actualSize", factor: 1, label: "100%" }, { label: "25%", factor: 0.25 }, { label: "50%", factor: 0.5 }, { label: "75%", factor: 0.75 }, { label: "125%", factor: 1.25 }, { label: "170%", factor: 1.7 }, { label: "300%", factor: 3 }, { label: "500%", factor: 5 }, { label: "1000%", factor: 10 }];

// node_modules/react-filerobot-image-editor/lib/components/buttons/ZoomButtons/index.js
var _excluded34 = ["showFitCenterButton"];
var ZoomButtons = function(a) {
  var b = a.showFitCenterButton, c = _objectWithoutProperties(a, _excluded34), d = useStore_default(), e = d.t, f = d.config, g = f.useZoomPresetsMenu, h = f.showBackButton, i = f.showFitCenterZoomButton, j = useZoom_default(), k = j.zoomOut, l = j.zoomIn, m = j.applyZoomFactorPreset, n = j.getPreviewedZoomLevelLabel, o = j.isZoomDisabled, p = j.toggleZoomingMenu, q = j.fitCanvas, r = j.zoomingMenuAnchorEl;
  return import_react125.default.createElement(StyledZoomingWrapper, _extends({ className: "FIE_buttons-zoom-btns", "data-testid": "FIE-zoom-buttons-wrapper" }, c), import_react125.default.createElement(StyledSmallButton, { onClick: k, color: "basic", title: e("zoomOutTitle"), disabled: o, showBackButton: h, className: "FIE_buttons-zoom-out-btn", "data-testid": "FIE-zoom-out-button" }, import_react125.default.createElement(Minus, null)), import_react125.default.createElement(StyledZoomPercentageLabel, { title: e("toggleZoomMenuTitle"), onClick: o ? void 0 : g && p || q, "aria-disabled": o, className: "FIE_zoom_buttons-zoom-label", "data-testid": "FIE-zoom-percentage-label" }, n()), import_react125.default.createElement(StyledSmallButton, { onClick: l, color: "basic", title: e("zoomInTitle"), disabled: o, showBackButton: h, className: "FIE_buttons-zoom-in-btn", "data-testid": "FIE-zoom-in-button" }, import_react125.default.createElement(Plus, null)), (!(void 0 !== i) || i) && (!(void 0 !== b) || b) && import_react125.default.createElement(StyledSmallButton, { onClick: function() {
    return m("fit");
  }, color: "basic", title: e("fitTitle"), disabled: o, className: "FIE_buttons-fit-btn", "data-testid": "FIE-fit-button" }, import_react125.default.createElement(PositionCenter, null)), import_react125.default.createElement(menu_component_default, { anchorEl: r, onClose: p, open: !!r, position: "bottom", className: "FIE_buttons-zoom-menu", "data-testid": "FIE-zoom-menu" }, ZOOM_FACTORS_PRESETS.map(function(a2) {
    var b2 = a2.factor, c2 = a2.labelKey, d2 = a2.label;
    return import_react125.default.createElement(menu_item_component_default, { key: d2 || c2, onClick: function() {
      return m(b2, d2);
    }, "data-testid": "FIE-zoom-menu-item" }, import_react125.default.createElement(menu_item_label_component_default, null, c2 ? e(c2) : d2));
  })));
};
var ZoomButtons_default = ZoomButtons;

// node_modules/react-filerobot-image-editor/lib/components/buttons/SaveButton/index.js
init_react_shim();
init_extends();
var import_react126 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/utils/getDefaultSaveQuality.js
init_react_shim();
var getDefaultSaveQuality = function(a) {
  return 0 >= a || 1 < a ? DEFAULT_SAVE_QUALITY : a;
};
var getDefaultSaveQuality_default = getDefaultSaveQuality;

// node_modules/react-filerobot-image-editor/lib/components/buttons/SaveButton/SaveButton.styled.js
init_react_shim();
var StyledFileNameInput = it(input_group_component_default).withConfig({ componentId: "sc-vaany4-0" })([""]);
var StyledFileExtensionSelect = it(select_group_component_default).withConfig({ componentId: "sc-vaany4-1" })(["margin-top:16px;"]);
var StyledQualityWrapper = it.div.withConfig({ componentId: "sc-vaany4-2" })(["width:100%;margin-top:16px;"]);
var StyledResizeOnSave = it.div.withConfig({ componentId: "sc-vaany4-3" })(["margin-top:16px;width:100%;"]);
var StyledResizeOnSaveLabel = it(label_component_default).withConfig({ componentId: "sc-vaany4-4" })(["margin-bottom:4px;"]);

// node_modules/react-filerobot-image-editor/lib/components/buttons/SaveButton/index.js
var _excluded35 = ["onSave", "defaultName", "saveLabel", "modalProps"];
function ownKeys82(a, b) {
  var c = Object.keys(a);
  if (Object.getOwnPropertySymbols) {
    var d = Object.getOwnPropertySymbols(a);
    b && (d = d.filter(function(b2) {
      return Object.getOwnPropertyDescriptor(a, b2).enumerable;
    })), c.push.apply(c, d);
  }
  return c;
}
function _objectSpread82(a) {
  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys82(Object(b), true).forEach(function(c2) {
    _defineProperty(a, c2, b[c2]);
  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys82(Object(b)).forEach(function(c2) {
    Object.defineProperty(a, c2, Object.getOwnPropertyDescriptor(b, c2));
  });
  return a;
}
var sliderStyle6 = { marginBottom: 16 };
var saveButtonWrapperStyle = { minWidth: 67, width: "fit-content" };
var saveButtonMenuStyle = { marginLeft: 12 };
var isFieSaveMounted = true;
var SaveButton = function(a) {
  var b = a.onSave, c = a.defaultName, d = a.saveLabel, e = a.modalProps, f = void 0 === e ? {} : e, g = _objectWithoutProperties(a, _excluded35), h = useStore_default(), i = (0, import_react126.useRef)(), j = h.theme, k = h.dispatch, l = h.originalSource, m = h.resize, n = h.loadingData, o = void 0 === n ? {} : n, p = o.isLoadingGlobally, q = h.haveNotSavedChanges, r = h.feedback, s = h.hasUndo, u = h.t, t = h.adjustments, v = void 0 === t ? {} : t, w = v.crop, x = h.config, y = x.onClose, z = x.closeAfterSave, A = x.onBeforeSave, B = x.onSave, C = x.forceToPngInEllipticalCrop, D = x.defaultSavedImageName, E = x.defaultSavedImageType, F = x.defaultSavedImageQuality, G = void 0 === F ? DEFAULT_SAVE_QUALITY : F, H = x.useCloudimage, I = x.moreSaveOptions, J = x.disableSaveIfNoChanges, K = x.removeSaveButton, L = (0, import_react126.useState)(false), M = _slicedToArray(L, 2), N = M[0], O = M[1], P = (0, import_react126.useState)({ quality: getDefaultSaveQuality_default(G) }), Q = _slicedToArray(P, 2), R = Q[0], S = Q[1], T = useTransformedImgData_default(), U = ["jpeg", "jpg", "webp"].includes(R.extension), V = 0 === r.duration, W = function a2() {
    var c2 = T(R, false, true), d2 = i.current || b || B, e2 = d2(c2.imageData, c2.designState), f2 = function a3() {
      k({ type: SET_SAVING, payload: { isSaving: false } });
    };
    e2 instanceof Promise ? e2["finally"](f2) : f2(), i.current = null, z && y && y(CLOSING_REASONS.AFTER_SAVE, q);
  }, X = function a2() {
    k({ type: SET_SAVING, payload: { isSaving: true } }), O(false), setTimeout(W, 3);
  }, Y = function a2() {
    var c2 = i.current || b || B;
    return "function" == typeof c2 ? R.name && R.extension ? void X() : void k({ type: SET_FEEDBACK, payload: { feedback: { message: u("nameIsRequired") } } }) : void console.error("Please provide onSave function handler.");
  }, Z = function a2() {
    if (!J || s) {
      if (H) {
        var c2 = T(R), d2 = i.current || b || B;
        return void d2(c2.imageData, c2.designState);
      }
      return i.current || "function" != typeof A || false !== A(R) ? void O(true) : void Y();
    }
  }, $ = function c2(a2, b2) {
    "function" == typeof a2 ? (i.current = a2, b2()) : console.error("onSave function callback is required as an argument to the passed function.");
  }, _ = function a2() {
    var b2 = getFileFullName_default(D || l.name || c, C && w.ratio === ELLIPSE_CROP ? "png" : SUPPORTED_IMAGE_TYPES.includes(null === E || void 0 === E ? void 0 : E.toLowerCase()) && E), d2 = b2.name, e2 = b2.extension;
    S(_objectSpread82(_objectSpread82({}, R), {}, { name: d2, extension: e2 }));
  };
  if ((0, import_react126.useEffect)(function() {
    l && _();
  }, [l]), (0, import_react126.useEffect)(function() {
    !l || R.name && R.extension || _();
  }, [N]), (0, import_react126.useEffect)(function() {
    S(_objectSpread82(_objectSpread82({}, R), {}, { size: { width: m.width, height: m.height } }));
  }, [m]), (0, import_react126.useEffect)(function() {
    return isFieSaveMounted = true, function() {
      isFieSaveMounted = false;
    };
  }, []), K) return null;
  var aa = Array.isArray(I) && 0 < I.length ? I.map(function(a2, b2) {
    return _objectSpread82(_objectSpread82({}, a2), {}, { key: "".concat(a2.label || b2, "-option-key"), onClick: "function" == typeof a2.onClick ? function() {
      return a2.onClick(function(a3) {
        return $(a3, Z);
      }, function(a3) {
        return $(a3, X);
      });
    } : void 0 });
  }) : [];
  return import_react126.default.createElement(import_react126.default.Fragment, null, import_react126.default.createElement(ButtonWithMenu_default, _extends({ "data-testid": "FIE-save-button", className: "FIE_buttons-save-btn", color: "primary", onClick: Z, menuPosition: "bottom", menuFromBtn: true, label: d || u("save"), menuItems: aa, menuStyle: saveButtonMenuStyle, wrapperStyle: saveButtonWrapperStyle, disabled: p || J && !s || V, noMargin: true }, g)), N && import_react126.default.createElement(Modal_default, _extends({ className: "FIE_save-modal", title: u("saveAsModalTitle"), Icon: function b2(a2) {
    return import_react126.default.createElement(Image22, _extends({ color: j.palette["accent-primary"] }, a2));
  }, isOpened: N, onCancel: function a2() {
    isFieSaveMounted && N && (i.current = null, O(false));
  }, onDone: Y, doneLabel: u("save"), cancelLabel: u("cancel"), doneButtonColor: "primary", areButtonsDisabled: p, zIndex: 11110 }, f), import_react126.default.createElement(StyledFileNameInput, { "data-testid": "FIE-save-filename-input", className: "FIE_save-file-name-input", value: R.name, onChange: function b2(a2) {
    var c2 = a2.target.value;
    S(_objectSpread82(_objectSpread82({}, R), {}, { name: c2 }));
  }, size: "sm", label: u("name"), placeholder: u("imageName"), error: !R.name, fullWidth: true, focusOnMount: true }), import_react126.default.createElement(StyledFileExtensionSelect, { "data-testid": "FIE-save-extension-select", className: "FIE_save-extension-selector", onChange: function b2(a2) {
    return S(_objectSpread82(_objectSpread82({}, R), {}, { extension: a2 }));
  }, value: R.extension, label: u("format"), placeholder: u("extension"), size: "sm", fullWidth: true }, SUPPORTED_IMAGE_TYPES.map(function(a2) {
    return import_react126.default.createElement(menu_item_component_default, { key: a2, value: a2 }, a2);
  })), U && import_react126.default.createElement(StyledQualityWrapper, { "data-testid": "FIE-save-quality-wrapper", className: "FIE_save-quality-wrapper" }, import_react126.default.createElement(label_component_default, null, u("quality")), import_react126.default.createElement(Slider_default, { "data-testid": "FIE-save-quality-slider", annotation: "%", min: 1, max: 100, onChange: function b2(a2) {
    S(_objectSpread82(_objectSpread82({}, R), {}, { quality: restrictNumber_default(a2 / 100, 0.01, 1) }));
  }, value: parseInt(100 * R.quality, 10), width: "100%", style: sliderStyle6 })), import_react126.default.createElement(StyledResizeOnSave, { "data-testid": "FIE-save-resize-wrapper", className: "FIE_save-resize-wrapper" }, import_react126.default.createElement(StyledResizeOnSaveLabel, null, u("resize")), import_react126.default.createElement(Resize_default, { onChange: function b2(a2) {
    S(_objectSpread82(_objectSpread82({}, R), {}, { size: _objectSpread82(_objectSpread82({}, R.size), a2) }));
  }, currentSize: (null === R || void 0 === R ? void 0 : R.size) || {}, hideResetButton: true, alignLeft: true, alignment: "space-between" }))));
};
var SaveButton_default = SaveButton;

// node_modules/react-filerobot-image-editor/lib/components/buttons/HistoryButtons/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/buttons/HistoryButtons/HistoryButtons.js
init_react_shim();
init_extends();
var import_react128 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/buttons/HistoryButtons/HistoryButtons.styled.js
init_react_shim();
var StyledHistoryButtons = it.div.withConfig({ componentId: "sc-18xmeij-0" })(["display:flex;gap:6px;"]);
var StyledHistoryButton = it(icon_button_component_default).withConfig({ componentId: "sc-18xmeij-1" })(["margin:", ";svg{color:", ";}"], function(a) {
  var b = a.margin;
  return null !== b && void 0 !== b ? b : "0 4px";
}, function(a) {
  var b = a.theme.palette, c = a.disabled;
  return c ? b[Color.BordersDisabled] : b[Color.IconsPrimary];
});

// node_modules/react-filerobot-image-editor/lib/components/buttons/HistoryButtons/RedoButton.js
init_react_shim();
init_extends();
var RedoButton = function(a) {
  var b = useStore_default(), c = b.t, d = useManageHistoryState_default(), e = d.redo, f = d.hasRedo;
  return React.createElement(StyledHistoryButton, _extends({ className: "FIE_buttons-redo-btn", "data-testid": "FIE-redo-button", color: "basic", size: "sm", onClick: f ? e : void 0, disabled: !f, title: c("redoTitle") }, a), React.createElement(redo_default, null));
};
var RedoButton_default = RedoButton;

// node_modules/react-filerobot-image-editor/lib/components/buttons/HistoryButtons/ResetButton.js
init_react_shim();
init_extends();
var import_react127 = __toESM(require_react());
var ResetButton = function(a) {
  var b = useStore_default(), c = b.isResetted, d = b.feedback, e = b.t, f = 0 === d.duration;
  return import_react127.default.createElement(ResetConfirmationModal_default, null, import_react127.default.createElement(StyledHistoryButton, _extends({ className: "FIE_buttons-reset-btn", "data-testid": "FIE-reset-button", color: "basic", size: "sm", disabled: !(void 0 !== c) || c || f, title: e("resetOperations") }, a), import_react127.default.createElement(reset_default, null)));
};
var ResetButton_default = ResetButton;

// node_modules/react-filerobot-image-editor/lib/components/buttons/HistoryButtons/UndoButton.js
init_react_shim();
init_extends();
var UndoButton = function(a) {
  var b = useStore_default(), c = b.t, d = b.feedback, e = useManageHistoryState_default(), f = e.hasUndo, g = e.undo, h = 0 === d.duration;
  return React.createElement(StyledHistoryButton, _extends({ className: "FIE_buttons-undo-btn", "data-testid": "FIE-undo-button", color: "basic", size: "sm", onClick: f ? g : void 0, disabled: !f || h, title: c("undoTitle") }, a), React.createElement(undo_default, null));
};
var UndoButton_default = UndoButton;

// node_modules/react-filerobot-image-editor/lib/components/buttons/HistoryButtons/HistoryButtons.js
var HistoryButtons = function(a) {
  return import_react128.default.createElement(StyledHistoryButtons, _extends({ className: "FIE_buttons-history-btns", "data-testid": "FIE-history-buttons" }, a), import_react128.default.createElement(ResetButton_default, null), import_react128.default.createElement(UndoButton_default, null), import_react128.default.createElement(RedoButton_default, null));
};
var HistoryButtons_default = HistoryButtons;

// node_modules/react-filerobot-image-editor/lib/components/Topbar/ImageDimensionsAndDisplayToggle.js
init_react_shim();
var import_react130 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/ImageInfo/index.js
init_react_shim();
init_extends();
var import_react129 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/ImageInfo/ImageInfo.styled.js
init_react_shim();
var StyledSmallButton2 = it(icon_button_component_default).withConfig({ componentId: "sc-1qx8w0v-0" })(["padding:8px;svg{color:", ";}"], function(a) {
  var b = a.theme.palette, c = a.showBackButton;
  return c ? b[Color.IconsPrimary] : b[Color.IconsMuted];
});
var StyledImageOptionsButtons = it.div.withConfig({ componentId: "sc-1qx8w0v-1" })(["display:flex;gap:12px;justify-content:", ";"], function(a) {
  var b = a.isPhoneScreen;
  return b ? "space-between" : "center";
});
var StyledDimensionsLabel = it(label_component_default).withConfig({ componentId: "sc-1qx8w0v-2" })(["flex-shrink:0;color:", ";", ";"], function(a) {
  var b = a.theme.palette;
  return b[Color.TextPlaceholder];
}, function(a) {
  var b = a.theme.typography;
  return b.font[FontVariant.LabelMedium];
});
var StyledDimensionsButtons = it.div.withConfig({ componentId: "sc-1qx8w0v-3" })(["display:flex;gap:12px;align-items:center;"]);

// node_modules/react-filerobot-image-editor/lib/components/ImageInfo/index.js
var _excluded36 = ["children", "showCompareButton"];
var ImageInfo = function(a) {
  var b = a.children, c = a.showCompareButton, d = _objectWithoutProperties(a, _excluded36), e = usePhoneScreen_default(), f = useStore_default(), g = f.dispatch, h = f.isResetted, i = !(void 0 !== h) || h, j = f.originalSource, k = f.resize, l = void 0 === k ? {} : k, m = f.adjustments, n = m.crop, o = m.rotation, p = void 0 === o ? 0 : o, q = f.shownImageDimensions, r = f.config.showBackButton, s = f.t, t = function() {
    g({ type: TOGGLE_ORIGINAL_IMAGE_DISPLAY, payload: { isShow: false } }), document.removeEventListener("mouseup", t), document.removeEventListener("mouseleave", t), document.removeEventListener("touchcancel", t), document.removeEventListener("touchend", t);
  }, u = function() {
    g({ type: TOGGLE_ORIGINAL_IMAGE_DISPLAY, payload: { isShow: true } }), document.addEventListener("mouseup", t), document.addEventListener("mouseleave", t), document.addEventListener("touchcancel", t), document.addEventListener("touchend", t);
  }, v = j && getProperDimensions_default(l, n, q, j, p), w = (!(void 0 !== c) || c) && (null === j || void 0 === j ? void 0 : j.src);
  return import_react129.default.createElement(StyledImageOptionsButtons, _extends({ className: "FIE_image_info", "data-testid": "FIE-image-info-wrapper", isPhoneScreen: e }, d), import_react129.default.createElement(StyledDimensionsLabel, { "data-testid": "FIE-image-dimensions-label", title: s("imageDimensionsHoverTitle") }, "".concat((null === v || void 0 === v ? void 0 : v.width) || s("width"), "  ").concat((null === v || void 0 === v ? void 0 : v.height) || s("height"), " ").concat(s("px"))), (b || w) && import_react129.default.createElement(StyledDimensionsButtons, { "data-testid": "FIE-image-dimensions-buttons" }, w && import_react129.default.createElement(StyledSmallButton2, { color: "basic", "data-testid": "FIE-compare-button", onMouseDown: i ? void 0 : u, onTouchStart: i ? void 0 : u, disabled: i, showBackButton: r, title: s("showImageTitle") }, import_react129.default.createElement(compare_default, null)), b));
};
var ImageInfo_default = ImageInfo;

// node_modules/react-filerobot-image-editor/lib/components/Topbar/ImageDimensionsAndDisplayToggle.js
var ImageDimensionsAndDisplayToggle = function() {
  var a = useStore_default(), b = a.config.disableZooming;
  return import_react130.default.createElement(ImageInfo_default, { showCompareButton: true }, !b && import_react130.default.createElement(import_react130.default.Fragment, null, import_react130.default.createElement(Separator_default, null), import_react130.default.createElement(ZoomButtons_default, null)));
};
var ImageDimensionsAndDisplayToggle_default = ImageDimensionsAndDisplayToggle;

// node_modules/react-filerobot-image-editor/lib/components/Topbar/Topbar.styled.js
init_react_shim();
var StyledTopbar = it.div.withConfig({ componentId: "sc-21g986-0" })(["padding:16px;box-sizing:border-box;position:relative;width:100%;display:flex;flex-wrap:wrap;gap:16px;align-items:center;justify-content:space-between;border-bottom:1px solid ", ";[data-phone='true'] &{padding:6px 6px 4px 6px;", "}"], function(a) {
  var b = a.theme.palette;
  return b[Color.BordersSecondary];
}, function(a) {
  var b = a.isPhoneScreen;
  return b && "\n      padding: 12px 12px 0px;\n      gap: 12px;\n    ";
});
var StyledMainButtonsWrapper = it.div.withConfig({ componentId: "sc-21g986-1" })(["display:flex;align-items:center;order:1;"]);
var StyledControlButtonsWrapper = it.div.withConfig({ componentId: "sc-21g986-2" })(["display:flex;align-items:center;order:3;gap:4px;"]);
var StyledFlexCenterAlignedContainer = it.div.withConfig({ componentId: "sc-21g986-3" })(["width:", ";height:32px;display:block;width:100%;order:4;", ";@media (min-width:761px){display:flex;align-items:center;justify-content:center;width:fit-content;order:2;}"], function(a) {
  var b = a.showBackButton;
  return b ? "318px" : "384px";
}, function(a) {
  var b = a.reverseDirection;
  return b ? "flex-direction: row-reverse" : "";
});
var StyledMenuIconButton = it(icon_button_component_default).withConfig({ componentId: "sc-21g986-4" })(["@media (min-width:761px){display:none;}"]);

// node_modules/react-filerobot-image-editor/lib/components/Topbar/index.js
var _excluded37 = ["onMainMenuButtonClick"];
var Topbar = function(a) {
  var b = a.onMainMenuButtonClick, c = _objectWithoutProperties(a, _excluded37), d = useToggleTabsNavbar_default(), e = useStore_default(), f = e.config.showBackButton, g = usePhoneScreen_default(320);
  return import_react131.default.createElement(StyledTopbar, _extends({ "data-testid": "FIE-topbar", className: "FIE_topbar", isPhoneScreen: g }, c), import_react131.default.createElement(StyledMainButtonsWrapper, { "data-testid": "FIE-topbar-main-buttons", className: "FIE_topbar-buttons-wrapper" }, import_react131.default.createElement(StyledMenuIconButton, { "data-testid": "FIE-topbar-menu-button", className: "FIE_topbar-tabs-navbar-toggle_btn", size: g ? "sm" : "lg", color: "basic", onClick: function(a2) {
    "function" == typeof b ? b(a2) : d(true);
  } }, function(a2) {
    return import_react131.default.createElement(Menu, a2);
  }), f ? import_react131.default.createElement(BackButton_default, null) : import_react131.default.createElement(SaveButton_default, null)), import_react131.default.createElement(StyledFlexCenterAlignedContainer, { "data-testid": "FIE-topbar-center-options", className: "FIE_topbar-center-options", showBackButton: f }, import_react131.default.createElement(ImageDimensionsAndDisplayToggle_default, null)), import_react131.default.createElement(StyledControlButtonsWrapper, { "data-testid": "FIE-topbar-control-buttons" }, import_react131.default.createElement(HistoryButtons_default, null), f ? import_react131.default.createElement(SaveButton_default, null) : import_react131.default.createElement(CloseButton_default, { prefix: import_react131.default.createElement(Separator_default, null) })));
};
var Topbar_default = Topbar;

// node_modules/react-filerobot-image-editor/lib/components/ToolsBar/index.js
init_react_shim();
init_extends();
var import_react133 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/ToolsBar/ToolsBarItemOptionsWrapper.js
init_react_shim();
var import_react132 = __toESM(require_react());
var ToolsBarItemOptionsWrapper = function(a) {
  var b = a.children, c = a.isPhoneScreen;
  return import_react132.default.createElement(StyledToolsBarItemOptionsWrapper, { className: "FIE_tool-options-wrapper", "data-testid": "FIE-tool-options-wrapper", hasChildren: !!b, isPhoneScreen: void 0 !== c && c }, b);
};
var ToolsBarItemOptionsWrapper_default = ToolsBarItemOptionsWrapper;

// node_modules/react-filerobot-image-editor/lib/components/ToolsBar/index.js
var _excluded38 = ["toolsIds", "tools", "selectedToolId"];
var style2 = { maxWidth: "100%", width: "100%" };
var ToolsBar = function(a) {
  var b, c = a.toolsIds, d = a.tools, e = a.selectedToolId, f = _objectWithoutProperties(a, _excluded38), g = usePhoneScreen_default(), h = useStore_default(), i = h.t, j = h.dispatch, k = h.tabId, l = h.toolId, m = h.annotations, n = h.selectionsIds, o = void 0 === n ? [] : n, p = h.config, q = p.defaultTabId, r = p.defaultToolId, s = p.useCloudimage, t = p.tabsToolsIds, u = void 0 === t ? TABS_TOOLS : t, v = p.tools, w = void 0 === v ? TOOLS_ITEMS : v, x = k || q, y = e || l || r || (null === (b = u[x]) || void 0 === b ? void 0 : b[0]), z = (0, import_react133.useMemo)(function() {
    return c || u[x] || [];
  }, [c, u, x]), A = d || w, B = (0, import_react133.useCallback)(function(a2) {
    j({ type: SELECT_TOOL, payload: { toolId: a2 } });
  }, []), C = (0, import_react133.useMemo)(function() {
    return z.map(function(a2) {
      var b2 = (null === A || void 0 === A ? void 0 : A[a2]) || {}, c2 = b2.Item, d2 = b2.hideFn;
      return c2 && (!d2 || !d2({ useCloudimage: s })) && ("function" == typeof c2 ? import_react133.default.createElement(c2, { key: a2, selectTool: B, t: i, isSelected: y === a2 }) : c2);
    });
  }, [z, y]), D = (0, import_react133.useMemo)(function() {
    var a2, b2, c2;
    if (!y) return false;
    if (x === TABS_IDS.ANNOTATE) {
      var d2 = o.length;
      if (1 === d2) {
        var e2, f2 = m[o[0]];
        return null === (e2 = A[null === f2 || void 0 === f2 ? void 0 : f2.name]) || void 0 === e2 ? void 0 : e2.ItemOptions;
      }
      if (1 < d2) return null;
    }
    return x && y && z.includes(y) && (!(null !== (a2 = A[l]) && void 0 !== a2 && a2.hideFn) || !(null !== (b2 = A[l]) && void 0 !== b2 && b2.hideFn({ useCloudimage: s }))) && (null === (c2 = A[l]) || void 0 === c2 ? void 0 : c2.ItemOptions);
  }, [A, z, x, y, m, o]);
  return (0, import_react133.useEffect)(function() {
    !l && y && j({ type: SELECT_TOOL, payload: { toolId: y } });
  }, []), import_react133.default.createElement(StyledToolsBar, _extends({ className: "FIE_tools-bar-wrapper", "data-testid": "FIE-tools-bar-wrapper" }, f), import_react133.default.createElement(ToolsBarItemOptionsWrapper_default, { isPhoneScreen: g }, D && import_react133.default.createElement(D, { t: i })), C && import_react133.default.createElement(StyledToolsBarItems, { className: "FIE_tools-bar", "data-testid": "FIE-tools-bar-items", isPhoneScreen: g }, x === TABS_IDS.WATERMARK ? C : import_react133.default.createElement(Carousel_default, { className: "FIE_tools", style: style2 }, C)));
};
var ToolsBar_default = ToolsBar;

// node_modules/react-filerobot-image-editor/lib/components/Tabs/index.js
init_react_shim();

// node_modules/react-filerobot-image-editor/lib/components/Tabs/Tabs.js
init_react_shim();
var import_react136 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabItem.js
init_react_shim();
var import_react134 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Tabs/Tabs.styled.js
init_react_shim();
var StyledTabs = it.div.withConfig({ componentId: "sc-qhd6ow-0" })(["min-width:108px;height:100%;padding:16px;display:flex;flex-direction:column;gap:16px;overflow-y:auto;max-height:100%;box-shadow:6px 8px 12px 0px rgba(146,166,188,0.14);[data-phone='true'] &{display:flex;padding:0;}"]);
var StyledTabItem = it.div.withConfig({ componentId: "sc-qhd6ow-1" })(function(a) {
  var b = a.theme;
  return "\n    width: 72px;\n    min-height: 66px;\n    padding: 4px 2px;\n    border-radius: 4px;\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n    background: ".concat(b.palette[Color.BackgroundStateless], ";\n    align-items: center;\n    justify-content: center;\n\n    [data-phone='true'] & {\n      margin-bottom: 0;\n      height: 50px;\n      border-radius: 0;\n    }\n\n    svg {\n      color: ").concat(b.palette[Color.IconsPrimary], ";\n    }\n\n    &,\n    * {\n      cursor: pointer;\n    }\n\n    &:hover {\n      background: ").concat(b.palette["bg-primary-active"], ";\n    }\n\n    &[aria-selected='true'] {\n      background: ").concat(b.palette["bg-primary-active"], ";\n\n      * {\n        color: ").concat(b.palette["accent-primary-active"], ";\n      }\n    }\n  ");
});
var StyledTabItemLabel = it(label_component_default).withConfig({ componentId: "sc-qhd6ow-2" })(function(a) {
  var b = a.theme;
  return "\n  color: ".concat(b.palette[Color.TextPrimary], ";\n  ").concat(b.typography.font[FontVariant.LabelSmall], ";\n  font-size: 12px;\n  line-height: 14px;\n\n  span {\n    white-space: normal;\n  }\n\n  [data-phone='true'] & {\n    font-size: 10px;\n  }\n");
});

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabItem.js
var TabItem = function(a) {
  var b = a.id, c = a.label, d = a.Icon, e = a.isSelected, f = a.onClick, g = (0, import_react134.useCallback)(function() {
    "function" == typeof f && f(b);
  }, [b]);
  return import_react134.default.createElement(StyledTabItem, { className: "FIE_tab", "aria-selected": void 0 !== e && e, onClick: g, "data-testid": "FIE-tab-".concat(b.toLowerCase()) }, import_react134.default.createElement(d, { size: 24, "data-testid": "FIE-tab-item-icon-".concat(b.toLowerCase()) }), c && import_react134.default.createElement(StyledTabItemLabel, { className: "FIE_tab-label", "data-testid": "FIE-tab-item-label-".concat(b.toLowerCase()) }, c));
};
var TabItem_default = (0, import_react134.memo)(TabItem);

// node_modules/react-filerobot-image-editor/lib/components/Tabs/hooks/useTabs.js
init_react_shim();
var import_react135 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Tabs/Tabs.constants.js
init_react_shim();
var AVAILABLE_TABS = [{ id: TABS_IDS.ADJUST, labelKey: "adjustTab", icon: CropFrame }, { id: TABS_IDS.FINETUNE, labelKey: "finetuneTab", icon: FineTune }, { id: TABS_IDS.FILTERS, labelKey: "filtersTab", icon: ImageFilters, hideFn: function(a) {
  var b = a.useCloudimage;
  return b;
} }, { id: TABS_IDS.WATERMARK, labelKey: "watermarkTab", icon: Watermark }, { id: TABS_IDS.ANNOTATE, labelKey: "annotateTabLabel", icon: Annotate, hideFn: function(a) {
  var b = a.useCloudimage;
  return b;
} }, { id: TABS_IDS.RESIZE, labelKey: "resizeTab", icon: Resize }, { id: TABS_IDS.AI, icon: AiToolsOutline, labelKey: "aiTab", hideFn: function(a) {
  var b = a.useAiTab, c = a.useCloudimage;
  return !b || c;
} }];

// node_modules/react-filerobot-image-editor/lib/components/Tabs/hooks/useTabs.js
var useTabs = function(a) {
  var b = useStore_default(), c = b.config, d = c.tabsIds, e = c.useCloudimage, f = c.useAiTab, g = a || d, h = (0, import_react135.useMemo)(function() {
    var a2 = [];
    return 0 < Object.keys(g).length ? AVAILABLE_TABS.forEach(function(b2) {
      var c2 = g.indexOf(b2.id);
      -1 !== c2 && (a2[c2] = b2);
    }) : a2 = AVAILABLE_TABS, (0 < a2.length ? a2 : AVAILABLE_TABS).filter(function(a3) {
      var b2 = a3.hideFn;
      return !b2 || !b2({ useCloudimage: e, useAiTab: f });
    });
  }, [g]);
  return h;
};
var useTabs_default = useTabs;

// node_modules/react-filerobot-image-editor/lib/components/Tabs/Tabs.js
var Tabs = function(a) {
  var b = a.onTabSelect, c = a.tabsIds, d = a.TabItemWrapper, e = void 0 === d ? import_react136.Fragment : d, f = useToggleTabsNavbar_default(), g = useTabs_default(c), h = useStore_default(), i = h.t, j = h.tabId, k = void 0 === j ? null : j, l = h.dispatch, m = h.config.defaultTabId, n = (0, import_react136.useCallback)(function(a2) {
    l({ type: SELECT_TAB, payload: { tabId: a2 } }), "function" == typeof b ? b(false) : f(false);
  }, [b]);
  if (1 === g.length) return null;
  var o = function(a2) {
    var b2 = a2.id, c2 = a2.labelKey, d2 = a2.icon;
    return import_react136.default.createElement(TabItem_default, { key: b2, id: b2, label: i(c2), Icon: d2, isSelected: (k || m) === b2, onClick: n });
  };
  return g.map(function(a2) {
    return import_react136.default.createElement(e, { key: a2.id }, o(a2));
  });
};
var Tabs_default = Tabs;

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabsResponsive.js
init_react_shim();
var TabsResponsive = function() {
  var a = useTabletScreen_default();
  return a ? React.createElement(TabsDrawer_default, null) : React.createElement(TabsNavbar_default, null);
};
var TabsResponsive_default = TabsResponsive;

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabsNavbar/index.js
init_react_shim();
init_extends();
var import_react137 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabsNavbar/TabsNavbar.styled.js
init_react_shim();
var StyledTabsNavbar = it.div.withConfig({ componentId: "sc-5vqbk1-0" })(["min-width:108px;height:100%;padding:16px;display:flex;flex-direction:column;gap:16px;overflow-y:auto;max-height:100%;box-shadow:6px 8px 12px 0px rgba(146,166,188,0.14);overflow-x:hidden;[data-phone='true'] &{display:flex;padding:0;}"]);

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabsNavbar/index.js
var TabsNavbar = function(a) {
  var b = useTabs_default();
  return 1 === b.length ? null : import_react137.default.createElement(StyledTabsNavbar, _extends({ className: "FIE_tabs_navbar", "data-testid": "FIE-tabs-navbar" }, a), import_react137.default.createElement(Tabs_default, null));
};
var TabsNavbar_default = TabsNavbar;

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabsDrawer/index.js
init_react_shim();
init_extends();
var import_react138 = __toESM(require_react());

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabsDrawer/TabsDrawer.styled.js
init_react_shim();
var StyledTabsDrawer = it(drawer_component_default).withConfig({ componentId: "sc-acv8tm-0" })(["transition:transform 200ms ease-in-out;width:92px;height:100%;padding:12px;.SfxDrawer-list,.SfxDrawer-item{padding:0;}"]);

// node_modules/react-filerobot-image-editor/lib/components/Tabs/TabsDrawer/index.js
var TabsDrawer = function(a) {
  var b = useToggleTabsNavbar_default(), c = useStore_default(), d = c.t, e = c.showTabsNavbar;
  return import_react138.default.createElement(StyledTabsDrawer, _extends({ className: "FIE_tabs-drawer", "data-testid": "FIE-tabs-drawer", open: e, onClose: function() {
    return b(false);
  }, disablePortal: true }, a), import_react138.default.createElement(drawer_header_component_default, { "data-testid": "FIE-tabs-drawer-header" }, import_react138.default.createElement(button_component_default, { "data-testid": "FIE-tabs-drawer-menu-button", color: "link-basic-secondary", startIcon: import_react138.default.createElement(Menu, null), onClick: function() {
    return b(false);
  } }, d("tabsMenu"))), import_react138.default.createElement(drawer_body_component_default, { "data-testid": "FIE-tabs-drawer-body" }, import_react138.default.createElement(drawer_list_component_default, { "data-testid": "FIE-tabs-drawer-list" }, import_react138.default.createElement(Tabs_default, { TabItemWrapper: drawer_item_component_default }))));
};
var TabsDrawer_default = TabsDrawer;

// node_modules/react-filerobot-image-editor/lib/components/App/App.styled.js
init_react_shim();
var StyledAppWrapper = it.div.attrs(function(a) {
  var b, c, d = a.$size, e = void 0 === d ? {} : d;
  return { style: { width: null !== (b = e.width) && void 0 !== b ? b : "100%", height: null !== (c = e.height) && void 0 !== c ? c : "100%" } };
}).withConfig({ componentId: "sc-ugtqr7-0" })(["display:flex;flex-direction:column;align-items:center;height:100%;max-height:100%;width:100%;max-width:100%;overflow:auto;border-radius:8px;position:relative;min-height:250px;background:", ";", ""], function(a) {
  var b = a.theme;
  return b.palette["bg-secondary"];
}, function(a) {
  var b = a.showTabsDrawer;
  return b && "\n      overflow: unset;\n  ";
});
var StyledMainContent = it.div.withConfig({ componentId: "sc-ugtqr7-1" })(["display:flex;align-items:flex-start;width:100%;box-sizing:border-box;height:calc(100% - 95px);flex-grow:1;[data-phone='true'] &{padding:0;}"]);
var StyledCanvasAndTools = it.div.withConfig({ componentId: "sc-ugtqr7-2" })(["height:100%;width:calc(100% - 80px);flex-grow:1;overflow-y:auto;display:flex;flex-direction:column;", ""], function(a) {
  var b = a.showTabsDrawer;
  return b && "\n     overflow-y: unset;\n  ";
});

// node_modules/react-filerobot-image-editor/lib/components/App/index.js
var canvasStyle = { padding: 16, height: "calc(100% - 112px - 16px)", flexGrow: 1 };
var App = function(a) {
  var b = useStore_default(), c = b.config, d = b.feedback, e = c.showCanvasOnly, f = (0, import_react139.useState)({ width: void 0, height: void 0 }), g = _slicedToArray(f, 2), h = g[0], i = g[1], j = usePhoneScreen_default(), k = useTabletScreen_default(), l = (0, import_react139.useRef)(null), m = 0 === d.duration;
  return import_react139.default.createElement(StyledAppWrapper, { className: ROOT_CONTAINER_CLASS_NAME, "data-phone": j, showTabsDrawer: k, ref: l, $size: h, "data-testid": "FIE-root" }, !e && import_react139.default.createElement(import_react139.default.Fragment, null, k && !m && import_react139.default.createElement(TabsDrawer_default, null), import_react139.default.createElement(Topbar_default, null)), import_react139.default.createElement(StyledMainContent, { className: "FIE_main-container" }, !e && !k && !m && import_react139.default.createElement(TabsNavbar_default, null), import_react139.default.createElement(StyledCanvasAndTools, { className: "FIE_editor-content", showTabsDrawer: k }, import_react139.default.createElement(MainCanvas_default, _extends({ onPluginRootResize: i, pluginRootRef: l, style: canvasStyle }, a)), !e && !m && import_react139.default.createElement(ToolsBar_default, null))));
};
var App_default = (0, import_react139.memo)(App);

// node_modules/react-filerobot-image-editor/lib/components/AssemblyPoint/Providers.js
init_react_shim();
var import_react141 = __toESM(require_react());

// node_modules/@scaleflex/ui/theme/index.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/theme-provider/index.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/theme-provider/theme-provider.context.js
init_react_shim();
var import_react140 = __toESM(require_react());
var import_lodash = __toESM(require_lodash());

// node_modules/@scaleflex/ui/theme/roots/index.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/roots/typography/index.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/roots/typography/typography.component.js
init_react_shim();
var Typography = ct(["", ";"], function(_ref) {
  var theme = _ref.theme;
  var baseLineHeight = theme.typography.baseLineHeight;
  return ot(["h1,h2,h3,h4,h5,h6,p,small{line-height:", ";}"], baseLineHeight);
});
var typography_component_default = Typography;

// node_modules/@scaleflex/ui/theme/roots/typography/entity/index.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/roots/typography/entity/default-typography.js
init_react_shim();
function ownKeys83(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function(r2) {
      return Object.getOwnPropertyDescriptor(e, r2).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread83(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys83(Object(t), true).forEach(function(r2) {
      _defineProperty(e, r2, t[r2]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys83(Object(t)).forEach(function(r2) {
      Object.defineProperty(e, r2, Object.getOwnPropertyDescriptor(t, r2));
    });
  }
  return e;
}
var defaultFontValue = {
  fontFamily: '"Roboto"',
  fontStyle: "normal",
  fontWeight: FontWeight.Regular
};
var getLabelFontVariants = function getLabelFontVariants2() {
  var _ref;
  var fontOverride = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return _ref = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref, FontVariant.LabelExtraSmall, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "10px",
    lineHeight: "12px"
  }, fontOverride)), FontVariant.LabelExtraSmallEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: "Bold",
    fontSize: "10px",
    lineHeight: "12px"
  }, fontOverride)), FontVariant.LabelExtraSmallUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "11px",
    lineHeight: "12px"
  }, fontOverride)), FontVariant.LabelSmall, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "12px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.LabelSmallEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "12px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.LabelSmallUp, _objectSpread83(_objectSpread83({
    fontSize: "13px",
    lineHeight: "16px"
  }, defaultFontValue), fontOverride)), FontVariant.LabelSmallUpEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "13px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.LabelMedium, _objectSpread83(_objectSpread83({
    fontSize: "14px",
    lineHeight: "16px"
  }, defaultFontValue), fontOverride)), FontVariant.LabelMediumEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "14px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.LabelLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "16px",
    lineHeight: "18px"
  }, fontOverride)), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref, FontVariant.LabelLargeEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "16px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.LabelLargeUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Regular,
    fontSize: "18px",
    lineHeight: "20px"
  }, fontOverride)), FontVariant.LabelExtraLargeEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "24px",
    lineHeight: "28px"
  }, fontOverride)), FontVariant.LabelExtraLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Regular,
    fontSize: "24px",
    lineHeight: "28px"
  }, fontOverride)), FontVariant.LabelXExtraLargeEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "32px",
    lineHeight: "36px"
  }, fontOverride)), FontVariant.LabelXExtraLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "32px",
    lineHeight: "36px"
  }, fontOverride)), FontVariant.LabelXXExtraLargeEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "48px",
    lineHeight: "54px"
  }, fontOverride)), FontVariant.LabelXXExtraLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "48px",
    lineHeight: "54px"
  }, fontOverride)), FontVariant.LabelXXXExtraLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "60px",
    lineHeight: "68px"
  }, fontOverride));
};
var getTextFontVariants = function getTextFontVariants2() {
  var fontOverride = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontVariant.TextExtraSmall, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "11px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.TextSmall, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "12px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.TextSmallUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "13px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.TextMedium, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "14px",
    lineHeight: "20px"
  }, fontOverride)), FontVariant.TextLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "16px",
    lineHeight: "22px"
  }, fontOverride)), FontVariant.TextExtraLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "18px",
    lineHeight: "26px"
  }, fontOverride)), FontVariant.TextXExtraLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "28px",
    lineHeight: "40px"
  }, fontOverride));
};
var getButtonFontVariants = function getButtonFontVariants2() {
  var fontOverride = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontVariant.ButtonSmEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "12px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.ButtonSm, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "12px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.ButtonSmUpEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "13px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.ButtonSmUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "13px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.ButtonMdEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "14px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.ButtonMd, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "14px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.ButtonLgEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "16px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.ButtonLg, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "16px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.ButtonLgUpEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "18px",
    lineHeight: "20px"
  }, fontOverride)), FontVariant.ButtonLgUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "18px",
    lineHeight: "20px"
  }, fontOverride));
};
var getLinkFontVariants = function getLinkFontVariants2() {
  var fontOverride = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontVariant.LinkSmall, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "12px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.LinkSmallEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "12px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.LinkSmallUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "13px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.LinkSmallUpEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "13px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.LinkMedium, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "14px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.LinkMediumEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "14px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.LinkLarge, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "16px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.LinkLargeEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "16px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.LinkLargeUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "18px",
    lineHeight: "20px"
  }, fontOverride)), FontVariant.LinkLargeUpEmphasis, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "18px",
    lineHeight: "20px"
  }, fontOverride));
};
var getInputFontVariants = function getInputFontVariants2() {
  var fontOverride = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontVariant.InputSm, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "12px",
    lineHeight: "14px"
  }, fontOverride)), FontVariant.InputSmUp, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "13px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.InputMd, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "14px",
    lineHeight: "16px"
  }, fontOverride)), FontVariant.InputLg, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontSize: "16px",
    lineHeight: "18px"
  }, fontOverride));
};
var getTitleFontVariants = function getTitleFontVariants2() {
  var fontOverride = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontVariant.TitleH6, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "12px",
    lineHeight: "18px"
  }, fontOverride)), FontVariant.TitleH5, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "14px",
    lineHeight: "21px"
  }, fontOverride)), FontVariant.TitleH4, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "16px",
    lineHeight: "24px"
  }, fontOverride)), FontVariant.TitleH3, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "18px",
    lineHeight: "27px"
  }, fontOverride)), FontVariant.TitleH2, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "20px",
    lineHeight: "30px"
  }, fontOverride)), FontVariant.TitleH1, _objectSpread83(_objectSpread83({}, defaultFontValue), {}, {
    fontWeight: FontWeight.Medium,
    fontSize: "28px",
    lineHeight: "42px"
  }, fontOverride));
};
var getDefaultTypography = function getDefaultTypography2() {
  var typographyOverride = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return _objectSpread83(_objectSpread83({
    fontFamily: defaultFontValue.fontFamily,
    baseLineHeight: 1.375
  }, typographyOverride), {}, {
    font: _objectSpread83(_objectSpread83(_objectSpread83(_objectSpread83(_objectSpread83(_objectSpread83({}, getLabelFontVariants(typographyOverride)), getTextFontVariants(typographyOverride)), getButtonFontVariants(typographyOverride)), getLinkFontVariants(typographyOverride)), getInputFontVariants(typographyOverride)), getTitleFontVariants(typographyOverride))
  });
};

// node_modules/@scaleflex/ui/theme/roots/common-styles.js
init_react_shim();
var CommonStyles = ct(["@keyframes spinner{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}.Menu-open{overflow:hidden;}.Modal-open{overflow:hidden;}.Drawer-open{overflow:hidden;}"]);
var common_styles_default = CommonStyles;

// node_modules/@scaleflex/ui/theme/roots/shadows/index.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/roots/shadows/entity/index.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/roots/shadows/entity/default-shadows.js
init_react_shim();
var _shadows;
var shadows = (_shadows = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_shadows, Shadows.ShadowSm, "0px 1px 2px 0px rgba(146, 166, 188, 0.2)"), Shadows.ShadowMd, " 0px 1px 4px 0px rgba(146, 166, 188, 0.24)"), Shadows.ShadowLg, " 0px 2px 6px 0px rgba(146, 166, 188, 0.32)"), Shadows.ShadowXl, " 0px 2px 6px 0px rgba(146, 166, 188, 0.5)"), Shadows.Label, " 0px 1px 3px 0px rgba(77, 78, 78, 0.15)"), Shadows.Header, " 0px 6px 10px 0px rgba(146, 166, 188, 0.2)"), Shadows.HeaderPopup, " 0px 3px 7px 0px rgba(146, 166, 188, 0.16)"), Shadows.FooterPopup, " 0px -4px 8px 0px rgba(208, 215, 220, 0.22)"), Shadows.LeftPanelMd, " 6px 8px 12px 0px rgba(146, 166, 188, 0.14)"), Shadows.RightPanelMd, "-6px 8px 12px 0px rgba(146, 166, 188, 0.14)"), _defineProperty(_defineProperty(_shadows, Shadows.LeftPanelSm, "6px -4px 12px 0px rgba(146, 166, 188, 0.14)"), Shadows.RightPanelSm, "-6px -4px 12px 0px rgba(146, 166, 188, 0.14)"));
var defaultShadows = shadows;

// node_modules/@scaleflex/ui/theme/roots/breakpoints/entity/create-breakpoints.js
init_react_shim();

// node_modules/@scaleflex/ui/theme/roots/breakpoints/entity/default-breakpoints.js
init_react_shim();

// node_modules/@scaleflex/ui/utils/types/css/index.js
init_react_shim();

// node_modules/@scaleflex/ui/utils/types/css/align.js
init_react_shim();

// node_modules/@scaleflex/ui/utils/types/css/position.js
init_react_shim();

// node_modules/@scaleflex/ui/utils/types/css/direction.js
init_react_shim();

// node_modules/@scaleflex/ui/utils/types/css/breakpoint.js
init_react_shim();
var Breakpoint = {
  Xs: "xs",
  Sm: "sm",
  Md: "md",
  Lg: "lg",
  Xl: "xl",
  Xxl: "xxl",
  Xxxl: "xxxl"
};

// node_modules/@scaleflex/ui/theme/roots/breakpoints/entity/default-breakpoints.js
var defaultBreakpoints = {
  keys: [Breakpoint.Xs, Breakpoint.Sm, Breakpoint.Md, Breakpoint.Lg, Breakpoint.Xl],
  values: _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Breakpoint.Xs, 0), Breakpoint.Sm, 576), Breakpoint.Md, 768), Breakpoint.Lg, 1084), Breakpoint.Xl, 1342), Breakpoint.Xxl, 1600), Breakpoint.Xxxl, 1920),
  classes: _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Breakpoint.Xs, ".sfx-breakpoint-xs"), Breakpoint.Sm, ".sfx-breakpoint-sm"), Breakpoint.Md, ".sfx-breakpoint-md"), Breakpoint.Lg, ".sfx-breakpoint-lg"), Breakpoint.Xl, ".sfx-breakpoint-xl"), Breakpoint.Xxl, ".sfx-breakpoint-xxl"), Breakpoint.Xxxl, ".sfx-breakpoint-xxxl"),
  getBreakpointClass: function getBreakpointClass() {
    return "";
  },
  up: function up() {
    return "";
  },
  down: function down() {
    return "";
  },
  between: function between() {
    return "";
  },
  only: function only() {
    return "";
  }
};

// node_modules/@scaleflex/ui/theme/roots/breakpoints/entity/create-breakpoints.js
var createBreakpoints = function createBreakpoints2(breakpoints) {
  var _breakpoints$values = breakpoints.values, values = _breakpoints$values === void 0 ? defaultBreakpoints.values : _breakpoints$values, _breakpoints$classes = breakpoints.classes, classes = _breakpoints$classes === void 0 ? defaultBreakpoints.classes : _breakpoints$classes;
  var unit = "px";
  var keys = Object.keys(values);
  var up2 = function up3(key) {
    var value = typeof values[key] === "number" ? values[key] : key;
    return "@media (min-width:".concat(value).concat(unit, ")");
  };
  var down2 = function down3(key) {
    var value = values[key];
    return "@media (max-width:".concat(value).concat(unit, ")");
  };
  var between2 = function between3(start, end) {
    var endIndex = keys.indexOf(end);
    return "@media (min-width:".concat(values[start]).concat(unit, ") and (max-width:").concat(values[keys[endIndex]]).concat(unit, ")");
  };
  var only2 = function only3(key) {
    if (keys.indexOf(key) + 1 < keys.length) {
      return between2(key, keys[keys.indexOf(key) + 1]);
    }
    return up2(key);
  };
  var getBreakpointClass2 = function getBreakpointClass3(width, hideSelector) {
    var removeSelector = function removeSelector2(str) {
      return str.slice(1);
    };
    if (width >= values.xs && width < values.sm) {
      return hideSelector ? removeSelector(classes.xs) : classes.xs;
    }
    if (width >= values.sm && width < values.md) {
      return hideSelector ? removeSelector(classes.sm) : classes.sm;
    }
    if (width >= values.md && width < values.lg) {
      return hideSelector ? removeSelector(classes.md) : classes.md;
    }
    if (width >= values.lg && width < values.xl) {
      return hideSelector ? removeSelector(classes.lg) : classes.lg;
    }
    if (width >= values.xl && width < values.xxl) {
      return hideSelector ? removeSelector(classes.xl) : classes.xl;
    }
    if (width >= values.xxl && width < values.xxxl) {
      return hideSelector ? removeSelector(classes.xxl) : classes.xxl;
    }
    if (width >= values.xxxl) {
      return hideSelector ? removeSelector(classes.xxxl) : classes.xxxl;
    }
    return hideSelector ? removeSelector(classes.md) : classes.md;
  };
  return {
    keys,
    values,
    classes,
    getBreakpointClass: getBreakpointClass2,
    up: up2,
    down: down2,
    between: between2,
    only: only2
  };
};
var create_breakpoints_default = createBreakpoints;

// node_modules/@scaleflex/ui/theme/theme-provider/theme-provider.context.js
function ownKeys84(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function(r2) {
      return Object.getOwnPropertyDescriptor(e, r2).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread84(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys84(Object(t), true).forEach(function(r2) {
      _defineProperty(e, r2, t[r2]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys84(Object(t)).forEach(function(r2) {
      Object.defineProperty(e, r2, Object.getOwnPropertyDescriptor(t, r2));
    });
  }
  return e;
}
var defaultShape = {
  borderRadius: _defineProperty(_defineProperty(_defineProperty({}, BorderRadiusSize.Sm, "2px"), BorderRadiusSize.Md, "4px"), BorderRadiusSize.Lg, "8px")
};
var ThemeProvider = function ThemeProvider2(_ref) {
  var children = _ref.children, _ref$theme = _ref.theme, theme = _ref$theme === void 0 ? {} : _ref$theme;
  var _theme$palette = theme.palette, paletteOverride = _theme$palette === void 0 ? {} : _theme$palette, _theme$breakpoints = theme.breakpoints, breakpointsOverride = _theme$breakpoints === void 0 ? {} : _theme$breakpoints, _theme$typography = theme.typography, typographyOverride = _theme$typography === void 0 ? {} : _theme$typography, _theme$shape = theme.shape, shapeOverride = _theme$shape === void 0 ? {} : _theme$shape, _theme$shadows = theme.shadows, shadowsOverride = _theme$shadows === void 0 ? {} : _theme$shadows;
  var finalTheme = (0, import_react140.useMemo)(function() {
    var palette = _objectSpread84(_objectSpread84({}, defaultPalette), paletteOverride);
    var breakpoints = create_breakpoints_default(breakpointsOverride);
    var shadows2 = _objectSpread84(_objectSpread84({}, defaultShadows), shadowsOverride);
    return {
      palette,
      breakpoints,
      typography: getDefaultTypography(typographyOverride),
      shape: _objectSpread84({}, (0, import_lodash.default)(_objectSpread84({}, defaultShape), _objectSpread84({}, shapeOverride))),
      shadows: shadows2
    };
  }, [JSON.stringify(theme)]);
  return import_react140.default.createElement(Ze, {
    theme: finalTheme
  }, import_react140.default.createElement(import_react140.default.Fragment, null, applyPolymorphicFunctionProp(children, finalTheme), import_react140.default.createElement(common_styles_default, null), import_react140.default.createElement(typography_component_default, null)));
};
var theme_provider_context_default = ThemeProvider;

// node_modules/react-filerobot-image-editor/lib/utils/assignFinetuneNamesToKonva.js
init_react_shim();
var assignFinetuneNamesToKonva = function() {
  Object.keys(Konva.Filters || {}).forEach(function(a) {
    return Konva.Filters[a].finetuneName = a;
  });
};
var assignFinetuneNamesToKonva_default = assignFinetuneNamesToKonva;

// node_modules/react-filerobot-image-editor/lib/components/AssemblyPoint/globalStyles.js
init_react_shim();
var FontsFaces = ct([".", "{font-family:", ";}"], ROOT_CONTAINER_CLASS_NAME, function(a) {
  var b, c = a.theme, d = void 0 === c ? {} : c;
  return (null === (b = d.typography) || void 0 === b ? void 0 : b.fontFamily) || "Arial";
});
var OverrideDefaultStyles = ct([".Menu-open{overflow:visible !important;}.", ",#SfxPopper{box-sizing:border-box;.SfxPopper-root .SfxMenu-root{.SfxMenuItem-prefix{margin-right:6px;}}}.", " *,#SfxPopper *{box-sizing:border-box;scrollbar-color:rgba(203,211,218,1) rgba(203,211,218,0.35);:not(button) > svg:not([color]){color:", '}:disabled,[aria-disabled="true"]{cursor:not-allowed;}&::-webkit-scrollbar{width:4px;height:4px;}&::-webkit-scrollbar-track{background:rgba(203,211,218,0.35);}&::-webkit-scrollbar-thumb{background:rgba(203,211,218,1);border-radius:10px;}}'], ROOT_CONTAINER_CLASS_NAME, ROOT_CONTAINER_CLASS_NAME, function(a) {
  var b = a.theme;
  return b.palette["icons-primary"];
});

// node_modules/react-filerobot-image-editor/lib/components/AssemblyPoint/Providers.js
var _excluded39 = ["children"];
var AssemblyPointProviders = function(a) {
  var b = a.children, c = _objectWithoutProperties(a, _excluded39), d = c.useCloudimage, e = c.cloudimage, f = void 0 === e ? {} : e;
  if (void 0 !== d && d) {
    var g, h;
    if (null !== f && void 0 !== f && null !== (g = f.imageSealing) && void 0 !== g && g.enable && !(null !== f && void 0 !== f && null !== (h = f.imageSealing) && void 0 !== h && h.salt)) throw new Error("`salt` property of imageSealing object is required in cloudimage mode as long as `imageSealing` is enabled.");
  }
  (0, import_react141.useEffect)(function() {
    assignFinetuneNamesToKonva_default();
  }, []);
  var i = deepMerge_default(defaultConfig_default, c);
  return import_react141.default.createElement(theme_provider_context_default, { theme: i.theme }, import_react141.default.createElement(FontsFaces, null), import_react141.default.createElement(OverrideDefaultStyles, null), import_react141.default.createElement(AppProvider_default, { config: i }, b));
};
var Providers_default = (0, import_react141.memo)(AssemblyPointProviders);

// node_modules/react-filerobot-image-editor/lib/components/AssemblyPoint/index.js
var AssemblyPoint = function(a) {
  return import_react142.default.createElement(Providers_default, a, import_react142.default.createElement(App_default, null));
};
var AssemblyPoint_default = (0, import_react142.memo)(AssemblyPoint);
export {
  ALLOWED_TEXT_PART_FORMATS,
  ANNOTATION_NAMES_TO_COMPONENT as ANNOTATION_NAMES_TO_NODES,
  App_default as App,
  BASE_LAYER_ID,
  BackButton_default as BackButton,
  BaseLayer_default as BaseLayer,
  ButtonWithMenu_default as ButtonWithMenu,
  CLOSING_REASONS,
  CLOUDIMG_TO_EDITOR_POSITIONS,
  CUSTOM_CROP,
  MainCanvasWrapper_default as CanvasWrapper,
  Carousel_default as Carousel,
  CloseButton_default as CloseButton,
  ColorInput_default as ColorInput,
  ColorPickerModal_default as ColorPickerModal,
  ConfirmationModal_default as ConfirmationModal,
  CropTransformer_default as CropTransformer,
  DEFAULT_ENABLED_ANCHORS,
  DEFAULT_IMAGE_TYPE,
  DEFAULT_SAVE_QUALITY,
  DEFAULT_ZOOM_FACTOR,
  DESIGN_LAYER_ID,
  DesignLayer_default as DesignLayer,
  AnnotationNodes_default as DesignLayerAnnotations,
  ArrowNode_default as DesignLayerArrowNode,
  EllipseNode_default as DesignLayerEllipseNode,
  ImageNode_default as DesignLayerImageNode,
  LineNode_default as DesignLayerLineNode,
  PolygonNode_default as DesignLayerPolygonNode,
  PreviewGroup_default as DesignLayerPreviewGroup,
  RectNode_default as DesignLayerRectNode,
  TextNode_default as DesignLayerTextNode,
  DesignLayerWrapper_default as DesignLayerWrapper,
  DiscardConfirmationModal_default as DiscardConfirmationModal,
  EDITOR_TO_CLOUDIMG_POSITIONS,
  ELLIPSE_CROP,
  EVENTS,
  FEEDBACK_STATUSES,
  FLIP_DIRECTIONS,
  Providers_default as FilerobotImageEditorProvider,
  HistoryButtons_default as HistoryButtons,
  IMAGE_NODE_ID,
  ImageInfo_default as ImageInfo,
  MIN_CROP,
  Modal_default as Modal,
  NODES_TRANSFORMER_ID,
  NodesTransformer_default as NodesTransformer,
  ORIGINAL_CROP,
  ObjectRemovalButton_default as ObjectRemovalButton,
  ObjectRemovalOptions_default as ObjectRemovalOptions,
  POINTER_ICONS,
  POSITIONS,
  POSSIBLE_IMAGE_TYPES,
  ROOT_CONTAINER_CLASS_NAME,
  RedoButton_default as RedoButton,
  ResetButton_default as ResetButton,
  ResetConfirmationModal_default as ResetConfirmationModal,
  MainCanvas_default as RichCanvas,
  SUPPORTED_IMAGE_TYPES,
  SaveButton_default as SaveButton,
  Separator_default as Separator,
  Slider_default as Slider,
  Spinner_default as Spinner,
  TABS_IDS as TABS,
  TABS_IDS,
  TEXT_EDITOR_ID,
  TOOLS_IDS as TOOLS,
  TOOLS_IDS,
  TRANSFORMERS_LAYER_ID,
  TRANSLATIONS_GRID_UUID,
  Tabs_default as Tabs,
  TabsDrawer_default as TabsDrawer,
  TabsNavbar_default as TabsNavbar,
  TabsResponsive_default as TabsResponsive,
  ToolsBar_default as Toolsbar,
  Topbar_default as Topbar,
  TransformersLayer_default as TransformersLayer,
  TransformersLayerWrapper_default as TransformersLayerWrapper,
  UNFOCUSED_MARKED_TEXT_SELECTOR_ID,
  UndoButton_default as UndoButton,
  WATERMARK_ANNOTATION_ID,
  ZoomButtons_default as ZoomButtons,
  AssemblyPoint_default as default,
  emitCustomEvent_default as emitCustomEvent,
  useAnnotation_default as useAnnotation,
  useAnnotationEvents_default as useAnnotationEvents,
  useAnnotationOrdering_default as useAnnotationOrdering,
  useAnnotationPositioning_default as useAnnotationPositioning,
  useAnnotations_default as useAnnotations,
  useAppReducer_default as useAppReducer,
  useDebouncedCallback_default as useDebouncedCallback,
  useDispatch_default as useDispatch,
  useDrag_default as useDrag,
  useDrawPreviewByPointer_default as useDrawPreviewByPointer,
  useEditableTextId_default as useEditableTextId,
  useFilter_default as useFilter,
  useFinetune_default as useFinetune,
  useImageScaled_default as useImageScaled,
  useLoadMainSource_default as useLoadMainSource,
  useManageHistoryState_default as useManageHistoryState,
  useMapDimensions_default as useMapDimensions,
  usePhoneScreen_default as usePhoneScreen,
  useResizeObserver_default as useResizeObserver,
  useScreenWidth_default as useScreenWidth,
  useSelectTool_default as useSelectTool,
  useSelectedAnnotations_default as useSelectedAnnotations,
  useSetAnnotation_default as useSetAnnotation,
  useSetOriginalSource_default as useSetOriginalSource,
  useStore_default as useStore,
  useTabletScreen_default as useTabletScreen,
  useTabs_default as useTabs,
  useTextAnnotationEditing_default as useTextAnnotationEditing,
  useTextAnnotationPartEditing_default as useTextAnnotationPartEditing,
  useToggleTabsNavbar_default as useToggleTabsNavbar,
  useTransformedImgData_default as useTransformedImgData,
  useUpdateEffect_default as useUpdateEffect,
  useUpdateState_default as useUpdateState,
  useZoom_default as useZoom
};
//# sourceMappingURL=react-filerobot-image-editor.js.map

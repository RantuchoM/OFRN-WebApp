{"version":3,"file":"tippy-react.esm.js","sources":["../src/utils.js","../src/util-hooks.js","../src/className-plugin.js","../src/Tippy.js","../src/useSingleton.js","../src/forwardRef.js","../src/index.js"],"sourcesContent":["export const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined';\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node);\n    } else if (ref.hasOwnProperty('current')) {\n      ref.current = node;\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return isBrowser && document.createElement('div');\n}\n\nexport function toDataAttributes(attrs) {\n  const dataAttrs = {\n    'data-placement': attrs.placement,\n  };\n\n  if (attrs.referenceHidden) {\n    dataAttrs['data-reference-hidden'] = '';\n  }\n\n  if (attrs.escaped) {\n    dataAttrs['data-escaped'] = '';\n  }\n\n  return dataAttrs;\n}\n\nfunction deepEqual(x, y) {\n  if (x === y) {\n    return true;\n  } else if (\n    typeof x === 'object' &&\n    x != null &&\n    typeof y === 'object' &&\n    y != null\n  ) {\n    if (Object.keys(x).length !== Object.keys(y).length) {\n      return false;\n    }\n\n    for (const prop in x) {\n      if (y.hasOwnProperty(prop)) {\n        if (!deepEqual(x[prop], y[prop])) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function uniqueByShape(arr) {\n  const output = [];\n\n  arr.forEach((item) => {\n    if (!output.find((outputItem) => deepEqual(item, outputItem))) {\n      output.push(item);\n    }\n  });\n\n  return output;\n}\n\nexport function deepPreserveProps(instanceProps, componentProps) {\n  return {\n    ...componentProps,\n    popperOptions: {\n      ...instanceProps.popperOptions,\n      ...componentProps.popperOptions,\n      modifiers: uniqueByShape([\n        ...(instanceProps.popperOptions?.modifiers || []),\n        ...(componentProps.popperOptions?.modifiers || []),\n      ]),\n    },\n  };\n}\n","import {isBrowser} from './utils';\nimport {useLayoutEffect, useEffect, useRef} from 'react';\n\nexport const useIsomorphicLayoutEffect = isBrowser\n  ? useLayoutEffect\n  : useEffect;\n\nexport function useMutableBox(initialValue) {\n  // Using refs instead of state as it's recommended to not store imperative\n  // values in state due to memory problems in React(?)\n  const ref = useRef();\n\n  if (!ref.current) {\n    ref.current =\n      typeof initialValue === 'function' ? initialValue() : initialValue;\n  }\n\n  return ref.current;\n}\n","function updateClassName(box, action, classNames) {\n  classNames.split(/\\s+/).forEach((name) => {\n    if (name) {\n      box.classList[action](name);\n    }\n  });\n}\n\nexport const classNamePlugin = {\n  name: 'className',\n  defaultValue: '',\n  fn(instance) {\n    const box = instance.popper.firstElementChild;\n    const isDefaultRenderFn = () => !!instance.props.render?.$$tippy;\n\n    function add() {\n      if (instance.props.className && !isDefaultRenderFn()) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            [\n              'rb-tippyjs-react: Cannot use `className` prop in conjunction with',\n              '`render` prop. Place the className on the element you are',\n              'rendering.',\n            ].join(' '),\n          );\n        }\n\n        return;\n      }\n\n      updateClassName(box, 'add', instance.props.className);\n    }\n\n    function remove() {\n      if (isDefaultRenderFn()) {\n        updateClassName(box, 'remove', instance.props.className);\n      }\n    }\n\n    return {\n      onCreate: add,\n      onBeforeUpdate: remove,\n      onAfterUpdate: add,\n    };\n  },\n};\n","import React, {cloneElement, useState} from 'react';\nimport {createPortal} from 'react-dom';\nimport {\n  preserveRef,\n  ssrSafeCreateDiv,\n  toDataAttributes,\n  deepPreserveProps,\n} from './utils';\nimport {useMutableBox, useIsomorphicLayoutEffect} from './util-hooks';\nimport {classNamePlugin} from './className-plugin';\n\nexport default function TippyGenerator(tippy) {\n  function Tippy({\n    children,\n    content,\n    visible,\n    singleton,\n    render,\n    reference,\n    disabled = false,\n    ignoreAttributes = true,\n    // Filter React development reserved props\n    // added by babel-preset-react dev plugins:\n    // transform-react-jsx-self and transform-react-jsx-source\n    __source,\n    __self,\n    ...restOfNativeProps\n  }) {\n    const isControlledMode = visible !== undefined;\n    const isSingletonMode = singleton !== undefined;\n\n    const [mounted, setMounted] = useState(false);\n    const [attrs, setAttrs] = useState({});\n    const [singletonContent, setSingletonContent] = useState();\n    const mutableBox = useMutableBox(() => ({\n      container: ssrSafeCreateDiv(),\n      renders: 1,\n    }));\n\n    const props = {\n      ignoreAttributes,\n      ...restOfNativeProps,\n      content: mutableBox.container,\n    };\n\n    if (isControlledMode) {\n      if (process.env.NODE_ENV !== 'production') {\n        ['trigger', 'hideOnClick', 'showOnCreate'].forEach(\n          (nativeStateProp) => {\n            if (props[nativeStateProp] !== undefined) {\n              console.warn(\n                [\n                  `rb-tippyjs-react: Cannot specify \\`${nativeStateProp}\\` prop in`,\n                  `controlled mode (\\`visible\\` prop)`,\n                ].join(' '),\n              );\n            }\n          },\n        );\n      }\n\n      props.trigger = 'manual';\n      props.hideOnClick = false;\n    }\n\n    if (isSingletonMode) {\n      disabled = true;\n    }\n\n    let computedProps = props;\n    const plugins = props.plugins || [];\n\n    if (render) {\n      computedProps = {\n        ...props,\n        plugins:\n          isSingletonMode && singleton.data != null\n            ? [\n                ...plugins,\n                {\n                  fn() {\n                    return {\n                      onTrigger(instance, event) {\n                        const node = singleton.data.children.find(\n                          ({instance}) =>\n                            instance.reference === event.currentTarget,\n                        );\n                        instance.state.$$activeSingletonInstance =\n                          node.instance;\n                        setSingletonContent(node.content);\n                      },\n                    };\n                  },\n                },\n              ]\n            : plugins,\n        render: () => ({popper: mutableBox.container}),\n      };\n    }\n\n    const deps = [reference].concat(children ? [children.type] : []);\n\n    // CREATE\n    useIsomorphicLayoutEffect(() => {\n      let element = reference;\n      if (reference && reference.hasOwnProperty('current')) {\n        element = reference.current;\n      }\n\n      const instance = tippy(element || mutableBox.ref || ssrSafeCreateDiv(), {\n        ...computedProps,\n        plugins: [classNamePlugin, ...(props.plugins || [])],\n      });\n\n      mutableBox.instance = instance;\n\n      if (disabled) {\n        instance.disable();\n      }\n\n      if (visible) {\n        instance.show();\n      }\n\n      if (isSingletonMode) {\n        singleton.hook({\n          instance,\n          content,\n          props: computedProps,\n          setSingletonContent,\n        });\n      }\n\n      setMounted(true);\n\n      return () => {\n        instance.destroy();\n        singleton?.cleanup(instance);\n      };\n    }, deps);\n\n    // UPDATE\n    useIsomorphicLayoutEffect(() => {\n      // Prevent this effect from running on 1st render\n      if (mutableBox.renders === 1) {\n        mutableBox.renders++;\n        return;\n      }\n\n      const {instance} = mutableBox;\n\n      instance.setProps(deepPreserveProps(instance.props, computedProps));\n\n      // Fixes #264\n      instance.popperInstance?.forceUpdate();\n\n      if (disabled) {\n        instance.disable();\n      } else {\n        instance.enable();\n      }\n\n      if (isControlledMode) {\n        if (visible) {\n          instance.show();\n        } else {\n          instance.hide();\n        }\n      }\n\n      if (isSingletonMode) {\n        singleton.hook({\n          instance,\n          content,\n          props: computedProps,\n          setSingletonContent,\n        });\n      }\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      if (!render) {\n        return;\n      }\n\n      const {instance} = mutableBox;\n\n      instance.setProps({\n        popperOptions: {\n          ...instance.props.popperOptions,\n          modifiers: [\n            ...(instance.props.popperOptions?.modifiers || []).filter(\n              ({name}) => name !== '$$tippyReact',\n            ),\n            {\n              name: '$$tippyReact',\n              enabled: true,\n              phase: 'beforeWrite',\n              requires: ['computeStyles'],\n              fn({state}) {\n                const hideData = state.modifiersData?.hide;\n\n                // WARNING: this is a high-risk path that can cause an infinite\n                // loop. This expression _must_ evaluate to false when required\n                if (\n                  attrs.placement !== state.placement ||\n                  attrs.referenceHidden !== hideData?.isReferenceHidden ||\n                  attrs.escaped !== hideData?.hasPopperEscaped\n                ) {\n                  setAttrs({\n                    placement: state.placement,\n                    referenceHidden: hideData?.isReferenceHidden,\n                    escaped: hideData?.hasPopperEscaped,\n                  });\n                }\n\n                state.attributes.popper = {};\n              },\n            },\n          ],\n        },\n      });\n    }, [attrs.placement, attrs.referenceHidden, attrs.escaped, ...deps]);\n\n    return (\n      <>\n        {children\n          ? cloneElement(children, {\n              ref(node) {\n                mutableBox.ref = node;\n                // React 19 compatible way to handle refs\n                if (children.props && children.props.ref) {\n                  preserveRef(children.props.ref, node);\n                }\n              },\n            })\n          : null}\n        {mounted &&\n          createPortal(\n            render\n              ? render(\n                  toDataAttributes(attrs),\n                  singletonContent,\n                  mutableBox.instance,\n                )\n              : content,\n            mutableBox.container,\n          )}\n      </>\n    );\n  }\n\n  return Tippy;\n}\n","import {useMutableBox, useIsomorphicLayoutEffect} from './util-hooks';\nimport {deepPreserveProps} from './utils';\nimport {classNamePlugin} from './className-plugin';\nimport {useMemo, useState} from 'react';\n\nexport default function useSingletonGenerator(createSingleton) {\n  return function useSingleton({disabled = false, overrides = []} = {}) {\n    const [mounted, setMounted] = useState(false);\n    const mutableBox = useMutableBox({\n      children: [],\n      renders: 1,\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      if (!mounted) {\n        setMounted(true);\n        return;\n      }\n\n      const {children, sourceData} = mutableBox;\n\n      if (!sourceData) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(\n            [\n              'rb-tippyjs-react: The `source` variable from `useSingleton()` has',\n              'not been passed to a <Tippy /> component.',\n            ].join(' '),\n          );\n        }\n\n        return;\n      }\n\n      const instance = createSingleton(\n        children.map((child) => child.instance),\n        {\n          ...sourceData.props,\n          popperOptions: sourceData.instance.props.popperOptions,\n          overrides,\n          plugins: [classNamePlugin, ...(sourceData.props.plugins || [])],\n        },\n      );\n\n      mutableBox.instance = instance;\n\n      if (disabled) {\n        instance.disable();\n      }\n\n      return () => {\n        instance.destroy();\n        mutableBox.children = children.filter(\n          ({instance}) => !instance.state.isDestroyed,\n        );\n      };\n    }, [mounted]);\n\n    useIsomorphicLayoutEffect(() => {\n      if (!mounted) {\n        return;\n      }\n\n      if (mutableBox.renders === 1) {\n        mutableBox.renders++;\n        return;\n      }\n\n      const {children, instance, sourceData} = mutableBox;\n\n      if (!(instance && sourceData)) {\n        return;\n      }\n\n      const {content, ...props} = sourceData.props;\n\n      instance.setProps(\n        deepPreserveProps(instance.props, {\n          ...props,\n          overrides,\n        }),\n      );\n\n      instance.setInstances(children.map((child) => child.instance));\n\n      if (disabled) {\n        instance.disable();\n      } else {\n        instance.enable();\n      }\n    });\n\n    return useMemo(() => {\n      const source = {\n        data: mutableBox,\n        hook(data) {\n          mutableBox.sourceData = data;\n          mutableBox.setSingletonContent = data.setSingletonContent;\n        },\n        cleanup() {\n          mutableBox.sourceData = null;\n        },\n      };\n\n      const target = {\n        hook(data) {\n          mutableBox.children = mutableBox.children.filter(\n            ({instance}) => data.instance !== instance,\n          );\n          mutableBox.children.push(data);\n\n          if (\n            mutableBox.instance?.state.isMounted &&\n            mutableBox.instance?.state.$$activeSingletonInstance ===\n              data.instance\n          ) {\n            mutableBox.setSingletonContent?.(data.content);\n          }\n\n          if (mutableBox.instance && !mutableBox.instance.state.isDestroyed) {\n            mutableBox.instance.setInstances(\n              mutableBox.children.map((child) => child.instance),\n            );\n          }\n        },\n        cleanup(instance) {\n          mutableBox.children = mutableBox.children.filter(\n            (data) => data.instance !== instance,\n          );\n\n          if (mutableBox.instance && !mutableBox.instance.state.isDestroyed) {\n            mutableBox.instance.setInstances(\n              mutableBox.children.map((child) => child.instance),\n            );\n          }\n        },\n      };\n\n      return [source, target];\n    }, []);\n  };\n}\n","import React, {cloneElement, forwardRef} from 'react';\nimport {preserveRef} from './utils';\n\nexport default (Tippy, defaultProps) =>\n  forwardRef(function TippyWrapper({children, ...props}, ref) {\n    return (\n      <Tippy {...{...defaultProps, ...props}}>\n        {children\n          ? cloneElement(children, {\n              ref: (node) => {\n                if (ref) {\n                  if (typeof ref === 'function') {\n                    ref(node);\n                  } else {\n                    ref.current = node;\n                  }\n                }\n                // React 19 compatible way to handle refs\n                if (children.props && children.props.ref) {\n                  preserveRef(children.props.ref, node);\n                }\n              },\n            })\n          : null}\n      </Tippy>\n    );\n  });\n","import tippy, {createSingleton} from 'tippy.js';\nimport TippyGenerator from './Tippy';\nimport useSingletonGenerator from './useSingleton';\nimport forwardRef from './forwardRef';\n\nconst useSingleton = useSingletonGenerator(createSingleton);\n\nexport default forwardRef(TippyGenerator(tippy));\nexport {useSingleton, tippy};\n"],"names":["isBrowser","window","document","preserveRef","ref","node","hasOwnProperty","current","ssrSafeCreateDiv","createElement","toDataAttributes","attrs","dataAttrs","placement","referenceHidden","escaped","deepEqual","x","y","Object","keys","length","prop","uniqueByShape","arr","output","forEach","item","find","outputItem","push","deepPreserveProps","instanceProps","componentProps","_instanceProps$popper","_componentProps$poppe","assign","popperOptions","modifiers","concat","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useMutableBox","initialValue","useRef","updateClassName","box","action","classNames","split","name","classList","classNamePlugin","defaultValue","fn","instance","popper","firstElementChild","isDefaultRenderFn","_instance$props$rende","props","render","$$tippy","add","className","process","env","NODE_ENV","console","warn","join","remove","onCreate","onBeforeUpdate","onAfterUpdate","TippyGenerator","tippy","Tippy","_ref","children","content","visible","singleton","reference","_ref$disabled","disabled","_ref$ignoreAttributes","ignoreAttributes","__source","__self","restOfNativeProps","_objectWithoutPropertiesLoose","_excluded","isControlledMode","undefined","isSingletonMode","_useState","useState","mounted","setMounted","_useState2","setAttrs","_useState3","singletonContent","setSingletonContent","mutableBox","container","renders","nativeStateProp","trigger","hideOnClick","computedProps","plugins","data","onTrigger","event","_ref2","currentTarget","state","$$activeSingletonInstance","deps","type","element","disable","show","hook","destroy","cleanup","_instance$popperInsta","setProps","popperInstance","forceUpdate","enable","hide","_instance$props$poppe","filter","_ref3","enabled","phase","requires","_ref4","_state$modifiersData","hideData","modifiersData","isReferenceHidden","hasPopperEscaped","attributes","React","Fragment","cloneElement","createPortal","useSingletonGenerator","createSingleton","useSingleton","_temp","_ref$overrides","overrides","sourceData","error","map","child","isDestroyed","_sourceData$props","setInstances","useMemo","source","target","_mutableBox$instance","_mutableBox$instance2","isMounted","defaultProps","forwardRef","TippyWrapper"],"mappings":";;;;;;;;;;;;;;;AAAO,IAAMA,SAAS,GACpB,OAAOC,MAAM,KAAK,WAAW,IAAI,OAAOC,QAAQ,KAAK,WAAW,CAAA;AAE3D,SAASC,WAAWA,CAACC,GAAG,EAAEC,IAAI,EAAE;AACrC,EAAA,IAAID,GAAG,EAAE;AACP,IAAA,IAAI,OAAOA,GAAG,KAAK,UAAU,EAAE;MAC7BA,GAAG,CAACC,IAAI,CAAC,CAAA;KACV,MAAM,IAAID,GAAG,CAACE,cAAc,CAAC,SAAS,CAAC,EAAE;MACxCF,GAAG,CAACG,OAAO,GAAGF,IAAI,CAAA;AACpB,KAAA;AACF,GAAA;AACF,CAAA;AAEO,SAASG,gBAAgBA,GAAG;AACjC,EAAA,OAAOR,SAAS,IAAIE,QAAQ,CAACO,aAAa,CAAC,KAAK,CAAC,CAAA;AACnD,CAAA;AAEO,SAASC,gBAAgBA,CAACC,KAAK,EAAE;AACtC,EAAA,IAAMC,SAAS,GAAG;IAChB,gBAAgB,EAAED,KAAK,CAACE,SAAAA;GACzB,CAAA;EAED,IAAIF,KAAK,CAACG,eAAe,EAAE;AACzBF,IAAAA,SAAS,CAAC,uBAAuB,CAAC,GAAG,EAAE,CAAA;AACzC,GAAA;EAEA,IAAID,KAAK,CAACI,OAAO,EAAE;AACjBH,IAAAA,SAAS,CAAC,cAAc,CAAC,GAAG,EAAE,CAAA;AAChC,GAAA;AAEA,EAAA,OAAOA,SAAS,CAAA;AAClB,CAAA;AAEA,SAASI,SAASA,CAACC,CAAC,EAAEC,CAAC,EAAE;EACvB,IAAID,CAAC,KAAKC,CAAC,EAAE;AACX,IAAA,OAAO,IAAI,CAAA;AACb,GAAC,MAAM,IACL,OAAOD,CAAC,KAAK,QAAQ,IACrBA,CAAC,IAAI,IAAI,IACT,OAAOC,CAAC,KAAK,QAAQ,IACrBA,CAAC,IAAI,IAAI,EACT;AACA,IAAA,IAAIC,MAAM,CAACC,IAAI,CAACH,CAAC,CAAC,CAACI,MAAM,KAAKF,MAAM,CAACC,IAAI,CAACF,CAAC,CAAC,CAACG,MAAM,EAAE;AACnD,MAAA,OAAO,KAAK,CAAA;AACd,KAAA;AAEA,IAAA,KAAK,IAAMC,IAAI,IAAIL,CAAC,EAAE;AACpB,MAAA,IAAIC,CAAC,CAACZ,cAAc,CAACgB,IAAI,CAAC,EAAE;AAC1B,QAAA,IAAI,CAACN,SAAS,CAACC,CAAC,CAACK,IAAI,CAAC,EAAEJ,CAAC,CAACI,IAAI,CAAC,CAAC,EAAE;AAChC,UAAA,OAAO,KAAK,CAAA;AACd,SAAA;AACF,OAAC,MAAM;AACL,QAAA,OAAO,KAAK,CAAA;AACd,OAAA;AACF,KAAA;AAEA,IAAA,OAAO,IAAI,CAAA;AACb,GAAC,MAAM;AACL,IAAA,OAAO,KAAK,CAAA;AACd,GAAA;AACF,CAAA;AAEO,SAASC,aAAaA,CAACC,GAAG,EAAE;EACjC,IAAMC,MAAM,GAAG,EAAE,CAAA;AAEjBD,EAAAA,GAAG,CAACE,OAAO,CAAC,UAACC,IAAI,EAAK;AACpB,IAAA,IAAI,CAACF,MAAM,CAACG,IAAI,CAAC,UAACC,UAAU,EAAA;AAAA,MAAA,OAAKb,SAAS,CAACW,IAAI,EAAEE,UAAU,CAAC,CAAA;AAAA,KAAA,CAAC,EAAE;AAC7DJ,MAAAA,MAAM,CAACK,IAAI,CAACH,IAAI,CAAC,CAAA;AACnB,KAAA;AACF,GAAC,CAAC,CAAA;AAEF,EAAA,OAAOF,MAAM,CAAA;AACf,CAAA;AAEO,SAASM,iBAAiBA,CAACC,aAAa,EAAEC,cAAc,EAAE;EAAA,IAAAC,qBAAA,EAAAC,qBAAA,CAAA;AAC/D,EAAA,OAAAhB,MAAA,CAAAiB,MAAA,CAAA,EAAA,EACKH,cAAc,EAAA;IACjBI,aAAa,EAAAlB,MAAA,CAAAiB,MAAA,CAAA,EAAA,EACRJ,aAAa,CAACK,aAAa,EAC3BJ,cAAc,CAACI,aAAa,EAAA;AAC/BC,MAAAA,SAAS,EAAEf,aAAa,CAAAgB,EAAAA,CAAAA,MAAA,CAClB,CAAA,CAAAL,qBAAA,GAAAF,aAAa,CAACK,aAAa,KAAA,IAAA,GAAA,KAAA,CAAA,GAA3BH,qBAAA,CAA6BI,SAAS,KAAI,EAAE,EAC5C,CAAA,CAAAH,qBAAA,GAAAF,cAAc,CAACI,aAAa,KAAA,IAAA,GAAA,KAAA,CAAA,GAA5BF,qBAAA,CAA8BG,SAAS,KAAI,EAAE,CAClD,CAAA;AAAC,KAAA,CAAA;AACH,GAAA,CAAA,CAAA;AAEL;;ACnFO,IAAME,yBAAyB,GAAGxC,SAAS,GAC9CyC,eAAe,GACfC,SAAS,CAAA;AAEN,SAASC,aAAaA,CAACC,YAAY,EAAE;AAC1C;AACA;AACA,EAAA,IAAMxC,GAAG,GAAGyC,MAAM,EAAE,CAAA;AAEpB,EAAA,IAAI,CAACzC,GAAG,CAACG,OAAO,EAAE;AAChBH,IAAAA,GAAG,CAACG,OAAO,GACT,OAAOqC,YAAY,KAAK,UAAU,GAAGA,YAAY,EAAE,GAAGA,YAAY,CAAA;AACtE,GAAA;EAEA,OAAOxC,GAAG,CAACG,OAAO,CAAA;AACpB;;AClBA,SAASuC,eAAeA,CAACC,GAAG,EAAEC,MAAM,EAAEC,UAAU,EAAE;EAChDA,UAAU,CAACC,KAAK,CAAC,KAAK,CAAC,CAACxB,OAAO,CAAC,UAACyB,IAAI,EAAK;AACxC,IAAA,IAAIA,IAAI,EAAE;AACRJ,MAAAA,GAAG,CAACK,SAAS,CAACJ,MAAM,CAAC,CAACG,IAAI,CAAC,CAAA;AAC7B,KAAA;AACF,GAAC,CAAC,CAAA;AACJ,CAAA;AAEO,IAAME,eAAe,GAAG;AAC7BF,EAAAA,IAAI,EAAE,WAAW;AACjBG,EAAAA,YAAY,EAAE,EAAE;AAChBC,EAAAA,EAAE,EAAFA,SAAAA,EAAEA,CAACC,QAAQ,EAAE;AACX,IAAA,IAAMT,GAAG,GAAGS,QAAQ,CAACC,MAAM,CAACC,iBAAiB,CAAA;AAC7C,IAAA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,GAAA;AAAA,MAAA,IAAAC,qBAAA,CAAA;AAAA,MAAA,OAAS,CAAC,EAAA,CAAAA,qBAAA,GAACJ,QAAQ,CAACK,KAAK,CAACC,MAAM,KAAA,IAAA,IAArBF,qBAAA,CAAuBG,OAAO,CAAA,CAAA;AAAA,KAAA,CAAA;IAEhE,SAASC,GAAGA,GAAG;MACb,IAAIR,QAAQ,CAACK,KAAK,CAACI,SAAS,IAAI,CAACN,iBAAiB,EAAE,EAAE;AACpD,QAAA,IAAIO,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;AACzCC,UAAAA,OAAO,CAACC,IAAI,CACV,CACE,mEAAmE,EACnE,2DAA2D,EAC3D,YAAY,CACb,CAACC,IAAI,CAAC,GAAG,CACZ,CAAC,CAAA;AACH,SAAA;AAEA,QAAA,OAAA;AACF,OAAA;MAEAzB,eAAe,CAACC,GAAG,EAAE,KAAK,EAAES,QAAQ,CAACK,KAAK,CAACI,SAAS,CAAC,CAAA;AACvD,KAAA;IAEA,SAASO,MAAMA,GAAG;MAChB,IAAIb,iBAAiB,EAAE,EAAE;QACvBb,eAAe,CAACC,GAAG,EAAE,QAAQ,EAAES,QAAQ,CAACK,KAAK,CAACI,SAAS,CAAC,CAAA;AAC1D,OAAA;AACF,KAAA;IAEA,OAAO;AACLQ,MAAAA,QAAQ,EAAET,GAAG;AACbU,MAAAA,cAAc,EAAEF,MAAM;AACtBG,MAAAA,aAAa,EAAEX,GAAAA;KAChB,CAAA;AACH,GAAA;AACF,CAAC;;;AClCc,SAASY,cAAcA,CAACC,KAAK,EAAE;EAC5C,SAASC,KAAKA,CAAAC,IAAA,EAeX;AAAA,IAAA,IAdDC,QAAQ,GAAAD,IAAA,CAARC,QAAQ,CAAA;MACRC,OAAO,GAAAF,IAAA,CAAPE,OAAO,CAAA;MACPC,OAAO,GAAAH,IAAA,CAAPG,OAAO,CAAA;MACPC,SAAS,GAAAJ,IAAA,CAATI,SAAS,CAAA;MACTrB,MAAM,GAAAiB,IAAA,CAANjB,MAAM,CAAA;MACNsB,SAAS,GAAAL,IAAA,CAATK,SAAS,CAAA;MAAAC,aAAA,GAAAN,IAAA,CACTO,QAAQ,CAAA;AAARA,MAAAA,QAAQ,GAAAD,aAAA,KAAG,KAAA,CAAA,GAAA,KAAK,GAAAA,aAAA,CAAA;MAAAE,qBAAA,GAAAR,IAAA,CAChBS,gBAAgB,CAAA;AAAhBA,MAAAA,gBAAgB,GAAAD,qBAAA,KAAG,KAAA,CAAA,GAAA,IAAI,GAAAA,qBAAA,CAAA;MAIfR,IAAA,CAARU,QAAQ,CAAA;MACFV,IAAA,CAANW,MAAM,CAAA;AACHC,UAAAA,iBAAiB,GAAAC,6BAAA,CAAAb,IAAA,EAAAc,WAAA,EAAA;AAEpB,IAAA,IAAMC,gBAAgB,GAAGZ,OAAO,KAAKa,SAAS,CAAA;AAC9C,IAAA,IAAMC,eAAe,GAAGb,SAAS,KAAKY,SAAS,CAAA;AAE/C,IAAA,IAAAE,SAAA,GAA8BC,QAAQ,CAAC,KAAK,CAAC;AAAtCC,MAAAA,OAAO,GAAAF,SAAA,CAAA,CAAA,CAAA;AAAEG,MAAAA,UAAU,GAAAH,SAAA,CAAA,CAAA,CAAA,CAAA;AAC1B,IAAA,IAAAI,UAAA,GAA0BH,QAAQ,CAAC,EAAE,CAAC;AAA/BvF,MAAAA,KAAK,GAAA0F,UAAA,CAAA,CAAA,CAAA;AAAEC,MAAAA,QAAQ,GAAAD,UAAA,CAAA,CAAA,CAAA,CAAA;AACtB,IAAA,IAAAE,UAAA,GAAgDL,QAAQ,EAAE;AAAnDM,MAAAA,gBAAgB,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAEE,MAAAA,mBAAmB,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;IAC5C,IAAMG,UAAU,GAAG/D,aAAa,CAAC,YAAA;MAAA,OAAO;QACtCgE,SAAS,EAAEnG,gBAAgB,EAAE;AAC7BoG,QAAAA,OAAO,EAAE,CAAA;OACV,CAAA;AAAA,KAAC,CAAC,CAAA;AAEH,IAAA,IAAM/C,KAAK,GAAA1C,MAAA,CAAAiB,MAAA,CAAA;AACToD,MAAAA,gBAAgB,EAAhBA,gBAAAA;AAAgB,KAAA,EACbG,iBAAiB,EAAA;MACpBV,OAAO,EAAEyB,UAAU,CAACC,SAAAA;KACrB,CAAA,CAAA;AAED,IAAA,IAAIb,gBAAgB,EAAE;AACpB,MAAA,IAAI5B,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;QACzC,CAAC,SAAS,EAAE,aAAa,EAAE,cAAc,CAAC,CAAC1C,OAAO,CAChD,UAACmF,eAAe,EAAK;AACnB,UAAA,IAAIhD,KAAK,CAACgD,eAAe,CAAC,KAAKd,SAAS,EAAE;YACxC1B,OAAO,CAACC,IAAI,CACV,CACwCuC,oCAAAA,GAAAA,eAAe,GAEtD,WAAA,EAAA,kCAAA,CAAA,CAACtC,IAAI,CAAC,GAAG,CACZ,CAAC,CAAA;AACH,WAAA;AACF,SACF,CAAC,CAAA;AACH,OAAA;MAEAV,KAAK,CAACiD,OAAO,GAAG,QAAQ,CAAA;MACxBjD,KAAK,CAACkD,WAAW,GAAG,KAAK,CAAA;AAC3B,KAAA;AAEA,IAAA,IAAIf,eAAe,EAAE;AACnBV,MAAAA,QAAQ,GAAG,IAAI,CAAA;AACjB,KAAA;IAEA,IAAI0B,aAAa,GAAGnD,KAAK,CAAA;AACzB,IAAA,IAAMoD,OAAO,GAAGpD,KAAK,CAACoD,OAAO,IAAI,EAAE,CAAA;AAEnC,IAAA,IAAInD,MAAM,EAAE;AACVkD,MAAAA,aAAa,GAAA7F,MAAA,CAAAiB,MAAA,KACRyB,KAAK,EAAA;AACRoD,QAAAA,OAAO,EACLjB,eAAe,IAAIb,SAAS,CAAC+B,IAAI,IAAI,IAAI,GAAA3E,EAAAA,CAAAA,MAAA,CAEhC0E,OAAO,EACV,CAAA;UACE1D,EAAE,EAAA,SAAFA,EAAEA,GAAG;YACH,OAAO;AACL4D,cAAAA,SAAS,WAATA,SAASA,CAAC3D,QAAQ,EAAE4D,KAAK,EAAE;gBACzB,IAAM/G,IAAI,GAAG8E,SAAS,CAAC+B,IAAI,CAAClC,QAAQ,CAACpD,IAAI,CACvC,UAAAyF,KAAA,EAAA;AAAA,kBAAA,IAAE7D,QAAQ,GAAA6D,KAAA,CAAR7D,QAAQ,CAAA;AAAA,kBAAA,OACRA,QAAQ,CAAC4B,SAAS,KAAKgC,KAAK,CAACE,aAAa,CAAA;AAAA,iBAC9C,CAAC,CAAA;AACD9D,gBAAAA,QAAQ,CAAC+D,KAAK,CAACC,yBAAyB,GACtCnH,IAAI,CAACmD,QAAQ,CAAA;AACfiD,gBAAAA,mBAAmB,CAACpG,IAAI,CAAC4E,OAAO,CAAC,CAAA;AACnC,eAAA;aACD,CAAA;AACH,WAAA;AACF,SAAC,KAEHgC,OAAO;QACbnD,MAAM,EAAE,SAARA,MAAMA,GAAA;UAAA,OAAS;YAACL,MAAM,EAAEiD,UAAU,CAACC,SAAAA;WAAU,CAAA;AAAA,SAAA;OAC9C,CAAA,CAAA;AACH,KAAA;AAEA,IAAA,IAAMc,IAAI,GAAG,CAACrC,SAAS,CAAC,CAAC7C,MAAM,CAACyC,QAAQ,GAAG,CAACA,QAAQ,CAAC0C,IAAI,CAAC,GAAG,EAAE,CAAC,CAAA;;AAEhE;AACAlF,IAAAA,yBAAyB,CAAC,YAAM;MAC9B,IAAImF,OAAO,GAAGvC,SAAS,CAAA;MACvB,IAAIA,SAAS,IAAIA,SAAS,CAAC9E,cAAc,CAAC,SAAS,CAAC,EAAE;QACpDqH,OAAO,GAAGvC,SAAS,CAAC7E,OAAO,CAAA;AAC7B,OAAA;AAEA,MAAA,IAAMiD,QAAQ,GAAGqB,KAAK,CAAC8C,OAAO,IAAIjB,UAAU,CAACtG,GAAG,IAAII,gBAAgB,EAAE,EAAAW,MAAA,CAAAiB,MAAA,KACjE4E,aAAa,EAAA;QAChBC,OAAO,EAAA,CAAG5D,eAAe,CAAAd,CAAAA,MAAA,CAAMsB,KAAK,CAACoD,OAAO,IAAI,EAAE,CAAA;AAAE,OAAA,CACrD,CAAC,CAAA;MAEFP,UAAU,CAAClD,QAAQ,GAAGA,QAAQ,CAAA;AAE9B,MAAA,IAAI8B,QAAQ,EAAE;QACZ9B,QAAQ,CAACoE,OAAO,EAAE,CAAA;AACpB,OAAA;AAEA,MAAA,IAAI1C,OAAO,EAAE;QACX1B,QAAQ,CAACqE,IAAI,EAAE,CAAA;AACjB,OAAA;AAEA,MAAA,IAAI7B,eAAe,EAAE;QACnBb,SAAS,CAAC2C,IAAI,CAAC;AACbtE,UAAAA,QAAQ,EAARA,QAAQ;AACRyB,UAAAA,OAAO,EAAPA,OAAO;AACPpB,UAAAA,KAAK,EAAEmD,aAAa;AACpBP,UAAAA,mBAAmB,EAAnBA,mBAAAA;AACF,SAAC,CAAC,CAAA;AACJ,OAAA;MAEAL,UAAU,CAAC,IAAI,CAAC,CAAA;AAEhB,MAAA,OAAO,YAAM;QACX5C,QAAQ,CAACuE,OAAO,EAAE,CAAA;AAClB5C,QAAAA,SAAS,YAATA,SAAS,CAAE6C,OAAO,CAACxE,QAAQ,CAAC,CAAA;OAC7B,CAAA;KACF,EAAEiE,IAAI,CAAC,CAAA;;AAER;AACAjF,IAAAA,yBAAyB,CAAC,YAAM;AAAA,MAAA,IAAAyF,qBAAA,CAAA;AAC9B;AACA,MAAA,IAAIvB,UAAU,CAACE,OAAO,KAAK,CAAC,EAAE;QAC5BF,UAAU,CAACE,OAAO,EAAE,CAAA;AACpB,QAAA,OAAA;AACF,OAAA;AAEA,MAAA,IAAOpD,QAAQ,GAAIkD,UAAU,CAAtBlD,QAAQ,CAAA;MAEfA,QAAQ,CAAC0E,QAAQ,CAACnG,iBAAiB,CAACyB,QAAQ,CAACK,KAAK,EAAEmD,aAAa,CAAC,CAAC,CAAA;;AAEnE;MACA,CAAAiB,qBAAA,GAAAzE,QAAQ,CAAC2E,cAAc,aAAvBF,qBAAA,CAAyBG,WAAW,EAAE,CAAA;AAEtC,MAAA,IAAI9C,QAAQ,EAAE;QACZ9B,QAAQ,CAACoE,OAAO,EAAE,CAAA;AACpB,OAAC,MAAM;QACLpE,QAAQ,CAAC6E,MAAM,EAAE,CAAA;AACnB,OAAA;AAEA,MAAA,IAAIvC,gBAAgB,EAAE;AACpB,QAAA,IAAIZ,OAAO,EAAE;UACX1B,QAAQ,CAACqE,IAAI,EAAE,CAAA;AACjB,SAAC,MAAM;UACLrE,QAAQ,CAAC8E,IAAI,EAAE,CAAA;AACjB,SAAA;AACF,OAAA;AAEA,MAAA,IAAItC,eAAe,EAAE;QACnBb,SAAS,CAAC2C,IAAI,CAAC;AACbtE,UAAAA,QAAQ,EAARA,QAAQ;AACRyB,UAAAA,OAAO,EAAPA,OAAO;AACPpB,UAAAA,KAAK,EAAEmD,aAAa;AACpBP,UAAAA,mBAAmB,EAAnBA,mBAAAA;AACF,SAAC,CAAC,CAAA;AACJ,OAAA;AACF,KAAC,CAAC,CAAA;AAEFjE,IAAAA,yBAAyB,CAAC,YAAM;AAAA,MAAA,IAAA+F,qBAAA,CAAA;MAC9B,IAAI,CAACzE,MAAM,EAAE;AACX,QAAA,OAAA;AACF,OAAA;AAEA,MAAA,IAAON,QAAQ,GAAIkD,UAAU,CAAtBlD,QAAQ,CAAA;MAEfA,QAAQ,CAAC0E,QAAQ,CAAC;QAChB7F,aAAa,EAAAlB,MAAA,CAAAiB,MAAA,KACRoB,QAAQ,CAACK,KAAK,CAACxB,aAAa,EAAA;UAC/BC,SAAS,EAAA,EAAA,CAAAC,MAAA,CACJ,CAAC,EAAAgG,qBAAA,GAAA/E,QAAQ,CAACK,KAAK,CAACxB,aAAa,KAA5BkG,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAA,CAA8BjG,SAAS,KAAI,EAAE,EAAEkG,MAAM,CACvD,UAAAC,KAAA,EAAA;AAAA,YAAA,IAAEtF,IAAI,GAAAsF,KAAA,CAAJtF,IAAI,CAAA;YAAA,OAAMA,IAAI,KAAK,cAAc,CAAA;AAAA,WACrC,CAAC,EACD,CAAA;AACEA,YAAAA,IAAI,EAAE,cAAc;AACpBuF,YAAAA,OAAO,EAAE,IAAI;AACbC,YAAAA,KAAK,EAAE,aAAa;YACpBC,QAAQ,EAAE,CAAC,eAAe,CAAC;AAC3BrF,YAAAA,EAAE,EAAFA,SAAAA,EAAEA,CAAAsF,KAAA,EAAU;AAAA,cAAA,IAAAC,oBAAA,CAAA;AAAA,cAAA,IAARvB,KAAK,GAAAsB,KAAA,CAALtB,KAAK,CAAA;cACP,IAAMwB,QAAQ,GAAAD,CAAAA,oBAAA,GAAGvB,KAAK,CAACyB,aAAa,KAAA,IAAA,GAAA,KAAA,CAAA,GAAnBF,oBAAA,CAAqBR,IAAI,CAAA;;AAE1C;AACA;cACA,IACE3H,KAAK,CAACE,SAAS,KAAK0G,KAAK,CAAC1G,SAAS,IACnCF,KAAK,CAACG,eAAe,MAAKiI,QAAQ,IAARA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,QAAQ,CAAEE,iBAAiB,CACrDtI,IAAAA,KAAK,CAACI,OAAO,MAAKgI,QAAQ,IAARA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,QAAQ,CAAEG,gBAAgB,CAC5C,EAAA;AACA5C,gBAAAA,QAAQ,CAAC;kBACPzF,SAAS,EAAE0G,KAAK,CAAC1G,SAAS;AAC1BC,kBAAAA,eAAe,EAAEiI,QAAQ,IAARA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,QAAQ,CAAEE,iBAAiB;AAC5ClI,kBAAAA,OAAO,EAAEgI,QAAQ,IAARA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,QAAQ,CAAEG,gBAAAA;AACrB,iBAAC,CAAC,CAAA;AACJ,eAAA;AAEA3B,cAAAA,KAAK,CAAC4B,UAAU,CAAC1F,MAAM,GAAG,EAAE,CAAA;AAC9B,aAAA;WACD,CAAA,CAAA;AACF,SAAA,CAAA;AAEL,OAAC,CAAC,CAAA;AACJ,KAAC,GAAG9C,KAAK,CAACE,SAAS,EAAEF,KAAK,CAACG,eAAe,EAAEH,KAAK,CAACI,OAAO,CAAA,CAAAwB,MAAA,CAAKkF,IAAI,CAAC,CAAC,CAAA;AAEpE,IAAA,oBACE2B,KAAA,CAAA3I,aAAA,CAAA2I,KAAA,CAAAC,QAAA,EAAA,IAAA,EACGrE,QAAQ,gBACLsE,YAAY,CAACtE,QAAQ,EAAE;AACrB5E,MAAAA,GAAG,EAAHA,SAAAA,GAAGA,CAACC,IAAI,EAAE;QACRqG,UAAU,CAACtG,GAAG,GAAGC,IAAI,CAAA;AACrB;QACA,IAAI2E,QAAQ,CAACnB,KAAK,IAAImB,QAAQ,CAACnB,KAAK,CAACzD,GAAG,EAAE;UACxCD,WAAW,CAAC6E,QAAQ,CAACnB,KAAK,CAACzD,GAAG,EAAEC,IAAI,CAAC,CAAA;AACvC,SAAA;AACF,OAAA;AACF,KAAC,CAAC,GACF,IAAI,EACP8F,OAAO,iBACNoD,YAAY,CACVzF,MAAM,GACFA,MAAM,CACJpD,gBAAgB,CAACC,KAAK,CAAC,EACvB6F,gBAAgB,EAChBE,UAAU,CAAClD,QACb,CAAC,GACDyB,OAAO,EACXyB,UAAU,CAACC,SACb,CACF,CAAC,CAAA;AAEP,GAAA;AAEA,EAAA,OAAO7B,KAAK,CAAA;AACd;;;ACxPe,SAAS0E,qBAAqBA,CAACC,eAAe,EAAE;AAC7D,EAAA,OAAO,SAASC,YAAYA,CAAAC,KAAA,EAA0C;AAAA,IAAA,IAAA5E,IAAA,GAAA4E,KAAA,cAAJ,EAAE,GAAAA,KAAA;MAAAtE,aAAA,GAAAN,IAAA,CAAtCO,QAAQ;AAARA,MAAAA,QAAQ,GAAAD,aAAA,KAAG,KAAA,CAAA,GAAA,KAAK,GAAAA,aAAA;MAAAuE,cAAA,GAAA7E,IAAA,CAAE8E,SAAS;AAATA,MAAAA,SAAS,GAAAD,cAAA,KAAG,KAAA,CAAA,GAAA,EAAE,GAAAA,cAAA,CAAA;AAC5D,IAAA,IAAA3D,SAAA,GAA8BC,QAAQ,CAAC,KAAK,CAAC;AAAtCC,MAAAA,OAAO,GAAAF,SAAA,CAAA,CAAA,CAAA;AAAEG,MAAAA,UAAU,GAAAH,SAAA,CAAA,CAAA,CAAA,CAAA;IAC1B,IAAMS,UAAU,GAAG/D,aAAa,CAAC;AAC/BqC,MAAAA,QAAQ,EAAE,EAAE;AACZ4B,MAAAA,OAAO,EAAE,CAAA;AACX,KAAC,CAAC,CAAA;AAEFpE,IAAAA,yBAAyB,CAAC,YAAM;MAC9B,IAAI,CAAC2D,OAAO,EAAE;QACZC,UAAU,CAAC,IAAI,CAAC,CAAA;AAChB,QAAA,OAAA;AACF,OAAA;AAEA,MAAA,IAAOpB,QAAQ,GAAgB0B,UAAU,CAAlC1B,QAAQ;QAAE8E,UAAU,GAAIpD,UAAU,CAAxBoD,UAAU,CAAA;MAE3B,IAAI,CAACA,UAAU,EAAE;AACf,QAAA,IAAI5F,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;AACzCC,UAAAA,OAAO,CAAC0F,KAAK,CACX,CACE,mEAAmE,EACnE,2CAA2C,CAC5C,CAACxF,IAAI,CAAC,GAAG,CACZ,CAAC,CAAA;AACH,SAAA;AAEA,QAAA,OAAA;AACF,OAAA;MAEA,IAAMf,QAAQ,GAAGiG,eAAe,CAC9BzE,QAAQ,CAACgF,GAAG,CAAC,UAACC,KAAK,EAAA;QAAA,OAAKA,KAAK,CAACzG,QAAQ,CAAA;AAAA,OAAA,CAAC,EAAArC,MAAA,CAAAiB,MAAA,CAElC0H,EAAAA,EAAAA,UAAU,CAACjG,KAAK,EAAA;AACnBxB,QAAAA,aAAa,EAAEyH,UAAU,CAACtG,QAAQ,CAACK,KAAK,CAACxB,aAAa;AACtDwH,QAAAA,SAAS,EAATA,SAAS;QACT5C,OAAO,EAAA,CAAG5D,eAAe,CAAA,CAAAd,MAAA,CAAMuH,UAAU,CAACjG,KAAK,CAACoD,OAAO,IAAI,EAAE,CAAA;AAAE,OAAA,CAEnE,CAAC,CAAA;MAEDP,UAAU,CAAClD,QAAQ,GAAGA,QAAQ,CAAA;AAE9B,MAAA,IAAI8B,QAAQ,EAAE;QACZ9B,QAAQ,CAACoE,OAAO,EAAE,CAAA;AACpB,OAAA;AAEA,MAAA,OAAO,YAAM;QACXpE,QAAQ,CAACuE,OAAO,EAAE,CAAA;QAClBrB,UAAU,CAAC1B,QAAQ,GAAGA,QAAQ,CAACwD,MAAM,CACnC,UAAAnB,KAAA,EAAA;AAAA,UAAA,IAAE7D,QAAQ,GAAA6D,KAAA,CAAR7D,QAAQ,CAAA;AAAA,UAAA,OAAM,CAACA,QAAQ,CAAC+D,KAAK,CAAC2C,WAAW,CAAA;AAAA,SAC7C,CAAC,CAAA;OACF,CAAA;AACH,KAAC,EAAE,CAAC/D,OAAO,CAAC,CAAC,CAAA;AAEb3D,IAAAA,yBAAyB,CAAC,YAAM;MAC9B,IAAI,CAAC2D,OAAO,EAAE;AACZ,QAAA,OAAA;AACF,OAAA;AAEA,MAAA,IAAIO,UAAU,CAACE,OAAO,KAAK,CAAC,EAAE;QAC5BF,UAAU,CAACE,OAAO,EAAE,CAAA;AACpB,QAAA,OAAA;AACF,OAAA;AAEA,MAAA,IAAO5B,QAAQ,GAA0B0B,UAAU,CAA5C1B,QAAQ;QAAExB,QAAQ,GAAgBkD,UAAU,CAAlClD,QAAQ;QAAEsG,UAAU,GAAIpD,UAAU,CAAxBoD,UAAU,CAAA;AAErC,MAAA,IAAI,EAAEtG,QAAQ,IAAIsG,UAAU,CAAC,EAAE;AAC7B,QAAA,OAAA;AACF,OAAA;AAEA,MAAA,IAAAK,iBAAA,GAA4BL,UAAU,CAACjG,KAAK,CAAA;QAA9BsG,iBAAA,CAAPlF,OAAO,CAAA;AAAKpB,YAAAA,KAAK,GAAA+B,6BAAA,CAAAuE,iBAAA,EAAAtE,WAAA,EAAA;AAExBrC,MAAAA,QAAQ,CAAC0E,QAAQ,CACfnG,iBAAiB,CAACyB,QAAQ,CAACK,KAAK,EAAA1C,MAAA,CAAAiB,MAAA,KAC3ByB,KAAK,EAAA;AACRgG,QAAAA,SAAS,EAATA,SAAAA;AAAS,OAAA,CACV,CACH,CAAC,CAAA;MAEDrG,QAAQ,CAAC4G,YAAY,CAACpF,QAAQ,CAACgF,GAAG,CAAC,UAACC,KAAK,EAAA;QAAA,OAAKA,KAAK,CAACzG,QAAQ,CAAA;AAAA,OAAA,CAAC,CAAC,CAAA;AAE9D,MAAA,IAAI8B,QAAQ,EAAE;QACZ9B,QAAQ,CAACoE,OAAO,EAAE,CAAA;AACpB,OAAC,MAAM;QACLpE,QAAQ,CAAC6E,MAAM,EAAE,CAAA;AACnB,OAAA;AACF,KAAC,CAAC,CAAA;IAEF,OAAOgC,OAAO,CAAC,YAAM;AACnB,MAAA,IAAMC,MAAM,GAAG;AACbpD,QAAAA,IAAI,EAAER,UAAU;AAChBoB,QAAAA,IAAI,EAAJA,SAAAA,IAAIA,CAACZ,IAAI,EAAE;UACTR,UAAU,CAACoD,UAAU,GAAG5C,IAAI,CAAA;AAC5BR,UAAAA,UAAU,CAACD,mBAAmB,GAAGS,IAAI,CAACT,mBAAmB,CAAA;SAC1D;QACDuB,OAAO,EAAA,SAAPA,OAAOA,GAAG;UACRtB,UAAU,CAACoD,UAAU,GAAG,IAAI,CAAA;AAC9B,SAAA;OACD,CAAA;AAED,MAAA,IAAMS,MAAM,GAAG;AACbzC,QAAAA,IAAI,EAAJA,SAAAA,IAAIA,CAACZ,IAAI,EAAE;UAAA,IAAAsD,oBAAA,EAAAC,qBAAA,CAAA;UACT/D,UAAU,CAAC1B,QAAQ,GAAG0B,UAAU,CAAC1B,QAAQ,CAACwD,MAAM,CAC9C,UAAAC,KAAA,EAAA;AAAA,YAAA,IAAEjF,QAAQ,GAAAiF,KAAA,CAARjF,QAAQ,CAAA;AAAA,YAAA,OAAM0D,IAAI,CAAC1D,QAAQ,KAAKA,QAAQ,CAAA;AAAA,WAC5C,CAAC,CAAA;AACDkD,UAAAA,UAAU,CAAC1B,QAAQ,CAAClD,IAAI,CAACoF,IAAI,CAAC,CAAA;AAE9B,UAAA,IACE,CAAAsD,oBAAA,GAAA9D,UAAU,CAAClD,QAAQ,KAAnBgH,IAAAA,IAAAA,oBAAA,CAAqBjD,KAAK,CAACmD,SAAS,IACpC,CAAA,CAAAD,qBAAA,GAAA/D,UAAU,CAAClD,QAAQ,KAAA,IAAA,GAAA,KAAA,CAAA,GAAnBiH,qBAAA,CAAqBlD,KAAK,CAACC,yBAAyB,MAClDN,IAAI,CAAC1D,QAAQ,EACf;YACAkD,UAAU,CAACD,mBAAmB,IAAA,IAAA,IAA9BC,UAAU,CAACD,mBAAmB,CAAGS,IAAI,CAACjC,OAAO,CAAC,CAAA;AAChD,WAAA;AAEA,UAAA,IAAIyB,UAAU,CAAClD,QAAQ,IAAI,CAACkD,UAAU,CAAClD,QAAQ,CAAC+D,KAAK,CAAC2C,WAAW,EAAE;AACjExD,YAAAA,UAAU,CAAClD,QAAQ,CAAC4G,YAAY,CAC9B1D,UAAU,CAAC1B,QAAQ,CAACgF,GAAG,CAAC,UAACC,KAAK,EAAA;cAAA,OAAKA,KAAK,CAACzG,QAAQ,CAAA;AAAA,aAAA,CACnD,CAAC,CAAA;AACH,WAAA;SACD;AACDwE,QAAAA,OAAO,EAAPA,SAAAA,OAAOA,CAACxE,QAAQ,EAAE;UAChBkD,UAAU,CAAC1B,QAAQ,GAAG0B,UAAU,CAAC1B,QAAQ,CAACwD,MAAM,CAC9C,UAACtB,IAAI,EAAA;AAAA,YAAA,OAAKA,IAAI,CAAC1D,QAAQ,KAAKA,QAAQ,CAAA;AAAA,WACtC,CAAC,CAAA;AAED,UAAA,IAAIkD,UAAU,CAAClD,QAAQ,IAAI,CAACkD,UAAU,CAAClD,QAAQ,CAAC+D,KAAK,CAAC2C,WAAW,EAAE;AACjExD,YAAAA,UAAU,CAAClD,QAAQ,CAAC4G,YAAY,CAC9B1D,UAAU,CAAC1B,QAAQ,CAACgF,GAAG,CAAC,UAACC,KAAK,EAAA;cAAA,OAAKA,KAAK,CAACzG,QAAQ,CAAA;AAAA,aAAA,CACnD,CAAC,CAAA;AACH,WAAA;AACF,SAAA;OACD,CAAA;AAED,MAAA,OAAO,CAAC8G,MAAM,EAAEC,MAAM,CAAC,CAAA;KACxB,EAAE,EAAE,CAAC,CAAA;GACP,CAAA;AACH;;;AC1IA,iBAAe,CAAA,UAACzF,KAAK,EAAE6F,YAAY,EAAA;EAAA,oBACjCC,YAAU,CAAC,SAASC,YAAYA,CAAA9F,IAAA,EAAuB3E,KAAG,EAAE;AAAA,IAAA,IAA1B4E,QAAQ,GAAAD,IAAA,CAARC,QAAQ;AAAKnB,MAAAA,KAAK,GAAA+B,6BAAA,CAAAb,IAAA,EAAAc,SAAA,CAAA,CAAA;AAClD,IAAA,oBACEuD,KAAA,CAAA3I,aAAA,CAACqE,KAAK,EAAA3D,MAAA,CAAAiB,MAAA,KAASuI,YAAY,EAAK9G,KAAK,CAClCmB,EAAAA,QAAQ,gBACLsE,YAAY,CAACtE,QAAQ,EAAE;AACrB5E,MAAAA,GAAG,EAAE,SAALA,GAAGA,CAAGC,IAAI,EAAK;AACb,QAAA,IAAID,KAAG,EAAE;AACP,UAAA,IAAI,OAAOA,KAAG,KAAK,UAAU,EAAE;YAC7BA,KAAG,CAACC,IAAI,CAAC,CAAA;AACX,WAAC,MAAM;YACLD,KAAG,CAACG,OAAO,GAAGF,IAAI,CAAA;AACpB,WAAA;AACF,SAAA;AACA;QACA,IAAI2E,QAAQ,CAACnB,KAAK,IAAImB,QAAQ,CAACnB,KAAK,CAACzD,GAAG,EAAE;UACxCD,WAAW,CAAC6E,QAAQ,CAACnB,KAAK,CAACzD,GAAG,EAAEC,IAAI,CAAC,CAAA;AACvC,SAAA;AACF,OAAA;KACD,CAAC,GACF,IACC,CAAC,CAAA;AAEZ,GAAC,CAAC,CAAA;AAAA,CAAA;;ACrBJ,IAAMqJ,YAAY,gBAAGF,qBAAqB,CAACC,eAAe,EAAC;AAE3D,YAAA,aAAemB,UAAU,cAAChG,cAAc,CAACC,KAAK,CAAC,CAAC;;;;"}
{"version":3,"file":"tippy-react-headless.umd.min.js","sources":["../../src/utils.js","../../src/util-hooks.js","../../src/className-plugin.js","../../src/Tippy.js","../../src/useSingleton.js","../../src/forwardRef.js","../../src/headless.js"],"sourcesContent":["export const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined';\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node);\n    } else if (ref.hasOwnProperty('current')) {\n      ref.current = node;\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return isBrowser && document.createElement('div');\n}\n\nexport function toDataAttributes(attrs) {\n  const dataAttrs = {\n    'data-placement': attrs.placement,\n  };\n\n  if (attrs.referenceHidden) {\n    dataAttrs['data-reference-hidden'] = '';\n  }\n\n  if (attrs.escaped) {\n    dataAttrs['data-escaped'] = '';\n  }\n\n  return dataAttrs;\n}\n\nfunction deepEqual(x, y) {\n  if (x === y) {\n    return true;\n  } else if (\n    typeof x === 'object' &&\n    x != null &&\n    typeof y === 'object' &&\n    y != null\n  ) {\n    if (Object.keys(x).length !== Object.keys(y).length) {\n      return false;\n    }\n\n    for (const prop in x) {\n      if (y.hasOwnProperty(prop)) {\n        if (!deepEqual(x[prop], y[prop])) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function uniqueByShape(arr) {\n  const output = [];\n\n  arr.forEach((item) => {\n    if (!output.find((outputItem) => deepEqual(item, outputItem))) {\n      output.push(item);\n    }\n  });\n\n  return output;\n}\n\nexport function deepPreserveProps(instanceProps, componentProps) {\n  return {\n    ...componentProps,\n    popperOptions: {\n      ...instanceProps.popperOptions,\n      ...componentProps.popperOptions,\n      modifiers: uniqueByShape([\n        ...(instanceProps.popperOptions?.modifiers || []),\n        ...(componentProps.popperOptions?.modifiers || []),\n      ]),\n    },\n  };\n}\n","import {isBrowser} from './utils';\nimport {useLayoutEffect, useEffect, useRef} from 'react';\n\nexport const useIsomorphicLayoutEffect = isBrowser\n  ? useLayoutEffect\n  : useEffect;\n\nexport function useMutableBox(initialValue) {\n  // Using refs instead of state as it's recommended to not store imperative\n  // values in state due to memory problems in React(?)\n  const ref = useRef();\n\n  if (!ref.current) {\n    ref.current =\n      typeof initialValue === 'function' ? initialValue() : initialValue;\n  }\n\n  return ref.current;\n}\n","function updateClassName(box, action, classNames) {\n  classNames.split(/\\s+/).forEach((name) => {\n    if (name) {\n      box.classList[action](name);\n    }\n  });\n}\n\nexport const classNamePlugin = {\n  name: 'className',\n  defaultValue: '',\n  fn(instance) {\n    const box = instance.popper.firstElementChild;\n    const isDefaultRenderFn = () => !!instance.props.render?.$$tippy;\n\n    function add() {\n      if (instance.props.className && !isDefaultRenderFn()) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            [\n              'rb-tippyjs-react: Cannot use `className` prop in conjunction with',\n              '`render` prop. Place the className on the element you are',\n              'rendering.',\n            ].join(' '),\n          );\n        }\n\n        return;\n      }\n\n      updateClassName(box, 'add', instance.props.className);\n    }\n\n    function remove() {\n      if (isDefaultRenderFn()) {\n        updateClassName(box, 'remove', instance.props.className);\n      }\n    }\n\n    return {\n      onCreate: add,\n      onBeforeUpdate: remove,\n      onAfterUpdate: add,\n    };\n  },\n};\n","import React, {cloneElement, useState} from 'react';\nimport {createPortal} from 'react-dom';\nimport {\n  preserveRef,\n  ssrSafeCreateDiv,\n  toDataAttributes,\n  deepPreserveProps,\n} from './utils';\nimport {useMutableBox, useIsomorphicLayoutEffect} from './util-hooks';\nimport {classNamePlugin} from './className-plugin';\n\nexport default function TippyGenerator(tippy) {\n  function Tippy({\n    children,\n    content,\n    visible,\n    singleton,\n    render,\n    reference,\n    disabled = false,\n    ignoreAttributes = true,\n    // Filter React development reserved props\n    // added by babel-preset-react dev plugins:\n    // transform-react-jsx-self and transform-react-jsx-source\n    __source,\n    __self,\n    ...restOfNativeProps\n  }) {\n    const isControlledMode = visible !== undefined;\n    const isSingletonMode = singleton !== undefined;\n\n    const [mounted, setMounted] = useState(false);\n    const [attrs, setAttrs] = useState({});\n    const [singletonContent, setSingletonContent] = useState();\n    const mutableBox = useMutableBox(() => ({\n      container: ssrSafeCreateDiv(),\n      renders: 1,\n    }));\n\n    const props = {\n      ignoreAttributes,\n      ...restOfNativeProps,\n      content: mutableBox.container,\n    };\n\n    if (isControlledMode) {\n      if (process.env.NODE_ENV !== 'production') {\n        ['trigger', 'hideOnClick', 'showOnCreate'].forEach(\n          (nativeStateProp) => {\n            if (props[nativeStateProp] !== undefined) {\n              console.warn(\n                [\n                  `rb-tippyjs-react: Cannot specify \\`${nativeStateProp}\\` prop in`,\n                  `controlled mode (\\`visible\\` prop)`,\n                ].join(' '),\n              );\n            }\n          },\n        );\n      }\n\n      props.trigger = 'manual';\n      props.hideOnClick = false;\n    }\n\n    if (isSingletonMode) {\n      disabled = true;\n    }\n\n    let computedProps = props;\n    const plugins = props.plugins || [];\n\n    if (render) {\n      computedProps = {\n        ...props,\n        plugins:\n          isSingletonMode && singleton.data != null\n            ? [\n                ...plugins,\n                {\n                  fn() {\n                    return {\n                      onTrigger(instance, event) {\n                        const node = singleton.data.children.find(\n                          ({instance}) =>\n                            instance.reference === event.currentTarget,\n                        );\n                        instance.state.$$activeSingletonInstance =\n                          node.instance;\n                        setSingletonContent(node.content);\n                      },\n                    };\n                  },\n                },\n              ]\n            : plugins,\n        render: () => ({popper: mutableBox.container}),\n      };\n    }\n\n    const deps = [reference].concat(children ? [children.type] : []);\n\n    // CREATE\n    useIsomorphicLayoutEffect(() => {\n      let element = reference;\n      if (reference && reference.hasOwnProperty('current')) {\n        element = reference.current;\n      }\n\n      const instance = tippy(element || mutableBox.ref || ssrSafeCreateDiv(), {\n        ...computedProps,\n        plugins: [classNamePlugin, ...(props.plugins || [])],\n      });\n\n      mutableBox.instance = instance;\n\n      if (disabled) {\n        instance.disable();\n      }\n\n      if (visible) {\n        instance.show();\n      }\n\n      if (isSingletonMode) {\n        singleton.hook({\n          instance,\n          content,\n          props: computedProps,\n          setSingletonContent,\n        });\n      }\n\n      setMounted(true);\n\n      return () => {\n        instance.destroy();\n        singleton?.cleanup(instance);\n      };\n    }, deps);\n\n    // UPDATE\n    useIsomorphicLayoutEffect(() => {\n      // Prevent this effect from running on 1st render\n      if (mutableBox.renders === 1) {\n        mutableBox.renders++;\n        return;\n      }\n\n      const {instance} = mutableBox;\n\n      instance.setProps(deepPreserveProps(instance.props, computedProps));\n\n      // Fixes #264\n      instance.popperInstance?.forceUpdate();\n\n      if (disabled) {\n        instance.disable();\n      } else {\n        instance.enable();\n      }\n\n      if (isControlledMode) {\n        if (visible) {\n          instance.show();\n        } else {\n          instance.hide();\n        }\n      }\n\n      if (isSingletonMode) {\n        singleton.hook({\n          instance,\n          content,\n          props: computedProps,\n          setSingletonContent,\n        });\n      }\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      if (!render) {\n        return;\n      }\n\n      const {instance} = mutableBox;\n\n      instance.setProps({\n        popperOptions: {\n          ...instance.props.popperOptions,\n          modifiers: [\n            ...(instance.props.popperOptions?.modifiers || []).filter(\n              ({name}) => name !== '$$tippyReact',\n            ),\n            {\n              name: '$$tippyReact',\n              enabled: true,\n              phase: 'beforeWrite',\n              requires: ['computeStyles'],\n              fn({state}) {\n                const hideData = state.modifiersData?.hide;\n\n                // WARNING: this is a high-risk path that can cause an infinite\n                // loop. This expression _must_ evaluate to false when required\n                if (\n                  attrs.placement !== state.placement ||\n                  attrs.referenceHidden !== hideData?.isReferenceHidden ||\n                  attrs.escaped !== hideData?.hasPopperEscaped\n                ) {\n                  setAttrs({\n                    placement: state.placement,\n                    referenceHidden: hideData?.isReferenceHidden,\n                    escaped: hideData?.hasPopperEscaped,\n                  });\n                }\n\n                state.attributes.popper = {};\n              },\n            },\n          ],\n        },\n      });\n    }, [attrs.placement, attrs.referenceHidden, attrs.escaped, ...deps]);\n\n    return (\n      <>\n        {children\n          ? cloneElement(children, {\n              ref(node) {\n                mutableBox.ref = node;\n                // React 19 compatible way to handle refs\n                if (children.props && children.props.ref) {\n                  preserveRef(children.props.ref, node);\n                }\n              },\n            })\n          : null}\n        {mounted &&\n          createPortal(\n            render\n              ? render(\n                  toDataAttributes(attrs),\n                  singletonContent,\n                  mutableBox.instance,\n                )\n              : content,\n            mutableBox.container,\n          )}\n      </>\n    );\n  }\n\n  return Tippy;\n}\n","import {useMutableBox, useIsomorphicLayoutEffect} from './util-hooks';\nimport {deepPreserveProps} from './utils';\nimport {classNamePlugin} from './className-plugin';\nimport {useMemo, useState} from 'react';\n\nexport default function useSingletonGenerator(createSingleton) {\n  return function useSingleton({disabled = false, overrides = []} = {}) {\n    const [mounted, setMounted] = useState(false);\n    const mutableBox = useMutableBox({\n      children: [],\n      renders: 1,\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      if (!mounted) {\n        setMounted(true);\n        return;\n      }\n\n      const {children, sourceData} = mutableBox;\n\n      if (!sourceData) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(\n            [\n              'rb-tippyjs-react: The `source` variable from `useSingleton()` has',\n              'not been passed to a <Tippy /> component.',\n            ].join(' '),\n          );\n        }\n\n        return;\n      }\n\n      const instance = createSingleton(\n        children.map((child) => child.instance),\n        {\n          ...sourceData.props,\n          popperOptions: sourceData.instance.props.popperOptions,\n          overrides,\n          plugins: [classNamePlugin, ...(sourceData.props.plugins || [])],\n        },\n      );\n\n      mutableBox.instance = instance;\n\n      if (disabled) {\n        instance.disable();\n      }\n\n      return () => {\n        instance.destroy();\n        mutableBox.children = children.filter(\n          ({instance}) => !instance.state.isDestroyed,\n        );\n      };\n    }, [mounted]);\n\n    useIsomorphicLayoutEffect(() => {\n      if (!mounted) {\n        return;\n      }\n\n      if (mutableBox.renders === 1) {\n        mutableBox.renders++;\n        return;\n      }\n\n      const {children, instance, sourceData} = mutableBox;\n\n      if (!(instance && sourceData)) {\n        return;\n      }\n\n      const {content, ...props} = sourceData.props;\n\n      instance.setProps(\n        deepPreserveProps(instance.props, {\n          ...props,\n          overrides,\n        }),\n      );\n\n      instance.setInstances(children.map((child) => child.instance));\n\n      if (disabled) {\n        instance.disable();\n      } else {\n        instance.enable();\n      }\n    });\n\n    return useMemo(() => {\n      const source = {\n        data: mutableBox,\n        hook(data) {\n          mutableBox.sourceData = data;\n          mutableBox.setSingletonContent = data.setSingletonContent;\n        },\n        cleanup() {\n          mutableBox.sourceData = null;\n        },\n      };\n\n      const target = {\n        hook(data) {\n          mutableBox.children = mutableBox.children.filter(\n            ({instance}) => data.instance !== instance,\n          );\n          mutableBox.children.push(data);\n\n          if (\n            mutableBox.instance?.state.isMounted &&\n            mutableBox.instance?.state.$$activeSingletonInstance ===\n              data.instance\n          ) {\n            mutableBox.setSingletonContent?.(data.content);\n          }\n\n          if (mutableBox.instance && !mutableBox.instance.state.isDestroyed) {\n            mutableBox.instance.setInstances(\n              mutableBox.children.map((child) => child.instance),\n            );\n          }\n        },\n        cleanup(instance) {\n          mutableBox.children = mutableBox.children.filter(\n            (data) => data.instance !== instance,\n          );\n\n          if (mutableBox.instance && !mutableBox.instance.state.isDestroyed) {\n            mutableBox.instance.setInstances(\n              mutableBox.children.map((child) => child.instance),\n            );\n          }\n        },\n      };\n\n      return [source, target];\n    }, []);\n  };\n}\n","import React, {cloneElement, forwardRef} from 'react';\nimport {preserveRef} from './utils';\n\nexport default (Tippy, defaultProps) =>\n  forwardRef(function TippyWrapper({children, ...props}, ref) {\n    return (\n      <Tippy {...{...defaultProps, ...props}}>\n        {children\n          ? cloneElement(children, {\n              ref: (node) => {\n                if (ref) {\n                  if (typeof ref === 'function') {\n                    ref(node);\n                  } else {\n                    ref.current = node;\n                  }\n                }\n                // React 19 compatible way to handle refs\n                if (children.props && children.props.ref) {\n                  preserveRef(children.props.ref, node);\n                }\n              },\n            })\n          : null}\n      </Tippy>\n    );\n  });\n","import tippy, {createSingleton} from 'tippy.js/headless';\nimport TippyGenerator from './Tippy';\nimport useSingletonGenerator from './useSingleton';\nimport forwardRef from './forwardRef';\n\nconst useSingleton = useSingletonGenerator(createSingleton);\n\nexport default forwardRef(TippyGenerator(tippy), {render: () => ''});\nexport {useSingleton, tippy};\n"],"names":["isBrowser","window","document","preserveRef","ref","node","hasOwnProperty","current","ssrSafeCreateDiv","createElement","deepEqual","x","y","Object","keys","length","prop","uniqueByShape","arr","output","forEach","item","find","outputItem","push","deepPreserveProps","instanceProps","componentProps","_instanceProps$popper","_componentProps$poppe","assign","popperOptions","modifiers","concat","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useMutableBox","initialValue","useRef","updateClassName","box","action","classNames","split","name","classList","classNamePlugin","defaultValue","fn","instance","popper","firstElementChild","isDefaultRenderFn","_instance$props$rende","props","render","$$tippy","add","className","onCreate","onBeforeUpdate","onAfterUpdate","TippyGenerator","tippy","_ref","children","content","visible","singleton","reference","_ref$disabled","disabled","_ref$ignoreAttributes","ignoreAttributes","__source","__self","restOfNativeProps","_objectWithoutPropertiesLoose","_excluded","isControlledMode","undefined","isSingletonMode","_useState","useState","mounted","setMounted","_useState2","attrs","setAttrs","_useState3","singletonContent","setSingletonContent","mutableBox","container","renders","trigger","hideOnClick","computedProps","plugins","data","onTrigger","event","_ref2","currentTarget","state","$$activeSingletonInstance","deps","type","element","disable","show","hook","destroy","cleanup","_instance$popperInsta","setProps","popperInstance","forceUpdate","enable","hide","_instance$props$poppe","filter","_ref3","enabled","phase","requires","_ref4","_state$modifiersData","hideData","modifiersData","placement","referenceHidden","isReferenceHidden","escaped","hasPopperEscaped","attributes","React","Fragment","cloneElement","createPortal","dataAttrs","toDataAttributes","useSingletonGenerator","createSingleton","_temp","_ref$overrides","overrides","sourceData","map","child","isDestroyed","_sourceData$props","setInstances","useMemo","_mutableBox$instance","_mutableBox$instance2","isMounted","forwardRef","Tippy","defaultProps","useSingleton","headless"],"mappings":"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"}
{"version":3,"file":"tippy-react-headless.umd.js","sources":["../../src/utils.js","../../src/util-hooks.js","../../src/className-plugin.js","../../src/Tippy.js","../../src/useSingleton.js","../../src/forwardRef.js","../../src/headless.js"],"sourcesContent":["export const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined';\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node);\n    } else if (ref.hasOwnProperty('current')) {\n      ref.current = node;\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return isBrowser && document.createElement('div');\n}\n\nexport function toDataAttributes(attrs) {\n  const dataAttrs = {\n    'data-placement': attrs.placement,\n  };\n\n  if (attrs.referenceHidden) {\n    dataAttrs['data-reference-hidden'] = '';\n  }\n\n  if (attrs.escaped) {\n    dataAttrs['data-escaped'] = '';\n  }\n\n  return dataAttrs;\n}\n\nfunction deepEqual(x, y) {\n  if (x === y) {\n    return true;\n  } else if (\n    typeof x === 'object' &&\n    x != null &&\n    typeof y === 'object' &&\n    y != null\n  ) {\n    if (Object.keys(x).length !== Object.keys(y).length) {\n      return false;\n    }\n\n    for (const prop in x) {\n      if (y.hasOwnProperty(prop)) {\n        if (!deepEqual(x[prop], y[prop])) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function uniqueByShape(arr) {\n  const output = [];\n\n  arr.forEach((item) => {\n    if (!output.find((outputItem) => deepEqual(item, outputItem))) {\n      output.push(item);\n    }\n  });\n\n  return output;\n}\n\nexport function deepPreserveProps(instanceProps, componentProps) {\n  return {\n    ...componentProps,\n    popperOptions: {\n      ...instanceProps.popperOptions,\n      ...componentProps.popperOptions,\n      modifiers: uniqueByShape([\n        ...(instanceProps.popperOptions?.modifiers || []),\n        ...(componentProps.popperOptions?.modifiers || []),\n      ]),\n    },\n  };\n}\n","import {isBrowser} from './utils';\nimport {useLayoutEffect, useEffect, useRef} from 'react';\n\nexport const useIsomorphicLayoutEffect = isBrowser\n  ? useLayoutEffect\n  : useEffect;\n\nexport function useMutableBox(initialValue) {\n  // Using refs instead of state as it's recommended to not store imperative\n  // values in state due to memory problems in React(?)\n  const ref = useRef();\n\n  if (!ref.current) {\n    ref.current =\n      typeof initialValue === 'function' ? initialValue() : initialValue;\n  }\n\n  return ref.current;\n}\n","function updateClassName(box, action, classNames) {\n  classNames.split(/\\s+/).forEach((name) => {\n    if (name) {\n      box.classList[action](name);\n    }\n  });\n}\n\nexport const classNamePlugin = {\n  name: 'className',\n  defaultValue: '',\n  fn(instance) {\n    const box = instance.popper.firstElementChild;\n    const isDefaultRenderFn = () => !!instance.props.render?.$$tippy;\n\n    function add() {\n      if (instance.props.className && !isDefaultRenderFn()) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            [\n              'rb-tippyjs-react: Cannot use `className` prop in conjunction with',\n              '`render` prop. Place the className on the element you are',\n              'rendering.',\n            ].join(' '),\n          );\n        }\n\n        return;\n      }\n\n      updateClassName(box, 'add', instance.props.className);\n    }\n\n    function remove() {\n      if (isDefaultRenderFn()) {\n        updateClassName(box, 'remove', instance.props.className);\n      }\n    }\n\n    return {\n      onCreate: add,\n      onBeforeUpdate: remove,\n      onAfterUpdate: add,\n    };\n  },\n};\n","import React, {cloneElement, useState} from 'react';\nimport {createPortal} from 'react-dom';\nimport {\n  preserveRef,\n  ssrSafeCreateDiv,\n  toDataAttributes,\n  deepPreserveProps,\n} from './utils';\nimport {useMutableBox, useIsomorphicLayoutEffect} from './util-hooks';\nimport {classNamePlugin} from './className-plugin';\n\nexport default function TippyGenerator(tippy) {\n  function Tippy({\n    children,\n    content,\n    visible,\n    singleton,\n    render,\n    reference,\n    disabled = false,\n    ignoreAttributes = true,\n    // Filter React development reserved props\n    // added by babel-preset-react dev plugins:\n    // transform-react-jsx-self and transform-react-jsx-source\n    __source,\n    __self,\n    ...restOfNativeProps\n  }) {\n    const isControlledMode = visible !== undefined;\n    const isSingletonMode = singleton !== undefined;\n\n    const [mounted, setMounted] = useState(false);\n    const [attrs, setAttrs] = useState({});\n    const [singletonContent, setSingletonContent] = useState();\n    const mutableBox = useMutableBox(() => ({\n      container: ssrSafeCreateDiv(),\n      renders: 1,\n    }));\n\n    const props = {\n      ignoreAttributes,\n      ...restOfNativeProps,\n      content: mutableBox.container,\n    };\n\n    if (isControlledMode) {\n      if (process.env.NODE_ENV !== 'production') {\n        ['trigger', 'hideOnClick', 'showOnCreate'].forEach(\n          (nativeStateProp) => {\n            if (props[nativeStateProp] !== undefined) {\n              console.warn(\n                [\n                  `rb-tippyjs-react: Cannot specify \\`${nativeStateProp}\\` prop in`,\n                  `controlled mode (\\`visible\\` prop)`,\n                ].join(' '),\n              );\n            }\n          },\n        );\n      }\n\n      props.trigger = 'manual';\n      props.hideOnClick = false;\n    }\n\n    if (isSingletonMode) {\n      disabled = true;\n    }\n\n    let computedProps = props;\n    const plugins = props.plugins || [];\n\n    if (render) {\n      computedProps = {\n        ...props,\n        plugins:\n          isSingletonMode && singleton.data != null\n            ? [\n                ...plugins,\n                {\n                  fn() {\n                    return {\n                      onTrigger(instance, event) {\n                        const node = singleton.data.children.find(\n                          ({instance}) =>\n                            instance.reference === event.currentTarget,\n                        );\n                        instance.state.$$activeSingletonInstance =\n                          node.instance;\n                        setSingletonContent(node.content);\n                      },\n                    };\n                  },\n                },\n              ]\n            : plugins,\n        render: () => ({popper: mutableBox.container}),\n      };\n    }\n\n    const deps = [reference].concat(children ? [children.type] : []);\n\n    // CREATE\n    useIsomorphicLayoutEffect(() => {\n      let element = reference;\n      if (reference && reference.hasOwnProperty('current')) {\n        element = reference.current;\n      }\n\n      const instance = tippy(element || mutableBox.ref || ssrSafeCreateDiv(), {\n        ...computedProps,\n        plugins: [classNamePlugin, ...(props.plugins || [])],\n      });\n\n      mutableBox.instance = instance;\n\n      if (disabled) {\n        instance.disable();\n      }\n\n      if (visible) {\n        instance.show();\n      }\n\n      if (isSingletonMode) {\n        singleton.hook({\n          instance,\n          content,\n          props: computedProps,\n          setSingletonContent,\n        });\n      }\n\n      setMounted(true);\n\n      return () => {\n        instance.destroy();\n        singleton?.cleanup(instance);\n      };\n    }, deps);\n\n    // UPDATE\n    useIsomorphicLayoutEffect(() => {\n      // Prevent this effect from running on 1st render\n      if (mutableBox.renders === 1) {\n        mutableBox.renders++;\n        return;\n      }\n\n      const {instance} = mutableBox;\n\n      instance.setProps(deepPreserveProps(instance.props, computedProps));\n\n      // Fixes #264\n      instance.popperInstance?.forceUpdate();\n\n      if (disabled) {\n        instance.disable();\n      } else {\n        instance.enable();\n      }\n\n      if (isControlledMode) {\n        if (visible) {\n          instance.show();\n        } else {\n          instance.hide();\n        }\n      }\n\n      if (isSingletonMode) {\n        singleton.hook({\n          instance,\n          content,\n          props: computedProps,\n          setSingletonContent,\n        });\n      }\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      if (!render) {\n        return;\n      }\n\n      const {instance} = mutableBox;\n\n      instance.setProps({\n        popperOptions: {\n          ...instance.props.popperOptions,\n          modifiers: [\n            ...(instance.props.popperOptions?.modifiers || []).filter(\n              ({name}) => name !== '$$tippyReact',\n            ),\n            {\n              name: '$$tippyReact',\n              enabled: true,\n              phase: 'beforeWrite',\n              requires: ['computeStyles'],\n              fn({state}) {\n                const hideData = state.modifiersData?.hide;\n\n                // WARNING: this is a high-risk path that can cause an infinite\n                // loop. This expression _must_ evaluate to false when required\n                if (\n                  attrs.placement !== state.placement ||\n                  attrs.referenceHidden !== hideData?.isReferenceHidden ||\n                  attrs.escaped !== hideData?.hasPopperEscaped\n                ) {\n                  setAttrs({\n                    placement: state.placement,\n                    referenceHidden: hideData?.isReferenceHidden,\n                    escaped: hideData?.hasPopperEscaped,\n                  });\n                }\n\n                state.attributes.popper = {};\n              },\n            },\n          ],\n        },\n      });\n    }, [attrs.placement, attrs.referenceHidden, attrs.escaped, ...deps]);\n\n    return (\n      <>\n        {children\n          ? cloneElement(children, {\n              ref(node) {\n                mutableBox.ref = node;\n                // React 19 compatible way to handle refs\n                if (children.props && children.props.ref) {\n                  preserveRef(children.props.ref, node);\n                }\n              },\n            })\n          : null}\n        {mounted &&\n          createPortal(\n            render\n              ? render(\n                  toDataAttributes(attrs),\n                  singletonContent,\n                  mutableBox.instance,\n                )\n              : content,\n            mutableBox.container,\n          )}\n      </>\n    );\n  }\n\n  return Tippy;\n}\n","import {useMutableBox, useIsomorphicLayoutEffect} from './util-hooks';\nimport {deepPreserveProps} from './utils';\nimport {classNamePlugin} from './className-plugin';\nimport {useMemo, useState} from 'react';\n\nexport default function useSingletonGenerator(createSingleton) {\n  return function useSingleton({disabled = false, overrides = []} = {}) {\n    const [mounted, setMounted] = useState(false);\n    const mutableBox = useMutableBox({\n      children: [],\n      renders: 1,\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      if (!mounted) {\n        setMounted(true);\n        return;\n      }\n\n      const {children, sourceData} = mutableBox;\n\n      if (!sourceData) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(\n            [\n              'rb-tippyjs-react: The `source` variable from `useSingleton()` has',\n              'not been passed to a <Tippy /> component.',\n            ].join(' '),\n          );\n        }\n\n        return;\n      }\n\n      const instance = createSingleton(\n        children.map((child) => child.instance),\n        {\n          ...sourceData.props,\n          popperOptions: sourceData.instance.props.popperOptions,\n          overrides,\n          plugins: [classNamePlugin, ...(sourceData.props.plugins || [])],\n        },\n      );\n\n      mutableBox.instance = instance;\n\n      if (disabled) {\n        instance.disable();\n      }\n\n      return () => {\n        instance.destroy();\n        mutableBox.children = children.filter(\n          ({instance}) => !instance.state.isDestroyed,\n        );\n      };\n    }, [mounted]);\n\n    useIsomorphicLayoutEffect(() => {\n      if (!mounted) {\n        return;\n      }\n\n      if (mutableBox.renders === 1) {\n        mutableBox.renders++;\n        return;\n      }\n\n      const {children, instance, sourceData} = mutableBox;\n\n      if (!(instance && sourceData)) {\n        return;\n      }\n\n      const {content, ...props} = sourceData.props;\n\n      instance.setProps(\n        deepPreserveProps(instance.props, {\n          ...props,\n          overrides,\n        }),\n      );\n\n      instance.setInstances(children.map((child) => child.instance));\n\n      if (disabled) {\n        instance.disable();\n      } else {\n        instance.enable();\n      }\n    });\n\n    return useMemo(() => {\n      const source = {\n        data: mutableBox,\n        hook(data) {\n          mutableBox.sourceData = data;\n          mutableBox.setSingletonContent = data.setSingletonContent;\n        },\n        cleanup() {\n          mutableBox.sourceData = null;\n        },\n      };\n\n      const target = {\n        hook(data) {\n          mutableBox.children = mutableBox.children.filter(\n            ({instance}) => data.instance !== instance,\n          );\n          mutableBox.children.push(data);\n\n          if (\n            mutableBox.instance?.state.isMounted &&\n            mutableBox.instance?.state.$$activeSingletonInstance ===\n              data.instance\n          ) {\n            mutableBox.setSingletonContent?.(data.content);\n          }\n\n          if (mutableBox.instance && !mutableBox.instance.state.isDestroyed) {\n            mutableBox.instance.setInstances(\n              mutableBox.children.map((child) => child.instance),\n            );\n          }\n        },\n        cleanup(instance) {\n          mutableBox.children = mutableBox.children.filter(\n            (data) => data.instance !== instance,\n          );\n\n          if (mutableBox.instance && !mutableBox.instance.state.isDestroyed) {\n            mutableBox.instance.setInstances(\n              mutableBox.children.map((child) => child.instance),\n            );\n          }\n        },\n      };\n\n      return [source, target];\n    }, []);\n  };\n}\n","import React, {cloneElement, forwardRef} from 'react';\nimport {preserveRef} from './utils';\n\nexport default (Tippy, defaultProps) =>\n  forwardRef(function TippyWrapper({children, ...props}, ref) {\n    return (\n      <Tippy {...{...defaultProps, ...props}}>\n        {children\n          ? cloneElement(children, {\n              ref: (node) => {\n                if (ref) {\n                  if (typeof ref === 'function') {\n                    ref(node);\n                  } else {\n                    ref.current = node;\n                  }\n                }\n                // React 19 compatible way to handle refs\n                if (children.props && children.props.ref) {\n                  preserveRef(children.props.ref, node);\n                }\n              },\n            })\n          : null}\n      </Tippy>\n    );\n  });\n","import tippy, {createSingleton} from 'tippy.js/headless';\nimport TippyGenerator from './Tippy';\nimport useSingletonGenerator from './useSingleton';\nimport forwardRef from './forwardRef';\n\nconst useSingleton = useSingletonGenerator(createSingleton);\n\nexport default forwardRef(TippyGenerator(tippy), {render: () => ''});\nexport {useSingleton, tippy};\n"],"names":["isBrowser","window","document","preserveRef","ref","node","hasOwnProperty","current","ssrSafeCreateDiv","createElement","toDataAttributes","attrs","dataAttrs","placement","referenceHidden","escaped","deepEqual","x","y","Object","keys","length","prop","uniqueByShape","arr","output","forEach","item","find","outputItem","push","deepPreserveProps","instanceProps","componentProps","_instanceProps$popper","_componentProps$poppe","assign","popperOptions","modifiers","concat","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useMutableBox","initialValue","useRef","updateClassName","box","action","classNames","split","name","classList","classNamePlugin","defaultValue","fn","instance","popper","firstElementChild","isDefaultRenderFn","_instance$props$rende","props","render","$$tippy","add","className","process","env","NODE_ENV","console","warn","join","remove","onCreate","onBeforeUpdate","onAfterUpdate","TippyGenerator","tippy","Tippy","_ref","children","content","visible","singleton","reference","_ref$disabled","disabled","_ref$ignoreAttributes","ignoreAttributes","__source","__self","restOfNativeProps","_objectWithoutPropertiesLoose","_excluded","isControlledMode","undefined","isSingletonMode","_useState","useState","mounted","setMounted","_useState2","setAttrs","_useState3","singletonContent","setSingletonContent","mutableBox","container","renders","nativeStateProp","trigger","hideOnClick","computedProps","plugins","data","onTrigger","event","_ref2","currentTarget","state","$$activeSingletonInstance","deps","type","element","disable","show","hook","destroy","cleanup","_instance$popperInsta","setProps","popperInstance","forceUpdate","enable","hide","_instance$props$poppe","filter","_ref3","enabled","phase","requires","_ref4","_state$modifiersData","hideData","modifiersData","isReferenceHidden","hasPopperEscaped","attributes","React","Fragment","cloneElement","createPortal","useSingletonGenerator","createSingleton","useSingleton","_temp","_ref$overrides","overrides","sourceData","error","map","child","isDestroyed","_sourceData$props","setInstances","useMemo","source","target","_mutableBox$instance","_mutableBox$instance2","isMounted","defaultProps","forwardRef","TippyWrapper"],"mappings":"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"}